function q4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var OL={exports:{}},tx={},FL={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g=Symbol.for("react.element"),eG=Symbol.for("react.portal"),tG=Symbol.for("react.fragment"),nG=Symbol.for("react.strict_mode"),rG=Symbol.for("react.profiler"),iG=Symbol.for("react.provider"),sG=Symbol.for("react.context"),oG=Symbol.for("react.forward_ref"),aG=Symbol.for("react.suspense"),lG=Symbol.for("react.memo"),cG=Symbol.for("react.lazy"),v2=Symbol.iterator;function uG(n){return n===null||typeof n!="object"?null:(n=v2&&n[v2]||n["@@iterator"],typeof n=="function"?n:null)}var NL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UL=Object.assign,kL={};function wh(n,e,t){this.props=n,this.context=e,this.refs=kL,this.updater=t||NL}wh.prototype.isReactComponent={};wh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};wh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function zL(){}zL.prototype=wh.prototype;function JM(n,e,t){this.props=n,this.context=e,this.refs=kL,this.updater=t||NL}var KM=JM.prototype=new zL;KM.constructor=JM;UL(KM,wh.prototype);KM.isPureReactComponent=!0;var y2=Array.isArray,HL=Object.prototype.hasOwnProperty,ZM={current:null},GL={key:!0,ref:!0,__self:!0,__source:!0};function VL(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)HL.call(e,r)&&!GL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_g,type:n,key:s,ref:o,props:i,_owner:ZM.current}}function fG(n,e){return{$$typeof:_g,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function QM(n){return typeof n=="object"&&n!==null&&n.$$typeof===_g}function dG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var _2=/\/+/g;function cS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dG(""+n.key):e.toString(36)}function xy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case _g:case eG:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+cS(o,0):r,y2(i)?(t="",n!=null&&(t=n.replace(_2,"$&/")+"/"),xy(i,e,t,"",function(c){return c})):i!=null&&(QM(i)&&(i=fG(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_2,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",y2(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+cS(s,a);o+=xy(s,e,t,l,i)}else if(l=uG(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+cS(s,a++),o+=xy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function k0(n,e,t){if(n==null)return n;var r=[],i=0;return xy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function hG(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Qi={current:null},Sy={transition:null},pG={ReactCurrentDispatcher:Qi,ReactCurrentBatchConfig:Sy,ReactCurrentOwner:ZM};an.Children={map:k0,forEach:function(n,e,t){k0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return k0(n,function(){e++}),e},toArray:function(n){return k0(n,function(e){return e})||[]},only:function(n){if(!QM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};an.Component=wh;an.Fragment=tG;an.Profiler=rG;an.PureComponent=JM;an.StrictMode=nG;an.Suspense=aG;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pG;an.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=UL({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ZM.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)HL.call(e,l)&&!GL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_g,type:n.type,key:i,ref:s,props:r,_owner:o}};an.createContext=function(n){return n={$$typeof:sG,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:iG,_context:n},n.Consumer=n};an.createElement=VL;an.createFactory=function(n){var e=VL.bind(null,n);return e.type=n,e};an.createRef=function(){return{current:null}};an.forwardRef=function(n){return{$$typeof:oG,render:n}};an.isValidElement=QM;an.lazy=function(n){return{$$typeof:cG,_payload:{_status:-1,_result:n},_init:hG}};an.memo=function(n,e){return{$$typeof:lG,type:n,compare:e===void 0?null:e}};an.startTransition=function(n){var e=Sy.transition;Sy.transition={};try{n()}finally{Sy.transition=e}};an.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};an.useCallback=function(n,e){return Qi.current.useCallback(n,e)};an.useContext=function(n){return Qi.current.useContext(n)};an.useDebugValue=function(){};an.useDeferredValue=function(n){return Qi.current.useDeferredValue(n)};an.useEffect=function(n,e){return Qi.current.useEffect(n,e)};an.useId=function(){return Qi.current.useId()};an.useImperativeHandle=function(n,e,t){return Qi.current.useImperativeHandle(n,e,t)};an.useInsertionEffect=function(n,e){return Qi.current.useInsertionEffect(n,e)};an.useLayoutEffect=function(n,e){return Qi.current.useLayoutEffect(n,e)};an.useMemo=function(n,e){return Qi.current.useMemo(n,e)};an.useReducer=function(n,e,t){return Qi.current.useReducer(n,e,t)};an.useRef=function(n){return Qi.current.useRef(n)};an.useState=function(n){return Qi.current.useState(n)};an.useSyncExternalStore=function(n,e,t){return Qi.current.useSyncExternalStore(n,e,t)};an.useTransition=function(){return Qi.current.useTransition()};an.version="18.2.0";FL.exports=an;var I=FL.exports;const ie=Bc(I),mG=q4({__proto__:null,default:ie},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gG=I,vG=Symbol.for("react.element"),yG=Symbol.for("react.fragment"),_G=Object.prototype.hasOwnProperty,xG=gG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SG={key:!0,ref:!0,__self:!0,__source:!0};function WL(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_G.call(e,r)&&!SG.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vG,type:n,key:s,ref:o,props:i,_owner:xG.current}}tx.Fragment=yG;tx.jsx=WL;tx.jsxs=WL;OL.exports=tx;var _n=OL.exports,lA={},$L={exports:{}},Vs={},XL={exports:{}},jL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,K){var U=V.length;V.push(K);e:for(;0<U;){var oe=U-1>>>1,fe=V[oe];if(0<i(fe,K))V[oe]=K,V[U]=fe,U=oe;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var K=V[0],U=V.pop();if(U!==K){V[0]=U;e:for(var oe=0,fe=V.length,ue=fe>>>1;oe<ue;){var pe=2*(oe+1)-1,be=V[pe],Ae=pe+1,Le=V[Ae];if(0>i(be,U))Ae<fe&&0>i(Le,be)?(V[oe]=Le,V[Ae]=U,oe=Ae):(V[oe]=be,V[pe]=U,oe=pe);else if(Ae<fe&&0>i(Le,U))V[oe]=Le,V[Ae]=U,oe=Ae;else break e}}return K}function i(V,K){var U=V.sortIndex-K.sortIndex;return U!==0?U:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=V)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function A(V){if(y=!1,S(V),!v)if(t(l)!==null)v=!0,ee(b);else{var K=t(c);K!==null&&te(A,K.startTime-V)}}function b(V,K){v=!1,y&&(y=!1,g(B),B=-1),m=!0;var U=p;try{for(S(K),d=t(l);d!==null&&(!(d.expirationTime>K)||V&&!N());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,p=d.priorityLevel;var fe=oe(d.expirationTime<=K);K=n.unstable_now(),typeof fe=="function"?d.callback=fe:d===t(l)&&r(l),S(K)}else r(l);d=t(l)}if(d!==null)var ue=!0;else{var pe=t(c);pe!==null&&te(A,pe.startTime-K),ue=!1}return ue}finally{d=null,p=U,m=!1}}var M=!1,C=null,B=-1,T=5,P=-1;function N(){return!(n.unstable_now()-P<T)}function z(){if(C!==null){var V=n.unstable_now();P=V;var K=!0;try{K=C(!0,V)}finally{K?q():(M=!1,C=null)}}else M=!1}var q;if(typeof x=="function")q=function(){x(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=z,q=function(){Y.postMessage(null)}}else q=function(){_(z,0)};function ee(V){C=V,M||(M=!0,q())}function te(V,K){B=_(function(){V(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(b))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var U=p;p=K;try{return V()}finally{p=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var U=p;p=V;try{return K()}finally{p=U}},n.unstable_scheduleCallback=function(V,K,U){var oe=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?oe+U:oe):U=oe,V){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=U+fe,V={id:u++,callback:K,priorityLevel:V,startTime:U,expirationTime:fe,sortIndex:-1},U>oe?(V.sortIndex=U,e(c,V),t(l)===null&&V===t(c)&&(y?(g(B),B=-1):y=!0,te(A,U-oe))):(V.sortIndex=fe,e(l,V),v||m||(v=!0,ee(b))),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var K=p;return function(){var U=p;p=K;try{return V.apply(this,arguments)}finally{p=U}}}})(jL);XL.exports=jL;var EG=XL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YL=I,zs=EG;function We(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JL=new Set,Cm={};function ff(n,e){Qd(n,e),Qd(n+"Capture",e)}function Qd(n,e){for(Cm[n]=e,n=0;n<e.length;n++)JL.add(e[n])}var ll=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cA=Object.prototype.hasOwnProperty,AG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x2={},S2={};function wG(n){return cA.call(S2,n)?!0:cA.call(x2,n)?!1:AG.test(n)?S2[n]=!0:(x2[n]=!0,!1)}function MG(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function bG(n,e,t,r){if(e===null||typeof e>"u"||MG(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ci[n]=new qi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ci[e]=new qi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ci[n]=new qi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ci[n]=new qi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ci[n]=new qi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ci[n]=new qi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ci[n]=new qi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ci[n]=new qi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ci[n]=new qi(n,5,!1,n.toLowerCase(),null,!1,!1)});var qM=/[\-:]([a-z])/g;function eb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qM,eb);ci[e]=new qi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qM,eb);ci[e]=new qi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qM,eb);ci[e]=new qi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ci[n]=new qi(n,1,!1,n.toLowerCase(),null,!1,!1)});ci.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ci[n]=new qi(n,1,!1,n.toLowerCase(),null,!0,!0)});function tb(n,e,t,r){var i=ci.hasOwnProperty(e)?ci[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bG(e,t,i,r)&&(t=null),r||i===null?wG(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var xl=YL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z0=Symbol.for("react.element"),hd=Symbol.for("react.portal"),pd=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),uA=Symbol.for("react.profiler"),KL=Symbol.for("react.provider"),ZL=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),fA=Symbol.for("react.suspense"),dA=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),$l=Symbol.for("react.lazy"),QL=Symbol.for("react.offscreen"),E2=Symbol.iterator;function up(n){return n===null||typeof n!="object"?null:(n=E2&&n[E2]||n["@@iterator"],typeof n=="function"?n:null)}var lr=Object.assign,uS;function Hp(n){if(uS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);uS=e&&e[1]||""}return`
`+uS+n}var fS=!1;function dS(n,e){if(!n||fS)return"";fS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{fS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Hp(n):""}function TG(n){switch(n.tag){case 5:return Hp(n.type);case 16:return Hp("Lazy");case 13:return Hp("Suspense");case 19:return Hp("SuspenseList");case 0:case 2:case 15:return n=dS(n.type,!1),n;case 11:return n=dS(n.type.render,!1),n;case 1:return n=dS(n.type,!0),n;default:return""}}function hA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pd:return"Fragment";case hd:return"Portal";case uA:return"Profiler";case nb:return"StrictMode";case fA:return"Suspense";case dA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ZL:return(n.displayName||"Context")+".Consumer";case KL:return(n._context.displayName||"Context")+".Provider";case rb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ib:return e=n.displayName||null,e!==null?e:hA(n.type)||"Memo";case $l:e=n._payload,n=n._init;try{return hA(n(e))}catch{}}return null}function CG(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hA(e);case 8:return e===nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RG(n){var e=qL(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function H0(n){n._valueTracker||(n._valueTracker=RG(n))}function eO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=qL(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Qy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pA(n,e){var t=e.checked;return lr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function A2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=yc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tO(n,e){e=e.checked,e!=null&&tb(n,"checked",e,!1)}function mA(n,e){tO(n,e);var t=yc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gA(n,e.type,t):e.hasOwnProperty("defaultValue")&&gA(n,e.type,yc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function w2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function gA(n,e,t){(e!=="number"||Qy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gp=Array.isArray;function Ld(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+yc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function vA(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(We(91));return lr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function M2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(We(92));if(Gp(t)){if(1<t.length)throw Error(We(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:yc(t)}}function nO(n,e){var t=yc(e.value),r=yc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function b2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function rO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yA(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?rO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var G0,iO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(G0=G0||document.createElement("div"),G0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=G0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Rm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var qp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PG=["Webkit","ms","Moz","O"];Object.keys(qp).forEach(function(n){PG.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),qp[e]=qp[n]})});function sO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||qp.hasOwnProperty(n)&&qp[n]?(""+e).trim():e+"px"}function oO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=sO(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var BG=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _A(n,e){if(e){if(BG[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(We(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(We(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(We(61))}if(e.style!=null&&typeof e.style!="object")throw Error(We(62))}}function xA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SA=null;function sb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var EA=null,Od=null,Fd=null;function T2(n){if(n=Eg(n)){if(typeof EA!="function")throw Error(We(280));var e=n.stateNode;e&&(e=ox(e),EA(n.stateNode,n.type,e))}}function aO(n){Od?Fd?Fd.push(n):Fd=[n]:Od=n}function lO(){if(Od){var n=Od,e=Fd;if(Fd=Od=null,T2(n),e)for(n=0;n<e.length;n++)T2(e[n])}}function cO(n,e){return n(e)}function uO(){}var hS=!1;function fO(n,e,t){if(hS)return n(e,t);hS=!0;try{return cO(n,e,t)}finally{hS=!1,(Od!==null||Fd!==null)&&(uO(),lO())}}function Pm(n,e){var t=n.stateNode;if(t===null)return null;var r=ox(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(We(231,e,typeof t));return t}var AA=!1;if(ll)try{var fp={};Object.defineProperty(fp,"passive",{get:function(){AA=!0}}),window.addEventListener("test",fp,fp),window.removeEventListener("test",fp,fp)}catch{AA=!1}function IG(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var em=!1,qy=null,e_=!1,wA=null,DG={onError:function(n){em=!0,qy=n}};function LG(n,e,t,r,i,s,o,a,l){em=!1,qy=null,IG.apply(DG,arguments)}function OG(n,e,t,r,i,s,o,a,l){if(LG.apply(this,arguments),em){if(em){var c=qy;em=!1,qy=null}else throw Error(We(198));e_||(e_=!0,wA=c)}}function df(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function dO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function C2(n){if(df(n)!==n)throw Error(We(188))}function FG(n){var e=n.alternate;if(!e){if(e=df(n),e===null)throw Error(We(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return C2(i),n;if(s===r)return C2(i),e;s=s.sibling}throw Error(We(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(We(189))}}if(t.alternate!==r)throw Error(We(190))}if(t.tag!==3)throw Error(We(188));return t.stateNode.current===t?n:e}function hO(n){return n=FG(n),n!==null?pO(n):null}function pO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=pO(n);if(e!==null)return e;n=n.sibling}return null}var mO=zs.unstable_scheduleCallback,R2=zs.unstable_cancelCallback,NG=zs.unstable_shouldYield,UG=zs.unstable_requestPaint,Ar=zs.unstable_now,kG=zs.unstable_getCurrentPriorityLevel,ob=zs.unstable_ImmediatePriority,gO=zs.unstable_UserBlockingPriority,t_=zs.unstable_NormalPriority,zG=zs.unstable_LowPriority,vO=zs.unstable_IdlePriority,nx=null,ha=null;function HG(n){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(nx,n,void 0,(n.current.flags&128)===128)}catch{}}var zo=Math.clz32?Math.clz32:WG,GG=Math.log,VG=Math.LN2;function WG(n){return n>>>=0,n===0?32:31-(GG(n)/VG|0)|0}var V0=64,W0=4194304;function Vp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function n_(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Vp(a):(s&=o,s!==0&&(r=Vp(s)))}else o=t&~i,o!==0?r=Vp(o):s!==0&&(r=Vp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-zo(e),i=1<<t,r|=n[t],e&=~i;return r}function $G(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XG(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-zo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=$G(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function MA(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function yO(){var n=V0;return V0<<=1,!(V0&4194240)&&(V0=64),n}function pS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-zo(e),n[e]=t}function jG(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-zo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ab(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-zo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var bn=0;function _O(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xO,lb,SO,EO,AO,bA=!1,$0=[],sc=null,oc=null,ac=null,Bm=new Map,Im=new Map,Yl=[],YG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P2(n,e){switch(n){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":Bm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Im.delete(e.pointerId)}}function dp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Eg(e),e!==null&&lb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function JG(n,e,t,r,i){switch(e){case"focusin":return sc=dp(sc,n,e,t,r,i),!0;case"dragenter":return oc=dp(oc,n,e,t,r,i),!0;case"mouseover":return ac=dp(ac,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Bm.set(s,dp(Bm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Im.set(s,dp(Im.get(s)||null,n,e,t,r,i)),!0}return!1}function wO(n){var e=yu(n.target);if(e!==null){var t=df(e);if(t!==null){if(e=t.tag,e===13){if(e=dO(t),e!==null){n.blockedOn=e,AO(n.priority,function(){SO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ey(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=TA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);SA=r,t.target.dispatchEvent(r),SA=null}else return e=Eg(t),e!==null&&lb(e),n.blockedOn=t,!1;e.shift()}return!0}function B2(n,e,t){Ey(n)&&t.delete(e)}function KG(){bA=!1,sc!==null&&Ey(sc)&&(sc=null),oc!==null&&Ey(oc)&&(oc=null),ac!==null&&Ey(ac)&&(ac=null),Bm.forEach(B2),Im.forEach(B2)}function hp(n,e){n.blockedOn===e&&(n.blockedOn=null,bA||(bA=!0,zs.unstable_scheduleCallback(zs.unstable_NormalPriority,KG)))}function Dm(n){function e(i){return hp(i,n)}if(0<$0.length){hp($0[0],n);for(var t=1;t<$0.length;t++){var r=$0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(sc!==null&&hp(sc,n),oc!==null&&hp(oc,n),ac!==null&&hp(ac,n),Bm.forEach(e),Im.forEach(e),t=0;t<Yl.length;t++)r=Yl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Yl.length&&(t=Yl[0],t.blockedOn===null);)wO(t),t.blockedOn===null&&Yl.shift()}var Nd=xl.ReactCurrentBatchConfig,r_=!0;function ZG(n,e,t,r){var i=bn,s=Nd.transition;Nd.transition=null;try{bn=1,cb(n,e,t,r)}finally{bn=i,Nd.transition=s}}function QG(n,e,t,r){var i=bn,s=Nd.transition;Nd.transition=null;try{bn=4,cb(n,e,t,r)}finally{bn=i,Nd.transition=s}}function cb(n,e,t,r){if(r_){var i=TA(n,e,t,r);if(i===null)wS(n,e,r,i_,t),P2(n,r);else if(JG(i,n,e,t,r))r.stopPropagation();else if(P2(n,r),e&4&&-1<YG.indexOf(n)){for(;i!==null;){var s=Eg(i);if(s!==null&&xO(s),s=TA(n,e,t,r),s===null&&wS(n,e,r,i_,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else wS(n,e,r,null,t)}}var i_=null;function TA(n,e,t,r){if(i_=null,n=sb(r),n=yu(n),n!==null)if(e=df(n),e===null)n=null;else if(t=e.tag,t===13){if(n=dO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return i_=n,null}function MO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kG()){case ob:return 1;case gO:return 4;case t_:case zG:return 16;case vO:return 536870912;default:return 16}default:return 16}}var Zl=null,ub=null,Ay=null;function bO(){if(Ay)return Ay;var n,e=ub,t=e.length,r,i="value"in Zl?Zl.value:Zl.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Ay=i.slice(n,1<r?1-r:void 0)}function wy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function X0(){return!0}function I2(){return!1}function Ws(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?X0:I2,this.isPropagationStopped=I2,this}return lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=X0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=X0)},persist:function(){},isPersistent:X0}),e}var Mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fb=Ws(Mh),Sg=lr({},Mh,{view:0,detail:0}),qG=Ws(Sg),mS,gS,pp,rx=lr({},Sg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:db,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pp&&(pp&&n.type==="mousemove"?(mS=n.screenX-pp.screenX,gS=n.screenY-pp.screenY):gS=mS=0,pp=n),mS)},movementY:function(n){return"movementY"in n?n.movementY:gS}}),D2=Ws(rx),e5=lr({},rx,{dataTransfer:0}),t5=Ws(e5),n5=lr({},Sg,{relatedTarget:0}),vS=Ws(n5),r5=lr({},Mh,{animationName:0,elapsedTime:0,pseudoElement:0}),i5=Ws(r5),s5=lr({},Mh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),o5=Ws(s5),a5=lr({},Mh,{data:0}),L2=Ws(a5),l5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=u5[n])?!!e[n]:!1}function db(){return f5}var d5=lr({},Sg,{key:function(n){if(n.key){var e=l5[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=wy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?c5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:db,charCode:function(n){return n.type==="keypress"?wy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),h5=Ws(d5),p5=lr({},rx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O2=Ws(p5),m5=lr({},Sg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:db}),g5=Ws(m5),v5=lr({},Mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),y5=Ws(v5),_5=lr({},rx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),x5=Ws(_5),S5=[9,13,27,32],hb=ll&&"CompositionEvent"in window,tm=null;ll&&"documentMode"in document&&(tm=document.documentMode);var E5=ll&&"TextEvent"in window&&!tm,TO=ll&&(!hb||tm&&8<tm&&11>=tm),F2=" ",N2=!1;function CO(n,e){switch(n){case"keyup":return S5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var md=!1;function A5(n,e){switch(n){case"compositionend":return RO(e);case"keypress":return e.which!==32?null:(N2=!0,F2);case"textInput":return n=e.data,n===F2&&N2?null:n;default:return null}}function w5(n,e){if(md)return n==="compositionend"||!hb&&CO(n,e)?(n=bO(),Ay=ub=Zl=null,md=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TO&&e.locale!=="ko"?null:e.data;default:return null}}var M5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!M5[n.type]:e==="textarea"}function PO(n,e,t,r){aO(r),e=s_(e,"onChange"),0<e.length&&(t=new fb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var nm=null,Lm=null;function b5(n){HO(n,0)}function ix(n){var e=yd(n);if(eO(e))return n}function T5(n,e){if(n==="change")return e}var BO=!1;if(ll){var yS;if(ll){var _S="oninput"in document;if(!_S){var k2=document.createElement("div");k2.setAttribute("oninput","return;"),_S=typeof k2.oninput=="function"}yS=_S}else yS=!1;BO=yS&&(!document.documentMode||9<document.documentMode)}function z2(){nm&&(nm.detachEvent("onpropertychange",IO),Lm=nm=null)}function IO(n){if(n.propertyName==="value"&&ix(Lm)){var e=[];PO(e,Lm,n,sb(n)),fO(b5,e)}}function C5(n,e,t){n==="focusin"?(z2(),nm=e,Lm=t,nm.attachEvent("onpropertychange",IO)):n==="focusout"&&z2()}function R5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ix(Lm)}function P5(n,e){if(n==="click")return ix(e)}function B5(n,e){if(n==="input"||n==="change")return ix(e)}function I5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Go=typeof Object.is=="function"?Object.is:I5;function Om(n,e){if(Go(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!cA.call(e,i)||!Go(n[i],e[i]))return!1}return!0}function H2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function G2(n,e){var t=H2(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=H2(t)}}function DO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?DO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function LO(){for(var n=window,e=Qy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Qy(n.document)}return e}function pb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function D5(n){var e=LO(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&DO(t.ownerDocument.documentElement,t)){if(r!==null&&pb(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=G2(t,s);var o=G2(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var L5=ll&&"documentMode"in document&&11>=document.documentMode,gd=null,CA=null,rm=null,RA=!1;function V2(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;RA||gd==null||gd!==Qy(r)||(r=gd,"selectionStart"in r&&pb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rm&&Om(rm,r)||(rm=r,r=s_(CA,"onSelect"),0<r.length&&(e=new fb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=gd)))}function j0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var vd={animationend:j0("Animation","AnimationEnd"),animationiteration:j0("Animation","AnimationIteration"),animationstart:j0("Animation","AnimationStart"),transitionend:j0("Transition","TransitionEnd")},xS={},OO={};ll&&(OO=document.createElement("div").style,"AnimationEvent"in window||(delete vd.animationend.animation,delete vd.animationiteration.animation,delete vd.animationstart.animation),"TransitionEvent"in window||delete vd.transitionend.transition);function sx(n){if(xS[n])return xS[n];if(!vd[n])return n;var e=vd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in OO)return xS[n]=e[t];return n}var FO=sx("animationend"),NO=sx("animationiteration"),UO=sx("animationstart"),kO=sx("transitionend"),zO=new Map,W2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(n,e){zO.set(n,e),ff(e,[n])}for(var SS=0;SS<W2.length;SS++){var ES=W2[SS],O5=ES.toLowerCase(),F5=ES[0].toUpperCase()+ES.slice(1);Ic(O5,"on"+F5)}Ic(FO,"onAnimationEnd");Ic(NO,"onAnimationIteration");Ic(UO,"onAnimationStart");Ic("dblclick","onDoubleClick");Ic("focusin","onFocus");Ic("focusout","onBlur");Ic(kO,"onTransitionEnd");Qd("onMouseEnter",["mouseout","mouseover"]);Qd("onMouseLeave",["mouseout","mouseover"]);Qd("onPointerEnter",["pointerout","pointerover"]);Qd("onPointerLeave",["pointerout","pointerover"]);ff("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ff("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ff("onBeforeInput",["compositionend","keypress","textInput","paste"]);ff("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ff("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ff("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wp));function $2(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,OG(r,e,void 0,n),n.currentTarget=null}function HO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$2(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$2(i,a,c),s=l}}}if(e_)throw n=wA,e_=!1,wA=null,n}function kn(n,e){var t=e[LA];t===void 0&&(t=e[LA]=new Set);var r=n+"__bubble";t.has(r)||(GO(e,n,2,!1),t.add(r))}function AS(n,e,t){var r=0;e&&(r|=4),GO(t,n,r,e)}var Y0="_reactListening"+Math.random().toString(36).slice(2);function Fm(n){if(!n[Y0]){n[Y0]=!0,JL.forEach(function(t){t!=="selectionchange"&&(N5.has(t)||AS(t,!1,n),AS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Y0]||(e[Y0]=!0,AS("selectionchange",!1,e))}}function GO(n,e,t,r){switch(MO(e)){case 1:var i=ZG;break;case 4:i=QG;break;default:i=cb}t=i.bind(null,e,t,n),i=void 0,!AA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function wS(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=yu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fO(function(){var c=s,u=sb(t),d=[];e:{var p=zO.get(n);if(p!==void 0){var m=fb,v=n;switch(n){case"keypress":if(wy(t)===0)break e;case"keydown":case"keyup":m=h5;break;case"focusin":v="focus",m=vS;break;case"focusout":v="blur",m=vS;break;case"beforeblur":case"afterblur":m=vS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=t5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=g5;break;case FO:case NO:case UO:m=i5;break;case kO:m=y5;break;case"scroll":m=qG;break;case"wheel":m=x5;break;case"copy":case"cut":case"paste":m=o5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O2}var y=(e&4)!==0,_=!y&&n==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var x=c,S;x!==null;){S=x;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,g!==null&&(A=Pm(x,g),A!=null&&y.push(Nm(x,A,S)))),_)break;x=x.return}0<y.length&&(p=new m(p,v,null,t,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==SA&&(v=t.relatedTarget||t.fromElement)&&(yu(v)||v[cl]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?yu(v):null,v!==null&&(_=df(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=D2,A="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(y=O2,A="onPointerLeave",g="onPointerEnter",x="pointer"),_=m==null?p:yd(m),S=v==null?p:yd(v),p=new y(A,x+"leave",m,t,u),p.target=_,p.relatedTarget=S,A=null,yu(u)===c&&(y=new y(g,x+"enter",v,t,u),y.target=S,y.relatedTarget=_,A=y),_=A,m&&v)t:{for(y=m,g=v,x=0,S=y;S;S=If(S))x++;for(S=0,A=g;A;A=If(A))S++;for(;0<x-S;)y=If(y),x--;for(;0<S-x;)g=If(g),S--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=If(y),g=If(g)}y=null}else y=null;m!==null&&X2(d,p,m,y,!1),v!==null&&_!==null&&X2(d,_,v,y,!0)}}e:{if(p=c?yd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var b=T5;else if(U2(p))if(BO)b=B5;else{b=R5;var M=C5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=P5);if(b&&(b=b(n,c))){PO(d,b,t,u);break e}M&&M(n,p,c),n==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&gA(p,"number",p.value)}switch(M=c?yd(c):window,n){case"focusin":(U2(M)||M.contentEditable==="true")&&(gd=M,CA=c,rm=null);break;case"focusout":rm=CA=gd=null;break;case"mousedown":RA=!0;break;case"contextmenu":case"mouseup":case"dragend":RA=!1,V2(d,t,u);break;case"selectionchange":if(L5)break;case"keydown":case"keyup":V2(d,t,u)}var C;if(hb)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else md?CO(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(TO&&t.locale!=="ko"&&(md||B!=="onCompositionStart"?B==="onCompositionEnd"&&md&&(C=bO()):(Zl=u,ub="value"in Zl?Zl.value:Zl.textContent,md=!0)),M=s_(c,B),0<M.length&&(B=new L2(B,n,null,t,u),d.push({event:B,listeners:M}),C?B.data=C:(C=RO(t),C!==null&&(B.data=C)))),(C=E5?A5(n,t):w5(n,t))&&(c=s_(c,"onBeforeInput"),0<c.length&&(u=new L2("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=C))}HO(d,e)})}function Nm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function s_(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pm(n,t),s!=null&&r.unshift(Nm(n,s,i)),s=Pm(n,e),s!=null&&r.push(Nm(n,s,i))),n=n.return}return r}function If(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function X2(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Pm(t,s),l!=null&&o.unshift(Nm(t,l,a))):i||(l=Pm(t,s),l!=null&&o.push(Nm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var U5=/\r\n?/g,k5=/\u0000|\uFFFD/g;function j2(n){return(typeof n=="string"?n:""+n).replace(U5,`
`).replace(k5,"")}function J0(n,e,t){if(e=j2(e),j2(n)!==e&&t)throw Error(We(425))}function o_(){}var PA=null,BA=null;function IA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DA=typeof setTimeout=="function"?setTimeout:void 0,z5=typeof clearTimeout=="function"?clearTimeout:void 0,Y2=typeof Promise=="function"?Promise:void 0,H5=typeof queueMicrotask=="function"?queueMicrotask:typeof Y2<"u"?function(n){return Y2.resolve(null).then(n).catch(G5)}:DA;function G5(n){setTimeout(function(){throw n})}function MS(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Dm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Dm(e)}function lc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function J2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var bh=Math.random().toString(36).slice(2),aa="__reactFiber$"+bh,Um="__reactProps$"+bh,cl="__reactContainer$"+bh,LA="__reactEvents$"+bh,V5="__reactListeners$"+bh,W5="__reactHandles$"+bh;function yu(n){var e=n[aa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[cl]||t[aa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=J2(n);n!==null;){if(t=n[aa])return t;n=J2(n)}return e}n=t,t=n.parentNode}return null}function Eg(n){return n=n[aa]||n[cl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function yd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(We(33))}function ox(n){return n[Um]||null}var OA=[],_d=-1;function Dc(n){return{current:n}}function Vn(n){0>_d||(n.current=OA[_d],OA[_d]=null,_d--)}function Fn(n,e){_d++,OA[_d]=n.current,n.current=e}var _c={},Ri=Dc(_c),fs=Dc(!1),$u=_c;function qd(n,e){var t=n.type.contextTypes;if(!t)return _c;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ds(n){return n=n.childContextTypes,n!=null}function a_(){Vn(fs),Vn(Ri)}function K2(n,e,t){if(Ri.current!==_c)throw Error(We(168));Fn(Ri,e),Fn(fs,t)}function VO(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(We(108,CG(n)||"Unknown",i));return lr({},t,r)}function l_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_c,$u=Ri.current,Fn(Ri,n),Fn(fs,fs.current),!0}function Z2(n,e,t){var r=n.stateNode;if(!r)throw Error(We(169));t?(n=VO(n,e,$u),r.__reactInternalMemoizedMergedChildContext=n,Vn(fs),Vn(Ri),Fn(Ri,n)):Vn(fs),Fn(fs,t)}var Xa=null,ax=!1,bS=!1;function WO(n){Xa===null?Xa=[n]:Xa.push(n)}function $5(n){ax=!0,WO(n)}function Lc(){if(!bS&&Xa!==null){bS=!0;var n=0,e=bn;try{var t=Xa;for(bn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Xa=null,ax=!1}catch(i){throw Xa!==null&&(Xa=Xa.slice(n+1)),mO(ob,Lc),i}finally{bn=e,bS=!1}}return null}var xd=[],Sd=0,c_=null,u_=0,ao=[],lo=0,Xu=null,qa=1,el="";function lu(n,e){xd[Sd++]=u_,xd[Sd++]=c_,c_=n,u_=e}function $O(n,e,t){ao[lo++]=qa,ao[lo++]=el,ao[lo++]=Xu,Xu=n;var r=qa;n=el;var i=32-zo(r)-1;r&=~(1<<i),t+=1;var s=32-zo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qa=1<<32-zo(e)+i|t<<i|r,el=s+n}else qa=1<<s|t<<i|r,el=n}function mb(n){n.return!==null&&(lu(n,1),$O(n,1,0))}function gb(n){for(;n===c_;)c_=xd[--Sd],xd[Sd]=null,u_=xd[--Sd],xd[Sd]=null;for(;n===Xu;)Xu=ao[--lo],ao[lo]=null,el=ao[--lo],ao[lo]=null,qa=ao[--lo],ao[lo]=null}var Fs=null,Ds=null,jn=!1,Fo=null;function XO(n,e){var t=po(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Q2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Fs=n,Ds=lc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Fs=n,Ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xu!==null?{id:qa,overflow:el}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=po(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Fs=n,Ds=null,!0):!1;default:return!1}}function FA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function NA(n){if(jn){var e=Ds;if(e){var t=e;if(!Q2(n,e)){if(FA(n))throw Error(We(418));e=lc(t.nextSibling);var r=Fs;e&&Q2(n,e)?XO(r,t):(n.flags=n.flags&-4097|2,jn=!1,Fs=n)}}else{if(FA(n))throw Error(We(418));n.flags=n.flags&-4097|2,jn=!1,Fs=n}}}function q2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Fs=n}function K0(n){if(n!==Fs)return!1;if(!jn)return q2(n),jn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!IA(n.type,n.memoizedProps)),e&&(e=Ds)){if(FA(n))throw jO(),Error(We(418));for(;e;)XO(n,e),e=lc(e.nextSibling)}if(q2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(We(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ds=lc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ds=null}}else Ds=Fs?lc(n.stateNode.nextSibling):null;return!0}function jO(){for(var n=Ds;n;)n=lc(n.nextSibling)}function eh(){Ds=Fs=null,jn=!1}function vb(n){Fo===null?Fo=[n]:Fo.push(n)}var X5=xl.ReactCurrentBatchConfig;function Do(n,e){if(n&&n.defaultProps){e=lr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var f_=Dc(null),d_=null,Ed=null,yb=null;function _b(){yb=Ed=d_=null}function xb(n){var e=f_.current;Vn(f_),n._currentValue=e}function UA(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ud(n,e){d_=n,yb=Ed=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cs=!0),n.firstContext=null)}function xo(n){var e=n._currentValue;if(yb!==n)if(n={context:n,memoizedValue:e,next:null},Ed===null){if(d_===null)throw Error(We(308));Ed=n,d_.dependencies={lanes:0,firstContext:n}}else Ed=Ed.next=n;return e}var _u=null;function Sb(n){_u===null?_u=[n]:_u.push(n)}function YO(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Sb(e)):(t.next=i.next,i.next=t),e.interleaved=t,ul(n,r)}function ul(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Xl=!1;function Eb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function rl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function cc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,mn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ul(n,t)}return i=r.interleaved,i===null?(e.next=e,Sb(r)):(e.next=i.next,i.next=e),r.interleaved=e,ul(n,t)}function My(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ab(n,t)}}function eP(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function h_(n,e,t,r){var i=n.updateQueue;Xl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,y=a;switch(p=e,m=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=lr({},d,p);break e;case 2:Xl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yu|=o,n.lanes=o,n.memoizedState=d}}function tP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(We(191,i));i.call(r)}}}var KO=new YL.Component().refs;function kA(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:lr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var lx={isMounted:function(n){return(n=n._reactInternals)?df(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Zi(),i=fc(n),s=rl(r,i);s.payload=e,t!=null&&(s.callback=t),e=cc(n,s,i),e!==null&&(Ho(e,n,i,r),My(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Zi(),i=fc(n),s=rl(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=cc(n,s,i),e!==null&&(Ho(e,n,i,r),My(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Zi(),r=fc(n),i=rl(t,r);i.tag=2,e!=null&&(i.callback=e),e=cc(n,i,r),e!==null&&(Ho(e,n,r,t),My(e,n,r))}};function nP(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Om(t,r)||!Om(i,s):!0}function ZO(n,e,t){var r=!1,i=_c,s=e.contextType;return typeof s=="object"&&s!==null?s=xo(s):(i=ds(e)?$u:Ri.current,r=e.contextTypes,s=(r=r!=null)?qd(n,i):_c),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lx,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function rP(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&lx.enqueueReplaceState(e,e.state,null)}function zA(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=KO,Eb(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xo(s):(s=ds(e)?$u:Ri.current,i.context=qd(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kA(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lx.enqueueReplaceState(i,i.state,null),h_(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function mp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(We(309));var r=t.stateNode}if(!r)throw Error(We(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===KO&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(We(284));if(!t._owner)throw Error(We(290,n))}return n}function Z0(n,e){throw n=Object.prototype.toString.call(e),Error(We(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iP(n){var e=n._init;return e(n._payload)}function QO(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=dc(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,A){return x===null||x.tag!==6?(x=DS(S,g.mode,A),x.return=g,x):(x=i(x,S),x.return=g,x)}function l(g,x,S,A){var b=S.type;return b===pd?u(g,x,S.props.children,A,S.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$l&&iP(b)===x.type)?(A=i(x,S.props),A.ref=mp(g,x,S),A.return=g,A):(A=By(S.type,S.key,S.props,null,g.mode,A),A.ref=mp(g,x,S),A.return=g,A)}function c(g,x,S,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=LS(S,g.mode,A),x.return=g,x):(x=i(x,S.children||[]),x.return=g,x)}function u(g,x,S,A,b){return x===null||x.tag!==7?(x=Pu(S,g.mode,A,b),x.return=g,x):(x=i(x,S),x.return=g,x)}function d(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=DS(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case z0:return S=By(x.type,x.key,x.props,null,g.mode,S),S.ref=mp(g,null,x),S.return=g,S;case hd:return x=LS(x,g.mode,S),x.return=g,x;case $l:var A=x._init;return d(g,A(x._payload),S)}if(Gp(x)||up(x))return x=Pu(x,g.mode,S,null),x.return=g,x;Z0(g,x)}return null}function p(g,x,S,A){var b=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:a(g,x,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case z0:return S.key===b?l(g,x,S,A):null;case hd:return S.key===b?c(g,x,S,A):null;case $l:return b=S._init,p(g,x,b(S._payload),A)}if(Gp(S)||up(S))return b!==null?null:u(g,x,S,A,null);Z0(g,S)}return null}function m(g,x,S,A,b){if(typeof A=="string"&&A!==""||typeof A=="number")return g=g.get(S)||null,a(x,g,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case z0:return g=g.get(A.key===null?S:A.key)||null,l(x,g,A,b);case hd:return g=g.get(A.key===null?S:A.key)||null,c(x,g,A,b);case $l:var M=A._init;return m(g,x,S,M(A._payload),b)}if(Gp(A)||up(A))return g=g.get(S)||null,u(x,g,A,b,null);Z0(x,A)}return null}function v(g,x,S,A){for(var b=null,M=null,C=x,B=x=0,T=null;C!==null&&B<S.length;B++){C.index>B?(T=C,C=null):T=C.sibling;var P=p(g,C,S[B],A);if(P===null){C===null&&(C=T);break}n&&C&&P.alternate===null&&e(g,C),x=s(P,x,B),M===null?b=P:M.sibling=P,M=P,C=T}if(B===S.length)return t(g,C),jn&&lu(g,B),b;if(C===null){for(;B<S.length;B++)C=d(g,S[B],A),C!==null&&(x=s(C,x,B),M===null?b=C:M.sibling=C,M=C);return jn&&lu(g,B),b}for(C=r(g,C);B<S.length;B++)T=m(C,g,B,S[B],A),T!==null&&(n&&T.alternate!==null&&C.delete(T.key===null?B:T.key),x=s(T,x,B),M===null?b=T:M.sibling=T,M=T);return n&&C.forEach(function(N){return e(g,N)}),jn&&lu(g,B),b}function y(g,x,S,A){var b=up(S);if(typeof b!="function")throw Error(We(150));if(S=b.call(S),S==null)throw Error(We(151));for(var M=b=null,C=x,B=x=0,T=null,P=S.next();C!==null&&!P.done;B++,P=S.next()){C.index>B?(T=C,C=null):T=C.sibling;var N=p(g,C,P.value,A);if(N===null){C===null&&(C=T);break}n&&C&&N.alternate===null&&e(g,C),x=s(N,x,B),M===null?b=N:M.sibling=N,M=N,C=T}if(P.done)return t(g,C),jn&&lu(g,B),b;if(C===null){for(;!P.done;B++,P=S.next())P=d(g,P.value,A),P!==null&&(x=s(P,x,B),M===null?b=P:M.sibling=P,M=P);return jn&&lu(g,B),b}for(C=r(g,C);!P.done;B++,P=S.next())P=m(C,g,B,P.value,A),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?B:P.key),x=s(P,x,B),M===null?b=P:M.sibling=P,M=P);return n&&C.forEach(function(z){return e(g,z)}),jn&&lu(g,B),b}function _(g,x,S,A){if(typeof S=="object"&&S!==null&&S.type===pd&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case z0:e:{for(var b=S.key,M=x;M!==null;){if(M.key===b){if(b=S.type,b===pd){if(M.tag===7){t(g,M.sibling),x=i(M,S.props.children),x.return=g,g=x;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$l&&iP(b)===M.type){t(g,M.sibling),x=i(M,S.props),x.ref=mp(g,M,S),x.return=g,g=x;break e}t(g,M);break}else e(g,M);M=M.sibling}S.type===pd?(x=Pu(S.props.children,g.mode,A,S.key),x.return=g,g=x):(A=By(S.type,S.key,S.props,null,g.mode,A),A.ref=mp(g,x,S),A.return=g,g=A)}return o(g);case hd:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=i(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=LS(S,g.mode,A),x.return=g,g=x}return o(g);case $l:return M=S._init,_(g,x,M(S._payload),A)}if(Gp(S))return v(g,x,S,A);if(up(S))return y(g,x,S,A);Z0(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=i(x,S),x.return=g,g=x):(t(g,x),x=DS(S,g.mode,A),x.return=g,g=x),o(g)):t(g,x)}return _}var th=QO(!0),qO=QO(!1),Ag={},pa=Dc(Ag),km=Dc(Ag),zm=Dc(Ag);function xu(n){if(n===Ag)throw Error(We(174));return n}function Ab(n,e){switch(Fn(zm,e),Fn(km,n),Fn(pa,Ag),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yA(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yA(e,n)}Vn(pa),Fn(pa,e)}function nh(){Vn(pa),Vn(km),Vn(zm)}function e3(n){xu(zm.current);var e=xu(pa.current),t=yA(e,n.type);e!==t&&(Fn(km,n),Fn(pa,t))}function wb(n){km.current===n&&(Vn(pa),Vn(km))}var nr=Dc(0);function p_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var TS=[];function Mb(){for(var n=0;n<TS.length;n++)TS[n]._workInProgressVersionPrimary=null;TS.length=0}var by=xl.ReactCurrentDispatcher,CS=xl.ReactCurrentBatchConfig,ju=0,ar=null,Dr=null,jr=null,m_=!1,im=!1,Hm=0,j5=0;function pi(){throw Error(We(321))}function bb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Go(n[t],e[t]))return!1;return!0}function Tb(n,e,t,r,i,s){if(ju=s,ar=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,by.current=n===null||n.memoizedState===null?Z5:Q5,n=t(r,i),im){s=0;do{if(im=!1,Hm=0,25<=s)throw Error(We(301));s+=1,jr=Dr=null,e.updateQueue=null,by.current=q5,n=t(r,i)}while(im)}if(by.current=g_,e=Dr!==null&&Dr.next!==null,ju=0,jr=Dr=ar=null,m_=!1,e)throw Error(We(300));return n}function Cb(){var n=Hm!==0;return Hm=0,n}function sa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?ar.memoizedState=jr=n:jr=jr.next=n,jr}function So(){if(Dr===null){var n=ar.alternate;n=n!==null?n.memoizedState:null}else n=Dr.next;var e=jr===null?ar.memoizedState:jr.next;if(e!==null)jr=e,Dr=n;else{if(n===null)throw Error(We(310));Dr=n,n={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},jr===null?ar.memoizedState=jr=n:jr=jr.next=n}return jr}function Gm(n,e){return typeof e=="function"?e(n):e}function RS(n){var e=So(),t=e.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=n;var r=Dr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ju&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ar.lanes|=u,Yu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Go(r,e.memoizedState)||(cs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,ar.lanes|=s,Yu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function PS(n){var e=So(),t=e.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Go(s,e.memoizedState)||(cs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function t3(){}function n3(n,e){var t=ar,r=So(),i=e(),s=!Go(r.memoizedState,i);if(s&&(r.memoizedState=i,cs=!0),r=r.queue,Rb(s3.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||jr!==null&&jr.memoizedState.tag&1){if(t.flags|=2048,Vm(9,i3.bind(null,t,r,i,e),void 0,null),Qr===null)throw Error(We(349));ju&30||r3(t,e,i)}return i}function r3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ar.updateQueue,e===null?(e={lastEffect:null,stores:null},ar.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function i3(n,e,t,r){e.value=t,e.getSnapshot=r,o3(e)&&a3(n)}function s3(n,e,t){return t(function(){o3(e)&&a3(n)})}function o3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Go(n,t)}catch{return!0}}function a3(n){var e=ul(n,1);e!==null&&Ho(e,n,1,-1)}function sP(n){var e=sa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:n},e.queue=n,n=n.dispatch=K5.bind(null,ar,n),[e.memoizedState,n]}function Vm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=ar.updateQueue,e===null?(e={lastEffect:null,stores:null},ar.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function l3(){return So().memoizedState}function Ty(n,e,t,r){var i=sa();ar.flags|=n,i.memoizedState=Vm(1|e,t,void 0,r===void 0?null:r)}function cx(n,e,t,r){var i=So();r=r===void 0?null:r;var s=void 0;if(Dr!==null){var o=Dr.memoizedState;if(s=o.destroy,r!==null&&bb(r,o.deps)){i.memoizedState=Vm(e,t,s,r);return}}ar.flags|=n,i.memoizedState=Vm(1|e,t,s,r)}function oP(n,e){return Ty(8390656,8,n,e)}function Rb(n,e){return cx(2048,8,n,e)}function c3(n,e){return cx(4,2,n,e)}function u3(n,e){return cx(4,4,n,e)}function f3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function d3(n,e,t){return t=t!=null?t.concat([n]):null,cx(4,4,f3.bind(null,e,n),t)}function Pb(){}function h3(n,e){var t=So();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function p3(n,e){var t=So();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&bb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function m3(n,e,t){return ju&21?(Go(t,e)||(t=yO(),ar.lanes|=t,Yu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cs=!0),n.memoizedState=t)}function Y5(n,e){var t=bn;bn=t!==0&&4>t?t:4,n(!0);var r=CS.transition;CS.transition={};try{n(!1),e()}finally{bn=t,CS.transition=r}}function g3(){return So().memoizedState}function J5(n,e,t){var r=fc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},v3(n))y3(e,t);else if(t=YO(n,e,t,r),t!==null){var i=Zi();Ho(t,n,r,i),_3(t,e,r)}}function K5(n,e,t){var r=fc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(v3(n))y3(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Go(a,o)){var l=e.interleaved;l===null?(i.next=i,Sb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=YO(n,e,i,r),t!==null&&(i=Zi(),Ho(t,n,r,i),_3(t,e,r))}}function v3(n){var e=n.alternate;return n===ar||e!==null&&e===ar}function y3(n,e){im=m_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function _3(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ab(n,t)}}var g_={readContext:xo,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Z5={readContext:xo,useCallback:function(n,e){return sa().memoizedState=[n,e===void 0?null:e],n},useContext:xo,useEffect:oP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ty(4194308,4,f3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ty(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ty(4,2,n,e)},useMemo:function(n,e){var t=sa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=sa();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=J5.bind(null,ar,n),[r.memoizedState,n]},useRef:function(n){var e=sa();return n={current:n},e.memoizedState=n},useState:sP,useDebugValue:Pb,useDeferredValue:function(n){return sa().memoizedState=n},useTransition:function(){var n=sP(!1),e=n[0];return n=Y5.bind(null,n[1]),sa().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=ar,i=sa();if(jn){if(t===void 0)throw Error(We(407));t=t()}else{if(t=e(),Qr===null)throw Error(We(349));ju&30||r3(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,oP(s3.bind(null,r,s,n),[n]),r.flags|=2048,Vm(9,i3.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=sa(),e=Qr.identifierPrefix;if(jn){var t=el,r=qa;t=(r&~(1<<32-zo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Hm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=j5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Q5={readContext:xo,useCallback:h3,useContext:xo,useEffect:Rb,useImperativeHandle:d3,useInsertionEffect:c3,useLayoutEffect:u3,useMemo:p3,useReducer:RS,useRef:l3,useState:function(){return RS(Gm)},useDebugValue:Pb,useDeferredValue:function(n){var e=So();return m3(e,Dr.memoizedState,n)},useTransition:function(){var n=RS(Gm)[0],e=So().memoizedState;return[n,e]},useMutableSource:t3,useSyncExternalStore:n3,useId:g3,unstable_isNewReconciler:!1},q5={readContext:xo,useCallback:h3,useContext:xo,useEffect:Rb,useImperativeHandle:d3,useInsertionEffect:c3,useLayoutEffect:u3,useMemo:p3,useReducer:PS,useRef:l3,useState:function(){return PS(Gm)},useDebugValue:Pb,useDeferredValue:function(n){var e=So();return Dr===null?e.memoizedState=n:m3(e,Dr.memoizedState,n)},useTransition:function(){var n=PS(Gm)[0],e=So().memoizedState;return[n,e]},useMutableSource:t3,useSyncExternalStore:n3,useId:g3,unstable_isNewReconciler:!1};function rh(n,e){try{var t="",r=e;do t+=TG(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function BS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function HA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var e8=typeof WeakMap=="function"?WeakMap:Map;function x3(n,e,t){t=rl(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){y_||(y_=!0,ZA=r),HA(n,e)},t}function S3(n,e,t){t=rl(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){HA(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){HA(n,e),typeof r!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function aP(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new e8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=p8.bind(null,n,e,t),e.then(n,n))}function lP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function cP(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=rl(-1,1),e.tag=2,cc(t,e,1))),t.lanes|=1),n)}var t8=xl.ReactCurrentOwner,cs=!1;function Gi(n,e,t,r){e.child=n===null?qO(e,null,t,r):th(e,n.child,t,r)}function uP(n,e,t,r,i){t=t.render;var s=e.ref;return Ud(e,i),r=Tb(n,e,t,r,s,i),t=Cb(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,fl(n,e,i)):(jn&&t&&mb(e),e.flags|=1,Gi(n,e,r,i),e.child)}function fP(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Ub(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,E3(n,e,s,r,i)):(n=By(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Om,t(o,r)&&n.ref===e.ref)return fl(n,e,i)}return e.flags|=1,n=dc(s,r),n.ref=e.ref,n.return=e,e.child=n}function E3(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Om(s,r)&&n.ref===e.ref)if(cs=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(cs=!0);else return e.lanes=n.lanes,fl(n,e,i)}return GA(n,e,t,r,i)}function A3(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(wd,bs),bs|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Fn(wd,bs),bs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Fn(wd,bs),bs|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Fn(wd,bs),bs|=r;return Gi(n,e,i,t),e.child}function w3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function GA(n,e,t,r,i){var s=ds(t)?$u:Ri.current;return s=qd(e,s),Ud(e,i),t=Tb(n,e,t,r,s,i),r=Cb(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,fl(n,e,i)):(jn&&r&&mb(e),e.flags|=1,Gi(n,e,t,i),e.child)}function dP(n,e,t,r,i){if(ds(t)){var s=!0;l_(e)}else s=!1;if(Ud(e,i),e.stateNode===null)Cy(n,e),ZO(e,t,r),zA(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=xo(c):(c=ds(t)?$u:Ri.current,c=qd(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rP(e,o,r,c),Xl=!1;var p=e.memoizedState;o.state=p,h_(e,r,o,i),l=e.memoizedState,a!==r||p!==l||fs.current||Xl?(typeof u=="function"&&(kA(e,t,u,r),l=e.memoizedState),(a=Xl||nP(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JO(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Do(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=xo(l):(l=ds(t)?$u:Ri.current,l=qd(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&rP(e,o,r,l),Xl=!1,p=e.memoizedState,o.state=p,h_(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||fs.current||Xl?(typeof m=="function"&&(kA(e,t,m,r),v=e.memoizedState),(c=Xl||nP(e,t,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return VA(n,e,t,r,s,i)}function VA(n,e,t,r,i,s){w3(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Z2(e,t,!1),fl(n,e,s);r=e.stateNode,t8.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=th(e,n.child,null,s),e.child=th(e,null,a,s)):Gi(n,e,a,s),e.memoizedState=r.state,i&&Z2(e,t,!0),e.child}function M3(n){var e=n.stateNode;e.pendingContext?K2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&K2(n,e.context,!1),Ab(n,e.containerInfo)}function hP(n,e,t,r,i){return eh(),vb(i),e.flags|=256,Gi(n,e,t,r),e.child}var WA={dehydrated:null,treeContext:null,retryLane:0};function $A(n){return{baseLanes:n,cachePool:null,transitions:null}}function b3(n,e,t){var r=e.pendingProps,i=nr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Fn(nr,i&1),n===null)return NA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dx(o,r,0,null),n=Pu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=$A(t),e.memoizedState=WA,n):Bb(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return n8(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=dc(a,s):(s=Pu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?$A(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=WA,r}return s=n.child,n=s.sibling,r=dc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Bb(n,e){return e=dx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Q0(n,e,t,r){return r!==null&&vb(r),th(e,n.child,null,t),n=Bb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function n8(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=BS(Error(We(422))),Q0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dx({mode:"visible",children:r.children},i,0,null),s=Pu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&th(e,n.child,null,o),e.child.memoizedState=$A(o),e.memoizedState=WA,s);if(!(e.mode&1))return Q0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(We(419)),r=BS(s,r,void 0),Q0(n,e,o,r)}if(a=(o&n.childLanes)!==0,cs||a){if(r=Qr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ul(n,i),Ho(r,n,i,-1))}return Nb(),r=BS(Error(We(421))),Q0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=m8.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Ds=lc(i.nextSibling),Fs=e,jn=!0,Fo=null,n!==null&&(ao[lo++]=qa,ao[lo++]=el,ao[lo++]=Xu,qa=n.id,el=n.overflow,Xu=e),e=Bb(e,r.children),e.flags|=4096,e)}function pP(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),UA(n.return,e,t)}function IS(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function T3(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gi(n,e,r.children,t),r=nr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pP(n,t,e);else if(n.tag===19)pP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Fn(nr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&p_(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),IS(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&p_(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}IS(e,!0,t,null,s);break;case"together":IS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function fl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Yu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(We(153));if(e.child!==null){for(n=e.child,t=dc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=dc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function r8(n,e,t){switch(e.tag){case 3:M3(e),eh();break;case 5:e3(e);break;case 1:ds(e.type)&&l_(e);break;case 4:Ab(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fn(f_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fn(nr,nr.current&1),e.flags|=128,null):t&e.child.childLanes?b3(n,e,t):(Fn(nr,nr.current&1),n=fl(n,e,t),n!==null?n.sibling:null);Fn(nr,nr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return T3(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fn(nr,nr.current),r)break;return null;case 22:case 23:return e.lanes=0,A3(n,e,t)}return fl(n,e,t)}var C3,XA,R3,P3;C3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};XA=function(){};R3=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,xu(pa.current);var s=null;switch(t){case"input":i=pA(n,i),r=pA(n,r),s=[];break;case"select":i=lr({},i,{value:void 0}),r=lr({},r,{value:void 0}),s=[];break;case"textarea":i=vA(n,i),r=vA(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=o_)}_A(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};P3=function(n,e,t,r){t!==r&&(e.flags|=4)};function gp(n,e){if(!jn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function mi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function i8(n,e,t){var r=e.pendingProps;switch(gb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(e),null;case 1:return ds(e.type)&&a_(),mi(e),null;case 3:return r=e.stateNode,nh(),Vn(fs),Vn(Ri),Mb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(K0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fo!==null&&(ew(Fo),Fo=null))),XA(n,e),mi(e),null;case 5:wb(e);var i=xu(zm.current);if(t=e.type,n!==null&&e.stateNode!=null)R3(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(We(166));return mi(e),null}if(n=xu(pa.current),K0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[aa]=e,r[Um]=s,n=(e.mode&1)!==0,t){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(i=0;i<Wp.length;i++)kn(Wp[i],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":A2(r,s),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},kn("invalid",r);break;case"textarea":M2(r,s),kn("invalid",r)}_A(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&J0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&J0(r.textContent,a,n),i=["children",""+a]):Cm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kn("scroll",r)}switch(t){case"input":H0(r),w2(r,s,!0);break;case"textarea":H0(r),b2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=o_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=rO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[aa]=e,n[Um]=r,C3(n,e,!1,!1),e.stateNode=n;e:{switch(o=xA(t,r),t){case"dialog":kn("cancel",n),kn("close",n),i=r;break;case"iframe":case"object":case"embed":kn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Wp.length;i++)kn(Wp[i],n);i=r;break;case"source":kn("error",n),i=r;break;case"img":case"image":case"link":kn("error",n),kn("load",n),i=r;break;case"details":kn("toggle",n),i=r;break;case"input":A2(n,r),i=pA(n,r),kn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=lr({},r,{value:void 0}),kn("invalid",n);break;case"textarea":M2(n,r),i=vA(n,r),kn("invalid",n);break;default:i=r}_A(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oO(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Rm(n,l):typeof l=="number"&&Rm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&kn("scroll",n):l!=null&&tb(n,s,l,o))}switch(t){case"input":H0(n),w2(n,r,!1);break;case"textarea":H0(n),b2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+yc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ld(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ld(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=o_)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mi(e),null;case 6:if(n&&e.stateNode!=null)P3(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(We(166));if(t=xu(zm.current),xu(pa.current),K0(e)){if(r=e.stateNode,t=e.memoizedProps,r[aa]=e,(s=r.nodeValue!==t)&&(n=Fs,n!==null))switch(n.tag){case 3:J0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&J0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[aa]=e,e.stateNode=r}return mi(e),null;case 13:if(Vn(nr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(jn&&Ds!==null&&e.mode&1&&!(e.flags&128))jO(),eh(),e.flags|=98560,s=!1;else if(s=K0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(We(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(We(317));s[aa]=e}else eh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mi(e),s=!1}else Fo!==null&&(ew(Fo),Fo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||nr.current&1?Fr===0&&(Fr=3):Nb())),e.updateQueue!==null&&(e.flags|=4),mi(e),null);case 4:return nh(),XA(n,e),n===null&&Fm(e.stateNode.containerInfo),mi(e),null;case 10:return xb(e.type._context),mi(e),null;case 17:return ds(e.type)&&a_(),mi(e),null;case 19:if(Vn(nr),s=e.memoizedState,s===null)return mi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gp(s,!1);else{if(Fr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=p_(n),o!==null){for(e.flags|=128,gp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Fn(nr,nr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ar()>ih&&(e.flags|=128,r=!0,gp(s,!1),e.lanes=4194304)}else{if(!r)if(n=p_(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),gp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jn)return mi(e),null}else 2*Ar()-s.renderingStartTime>ih&&t!==1073741824&&(e.flags|=128,r=!0,gp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ar(),e.sibling=null,t=nr.current,Fn(nr,r?t&1|2:t&1),e):(mi(e),null);case 22:case 23:return Fb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bs&1073741824&&(mi(e),e.subtreeFlags&6&&(e.flags|=8192)):mi(e),null;case 24:return null;case 25:return null}throw Error(We(156,e.tag))}function s8(n,e){switch(gb(e),e.tag){case 1:return ds(e.type)&&a_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return nh(),Vn(fs),Vn(Ri),Mb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wb(e),null;case 13:if(Vn(nr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(We(340));eh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Vn(nr),null;case 4:return nh(),null;case 10:return xb(e.type._context),null;case 22:case 23:return Fb(),null;case 24:return null;default:return null}}var q0=!1,xi=!1,o8=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Ad(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){dr(n,e,r)}else t.current=null}function jA(n,e,t){try{t()}catch(r){dr(n,e,r)}}var mP=!1;function a8(n,e){if(PA=r_,n=LO(),pb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(BA={focusedElem:n,selectionRange:t},r_=!1,mt=e;mt!==null;)if(e=mt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,mt=n;else for(;mt!==null;){e=mt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,_=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Do(e.type,y),_);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(A){dr(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,mt=n;break}mt=e.return}return v=mP,mP=!1,v}function sm(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&jA(e,t,s)}i=i.next}while(i!==r)}}function ux(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function YA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function B3(n){var e=n.alternate;e!==null&&(n.alternate=null,B3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[aa],delete e[Um],delete e[LA],delete e[V5],delete e[W5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function I3(n){return n.tag===5||n.tag===3||n.tag===4}function gP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||I3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function JA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=o_));else if(r!==4&&(n=n.child,n!==null))for(JA(n,e,t),n=n.sibling;n!==null;)JA(n,e,t),n=n.sibling}function KA(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(KA(n,e,t),n=n.sibling;n!==null;)KA(n,e,t),n=n.sibling}var ri=null,Oo=!1;function Bl(n,e,t){for(t=t.child;t!==null;)D3(n,e,t),t=t.sibling}function D3(n,e,t){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(nx,t)}catch{}switch(t.tag){case 5:xi||Ad(t,e);case 6:var r=ri,i=Oo;ri=null,Bl(n,e,t),ri=r,Oo=i,ri!==null&&(Oo?(n=ri,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ri.removeChild(t.stateNode));break;case 18:ri!==null&&(Oo?(n=ri,t=t.stateNode,n.nodeType===8?MS(n.parentNode,t):n.nodeType===1&&MS(n,t),Dm(n)):MS(ri,t.stateNode));break;case 4:r=ri,i=Oo,ri=t.stateNode.containerInfo,Oo=!0,Bl(n,e,t),ri=r,Oo=i;break;case 0:case 11:case 14:case 15:if(!xi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jA(t,e,o),i=i.next}while(i!==r)}Bl(n,e,t);break;case 1:if(!xi&&(Ad(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){dr(t,e,a)}Bl(n,e,t);break;case 21:Bl(n,e,t);break;case 22:t.mode&1?(xi=(r=xi)||t.memoizedState!==null,Bl(n,e,t),xi=r):Bl(n,e,t);break;default:Bl(n,e,t)}}function vP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new o8),e.forEach(function(r){var i=g8.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function To(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ri=a.stateNode,Oo=!1;break e;case 3:ri=a.stateNode.containerInfo,Oo=!0;break e;case 4:ri=a.stateNode.containerInfo,Oo=!0;break e}a=a.return}if(ri===null)throw Error(We(160));D3(s,o,i),ri=null,Oo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){dr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L3(e,n),e=e.sibling}function L3(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(To(e,n),ra(n),r&4){try{sm(3,n,n.return),ux(3,n)}catch(y){dr(n,n.return,y)}try{sm(5,n,n.return)}catch(y){dr(n,n.return,y)}}break;case 1:To(e,n),ra(n),r&512&&t!==null&&Ad(t,t.return);break;case 5:if(To(e,n),ra(n),r&512&&t!==null&&Ad(t,t.return),n.flags&32){var i=n.stateNode;try{Rm(i,"")}catch(y){dr(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tO(i,s),xA(a,o);var c=xA(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?oO(i,d):u==="dangerouslySetInnerHTML"?iO(i,d):u==="children"?Rm(i,d):tb(i,u,d,c)}switch(a){case"input":mA(i,s);break;case"textarea":nO(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ld(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ld(i,!!s.multiple,s.defaultValue,!0):Ld(i,!!s.multiple,s.multiple?[]:"",!1))}i[Um]=s}catch(y){dr(n,n.return,y)}}break;case 6:if(To(e,n),ra(n),r&4){if(n.stateNode===null)throw Error(We(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){dr(n,n.return,y)}}break;case 3:if(To(e,n),ra(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Dm(e.containerInfo)}catch(y){dr(n,n.return,y)}break;case 4:To(e,n),ra(n);break;case 13:To(e,n),ra(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lb=Ar())),r&4&&vP(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(xi=(c=xi)||u,To(e,n),xi=c):To(e,n),ra(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(mt=n,u=n.child;u!==null;){for(d=mt=u;mt!==null;){switch(p=mt,m=p.child,p.tag){case 0:case 11:case 14:case 15:sm(4,p,p.return);break;case 1:Ad(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){dr(r,t,y)}}break;case 5:Ad(p,p.return);break;case 22:if(p.memoizedState!==null){_P(d);continue}}m!==null?(m.return=p,mt=m):_P(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sO("display",o))}catch(y){dr(n,n.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){dr(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:To(e,n),ra(n),r&4&&vP(n);break;case 21:break;default:To(e,n),ra(n)}}function ra(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(I3(t)){var r=t;break e}t=t.return}throw Error(We(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rm(i,""),r.flags&=-33);var s=gP(n);KA(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gP(n);JA(n,a,o);break;default:throw Error(We(161))}}catch(l){dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function l8(n,e,t){mt=n,O3(n)}function O3(n,e,t){for(var r=(n.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||q0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||xi;a=q0;var c=xi;if(q0=o,(xi=l)&&!c)for(mt=i;mt!==null;)o=mt,l=o.child,o.tag===22&&o.memoizedState!==null?xP(i):l!==null?(l.return=o,mt=l):xP(i);for(;s!==null;)mt=s,O3(s),s=s.sibling;mt=i,q0=a,xi=c}yP(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):yP(n)}}function yP(n){for(;mt!==null;){var e=mt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xi||ux(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Do(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}tP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Dm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}xi||e.flags&512&&YA(e)}catch(p){dr(e,e.return,p)}}if(e===n){mt=null;break}if(t=e.sibling,t!==null){t.return=e.return,mt=t;break}mt=e.return}}function _P(n){for(;mt!==null;){var e=mt;if(e===n){mt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,mt=t;break}mt=e.return}}function xP(n){for(;mt!==null;){var e=mt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ux(4,e)}catch(l){dr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dr(e,i,l)}}var s=e.return;try{YA(e)}catch(l){dr(e,s,l)}break;case 5:var o=e.return;try{YA(e)}catch(l){dr(e,o,l)}}}catch(l){dr(e,e.return,l)}if(e===n){mt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,mt=a;break}mt=e.return}}var c8=Math.ceil,v_=xl.ReactCurrentDispatcher,Ib=xl.ReactCurrentOwner,yo=xl.ReactCurrentBatchConfig,mn=0,Qr=null,Rr=null,ai=0,bs=0,wd=Dc(0),Fr=0,Wm=null,Yu=0,fx=0,Db=0,om=null,os=null,Lb=0,ih=1/0,Va=null,y_=!1,ZA=null,uc=null,ev=!1,Ql=null,__=0,am=0,QA=null,Ry=-1,Py=0;function Zi(){return mn&6?Ar():Ry!==-1?Ry:Ry=Ar()}function fc(n){return n.mode&1?mn&2&&ai!==0?ai&-ai:X5.transition!==null?(Py===0&&(Py=yO()),Py):(n=bn,n!==0||(n=window.event,n=n===void 0?16:MO(n.type)),n):1}function Ho(n,e,t,r){if(50<am)throw am=0,QA=null,Error(We(185));xg(n,t,r),(!(mn&2)||n!==Qr)&&(n===Qr&&(!(mn&2)&&(fx|=t),Fr===4&&Jl(n,ai)),hs(n,r),t===1&&mn===0&&!(e.mode&1)&&(ih=Ar()+500,ax&&Lc()))}function hs(n,e){var t=n.callbackNode;XG(n,e);var r=n_(n,n===Qr?ai:0);if(r===0)t!==null&&R2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&R2(t),e===1)n.tag===0?$5(SP.bind(null,n)):WO(SP.bind(null,n)),H5(function(){!(mn&6)&&Lc()}),t=null;else{switch(_O(r)){case 1:t=ob;break;case 4:t=gO;break;case 16:t=t_;break;case 536870912:t=vO;break;default:t=t_}t=V3(t,F3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function F3(n,e){if(Ry=-1,Py=0,mn&6)throw Error(We(327));var t=n.callbackNode;if(kd()&&n.callbackNode!==t)return null;var r=n_(n,n===Qr?ai:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=x_(n,r);else{e=r;var i=mn;mn|=2;var s=U3();(Qr!==n||ai!==e)&&(Va=null,ih=Ar()+500,Ru(n,e));do try{d8();break}catch(a){N3(n,a)}while(!0);_b(),v_.current=s,mn=i,Rr!==null?e=0:(Qr=null,ai=0,e=Fr)}if(e!==0){if(e===2&&(i=MA(n),i!==0&&(r=i,e=qA(n,i))),e===1)throw t=Wm,Ru(n,0),Jl(n,r),hs(n,Ar()),t;if(e===6)Jl(n,r);else{if(i=n.current.alternate,!(r&30)&&!u8(i)&&(e=x_(n,r),e===2&&(s=MA(n),s!==0&&(r=s,e=qA(n,s))),e===1))throw t=Wm,Ru(n,0),Jl(n,r),hs(n,Ar()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(We(345));case 2:cu(n,os,Va);break;case 3:if(Jl(n,r),(r&130023424)===r&&(e=Lb+500-Ar(),10<e)){if(n_(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Zi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=DA(cu.bind(null,n,os,Va),e);break}cu(n,os,Va);break;case 4:if(Jl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-zo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ar()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c8(r/1960))-r,10<r){n.timeoutHandle=DA(cu.bind(null,n,os,Va),r);break}cu(n,os,Va);break;case 5:cu(n,os,Va);break;default:throw Error(We(329))}}}return hs(n,Ar()),n.callbackNode===t?F3.bind(null,n):null}function qA(n,e){var t=om;return n.current.memoizedState.isDehydrated&&(Ru(n,e).flags|=256),n=x_(n,e),n!==2&&(e=os,os=t,e!==null&&ew(e)),n}function ew(n){os===null?os=n:os.push.apply(os,n)}function u8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Go(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jl(n,e){for(e&=~Db,e&=~fx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-zo(e),r=1<<t;n[t]=-1,e&=~r}}function SP(n){if(mn&6)throw Error(We(327));kd();var e=n_(n,0);if(!(e&1))return hs(n,Ar()),null;var t=x_(n,e);if(n.tag!==0&&t===2){var r=MA(n);r!==0&&(e=r,t=qA(n,r))}if(t===1)throw t=Wm,Ru(n,0),Jl(n,e),hs(n,Ar()),t;if(t===6)throw Error(We(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,cu(n,os,Va),hs(n,Ar()),null}function Ob(n,e){var t=mn;mn|=1;try{return n(e)}finally{mn=t,mn===0&&(ih=Ar()+500,ax&&Lc())}}function Ju(n){Ql!==null&&Ql.tag===0&&!(mn&6)&&kd();var e=mn;mn|=1;var t=yo.transition,r=bn;try{if(yo.transition=null,bn=1,n)return n()}finally{bn=r,yo.transition=t,mn=e,!(mn&6)&&Lc()}}function Fb(){bs=wd.current,Vn(wd)}function Ru(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,z5(t)),Rr!==null)for(t=Rr.return;t!==null;){var r=t;switch(gb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&a_();break;case 3:nh(),Vn(fs),Vn(Ri),Mb();break;case 5:wb(r);break;case 4:nh();break;case 13:Vn(nr);break;case 19:Vn(nr);break;case 10:xb(r.type._context);break;case 22:case 23:Fb()}t=t.return}if(Qr=n,Rr=n=dc(n.current,null),ai=bs=e,Fr=0,Wm=null,Db=fx=Yu=0,os=om=null,_u!==null){for(e=0;e<_u.length;e++)if(t=_u[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}_u=null}return n}function N3(n,e){do{var t=Rr;try{if(_b(),by.current=g_,m_){for(var r=ar.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}m_=!1}if(ju=0,jr=Dr=ar=null,im=!1,Hm=0,Ib.current=null,t===null||t.return===null){Fr=1,Wm=e,Rr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ai,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=lP(o);if(m!==null){m.flags&=-257,cP(m,o,a,s,e),m.mode&1&&aP(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){aP(s,c,e),Nb();break e}l=Error(We(426))}}else if(jn&&a.mode&1){var _=lP(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),cP(_,o,a,s,e),vb(rh(l,a));break e}}s=l=rh(l,a),Fr!==4&&(Fr=2),om===null?om=[s]:om.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=x3(s,l,e);eP(s,g);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(uc===null||!uc.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=S3(s,a,e);eP(s,A);break e}}s=s.return}while(s!==null)}z3(t)}catch(b){e=b,Rr===t&&t!==null&&(Rr=t=t.return);continue}break}while(!0)}function U3(){var n=v_.current;return v_.current=g_,n===null?g_:n}function Nb(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Qr===null||!(Yu&268435455)&&!(fx&268435455)||Jl(Qr,ai)}function x_(n,e){var t=mn;mn|=2;var r=U3();(Qr!==n||ai!==e)&&(Va=null,Ru(n,e));do try{f8();break}catch(i){N3(n,i)}while(!0);if(_b(),mn=t,v_.current=r,Rr!==null)throw Error(We(261));return Qr=null,ai=0,Fr}function f8(){for(;Rr!==null;)k3(Rr)}function d8(){for(;Rr!==null&&!NG();)k3(Rr)}function k3(n){var e=G3(n.alternate,n,bs);n.memoizedProps=n.pendingProps,e===null?z3(n):Rr=e,Ib.current=null}function z3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=s8(t,e),t!==null){t.flags&=32767,Rr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fr=6,Rr=null;return}}else if(t=i8(t,e,bs),t!==null){Rr=t;return}if(e=e.sibling,e!==null){Rr=e;return}Rr=e=n}while(e!==null);Fr===0&&(Fr=5)}function cu(n,e,t){var r=bn,i=yo.transition;try{yo.transition=null,bn=1,h8(n,e,t,r)}finally{yo.transition=i,bn=r}return null}function h8(n,e,t,r){do kd();while(Ql!==null);if(mn&6)throw Error(We(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(We(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(jG(n,s),n===Qr&&(Rr=Qr=null,ai=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ev||(ev=!0,V3(t_,function(){return kd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=yo.transition,yo.transition=null;var o=bn;bn=1;var a=mn;mn|=4,Ib.current=null,a8(n,t),L3(t,n),D5(BA),r_=!!PA,BA=PA=null,n.current=t,l8(t),UG(),mn=a,bn=o,yo.transition=s}else n.current=t;if(ev&&(ev=!1,Ql=n,__=i),s=n.pendingLanes,s===0&&(uc=null),HG(t.stateNode),hs(n,Ar()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(y_)throw y_=!1,n=ZA,ZA=null,n;return __&1&&n.tag!==0&&kd(),s=n.pendingLanes,s&1?n===QA?am++:(am=0,QA=n):am=0,Lc(),null}function kd(){if(Ql!==null){var n=_O(__),e=yo.transition,t=bn;try{if(yo.transition=null,bn=16>n?16:n,Ql===null)var r=!1;else{if(n=Ql,Ql=null,__=0,mn&6)throw Error(We(331));var i=mn;for(mn|=4,mt=n.current;mt!==null;){var s=mt,o=s.child;if(mt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(mt=c;mt!==null;){var u=mt;switch(u.tag){case 0:case 11:case 15:sm(8,u,s)}var d=u.child;if(d!==null)d.return=u,mt=d;else for(;mt!==null;){u=mt;var p=u.sibling,m=u.return;if(B3(u),u===c){mt=null;break}if(p!==null){p.return=m,mt=p;break}mt=m}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,mt=o;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sm(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,mt=g;break e}mt=s.return}}var x=n.current;for(mt=x;mt!==null;){o=mt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,mt=S;else e:for(o=x;mt!==null;){if(a=mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ux(9,a)}}catch(b){dr(a,a.return,b)}if(a===o){mt=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,mt=A;break e}mt=a.return}}if(mn=i,Lc(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(nx,n)}catch{}r=!0}return r}finally{bn=t,yo.transition=e}}return!1}function EP(n,e,t){e=rh(t,e),e=x3(n,e,1),n=cc(n,e,1),e=Zi(),n!==null&&(xg(n,1,e),hs(n,e))}function dr(n,e,t){if(n.tag===3)EP(n,n,t);else for(;e!==null;){if(e.tag===3){EP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(uc===null||!uc.has(r))){n=rh(t,n),n=S3(e,n,1),e=cc(e,n,1),n=Zi(),e!==null&&(xg(e,1,n),hs(e,n));break}}e=e.return}}function p8(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Zi(),n.pingedLanes|=n.suspendedLanes&t,Qr===n&&(ai&t)===t&&(Fr===4||Fr===3&&(ai&130023424)===ai&&500>Ar()-Lb?Ru(n,0):Db|=t),hs(n,e)}function H3(n,e){e===0&&(n.mode&1?(e=W0,W0<<=1,!(W0&130023424)&&(W0=4194304)):e=1);var t=Zi();n=ul(n,e),n!==null&&(xg(n,e,t),hs(n,t))}function m8(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),H3(n,t)}function g8(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(We(314))}r!==null&&r.delete(e),H3(n,t)}var G3;G3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||fs.current)cs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cs=!1,r8(n,e,t);cs=!!(n.flags&131072)}else cs=!1,jn&&e.flags&1048576&&$O(e,u_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cy(n,e),n=e.pendingProps;var i=qd(e,Ri.current);Ud(e,t),i=Tb(null,e,r,n,i,t);var s=Cb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(r)?(s=!0,l_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eb(e),i.updater=lx,e.stateNode=i,i._reactInternals=e,zA(e,r,n,t),e=VA(null,e,r,!0,s,t)):(e.tag=0,jn&&s&&mb(e),Gi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Cy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=y8(r),n=Do(r,n),i){case 0:e=GA(null,e,r,n,t);break e;case 1:e=dP(null,e,r,n,t);break e;case 11:e=uP(null,e,r,n,t);break e;case 14:e=fP(null,e,r,Do(r.type,n),t);break e}throw Error(We(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),GA(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),dP(n,e,r,i,t);case 3:e:{if(M3(e),n===null)throw Error(We(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JO(n,e),h_(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rh(Error(We(423)),e),e=hP(n,e,r,t,i);break e}else if(r!==i){i=rh(Error(We(424)),e),e=hP(n,e,r,t,i);break e}else for(Ds=lc(e.stateNode.containerInfo.firstChild),Fs=e,jn=!0,Fo=null,t=qO(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(eh(),r===i){e=fl(n,e,t);break e}Gi(n,e,r,t)}e=e.child}return e;case 5:return e3(e),n===null&&NA(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,IA(r,i)?o=null:s!==null&&IA(r,s)&&(e.flags|=32),w3(n,e),Gi(n,e,o,t),e.child;case 6:return n===null&&NA(e),null;case 13:return b3(n,e,t);case 4:return Ab(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=th(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),uP(n,e,r,i,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fn(f_,r._currentValue),r._currentValue=o,s!==null)if(Go(s.value,o)){if(s.children===i.children&&!fs.current){e=fl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=rl(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),UA(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(We(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),UA(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ud(e,t),i=xo(i),r=r(i),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return r=e.type,i=Do(r,e.pendingProps),i=Do(r.type,i),fP(n,e,r,i,t);case 15:return E3(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),Cy(n,e),e.tag=1,ds(r)?(n=!0,l_(e)):n=!1,Ud(e,t),ZO(e,r,i),zA(e,r,i,t),VA(null,e,r,!0,n,t);case 19:return T3(n,e,t);case 22:return A3(n,e,t)}throw Error(We(156,e.tag))};function V3(n,e){return mO(n,e)}function v8(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(n,e,t,r){return new v8(n,e,t,r)}function Ub(n){return n=n.prototype,!(!n||!n.isReactComponent)}function y8(n){if(typeof n=="function")return Ub(n)?1:0;if(n!=null){if(n=n.$$typeof,n===rb)return 11;if(n===ib)return 14}return 2}function dc(n,e){var t=n.alternate;return t===null?(t=po(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function By(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Ub(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case pd:return Pu(t.children,i,s,e);case nb:o=8,i|=8;break;case uA:return n=po(12,t,e,i|2),n.elementType=uA,n.lanes=s,n;case fA:return n=po(13,t,e,i),n.elementType=fA,n.lanes=s,n;case dA:return n=po(19,t,e,i),n.elementType=dA,n.lanes=s,n;case QL:return dx(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case KL:o=10;break e;case ZL:o=9;break e;case rb:o=11;break e;case ib:o=14;break e;case $l:o=16,r=null;break e}throw Error(We(130,n==null?n:typeof n,""))}return e=po(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Pu(n,e,t,r){return n=po(7,n,r,e),n.lanes=t,n}function dx(n,e,t,r){return n=po(22,n,r,e),n.elementType=QL,n.lanes=t,n.stateNode={isHidden:!1},n}function DS(n,e,t){return n=po(6,n,null,e),n.lanes=t,n}function LS(n,e,t){return e=po(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _8(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pS(0),this.expirationTimes=pS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kb(n,e,t,r,i,s,o,a,l){return n=new _8(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=po(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eb(s),n}function x8(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function W3(n){if(!n)return _c;n=n._reactInternals;e:{if(df(n)!==n||n.tag!==1)throw Error(We(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(We(171))}if(n.tag===1){var t=n.type;if(ds(t))return VO(n,t,e)}return e}function $3(n,e,t,r,i,s,o,a,l){return n=kb(t,r,!0,n,i,s,o,a,l),n.context=W3(null),t=n.current,r=Zi(),i=fc(t),s=rl(r,i),s.callback=e??null,cc(t,s,i),n.current.lanes=i,xg(n,i,r),hs(n,r),n}function hx(n,e,t,r){var i=e.current,s=Zi(),o=fc(i);return t=W3(t),e.context===null?e.context=t:e.pendingContext=t,e=rl(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=cc(i,e,o),n!==null&&(Ho(n,i,o,s),My(n,i,o)),o}function S_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function AP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function zb(n,e){AP(n,e),(n=n.alternate)&&AP(n,e)}function S8(){return null}var X3=typeof reportError=="function"?reportError:function(n){console.error(n)};function Hb(n){this._internalRoot=n}px.prototype.render=Hb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(We(409));hx(n,e,null,null)};px.prototype.unmount=Hb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ju(function(){hx(null,n,null,null)}),e[cl]=null}};function px(n){this._internalRoot=n}px.prototype.unstable_scheduleHydration=function(n){if(n){var e=EO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Yl.length&&e!==0&&e<Yl[t].priority;t++);Yl.splice(t,0,n),t===0&&wO(n)}};function Gb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function mx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wP(){}function E8(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=S_(o);s.call(c)}}var o=$3(e,r,n,0,null,!1,!1,"",wP);return n._reactRootContainer=o,n[cl]=o.current,Fm(n.nodeType===8?n.parentNode:n),Ju(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=S_(l);a.call(c)}}var l=kb(n,0,!1,null,null,!1,!1,"",wP);return n._reactRootContainer=l,n[cl]=l.current,Fm(n.nodeType===8?n.parentNode:n),Ju(function(){hx(e,l,t,r)}),l}function gx(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=S_(o);a.call(l)}}hx(e,o,n,i)}else o=E8(t,e,n,i,r);return S_(o)}xO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vp(e.pendingLanes);t!==0&&(ab(e,t|1),hs(e,Ar()),!(mn&6)&&(ih=Ar()+500,Lc()))}break;case 13:Ju(function(){var r=ul(n,1);if(r!==null){var i=Zi();Ho(r,n,1,i)}}),zb(n,1)}};lb=function(n){if(n.tag===13){var e=ul(n,134217728);if(e!==null){var t=Zi();Ho(e,n,134217728,t)}zb(n,134217728)}};SO=function(n){if(n.tag===13){var e=fc(n),t=ul(n,e);if(t!==null){var r=Zi();Ho(t,n,e,r)}zb(n,e)}};EO=function(){return bn};AO=function(n,e){var t=bn;try{return bn=n,e()}finally{bn=t}};EA=function(n,e,t){switch(e){case"input":if(mA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ox(r);if(!i)throw Error(We(90));eO(r),mA(r,i)}}}break;case"textarea":nO(n,t);break;case"select":e=t.value,e!=null&&Ld(n,!!t.multiple,e,!1)}};cO=Ob;uO=Ju;var A8={usingClientEntryPoint:!1,Events:[Eg,yd,ox,aO,lO,Ob]},vp={findFiberByHostInstance:yu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},w8={bundleType:vp.bundleType,version:vp.version,rendererPackageName:vp.rendererPackageName,rendererConfig:vp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hO(n),n===null?null:n.stateNode},findFiberByHostInstance:vp.findFiberByHostInstance||S8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tv.isDisabled&&tv.supportsFiber)try{nx=tv.inject(w8),ha=tv}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A8;Vs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gb(e))throw Error(We(200));return x8(n,e,null,t)};Vs.createRoot=function(n,e){if(!Gb(n))throw Error(We(299));var t=!1,r="",i=X3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kb(n,1,!1,null,null,t,!1,r,i),n[cl]=e.current,Fm(n.nodeType===8?n.parentNode:n),new Hb(e)};Vs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(We(188)):(n=Object.keys(n).join(","),Error(We(268,n)));return n=hO(e),n=n===null?null:n.stateNode,n};Vs.flushSync=function(n){return Ju(n)};Vs.hydrate=function(n,e,t){if(!mx(e))throw Error(We(200));return gx(null,n,e,!0,t)};Vs.hydrateRoot=function(n,e,t){if(!Gb(n))throw Error(We(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=X3;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=$3(e,null,n,1,t??null,i,!1,s,o),n[cl]=e.current,Fm(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new px(e)};Vs.render=function(n,e,t){if(!mx(e))throw Error(We(200));return gx(null,n,e,!1,t)};Vs.unmountComponentAtNode=function(n){if(!mx(n))throw Error(We(40));return n._reactRootContainer?(Ju(function(){gx(null,null,n,!1,function(){n._reactRootContainer=null,n[cl]=null})}),!0):!1};Vs.unstable_batchedUpdates=Ob;Vs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!mx(t))throw Error(We(200));if(n==null||n._reactInternals===void 0)throw Error(We(38));return gx(n,e,t,!1,r)};Vs.version="18.2.0-next-9e3b772b8-20220608";function j3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j3)}catch(n){console.error(n)}}j3(),$L.exports=Vs;var wg=$L.exports;const M8=Bc(wg);var MP=wg;lA.createRoot=MP.createRoot,lA.hydrateRoot=MP.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ca="159",uu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Y3=0,tw=1,J3=2,b8=3,K3=0,vx=1,lm=2,Lo=3,Vo=0,Nr=1,Si=2,T8=2,bi=0,Bu=1,nw=2,rw=3,iw=4,Z3=5,Kl=100,Q3=101,q3=102,sw=103,ow=104,eF=200,tF=201,nF=202,rF=203,E_=204,A_=205,iF=206,sF=207,oF=208,aF=209,lF=210,cF=211,uF=212,fF=213,dF=214,hF=0,pF=1,mF=2,$m=3,gF=4,vF=5,yF=6,_F=7,Mg=0,xF=1,SF=2,ma=0,EF=1,AF=2,wF=3,Vb=4,MF=5,aw="attached",bF="detached",yx=300,Ea=301,xc=302,sh=303,Xm=304,Th=306,Sc=1e3,ii=1001,oh=1002,Cn=1003,jm=1004,C8=1004,zd=1005,R8=1005,En=1006,_x=1007,P8=1007,Aa=1008,B8=1008,li=1009,TF=1010,CF=1011,xx=1012,Wb=1013,ca=1014,Zr=1015,si=1016,$b=1017,Xb=1018,il=1020,RF=1021,Ei=1023,PF=1024,BF=1025,hc=1026,Ec=1027,jb=1028,Yb=1029,IF=1030,Jb=1031,Kb=1033,Iy=33776,Dy=33777,Ly=33778,Oy=33779,lw=35840,cw=35841,uw=35842,fw=35843,Zb=36196,dw=37492,hw=37496,pw=37808,mw=37809,gw=37810,vw=37811,yw=37812,_w=37813,xw=37814,Sw=37815,Ew=37816,Aw=37817,ww=37818,Mw=37819,bw=37820,Tw=37821,Fy=36492,Cw=36494,Rw=36495,DF=36283,Pw=36284,Bw=36285,Iw=36286,LF=2200,OF=2201,FF=2202,ah=2300,Ku=2301,Ny=2302,Su=2400,Eu=2401,Ym=2402,Sx=2500,Qb=2501,NF=0,qb=1,w_=2,bg=3e3,ga=3001,Oc=3200,UF=3201,Fc=0,kF=1,Ps="",Or="srgb",wa="srgb-linear",Ex="display-p3",Tg="display-p3-linear",Jm="linear",On="srgb",Km="rec709",Zm="p3",I8=0,du=7680,D8=7681,L8=7682,O8=7683,F8=34055,N8=34056,U8=5386,k8=512,z8=513,H8=514,G8=515,V8=516,W8=517,$8=518,Dw=519,zF=512,HF=513,GF=514,eT=515,VF=516,WF=517,$F=518,XF=519,Qm=35044,X8=35048,j8=35040,Y8=35045,J8=35049,K8=35041,Z8=35046,Q8=35050,q8=35042,e9="100",Lw="300 es",M_=1035,ko=2e3,lh=2001;class $s{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const gi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bP=1234567;const Iu=Math.PI/180,ch=180/Math.PI;function Ns(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gi[n&255]+gi[n>>8&255]+gi[n>>16&255]+gi[n>>24&255]+"-"+gi[e&255]+gi[e>>8&255]+"-"+gi[e>>16&15|64]+gi[e>>24&255]+"-"+gi[t&63|128]+gi[t>>8&255]+"-"+gi[t>>16&255]+gi[t>>24&255]+gi[r&255]+gi[r>>8&255]+gi[r>>16&255]+gi[r>>24&255]).toLowerCase()}function pr(n,e,t){return Math.max(e,Math.min(t,n))}function tT(n,e){return(n%e+e)%e}function t9(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function n9(n,e,t){return n!==e?(t-n)/(e-n):0}function cm(n,e,t){return(1-t)*n+t*e}function r9(n,e,t,r){return cm(n,e,1-Math.exp(-t*r))}function i9(n,e=1){return e-Math.abs(tT(n,e*2)-e)}function s9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function o9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function a9(n,e){return n+Math.floor(Math.random()*(e-n+1))}function l9(n,e){return n+Math.random()*(e-n)}function c9(n){return n*(.5-Math.random())}function u9(n){n!==void 0&&(bP=n);let e=bP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function f9(n){return n*Iu}function d9(n){return n*ch}function Ow(n){return(n&n-1)===0&&n!==0}function h9(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function b_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function p9(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ls(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Hd={DEG2RAD:Iu,RAD2DEG:ch,generateUUID:Ns,clamp:pr,euclideanModulo:tT,mapLinear:t9,inverseLerp:n9,lerp:cm,damp:r9,pingpong:i9,smoothstep:s9,smootherstep:o9,randInt:a9,randFloat:l9,randFloatSpread:c9,seededRandom:u9,degToRad:f9,radToDeg:d9,isPowerOfTwo:Ow,ceilPowerOfTwo:h9,floorPowerOfTwo:b_,setQuaternionFromProperEuler:p9,normalize:jt,denormalize:ls};class Se{constructor(e=0,t=0){Se.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jt{constructor(e,t,r,i,s,o,a,l,c){Jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],v=r[8],y=i[0],_=i[3],g=i[6],x=i[1],S=i[4],A=i[7],b=i[2],M=i[5],C=i[8];return s[0]=o*y+a*x+l*b,s[3]=o*_+a*S+l*M,s[6]=o*g+a*A+l*C,s[1]=c*y+u*x+d*b,s[4]=c*_+u*S+d*M,s[7]=c*g+u*A+d*C,s[2]=p*y+m*x+v*b,s[5]=p*_+m*S+v*M,s[8]=p*g+m*A+v*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=t*d+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=d*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(u*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=m*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(OS.makeScale(e,t)),this}rotate(e){return this.premultiply(OS.makeRotation(-e)),this}translate(e,t){return this.premultiply(OS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const OS=new Jt;function jF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const m9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Md(n,e){return new m9[n](e)}function qm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function YF(){const n=qm("canvas");return n.style.display="block",n}const TP={};function um(n){n in TP||(TP[n]=!0,console.warn(n))}const CP=new Jt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),RP=new Jt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),nv={[wa]:{transfer:Jm,primaries:Km,toReference:n=>n,fromReference:n=>n},[Or]:{transfer:On,primaries:Km,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Tg]:{transfer:Jm,primaries:Zm,toReference:n=>n.applyMatrix3(RP),fromReference:n=>n.applyMatrix3(CP)},[Ex]:{transfer:On,primaries:Zm,toReference:n=>n.convertSRGBToLinear().applyMatrix3(RP),fromReference:n=>n.applyMatrix3(CP).convertLinearToSRGB()}},g9=new Set([wa,Tg]),Mn={enabled:!0,_workingColorSpace:wa,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!g9.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=nv[e].toReference,i=nv[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return nv[n].primaries},getTransfer:function(n){return n===Ps?Jm:nv[n].transfer}};function Gd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function FS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Df;class nT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Df===void 0&&(Df=qm("canvas")),Df.width=e.width,Df.height=e.height;const r=Df.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Df}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Gd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Gd(t[r]/255)*255):t[r]=Gd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let v9=0;class Au{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:v9++}),this.uuid=Ns(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(NS(i[o].image)):s.push(NS(i[o]))}else s=NS(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function NS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?nT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let y9=0;class In extends $s{constructor(e=In.DEFAULT_IMAGE,t=In.DEFAULT_MAPPING,r=ii,i=ii,s=En,o=Aa,a=Ei,l=li,c=In.DEFAULT_ANISOTROPY,u=Ps){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:y9++}),this.uuid=Ns(),this.name="",this.source=new Au(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(um("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===ga?Or:Ps),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Sc:e.x=e.x-Math.floor(e.x);break;case ii:e.x=e.x<0?0:1;break;case oh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Sc:e.y=e.y-Math.floor(e.y);break;case ii:e.y=e.y<0?0:1;break;case oh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return um("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Or?ga:bg}set encoding(e){um("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ga?Or:Ps}}In.DEFAULT_IMAGE=null;In.DEFAULT_MAPPING=yx;In.DEFAULT_ANISOTROPY=1;class An{constructor(e=0,t=0,r=0,i=1){An.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],v=l[9],y=l[2],_=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-y)<.01&&Math.abs(v-_)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+y)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,A=(m+1)/2,b=(g+1)/2,M=(u+p)/4,C=(d+y)/4,B=(v+_)/4;return S>A&&S>b?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=M/r,s=C/r):A>b?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=M/i,s=B/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=C/s,i=B/s),this.set(r,i,s,t),this}let x=Math.sqrt((_-v)*(_-v)+(d-y)*(d-y)+(p-u)*(p-u));return Math.abs(x)<.001&&(x=1),this.x=(_-v)/x,this.y=(d-y)/x,this.z=(p-u)/x,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class JF extends $s{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new An(0,0,e,t),this.scissorTest=!1,this.viewport=new An(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(um("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===ga?Or:Ps),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:En,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new In(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Au(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends JF{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Ax extends In{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _9 extends Wn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Ax(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class rT extends In{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class x9 extends Wn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new rT(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class S9 extends Wn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class vr{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=y;return}if(d!==y||l!==p||c!==m||u!==v){let _=1-a;const g=l*p+c*m+u*v+d*y,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const b=Math.sqrt(S),M=Math.atan2(b,g*x);_=Math.sin(_*M)/b,a=Math.sin(a*M)/b}const A=a*x;if(l=l*_+p*A,c=c*_+m*A,u=u*_+v*A,d=d*_+y*A,_===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=b,c*=b,u*=b,d*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*d+l*m-c*p,e[t+1]=l*v+u*p+c*d-a*m,e[t+2]=c*v+u*m+a*p-l*d,e[t+3]=u*v-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"YXZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"ZXY":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"ZYX":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"YZX":this._x=p*u*d+c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d-p*m*v;break;case"XZY":this._x=p*u*d-c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,t=0,r=0){W.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return US.copy(this).projectOnVector(e),this.sub(US)}reflect(e){return this.sub(US.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(pr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const US=new W,PP=new vr;class qr{constructor(e=new W(1/0,1/0,1/0),t=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Co.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Co.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Co.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Co):Co.fromBufferAttribute(s,o),Co.applyMatrix4(e.matrixWorld),this.expandByPoint(Co);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),rv.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),rv.copy(r.boundingBox)),rv.applyMatrix4(e.matrixWorld),this.union(rv)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Co),Co.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yp),iv.subVectors(this.max,yp),Lf.subVectors(e.a,yp),Of.subVectors(e.b,yp),Ff.subVectors(e.c,yp),Il.subVectors(Of,Lf),Dl.subVectors(Ff,Of),Jc.subVectors(Lf,Ff);let t=[0,-Il.z,Il.y,0,-Dl.z,Dl.y,0,-Jc.z,Jc.y,Il.z,0,-Il.x,Dl.z,0,-Dl.x,Jc.z,0,-Jc.x,-Il.y,Il.x,0,-Dl.y,Dl.x,0,-Jc.y,Jc.x,0];return!kS(t,Lf,Of,Ff,iv)||(t=[1,0,0,0,1,0,0,0,1],!kS(t,Lf,Of,Ff,iv))?!1:(sv.crossVectors(Il,Dl),t=[sv.x,sv.y,sv.z],kS(t,Lf,Of,Ff,iv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Co).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Co).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fa=[new W,new W,new W,new W,new W,new W,new W,new W],Co=new W,rv=new qr,Lf=new W,Of=new W,Ff=new W,Il=new W,Dl=new W,Jc=new W,yp=new W,iv=new W,sv=new W,Kc=new W;function kS(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Kc.fromArray(n,s);const a=i.x*Math.abs(Kc.x)+i.y*Math.abs(Kc.y)+i.z*Math.abs(Kc.z),l=e.dot(Kc),c=t.dot(Kc),u=r.dot(Kc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const E9=new qr,_p=new W,zS=new W;class ei{constructor(e=new W,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):E9.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_p.subVectors(e,this.center);const t=_p.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(_p,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_p.copy(e.center).add(zS)),this.expandByPoint(_p.copy(e.center).sub(zS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Na=new W,HS=new W,ov=new W,Ll=new W,GS=new W,av=new W,VS=new W;class hf{constructor(e=new W,t=new W(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Na)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Na.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Na.copy(this.origin).addScaledVector(this.direction,t),Na.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){HS.copy(e).add(t).multiplyScalar(.5),ov.copy(t).sub(e).normalize(),Ll.copy(this.origin).sub(HS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ov),a=Ll.dot(this.direction),l=-Ll.dot(ov),c=Ll.lengthSq(),u=Math.abs(1-o*o);let d,p,m,v;if(u>0)if(d=o*l-a,p=o*a-l,v=s*u,d>=0)if(p>=-v)if(p<=v){const y=1/u;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(HS).addScaledVector(ov,p),m}intersectSphere(e,t){Na.subVectors(e.center,this.origin);const r=Na.dot(this.direction),i=Na.dot(Na)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Na)!==null}intersectTriangle(e,t,r,i,s){GS.subVectors(t,e),av.subVectors(r,e),VS.crossVectors(GS,av);let o=this.direction.dot(VS),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ll.subVectors(this.origin,e);const l=a*this.direction.dot(av.crossVectors(Ll,av));if(l<0)return null;const c=a*this.direction.dot(GS.cross(Ll));if(c<0||l+c>o)return null;const u=-a*Ll.dot(VS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Tt{constructor(e,t,r,i,s,o,a,l,c,u,d,p,m,v,y,_){Tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,d,p,m,v,y,_)}set(e,t,r,i,s,o,a,l,c,u,d,p,m,v,y,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=y,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Tt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Nf.setFromMatrixColumn(e,0).length(),s=1/Nf.setFromMatrixColumn(e,1).length(),o=1/Nf.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,v=a*u,y=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+v*c,t[5]=p-y*c,t[9]=-a*l,t[2]=y-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,v=c*u,y=c*d;t[0]=p+y*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=y+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,v=c*u,y=c*d;t[0]=p-y*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=y-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,v=a*u,y=a*d;t[0]=l*u,t[4]=v*c-m,t[8]=p*c+y,t[1]=l*d,t[5]=y*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,y=a*c;t[0]=l*u,t[4]=y-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+v,t[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,y=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=p*d+y,t[5]=o*u,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*u,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(A9,e,w9)}lookAt(e,t,r){const i=this.elements;return As.subVectors(e,t),As.lengthSq()===0&&(As.z=1),As.normalize(),Ol.crossVectors(r,As),Ol.lengthSq()===0&&(Math.abs(r.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),Ol.crossVectors(r,As)),Ol.normalize(),lv.crossVectors(As,Ol),i[0]=Ol.x,i[4]=lv.x,i[8]=As.x,i[1]=Ol.y,i[5]=lv.y,i[9]=As.y,i[2]=Ol.z,i[6]=lv.z,i[10]=As.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],v=r[2],y=r[6],_=r[10],g=r[14],x=r[3],S=r[7],A=r[11],b=r[15],M=i[0],C=i[4],B=i[8],T=i[12],P=i[1],N=i[5],z=i[9],q=i[13],G=i[2],Y=i[6],ee=i[10],te=i[14],V=i[3],K=i[7],U=i[11],oe=i[15];return s[0]=o*M+a*P+l*G+c*V,s[4]=o*C+a*N+l*Y+c*K,s[8]=o*B+a*z+l*ee+c*U,s[12]=o*T+a*q+l*te+c*oe,s[1]=u*M+d*P+p*G+m*V,s[5]=u*C+d*N+p*Y+m*K,s[9]=u*B+d*z+p*ee+m*U,s[13]=u*T+d*q+p*te+m*oe,s[2]=v*M+y*P+_*G+g*V,s[6]=v*C+y*N+_*Y+g*K,s[10]=v*B+y*z+_*ee+g*U,s[14]=v*T+y*q+_*te+g*oe,s[3]=x*M+S*P+A*G+b*V,s[7]=x*C+S*N+A*Y+b*K,s[11]=x*B+S*z+A*ee+b*U,s[15]=x*T+S*q+A*te+b*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],v=e[3],y=e[7],_=e[11],g=e[15];return v*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+_*(+t*c*d-t*a*m-s*o*d+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-t*l*d+t*a*p+i*o*d-r*o*p+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],v=e[12],y=e[13],_=e[14],g=e[15],x=d*_*c-y*p*c+y*l*m-a*_*m-d*l*g+a*p*g,S=v*p*c-u*_*c-v*l*m+o*_*m+u*l*g-o*p*g,A=u*y*c-v*d*c+v*a*m-o*y*m-u*a*g+o*d*g,b=v*d*l-u*y*l-v*a*p+o*y*p+u*a*_-o*d*_,M=t*x+r*S+i*A+s*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=x*C,e[1]=(y*p*s-d*_*s-y*i*m+r*_*m+d*i*g-r*p*g)*C,e[2]=(a*_*s-y*l*s+y*i*c-r*_*c-a*i*g+r*l*g)*C,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*C,e[4]=S*C,e[5]=(u*_*s-v*p*s+v*i*m-t*_*m-u*i*g+t*p*g)*C,e[6]=(v*l*s-o*_*s-v*i*c+t*_*c+o*i*g-t*l*g)*C,e[7]=(o*p*s-u*l*s+u*i*c-t*p*c-o*i*m+t*l*m)*C,e[8]=A*C,e[9]=(v*d*s-u*y*s-v*r*m+t*y*m+u*r*g-t*d*g)*C,e[10]=(o*y*s-v*a*s+v*r*c-t*y*c-o*r*g+t*a*g)*C,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*m-t*a*m)*C,e[12]=b*C,e[13]=(u*y*i-v*d*i+v*r*p-t*y*p-u*r*_+t*d*_)*C,e[14]=(v*a*i-o*y*i-v*r*l+t*y*l+o*r*_-t*a*_)*C,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*p+t*a*p)*C,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,v=s*d,y=o*u,_=o*d,g=a*d,x=l*c,S=l*u,A=l*d,b=r.x,M=r.y,C=r.z;return i[0]=(1-(y+g))*b,i[1]=(m+A)*b,i[2]=(v-S)*b,i[3]=0,i[4]=(m-A)*M,i[5]=(1-(p+g))*M,i[6]=(_+x)*M,i[7]=0,i[8]=(v+S)*C,i[9]=(_-x)*C,i[10]=(1-(p+y))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Nf.set(i[0],i[1],i[2]).length();const o=Nf.set(i[4],i[5],i[6]).length(),a=Nf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ro.copy(this);const c=1/s,u=1/o,d=1/a;return Ro.elements[0]*=c,Ro.elements[1]*=c,Ro.elements[2]*=c,Ro.elements[4]*=u,Ro.elements[5]*=u,Ro.elements[6]*=u,Ro.elements[8]*=d,Ro.elements[9]*=d,Ro.elements[10]*=d,t.setFromRotationMatrix(Ro),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=ko){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===ko)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===lh)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=ko){const l=this.elements,c=1/(t-e),u=1/(r-i),d=1/(o-s),p=(t+e)*c,m=(r+i)*u;let v,y;if(a===ko)v=(o+s)*d,y=-2*d;else if(a===lh)v=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Nf=new W,Ro=new Tt,A9=new W(0,0,0),w9=new W(1,1,1),Ol=new W,lv=new W,As=new W,BP=new Tt,IP=new vr;class Cg{constructor(e=0,t=0,r=0,i=Cg.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(pr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(pr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-pr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(pr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-pr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return BP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BP,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return IP.setFromEuler(this),this.setFromQuaternion(IP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cg.DEFAULT_ORDER="XYZ";class Du{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let M9=0;const DP=new W,Uf=new vr,Ua=new Tt,cv=new W,xp=new W,b9=new W,T9=new vr,LP=new W(1,0,0),OP=new W(0,1,0),FP=new W(0,0,1),C9={type:"added"},R9={type:"removed"};class hn extends $s{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:M9++}),this.uuid=Ns(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DEFAULT_UP.clone();const e=new W,t=new Cg,r=new vr,i=new W(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Tt},normalMatrix:{value:new Jt}}),this.matrix=new Tt,this.matrixWorld=new Tt,this.matrixAutoUpdate=hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Du,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Uf.setFromAxisAngle(e,t),this.quaternion.multiply(Uf),this}rotateOnWorldAxis(e,t){return Uf.setFromAxisAngle(e,t),this.quaternion.premultiply(Uf),this}rotateX(e){return this.rotateOnAxis(LP,e)}rotateY(e){return this.rotateOnAxis(OP,e)}rotateZ(e){return this.rotateOnAxis(FP,e)}translateOnAxis(e,t){return DP.copy(e).applyQuaternion(this.quaternion),this.position.add(DP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(LP,e)}translateY(e){return this.translateOnAxis(OP,e)}translateZ(e){return this.translateOnAxis(FP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ua.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?cv.copy(e):cv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),xp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ua.lookAt(xp,cv,this.up):Ua.lookAt(cv,xp,this.up),this.quaternion.setFromRotationMatrix(Ua),i&&(Ua.extractRotation(i.matrixWorld),Uf.setFromRotationMatrix(Ua),this.quaternion.premultiply(Uf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(C9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(R9)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ua.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ua.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ua),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xp,e,b9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xp,T9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}hn.DEFAULT_UP=new W(0,1,0);hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Po=new W,ka=new W,WS=new W,za=new W,kf=new W,zf=new W,NP=new W,$S=new W,XS=new W,jS=new W;let uv=!1;class as{constructor(e=new W,t=new W,r=new W){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Po.subVectors(e,t),i.cross(Po);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Po.subVectors(i,t),ka.subVectors(r,t),WS.subVectors(e,t);const o=Po.dot(Po),a=Po.dot(ka),l=Po.dot(WS),c=ka.dot(ka),u=ka.dot(WS),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,za),za.x>=0&&za.y>=0&&za.x+za.y<=1}static getUV(e,t,r,i,s,o,a,l){return uv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uv=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,za),l.setScalar(0),l.addScaledVector(s,za.x),l.addScaledVector(o,za.y),l.addScaledVector(a,za.z),l}static isFrontFacing(e,t,r,i){return Po.subVectors(r,t),ka.subVectors(e,t),Po.cross(ka).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Po.subVectors(this.c,this.b),ka.subVectors(this.a,this.b),Po.cross(ka).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return as.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return as.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return uv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uv=!0),as.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return as.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return as.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return as.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;kf.subVectors(i,r),zf.subVectors(s,r),$S.subVectors(e,r);const l=kf.dot($S),c=zf.dot($S);if(l<=0&&c<=0)return t.copy(r);XS.subVectors(e,i);const u=kf.dot(XS),d=zf.dot(XS);if(u>=0&&d<=u)return t.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(kf,o);jS.subVectors(e,s);const m=kf.dot(jS),v=zf.dot(jS);if(v>=0&&m<=v)return t.copy(s);const y=m*c-l*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(zf,a);const _=u*v-m*d;if(_<=0&&d-u>=0&&m-v>=0)return NP.subVectors(s,i),a=(d-u)/(d-u+(m-v)),t.copy(i).addScaledVector(NP,a);const g=1/(_+y+p);return o=y*g,a=p*g,t.copy(r).addScaledVector(kf,o).addScaledVector(zf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const KF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},fv={h:0,s:0,l:0};function YS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let tt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Or){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Mn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Mn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Mn.workingColorSpace){if(e=tT(e,1),t=pr(t,0,1),r=pr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=YS(o,s,e+1/3),this.g=YS(o,s,e),this.b=YS(o,s,e-1/3)}return Mn.toWorkingColorSpace(this,i),this}setStyle(e,t=Or){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Or){const r=KF[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gd(e.r),this.g=Gd(e.g),this.b=Gd(e.b),this}copyLinearToSRGB(e){return this.r=FS(e.r),this.g=FS(e.g),this.b=FS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Or){return Mn.fromWorkingColorSpace(vi.copy(this),e),Math.round(pr(vi.r*255,0,255))*65536+Math.round(pr(vi.g*255,0,255))*256+Math.round(pr(vi.b*255,0,255))}getHexString(e=Or){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Mn.workingColorSpace){Mn.fromWorkingColorSpace(vi.copy(this),t);const r=vi.r,i=vi.g,s=vi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Mn.workingColorSpace){return Mn.fromWorkingColorSpace(vi.copy(this),t),e.r=vi.r,e.g=vi.g,e.b=vi.b,e}getStyle(e=Or){Mn.fromWorkingColorSpace(vi.copy(this),e);const t=vi.r,r=vi.g,i=vi.b;return e!==Or?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Fl),this.setHSL(Fl.h+e,Fl.s+t,Fl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Fl),e.getHSL(fv);const r=cm(Fl.h,fv.h,t),i=cm(Fl.s,fv.s,t),s=cm(Fl.l,fv.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const vi=new tt;tt.NAMES=KF;let P9=0;class yr extends $s{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:P9++}),this.uuid=Ns(),this.name="",this.type="Material",this.blending=Bu,this.side=Vo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=E_,this.blendDst=A_,this.blendEquation=Kl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new tt(0,0,0),this.blendAlpha=0,this.depthFunc=$m,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Dw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=du,this.stencilZFail=du,this.stencilZPass=du,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Bu&&(r.blending=this.blending),this.side!==Vo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==E_&&(r.blendSrc=this.blendSrc),this.blendDst!==A_&&(r.blendDst=this.blendDst),this.blendEquation!==Kl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==$m&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Dw&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==du&&(r.stencilFail=this.stencilFail),this.stencilZFail!==du&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==du&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ls extends yr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ka=B9();function B9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function rs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=pr(n,-65504,65504),Ka.floatView[0]=n;const e=Ka.uint32View[0],t=e>>23&511;return Ka.baseTable[t]+((e&8388607)>>Ka.shiftTable[t])}function $p(n){const e=n>>10;return Ka.uint32View[0]=Ka.mantissaTable[Ka.offsetTable[e]+(n&1023)]+Ka.exponentTable[e],Ka.floatView[0]}const wu={toHalfFloat:rs,fromHalfFloat:$p},br=new W,dv=new Se;class en{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Qm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Zr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)dv.fromBufferAttribute(this,t),dv.applyMatrix3(e),this.setXY(t,dv.x,dv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ls(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=jt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ls(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ls(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ls(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ls(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qm&&(e.usage=this.usage),e}}class I9 extends en{constructor(e,t,r){super(new Int8Array(e),t,r)}}class D9 extends en{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class L9 extends en{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class O9 extends en{constructor(e,t,r){super(new Int16Array(e),t,r)}}class iT extends en{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class F9 extends en{constructor(e,t,r){super(new Int32Array(e),t,r)}}class sT extends en{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class N9 extends en{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=$p(this.array[e*this.itemSize]);return this.normalized&&(t=ls(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=rs(t),this}getY(e){let t=$p(this.array[e*this.itemSize+1]);return this.normalized&&(t=ls(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=rs(t),this}getZ(e){let t=$p(this.array[e*this.itemSize+2]);return this.normalized&&(t=ls(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=rs(t),this}getW(e){let t=$p(this.array[e*this.itemSize+3]);return this.normalized&&(t=ls(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=rs(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array)),this.array[e+0]=rs(t),this.array[e+1]=rs(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.array[e+0]=rs(t),this.array[e+1]=rs(r),this.array[e+2]=rs(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.array[e+0]=rs(t),this.array[e+1]=rs(r),this.array[e+2]=rs(i),this.array[e+3]=rs(s),this}}class Et extends en{constructor(e,t,r){super(new Float32Array(e),t,r)}}class U9 extends en{constructor(e,t,r){super(new Float64Array(e),t,r)}}let k9=0;const no=new Tt,JS=new hn,Hf=new W,ws=new qr,Sp=new qr,Vr=new W;class zt extends $s{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:k9++}),this.uuid=Ns(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jF(e)?sT:iT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Jt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return no.makeRotationFromQuaternion(e),this.applyMatrix4(no),this}rotateX(e){return no.makeRotationX(e),this.applyMatrix4(no),this}rotateY(e){return no.makeRotationY(e),this.applyMatrix4(no),this}rotateZ(e){return no.makeRotationZ(e),this.applyMatrix4(no),this}translate(e,t,r){return no.makeTranslation(e,t,r),this.applyMatrix4(no),this}scale(e,t,r){return no.makeScale(e,t,r),this.applyMatrix4(no),this}lookAt(e){return JS.lookAt(e),JS.updateMatrix(),this.applyMatrix4(JS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hf).negate(),this.translate(Hf.x,Hf.y,Hf.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Et(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ws.setFromBufferAttribute(s),this.morphTargetsRelative?(Vr.addVectors(this.boundingBox.min,ws.min),this.boundingBox.expandByPoint(Vr),Vr.addVectors(this.boundingBox.max,ws.max),this.boundingBox.expandByPoint(Vr)):(this.boundingBox.expandByPoint(ws.min),this.boundingBox.expandByPoint(ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ei);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new W,1/0);return}if(e){const r=this.boundingSphere.center;if(ws.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Sp.setFromBufferAttribute(a),this.morphTargetsRelative?(Vr.addVectors(ws.min,Sp.min),ws.expandByPoint(Vr),Vr.addVectors(ws.max,Sp.max),ws.expandByPoint(Vr)):(ws.expandByPoint(Sp.min),ws.expandByPoint(Sp.max))}ws.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Vr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Vr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Vr.fromBufferAttribute(a,c),l&&(Hf.fromBufferAttribute(e,c),Vr.add(Hf)),i=Math.max(i,r.distanceToSquared(Vr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new en(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<a;P++)c[P]=new W,u[P]=new W;const d=new W,p=new W,m=new W,v=new Se,y=new Se,_=new Se,g=new W,x=new W;function S(P,N,z){d.fromArray(i,P*3),p.fromArray(i,N*3),m.fromArray(i,z*3),v.fromArray(o,P*2),y.fromArray(o,N*2),_.fromArray(o,z*2),p.sub(d),m.sub(d),y.sub(v),_.sub(v);const q=1/(y.x*_.y-_.x*y.y);isFinite(q)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-y.y).multiplyScalar(q),x.copy(m).multiplyScalar(y.x).addScaledVector(p,-_.x).multiplyScalar(q),c[P].add(g),c[N].add(g),c[z].add(g),u[P].add(x),u[N].add(x),u[z].add(x))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let P=0,N=A.length;P<N;++P){const z=A[P],q=z.start,G=z.count;for(let Y=q,ee=q+G;Y<ee;Y+=3)S(r[Y+0],r[Y+1],r[Y+2])}const b=new W,M=new W,C=new W,B=new W;function T(P){C.fromArray(s,P*3),B.copy(C);const N=c[P];b.copy(N),b.sub(C.multiplyScalar(C.dot(N))).normalize(),M.crossVectors(B,N);const q=M.dot(u[P])<0?-1:1;l[P*4]=b.x,l[P*4+1]=b.y,l[P*4+2]=b.z,l[P*4+3]=q}for(let P=0,N=A.length;P<N;++P){const z=A[P],q=z.start,G=z.count;for(let Y=q,ee=q+G;Y<ee;Y+=3)T(r[Y+0]),T(r[Y+1]),T(r[Y+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new en(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new W,s=new W,o=new W,a=new W,l=new W,c=new W,u=new W,d=new W;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),y=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,_),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,_),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Vr.fromBufferAttribute(e,t),Vr.normalize(),e.setXYZ(t,Vr.x,Vr.y,Vr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let y=0,_=l.length;y<_;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new en(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UP=new Tt,Zc=new hf,hv=new ei,kP=new W,Gf=new W,Vf=new W,Wf=new W,KS=new W,pv=new W,mv=new Se,gv=new Se,vv=new Se,zP=new W,HP=new W,GP=new W,yv=new W,_v=new W;class Jn extends hn{constructor(e=new zt,t=new Ls){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){pv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(KS.fromBufferAttribute(d,e),o?pv.addScaledVector(KS,u):pv.addScaledVector(KS.sub(t),u))}t.add(pv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),hv.copy(r.boundingSphere),hv.applyMatrix4(s),Zc.copy(e.ray).recast(e.near),!(hv.containsPoint(Zc.origin)===!1&&(Zc.intersectSphere(hv,kP)===null||Zc.origin.distanceToSquared(kP)>(e.far-e.near)**2))&&(UP.copy(s).invert(),Zc.copy(e.ray).applyMatrix4(UP),!(r.boundingBox!==null&&Zc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Zc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let A=x,b=S;A<b;A+=3){const M=a.getX(A),C=a.getX(A+1),B=a.getX(A+2);i=xv(this,g,e,r,c,u,d,M,C,B),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let _=v,g=y;_<g;_+=3){const x=a.getX(_),S=a.getX(_+1),A=a.getX(_+2);i=xv(this,o,e,r,c,u,d,x,S,A),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let A=x,b=S;A<b;A+=3){const M=A,C=A+1,B=A+2;i=xv(this,g,e,r,c,u,d,M,C,B),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let _=v,g=y;_<g;_+=3){const x=_,S=_+1,A=_+2;i=xv(this,o,e,r,c,u,d,x,S,A),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function z9(n,e,t,r,i,s,o,a){let l;if(e.side===Nr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Vo,a),l===null)return null;_v.copy(a),_v.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(_v);return c<t.near||c>t.far?null:{distance:c,point:_v.clone(),object:n}}function xv(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,Gf),n.getVertexPosition(l,Vf),n.getVertexPosition(c,Wf);const u=z9(n,e,t,r,Gf,Vf,Wf,yv);if(u){i&&(mv.fromBufferAttribute(i,a),gv.fromBufferAttribute(i,l),vv.fromBufferAttribute(i,c),u.uv=as.getInterpolation(yv,Gf,Vf,Wf,mv,gv,vv,new Se)),s&&(mv.fromBufferAttribute(s,a),gv.fromBufferAttribute(s,l),vv.fromBufferAttribute(s,c),u.uv1=as.getInterpolation(yv,Gf,Vf,Wf,mv,gv,vv,new Se),u.uv2=u.uv1),o&&(zP.fromBufferAttribute(o,a),HP.fromBufferAttribute(o,l),GP.fromBufferAttribute(o,c),u.normal=as.getInterpolation(yv,Gf,Vf,Wf,zP,HP,GP,new W),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new W,materialIndex:0};as.getNormal(Gf,Vf,Wf,d.normal),u.face=d}return u}class pf extends zt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(u,3)),this.setAttribute("uv",new Et(d,2));function v(y,_,g,x,S,A,b,M,C,B,T){const P=A/C,N=b/B,z=A/2,q=b/2,G=M/2,Y=C+1,ee=B+1;let te=0,V=0;const K=new W;for(let U=0;U<ee;U++){const oe=U*N-q;for(let fe=0;fe<Y;fe++){const ue=fe*P-z;K[y]=ue*x,K[_]=oe*S,K[g]=G,c.push(K.x,K.y,K.z),K[y]=0,K[_]=0,K[g]=M>0?1:-1,u.push(K.x,K.y,K.z),d.push(fe/C),d.push(1-U/B),te+=1}}for(let U=0;U<B;U++)for(let oe=0;oe<C;oe++){const fe=p+oe+Y*U,ue=p+oe+Y*(U+1),pe=p+(oe+1)+Y*(U+1),be=p+(oe+1)+Y*U;l.push(fe,ue,be),l.push(ue,pe,be),V+=6}a.addGroup(m,V,T),m+=V,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function zi(n){const e={};for(let t=0;t<n.length;t++){const r=uh(n[t]);for(const i in r)e[i]=r[i]}return e}function H9(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ZF(n){return n.getRenderTarget()===null?n.outputColorSpace:Mn.workingColorSpace}const oT={clone:uh,merge:zi};var G9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,V9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _r extends yr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=G9,this.fragmentShader=V9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uh(e.uniforms),this.uniformsGroups=H9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Ch extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tt,this.projectionMatrix=new Tt,this.projectionMatrixInverse=new Tt,this.coordinateSystem=ko}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yn extends Ch{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ch*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Iu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ch*2*Math.atan(Math.tan(Iu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Iu*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $f=-90,Xf=1;class QF extends hn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Yn($f,Xf,e,t);i.layers=this.layers,this.add(i);const s=new Yn($f,Xf,e,t);s.layers=this.layers,this.add(s);const o=new Yn($f,Xf,e,t);o.layers=this.layers,this.add(o);const a=new Yn($f,Xf,e,t);a.layers=this.layers,this.add(a);const l=new Yn($f,Xf,e,t);l.layers=this.layers,this.add(l);const c=new Yn($f,Xf,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ko)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===lh)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Rg extends In{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ea,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aT extends Wn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(um("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ga?Or:Ps),this.texture=new Rg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:En}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new pf(5,5,5),s=new _r({name:"CubemapFromEquirect",uniforms:uh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Nr,blending:bi});s.uniforms.tEquirect.value=t;const o=new Jn(i,s),a=t.minFilter;return t.minFilter===Aa&&(t.minFilter=En),new QF(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const ZS=new W,W9=new W,$9=new Jt;class ja{constructor(e=new W(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=ZS.subVectors(r,t).cross(W9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ZS),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$9.getNormalMatrix(e),i=this.coplanarPoint(ZS).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qc=new ei,Sv=new W;class Pg{constructor(e=new ja,t=new ja,r=new ja,i=new ja,s=new ja,o=new ja){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ko){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],m=i[8],v=i[9],y=i[10],_=i[11],g=i[12],x=i[13],S=i[14],A=i[15];if(r[0].setComponents(l-s,p-c,_-m,A-g).normalize(),r[1].setComponents(l+s,p+c,_+m,A+g).normalize(),r[2].setComponents(l+o,p+u,_+v,A+x).normalize(),r[3].setComponents(l-o,p-u,_-v,A-x).normalize(),r[4].setComponents(l-a,p-d,_-y,A-S).normalize(),t===ko)r[5].setComponents(l+a,p+d,_+y,A+S).normalize();else if(t===lh)r[5].setComponents(a,d,y,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Qc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qc)}intersectsSprite(e){return Qc.center.set(0,0,0),Qc.radius=.7071067811865476,Qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Sv.x=i.normal.x>0?e.max.x:e.min.x,Sv.y=i.normal.y>0?e.max.y:e.min.y,Sv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Sv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function qF(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function X9(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,p=c.usage,m=d.byteLength,v=n.createBuffer();n.bindBuffer(u,v),n.bufferData(u,d,p),c.onUploadCallback();let y;if(d instanceof Float32Array)y=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)y=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=n.SHORT;else if(d instanceof Uint32Array)y=n.UNSIGNED_INT;else if(d instanceof Int32Array)y=n.INT;else if(d instanceof Int8Array)y=n.BYTE;else if(d instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,d){const p=u.array,m=u._updateRange,v=u.updateRanges;if(n.bindBuffer(d,c),m.count===-1&&v.length===0&&n.bufferSubData(d,0,p),v.length!==0){for(let y=0,_=v.length;y<_;y++){const g=v[y];t?n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,u),d.version=c.version}}return{get:o,remove:a,update:l}}class Rh extends zt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=t/l,m=[],v=[],y=[],_=[];for(let g=0;g<u;g++){const x=g*p-o;for(let S=0;S<c;S++){const A=S*d-s;v.push(A,-x,0),y.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const S=x+c*g,A=x+c*(g+1),b=x+1+c*(g+1),M=x+1+c*g;m.push(S,A,M),m.push(A,b,M)}this.setIndex(m),this.setAttribute("position",new Et(v,3)),this.setAttribute("normal",new Et(y,3)),this.setAttribute("uv",new Et(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rh(e.width,e.height,e.widthSegments,e.heightSegments)}}var j9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Y9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,J9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,K9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Z9=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Q9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,q9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,rV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,iV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,oV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,dV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,mV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_V=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,SV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AV="gl_FragColor = linearToOutputTexel( gl_FragColor );",wV=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,MV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,BV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,IV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,FV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,NV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,UV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,kV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,zV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,HV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,VV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,WV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$V=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,XV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,jV=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,YV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,JV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,KV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ZV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,QV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,qV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,e6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,t6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,n6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,r6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,i6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,s6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,o6=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,a6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,l6=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,c6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,u6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,f6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,d6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,p6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,m6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,g6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,v6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,y6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,_6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,x6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,S6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,E6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,A6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,w6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,M6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,b6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,T6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,C6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,R6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,P6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,B6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,I6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,D6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,L6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,O6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,F6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,N6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,U6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,k6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,z6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,H6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,G6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,V6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,W6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const X6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,j6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,J6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,K6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Z6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Q6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,q6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,eW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,nW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_W=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,SW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xt={alphahash_fragment:j9,alphahash_pars_fragment:Y9,alphamap_fragment:J9,alphamap_pars_fragment:K9,alphatest_fragment:Z9,alphatest_pars_fragment:Q9,aomap_fragment:q9,aomap_pars_fragment:eV,batching_pars_vertex:tV,batching_vertex:nV,begin_vertex:rV,beginnormal_vertex:iV,bsdfs:sV,iridescence_fragment:oV,bumpmap_pars_fragment:aV,clipping_planes_fragment:lV,clipping_planes_pars_fragment:cV,clipping_planes_pars_vertex:uV,clipping_planes_vertex:fV,color_fragment:dV,color_pars_fragment:hV,color_pars_vertex:pV,color_vertex:mV,common:gV,cube_uv_reflection_fragment:vV,defaultnormal_vertex:yV,displacementmap_pars_vertex:_V,displacementmap_vertex:xV,emissivemap_fragment:SV,emissivemap_pars_fragment:EV,colorspace_fragment:AV,colorspace_pars_fragment:wV,envmap_fragment:MV,envmap_common_pars_fragment:bV,envmap_pars_fragment:TV,envmap_pars_vertex:CV,envmap_physical_pars_fragment:zV,envmap_vertex:RV,fog_vertex:PV,fog_pars_vertex:BV,fog_fragment:IV,fog_pars_fragment:DV,gradientmap_pars_fragment:LV,lightmap_fragment:OV,lightmap_pars_fragment:FV,lights_lambert_fragment:NV,lights_lambert_pars_fragment:UV,lights_pars_begin:kV,lights_toon_fragment:HV,lights_toon_pars_fragment:GV,lights_phong_fragment:VV,lights_phong_pars_fragment:WV,lights_physical_fragment:$V,lights_physical_pars_fragment:XV,lights_fragment_begin:jV,lights_fragment_maps:YV,lights_fragment_end:JV,logdepthbuf_fragment:KV,logdepthbuf_pars_fragment:ZV,logdepthbuf_pars_vertex:QV,logdepthbuf_vertex:qV,map_fragment:e6,map_pars_fragment:t6,map_particle_fragment:n6,map_particle_pars_fragment:r6,metalnessmap_fragment:i6,metalnessmap_pars_fragment:s6,morphcolor_vertex:o6,morphnormal_vertex:a6,morphtarget_pars_vertex:l6,morphtarget_vertex:c6,normal_fragment_begin:u6,normal_fragment_maps:f6,normal_pars_fragment:d6,normal_pars_vertex:h6,normal_vertex:p6,normalmap_pars_fragment:m6,clearcoat_normal_fragment_begin:g6,clearcoat_normal_fragment_maps:v6,clearcoat_pars_fragment:y6,iridescence_pars_fragment:_6,opaque_fragment:x6,packing:S6,premultiplied_alpha_fragment:E6,project_vertex:A6,dithering_fragment:w6,dithering_pars_fragment:M6,roughnessmap_fragment:b6,roughnessmap_pars_fragment:T6,shadowmap_pars_fragment:C6,shadowmap_pars_vertex:R6,shadowmap_vertex:P6,shadowmask_pars_fragment:B6,skinbase_vertex:I6,skinning_pars_vertex:D6,skinning_vertex:L6,skinnormal_vertex:O6,specularmap_fragment:F6,specularmap_pars_fragment:N6,tonemapping_fragment:U6,tonemapping_pars_fragment:k6,transmission_fragment:z6,transmission_pars_fragment:H6,uv_pars_fragment:G6,uv_pars_vertex:V6,uv_vertex:W6,worldpos_vertex:$6,background_vert:X6,background_frag:j6,backgroundCube_vert:Y6,backgroundCube_frag:J6,cube_vert:K6,cube_frag:Z6,depth_vert:Q6,depth_frag:q6,distanceRGBA_vert:eW,distanceRGBA_frag:tW,equirect_vert:nW,equirect_frag:rW,linedashed_vert:iW,linedashed_frag:sW,meshbasic_vert:oW,meshbasic_frag:aW,meshlambert_vert:lW,meshlambert_frag:cW,meshmatcap_vert:uW,meshmatcap_frag:fW,meshnormal_vert:dW,meshnormal_frag:hW,meshphong_vert:pW,meshphong_frag:mW,meshphysical_vert:gW,meshphysical_frag:vW,meshtoon_vert:yW,meshtoon_frag:_W,points_vert:xW,points_frag:SW,shadow_vert:EW,shadow_frag:AW,sprite_vert:wW,sprite_frag:MW},it={common:{diffuse:{value:new tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jt},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0},uvTransform:{value:new Jt}},sprite:{diffuse:{value:new tt(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}}},No={basic:{uniforms:zi([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:zi([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new tt(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:zi([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new tt(0)},specular:{value:new tt(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:zi([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:zi([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new tt(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:zi([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:zi([it.points,it.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:zi([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:zi([it.common,it.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:zi([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:zi([it.sprite,it.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new Jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xt.backgroundCube_vert,fragmentShader:Xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:zi([it.common,it.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:zi([it.lights,it.fog,{color:{value:new tt(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};No.physical={uniforms:zi([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jt},clearcoatNormalScale:{value:new Se(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jt},sheen:{value:0},sheenColor:{value:new tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jt},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jt},attenuationDistance:{value:0},attenuationColor:{value:new tt(0)},specularColor:{value:new tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jt},anisotropyVector:{value:new Se},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jt}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};const Ev={r:0,b:0,g:0};function bW(n,e,t,r,i,s,o){const a=new tt(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function v(_,g){let x=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?y(a,l):S&&S.isColor&&(y(S,1),x=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Th)?(u===void 0&&(u=new Jn(new pf(1,1,1),new _r({name:"BackgroundCubeMaterial",uniforms:uh(No.backgroundCube.uniforms),vertexShader:No.backgroundCube.vertexShader,fragmentShader:No.backgroundCube.fragmentShader,side:Nr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,M,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Mn.getTransfer(S.colorSpace)!==On,(d!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Jn(new Rh(2,2),new _r({name:"BackgroundMaterial",uniforms:uh(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:Vo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Mn.getTransfer(S.colorSpace)!==On,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function y(_,g){_.getRGB(Ev,ZF(n)),r.buffers.color.setClear(Ev.r,Ev.g,Ev.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,y(a,l)},render:v}}function TW(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let c=l,u=!1;function d(G,Y,ee,te,V){let K=!1;if(o){const U=y(te,ee,Y);c!==U&&(c=U,m(c.object)),K=g(G,te,ee,V),K&&x(G,te,ee,V)}else{const U=Y.wireframe===!0;(c.geometry!==te.id||c.program!==ee.id||c.wireframe!==U)&&(c.geometry=te.id,c.program=ee.id,c.wireframe=U,K=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(K||u)&&(u=!1,B(G,Y,ee,te),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(G){return r.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function v(G){return r.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function y(G,Y,ee){const te=ee.wireframe===!0;let V=a[G.id];V===void 0&&(V={},a[G.id]=V);let K=V[Y.id];K===void 0&&(K={},V[Y.id]=K);let U=K[te];return U===void 0&&(U=_(p()),K[te]=U),U}function _(G){const Y=[],ee=[],te=[];for(let V=0;V<i;V++)Y[V]=0,ee[V]=0,te[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ee,attributeDivisors:te,object:G,attributes:{},index:null}}function g(G,Y,ee,te){const V=c.attributes,K=Y.attributes;let U=0;const oe=ee.getAttributes();for(const fe in oe)if(oe[fe].location>=0){const pe=V[fe];let be=K[fe];if(be===void 0&&(fe==="instanceMatrix"&&G.instanceMatrix&&(be=G.instanceMatrix),fe==="instanceColor"&&G.instanceColor&&(be=G.instanceColor)),pe===void 0||pe.attribute!==be||be&&pe.data!==be.data)return!0;U++}return c.attributesNum!==U||c.index!==te}function x(G,Y,ee,te){const V={},K=Y.attributes;let U=0;const oe=ee.getAttributes();for(const fe in oe)if(oe[fe].location>=0){let pe=K[fe];pe===void 0&&(fe==="instanceMatrix"&&G.instanceMatrix&&(pe=G.instanceMatrix),fe==="instanceColor"&&G.instanceColor&&(pe=G.instanceColor));const be={};be.attribute=pe,pe&&pe.data&&(be.data=pe.data),V[fe]=be,U++}c.attributes=V,c.attributesNum=U,c.index=te}function S(){const G=c.newAttributes;for(let Y=0,ee=G.length;Y<ee;Y++)G[Y]=0}function A(G){b(G,0)}function b(G,Y){const ee=c.newAttributes,te=c.enabledAttributes,V=c.attributeDivisors;ee[G]=1,te[G]===0&&(n.enableVertexAttribArray(G),te[G]=1),V[G]!==Y&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,Y),V[G]=Y)}function M(){const G=c.newAttributes,Y=c.enabledAttributes;for(let ee=0,te=Y.length;ee<te;ee++)Y[ee]!==G[ee]&&(n.disableVertexAttribArray(ee),Y[ee]=0)}function C(G,Y,ee,te,V,K,U){U===!0?n.vertexAttribIPointer(G,Y,ee,V,K):n.vertexAttribPointer(G,Y,ee,te,V,K)}function B(G,Y,ee,te){if(r.isWebGL2===!1&&(G.isInstancedMesh||te.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const V=te.attributes,K=ee.getAttributes(),U=Y.defaultAttributeValues;for(const oe in K){const fe=K[oe];if(fe.location>=0){let ue=V[oe];if(ue===void 0&&(oe==="instanceMatrix"&&G.instanceMatrix&&(ue=G.instanceMatrix),oe==="instanceColor"&&G.instanceColor&&(ue=G.instanceColor)),ue!==void 0){const pe=ue.normalized,be=ue.itemSize,Ae=t.get(ue);if(Ae===void 0)continue;const Le=Ae.buffer,qe=Ae.type,st=Ae.bytesPerElement,ot=r.isWebGL2===!0&&(qe===n.INT||qe===n.UNSIGNED_INT||ue.gpuType===Wb);if(ue.isInterleavedBufferAttribute){const Ye=ue.data,Z=Ye.stride,xe=ue.offset;if(Ye.isInstancedInterleavedBuffer){for(let ve=0;ve<fe.locationSize;ve++)b(fe.location+ve,Ye.meshPerAttribute);G.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let ve=0;ve<fe.locationSize;ve++)A(fe.location+ve);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let ve=0;ve<fe.locationSize;ve++)C(fe.location+ve,be/fe.locationSize,qe,pe,Z*st,(xe+be/fe.locationSize*ve)*st,ot)}else{if(ue.isInstancedBufferAttribute){for(let Ye=0;Ye<fe.locationSize;Ye++)b(fe.location+Ye,ue.meshPerAttribute);G.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Ye=0;Ye<fe.locationSize;Ye++)A(fe.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let Ye=0;Ye<fe.locationSize;Ye++)C(fe.location+Ye,be/fe.locationSize,qe,pe,be*st,be/fe.locationSize*Ye*st,ot)}}else if(U!==void 0){const pe=U[oe];if(pe!==void 0)switch(pe.length){case 2:n.vertexAttrib2fv(fe.location,pe);break;case 3:n.vertexAttrib3fv(fe.location,pe);break;case 4:n.vertexAttrib4fv(fe.location,pe);break;default:n.vertexAttrib1fv(fe.location,pe)}}}}M()}function T(){z();for(const G in a){const Y=a[G];for(const ee in Y){const te=Y[ee];for(const V in te)v(te[V].object),delete te[V];delete Y[ee]}delete a[G]}}function P(G){if(a[G.id]===void 0)return;const Y=a[G.id];for(const ee in Y){const te=Y[ee];for(const V in te)v(te[V].object),delete te[V];delete Y[ee]}delete a[G.id]}function N(G){for(const Y in a){const ee=a[Y];if(ee[G.id]===void 0)continue;const te=ee[G.id];for(const V in te)v(te[V].object),delete te[V];delete ee[G.id]}}function z(){q(),u=!0,c!==l&&(c=l,m(c.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:z,resetDefaultState:q,dispose:T,releaseStatesOfGeometry:P,releaseStatesOfProgram:N,initAttributes:S,enableAttribute:A,disableUnusedAttributes:M}}function CW(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){n.drawArrays(s,u,d),t.update(d,s,1)}function l(u,d,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,u,d,p),t.update(d,s,p)}function c(u,d,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(u[v],d[v]);else{m.multiDrawArraysWEBGL(s,u,0,d,0,p);let v=0;for(let y=0;y<p;y++)v+=d[y];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function RW(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,A=o||e.has("OES_texture_float"),b=S&&A,M=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:A,floatVertexTextures:b,maxSamples:M}}function PW(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new ja,a=new Jt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=u(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,y=d.clipIntersection,_=d.clipShadows,g=n.get(d);if(!i||v===null||v.length===0||s&&!_)s?u(null):c();else{const x=s?0:r,S=x*4;let A=g.clippingState||null;l.value=A,A=u(v,p,S,m);for(let b=0;b!==S;++b)A[b]=t[b];g.clippingState=A,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,v){const y=d!==null?d.length:0;let _=null;if(y!==0){if(_=l.value,v!==!0||_===null){const g=m+y*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,A=m;S!==y;++S,A+=4)o.copy(d[S]).applyMatrix4(x,a),o.normal.toArray(_,A),_[A+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,_}}function BW(n){let e=new WeakMap;function t(o,a){return a===sh?o.mapping=Ea:a===Xm&&(o.mapping=xc),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===sh||a===Xm)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new aT(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class ua extends Ch{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bd=4,VP=[.125,.215,.35,.446,.526,.582],vu=20,QS=new ua,WP=new tt;let qS=null,eE=0,tE=0;const hu=(1+Math.sqrt(5))/2,jf=1/hu,$P=[new W(1,1,1),new W(-1,1,1),new W(1,1,-1),new W(-1,1,-1),new W(0,hu,jf),new W(0,hu,-jf),new W(jf,0,hu),new W(-jf,0,hu),new W(hu,jf,0),new W(-hu,jf,0)];class Fw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){qS=this._renderer.getRenderTarget(),eE=this._renderer.getActiveCubeFace(),tE=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qS,eE,tE),e.scissorTest=!1,Av(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ea||e.mapping===xc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qS=this._renderer.getRenderTarget(),eE=this._renderer.getActiveCubeFace(),tE=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:En,minFilter:En,generateMipmaps:!1,type:si,format:Ei,colorSpace:wa,depthBuffer:!1},i=XP(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=XP(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=IW(s)),this._blurMaterial=DW(s,e,t)}return i}_compileMaterial(e){const t=new Jn(this._lodPlanes[0],e);this._renderer.compile(t,QS)}_sceneToCubeUV(e,t,r,i){const a=new Yn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(WP),u.toneMapping=ma,u.autoClear=!1;const m=new Ls({name:"PMREM.Background",side:Nr,depthWrite:!1,depthTest:!1}),v=new Jn(new pf,m);let y=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,y=!0):(m.color.copy(WP),y=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;Av(i,x*S,g>2?S:0,S,S),u.setRenderTarget(i),y&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ea||e.mapping===xc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jP());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Jn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Av(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,QS)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=$P[(i-1)%$P.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Jn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*vu-1),y=s/v,_=isFinite(s)?1+Math.floor(u*y):vu;_>vu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${vu}`);const g=[];let x=0;for(let C=0;C<vu;++C){const B=C/y,T=Math.exp(-B*B/2);g.push(T),C===0?x+=T:C<_&&(x+=2*T)}for(let C=0;C<g.length;C++)g[C]=g[C]/x;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const A=this._sizeLods[i],b=3*A*(i>S-bd?i-S+bd:0),M=4*(this._cubeSize-A);Av(t,b,M,3*A,2*A),l.setRenderTarget(t),l.render(d,QS)}}function IW(n){const e=[],t=[],r=[];let i=n;const s=n-bd+1+VP.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-bd?l=VP[o-n+bd-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,v=6,y=3,_=2,g=1,x=new Float32Array(y*v*m),S=new Float32Array(_*v*m),A=new Float32Array(g*v*m);for(let M=0;M<m;M++){const C=M%3*2/3-1,B=M>2?0:-1,T=[C,B,0,C+2/3,B,0,C+2/3,B+1,0,C,B,0,C+2/3,B+1,0,C,B+1,0];x.set(T,y*v*M),S.set(p,_*v*M);const P=[M,M,M,M,M,M];A.set(P,g*v*M)}const b=new zt;b.setAttribute("position",new en(x,y)),b.setAttribute("uv",new en(S,_)),b.setAttribute("faceIndex",new en(A,g)),e.push(b),i>bd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function XP(n,e,t){const r=new Wn(n,e,t);return r.texture.mapping=Th,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Av(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function DW(n,e,t){const r=new Float32Array(vu),i=new W(0,1,0);return new _r({name:"SphericalGaussianBlur",defines:{n:vu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bi,depthTest:!1,depthWrite:!1})}function jP(){return new _r({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bi,depthTest:!1,depthWrite:!1})}function YP(){return new _r({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bi,depthTest:!1,depthWrite:!1})}function lT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function LW(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===sh||l===Xm,u=l===Ea||l===xc;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new Fw(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){t===null&&(t=new Fw(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function OW(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function FW(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const y=p.morphAttributes[v];for(let _=0,g=y.length;_<g;_++)e.remove(y[_])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const y=m[v];for(let _=0,g=y.length;_<g;_++)e.update(y[_],n.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,v=d.attributes.position;let y=0;if(m!==null){const x=m.array;y=m.version;for(let S=0,A=x.length;S<A;S+=3){const b=x[S+0],M=x[S+1],C=x[S+2];p.push(b,M,M,C,C,b)}}else if(v!==void 0){const x=v.array;y=v.version;for(let S=0,A=x.length/3-1;S<A;S+=3){const b=S+0,M=S+1,C=S+2;p.push(b,M,M,C,C,b)}}else return;const _=new(jF(p)?sT:iT)(p,1);_.version=y;const g=s.get(d);g&&e.remove(g),s.set(d,_)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function NW(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function d(m,v,y){if(y===0)return;let _,g;if(i)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,v,a,m*l,y),t.update(v,s,y)}function p(m,v,y){if(y===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<y;g++)this.render(m[g]/l,v[g]);else{_.multiDrawElementsWEBGL(s,v,0,a,m,0,y);let g=0;for(let x=0;x<y;x++)g+=v[x];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=p}function UW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function kW(n,e){return n[0]-e[0]}function zW(n,e){return Math.abs(e[1])-Math.abs(n[1])}function HW(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new An,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=v!==void 0?v.length:0;let _=s.get(u);if(_===void 0||_.count!==y){let Y=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",Y)};var m=Y;_!==void 0&&_.texture.dispose();const S=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],B=u.morphAttributes.color||[];let T=0;S===!0&&(T=1),A===!0&&(T=2),b===!0&&(T=3);let P=u.attributes.position.count*T,N=1;P>e.maxTextureSize&&(N=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const z=new Float32Array(P*N*4*y),q=new Ax(z,P,N,y);q.type=Zr,q.needsUpdate=!0;const G=T*4;for(let ee=0;ee<y;ee++){const te=M[ee],V=C[ee],K=B[ee],U=P*N*4*ee;for(let oe=0;oe<te.count;oe++){const fe=oe*G;S===!0&&(o.fromBufferAttribute(te,oe),z[U+fe+0]=o.x,z[U+fe+1]=o.y,z[U+fe+2]=o.z,z[U+fe+3]=0),A===!0&&(o.fromBufferAttribute(V,oe),z[U+fe+4]=o.x,z[U+fe+5]=o.y,z[U+fe+6]=o.z,z[U+fe+7]=0),b===!0&&(o.fromBufferAttribute(K,oe),z[U+fe+8]=o.x,z[U+fe+9]=o.y,z[U+fe+10]=o.z,z[U+fe+11]=K.itemSize===4?o.w:1)}}_={count:y,texture:q,size:new Se(P,N)},s.set(u,_),u.addEventListener("dispose",Y)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const x=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",x),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let y=r[u.id];if(y===void 0||y.length!==v){y=[];for(let A=0;A<v;A++)y[A]=[A,0];r[u.id]=y}for(let A=0;A<v;A++){const b=y[A];b[0]=A,b[1]=p[A]}y.sort(zW);for(let A=0;A<8;A++)A<v&&y[A][1]?(a[A][0]=y[A][0],a[A][1]=y[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(kW);const _=u.morphAttributes.position,g=u.morphAttributes.normal;let x=0;for(let A=0;A<8;A++){const b=a[A],M=b[0],C=b[1];M!==Number.MAX_SAFE_INTEGER&&C?(_&&u.getAttribute("morphTarget"+A)!==_[M]&&u.setAttribute("morphTarget"+A,_[M]),g&&u.getAttribute("morphNormal"+A)!==g[M]&&u.setAttribute("morphNormal"+A,g[M]),i[A]=C,x+=C):(_&&u.hasAttribute("morphTarget"+A)===!0&&u.deleteAttribute("morphTarget"+A),g&&u.hasAttribute("morphNormal"+A)===!0&&u.deleteAttribute("morphNormal"+A),i[A]=0)}const S=u.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function GW(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class wx extends In{constructor(e,t,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:hc,u!==hc&&u!==Ec)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===hc&&(r=ca),r===void 0&&u===Ec&&(r=il),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Cn,this.minFilter=l!==void 0?l:Cn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const eN=new In,tN=new wx(1,1);tN.compareFunction=eT;const nN=new Ax,rN=new rT,iN=new Rg,JP=[],KP=[],ZP=new Float32Array(16),QP=new Float32Array(9),qP=new Float32Array(4);function Ph(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=JP[i];if(s===void 0&&(s=new Float32Array(i),JP[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ur(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function kr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Mx(n,e){let t=KP[e];t===void 0&&(t=new Int32Array(e),KP[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function VW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function WW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2fv(this.addr,e),kr(t,e)}}function $W(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ur(t,e))return;n.uniform3fv(this.addr,e),kr(t,e)}}function XW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4fv(this.addr,e),kr(t,e)}}function jW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ur(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),kr(t,e)}else{if(Ur(t,r))return;qP.set(r),n.uniformMatrix2fv(this.addr,!1,qP),kr(t,r)}}function YW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ur(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),kr(t,e)}else{if(Ur(t,r))return;QP.set(r),n.uniformMatrix3fv(this.addr,!1,QP),kr(t,r)}}function JW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ur(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),kr(t,e)}else{if(Ur(t,r))return;ZP.set(r),n.uniformMatrix4fv(this.addr,!1,ZP),kr(t,r)}}function KW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ZW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2iv(this.addr,e),kr(t,e)}}function QW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;n.uniform3iv(this.addr,e),kr(t,e)}}function qW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4iv(this.addr,e),kr(t,e)}}function e$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function t$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ur(t,e))return;n.uniform2uiv(this.addr,e),kr(t,e)}}function n$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ur(t,e))return;n.uniform3uiv(this.addr,e),kr(t,e)}}function r$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ur(t,e))return;n.uniform4uiv(this.addr,e),kr(t,e)}}function i$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?tN:eN;t.setTexture2D(e||s,i)}function s$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||rN,i)}function o$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||iN,i)}function a$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||nN,i)}function l$(n){switch(n){case 5126:return VW;case 35664:return WW;case 35665:return $W;case 35666:return XW;case 35674:return jW;case 35675:return YW;case 35676:return JW;case 5124:case 35670:return KW;case 35667:case 35671:return ZW;case 35668:case 35672:return QW;case 35669:case 35673:return qW;case 5125:return e$;case 36294:return t$;case 36295:return n$;case 36296:return r$;case 35678:case 36198:case 36298:case 36306:case 35682:return i$;case 35679:case 36299:case 36307:return s$;case 35680:case 36300:case 36308:case 36293:return o$;case 36289:case 36303:case 36311:case 36292:return a$}}function c$(n,e){n.uniform1fv(this.addr,e)}function u$(n,e){const t=Ph(e,this.size,2);n.uniform2fv(this.addr,t)}function f$(n,e){const t=Ph(e,this.size,3);n.uniform3fv(this.addr,t)}function d$(n,e){const t=Ph(e,this.size,4);n.uniform4fv(this.addr,t)}function h$(n,e){const t=Ph(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function p$(n,e){const t=Ph(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function m$(n,e){const t=Ph(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function g$(n,e){n.uniform1iv(this.addr,e)}function v$(n,e){n.uniform2iv(this.addr,e)}function y$(n,e){n.uniform3iv(this.addr,e)}function _$(n,e){n.uniform4iv(this.addr,e)}function x$(n,e){n.uniform1uiv(this.addr,e)}function S$(n,e){n.uniform2uiv(this.addr,e)}function E$(n,e){n.uniform3uiv(this.addr,e)}function A$(n,e){n.uniform4uiv(this.addr,e)}function w$(n,e,t){const r=this.cache,i=e.length,s=Mx(t,i);Ur(r,s)||(n.uniform1iv(this.addr,s),kr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||eN,s[o])}function M$(n,e,t){const r=this.cache,i=e.length,s=Mx(t,i);Ur(r,s)||(n.uniform1iv(this.addr,s),kr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||rN,s[o])}function b$(n,e,t){const r=this.cache,i=e.length,s=Mx(t,i);Ur(r,s)||(n.uniform1iv(this.addr,s),kr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||iN,s[o])}function T$(n,e,t){const r=this.cache,i=e.length,s=Mx(t,i);Ur(r,s)||(n.uniform1iv(this.addr,s),kr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||nN,s[o])}function C$(n){switch(n){case 5126:return c$;case 35664:return u$;case 35665:return f$;case 35666:return d$;case 35674:return h$;case 35675:return p$;case 35676:return m$;case 5124:case 35670:return g$;case 35667:case 35671:return v$;case 35668:case 35672:return y$;case 35669:case 35673:return _$;case 5125:return x$;case 36294:return S$;case 36295:return E$;case 36296:return A$;case 35678:case 36198:case 36298:case 36306:case 35682:return w$;case 35679:case 36299:case 36307:return M$;case 35680:case 36300:case 36308:case 36293:return b$;case 36289:case 36303:case 36311:case 36292:return T$}}class R${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=l$(t.type)}}class P${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=C$(t.type)}}class B${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const nE=/(\w+)(\])?(\[|\.)?/g;function eB(n,e){n.seq.push(e),n.map[e.id]=e}function I$(n,e,t){const r=n.name,i=r.length;for(nE.lastIndex=0;;){const s=nE.exec(r),o=nE.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){eB(t,c===void 0?new R$(a,n,e):new P$(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new B$(a),eB(t,d)),t=d}}}class Uy{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);I$(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function tB(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const D$=37297;let L$=0;function O$(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function F$(n){const e=Mn.getPrimaries(Mn.workingColorSpace),t=Mn.getPrimaries(n);let r;switch(e===t?r="":e===Zm&&t===Km?r="LinearDisplayP3ToLinearSRGB":e===Km&&t===Zm&&(r="LinearSRGBToLinearDisplayP3"),n){case wa:case Tg:return[r,"LinearTransferOETF"];case Or:case Ex:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function nB(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+O$(n.getShaderSource(e),o)}else return i}function N$(n,e){const t=F$(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function U$(n,e){let t;switch(e){case EF:t="Linear";break;case AF:t="Reinhard";break;case wF:t="OptimizedCineon";break;case Vb:t="ACESFilmic";break;case MF:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function k$(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xp).join(`
`)}function z$(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function H$(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Xp(n){return n!==""}function rB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const G$=/^[ \t]*#include +<([\w\d./]+)>/gm;function Nw(n){return n.replace(G$,W$)}const V$=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function W$(n,e){let t=Xt[e];if(t===void 0){const r=V$.get(e);if(r!==void 0)t=Xt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Nw(t)}const $$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sB(n){return n.replace($$,X$)}function X$(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function oB(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function j$(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===vx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===lm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Lo&&(e="SHADOWMAP_TYPE_VSM"),e}function Y$(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ea:case xc:e="ENVMAP_TYPE_CUBE";break;case Th:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J$(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case xc:e="ENVMAP_MODE_REFRACTION";break}return e}function K$(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Mg:e="ENVMAP_BLENDING_MULTIPLY";break;case xF:e="ENVMAP_BLENDING_MIX";break;case SF:e="ENVMAP_BLENDING_ADD";break}return e}function Z$(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Q$(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=j$(t),c=Y$(t),u=J$(t),d=K$(t),p=Z$(t),m=t.isWebGL2?"":k$(t),v=z$(s),y=i.createProgram();let _,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Xp).join(`
`),_.length>0&&(_+=`
`),g=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Xp).join(`
`),g.length>0&&(g+=`
`)):(_=[oB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xp).join(`
`),g=[m,oB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ma?"#define TONE_MAPPING":"",t.toneMapping!==ma?Xt.tonemapping_pars_fragment:"",t.toneMapping!==ma?U$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xt.colorspace_pars_fragment,N$("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xp).join(`
`)),o=Nw(o),o=rB(o,t),o=iB(o,t),a=Nw(a),a=rB(a,t),a=iB(a,t),o=sB(o),a=sB(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Lw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Lw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=x+_+o,A=x+g+a,b=tB(i,i.VERTEX_SHADER,S),M=tB(i,i.FRAGMENT_SHADER,A);i.attachShader(y,b),i.attachShader(y,M),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function C(N){if(n.debug.checkShaderErrors){const z=i.getProgramInfoLog(y).trim(),q=i.getShaderInfoLog(b).trim(),G=i.getShaderInfoLog(M).trim();let Y=!0,ee=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(Y=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,b,M);else{const te=nB(i,b,"vertex"),V=nB(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+z+`
`+te+`
`+V)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(q===""||G==="")&&(ee=!1);ee&&(N.diagnostics={runnable:Y,programLog:z,vertexShader:{log:q,prefix:_},fragmentShader:{log:G,prefix:g}})}i.deleteShader(b),i.deleteShader(M),B=new Uy(i,y),T=H$(i,y)}let B;this.getUniforms=function(){return B===void 0&&C(this),B};let T;this.getAttributes=function(){return T===void 0&&C(this),T};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(y,D$)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=L$++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=M,this}let q$=0;class e7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new t7(e),t.set(e,r)),r}}class t7{constructor(e){this.id=q$++,this.code=e,this.usedTimes=0}}function n7(n,e,t,r,i,s,o){const a=new Du,l=new e7,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T){return T===0?"uv":`uv${T}`}function _(T,P,N,z,q){const G=z.fog,Y=q.geometry,ee=T.isMeshStandardMaterial?z.environment:null,te=(T.isMeshStandardMaterial?t:e).get(T.envMap||ee),V=te&&te.mapping===Th?te.image.height:null,K=v[T.type];T.precision!==null&&(m=i.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const U=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,oe=U!==void 0?U.length:0;let fe=0;Y.morphAttributes.position!==void 0&&(fe=1),Y.morphAttributes.normal!==void 0&&(fe=2),Y.morphAttributes.color!==void 0&&(fe=3);let ue,pe,be,Ae;if(K){const At=No[K];ue=At.vertexShader,pe=At.fragmentShader}else ue=T.vertexShader,pe=T.fragmentShader,l.update(T),be=l.getVertexShaderID(T),Ae=l.getFragmentShaderID(T);const Le=n.getRenderTarget(),qe=q.isInstancedMesh===!0,st=q.isBatchedMesh===!0,ot=!!T.map,Ye=!!T.matcap,Z=!!te,xe=!!T.aoMap,ve=!!T.lightMap,Fe=!!T.bumpMap,Ce=!!T.normalMap,ae=!!T.displacementMap,Ve=!!T.emissiveMap,et=!!T.metalnessMap,pt=!!T.roughnessMap,ut=T.anisotropy>0,$t=T.clearcoat>0,H=T.iridescence>0,F=T.sheen>0,le=T.transmission>0,Pe=ut&&!!T.anisotropyMap,De=$t&&!!T.clearcoatMap,Ue=$t&&!!T.clearcoatNormalMap,nt=$t&&!!T.clearcoatRoughnessMap,He=H&&!!T.iridescenceMap,$e=H&&!!T.iridescenceThicknessMap,dt=F&&!!T.sheenColorMap,Rt=F&&!!T.sheenRoughnessMap,Oe=!!T.specularMap,Ot=!!T.specularColorMap,ne=!!T.specularIntensityMap,me=le&&!!T.transmissionMap,Ie=le&&!!T.thicknessMap,Me=!!T.gradientMap,Re=!!T.alphaMap,se=T.alphaTest>0,Xe=!!T.alphaHash,ke=!!T.extensions,Te=!!Y.attributes.uv1,Ge=!!Y.attributes.uv2,ft=!!Y.attributes.uv3;let Qe=ma;return T.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(Qe=n.toneMapping),{isWebGL2:u,shaderID:K,shaderType:T.type,shaderName:T.name,vertexShader:ue,fragmentShader:pe,defines:T.defines,customVertexShaderID:be,customFragmentShaderID:Ae,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,batching:st,instancing:qe,instancingColor:qe&&q.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Le===null?n.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:wa,map:ot,matcap:Ye,envMap:Z,envMapMode:Z&&te.mapping,envMapCubeUVHeight:V,aoMap:xe,lightMap:ve,bumpMap:Fe,normalMap:Ce,displacementMap:p&&ae,emissiveMap:Ve,normalMapObjectSpace:Ce&&T.normalMapType===kF,normalMapTangentSpace:Ce&&T.normalMapType===Fc,metalnessMap:et,roughnessMap:pt,anisotropy:ut,anisotropyMap:Pe,clearcoat:$t,clearcoatMap:De,clearcoatNormalMap:Ue,clearcoatRoughnessMap:nt,iridescence:H,iridescenceMap:He,iridescenceThicknessMap:$e,sheen:F,sheenColorMap:dt,sheenRoughnessMap:Rt,specularMap:Oe,specularColorMap:Ot,specularIntensityMap:ne,transmission:le,transmissionMap:me,thicknessMap:Ie,gradientMap:Me,opaque:T.transparent===!1&&T.blending===Bu,alphaMap:Re,alphaTest:se,alphaHash:Xe,combine:T.combine,mapUv:ot&&y(T.map.channel),aoMapUv:xe&&y(T.aoMap.channel),lightMapUv:ve&&y(T.lightMap.channel),bumpMapUv:Fe&&y(T.bumpMap.channel),normalMapUv:Ce&&y(T.normalMap.channel),displacementMapUv:ae&&y(T.displacementMap.channel),emissiveMapUv:Ve&&y(T.emissiveMap.channel),metalnessMapUv:et&&y(T.metalnessMap.channel),roughnessMapUv:pt&&y(T.roughnessMap.channel),anisotropyMapUv:Pe&&y(T.anisotropyMap.channel),clearcoatMapUv:De&&y(T.clearcoatMap.channel),clearcoatNormalMapUv:Ue&&y(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&y(T.clearcoatRoughnessMap.channel),iridescenceMapUv:He&&y(T.iridescenceMap.channel),iridescenceThicknessMapUv:$e&&y(T.iridescenceThicknessMap.channel),sheenColorMapUv:dt&&y(T.sheenColorMap.channel),sheenRoughnessMapUv:Rt&&y(T.sheenRoughnessMap.channel),specularMapUv:Oe&&y(T.specularMap.channel),specularColorMapUv:Ot&&y(T.specularColorMap.channel),specularIntensityMapUv:ne&&y(T.specularIntensityMap.channel),transmissionMapUv:me&&y(T.transmissionMap.channel),thicknessMapUv:Ie&&y(T.thicknessMap.channel),alphaMapUv:Re&&y(T.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(Ce||ut),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,vertexUv1s:Te,vertexUv2s:Ge,vertexUv3s:ft,pointsUvs:q.isPoints===!0&&!!Y.attributes.uv&&(ot||Re),fog:!!G,useFog:T.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:q.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:fe,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Qe,useLegacyLights:n._useLegacyLights,decodeVideoTexture:ot&&T.map.isVideoTexture===!0&&Mn.getTransfer(T.map.colorSpace)===On,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Si,flipSided:T.side===Nr,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:ke&&T.extensions.derivatives===!0,extensionFragDepth:ke&&T.extensions.fragDepth===!0,extensionDrawBuffers:ke&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:ke&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}}function g(T){const P=[];if(T.shaderID?P.push(T.shaderID):(P.push(T.customVertexShaderID),P.push(T.customFragmentShaderID)),T.defines!==void 0)for(const N in T.defines)P.push(N),P.push(T.defines[N]);return T.isRawShaderMaterial===!1&&(x(P,T),S(P,T),P.push(n.outputColorSpace)),P.push(T.customProgramCacheKey),P.join()}function x(T,P){T.push(P.precision),T.push(P.outputColorSpace),T.push(P.envMapMode),T.push(P.envMapCubeUVHeight),T.push(P.mapUv),T.push(P.alphaMapUv),T.push(P.lightMapUv),T.push(P.aoMapUv),T.push(P.bumpMapUv),T.push(P.normalMapUv),T.push(P.displacementMapUv),T.push(P.emissiveMapUv),T.push(P.metalnessMapUv),T.push(P.roughnessMapUv),T.push(P.anisotropyMapUv),T.push(P.clearcoatMapUv),T.push(P.clearcoatNormalMapUv),T.push(P.clearcoatRoughnessMapUv),T.push(P.iridescenceMapUv),T.push(P.iridescenceThicknessMapUv),T.push(P.sheenColorMapUv),T.push(P.sheenRoughnessMapUv),T.push(P.specularMapUv),T.push(P.specularColorMapUv),T.push(P.specularIntensityMapUv),T.push(P.transmissionMapUv),T.push(P.thicknessMapUv),T.push(P.combine),T.push(P.fogExp2),T.push(P.sizeAttenuation),T.push(P.morphTargetsCount),T.push(P.morphAttributeCount),T.push(P.numDirLights),T.push(P.numPointLights),T.push(P.numSpotLights),T.push(P.numSpotLightMaps),T.push(P.numHemiLights),T.push(P.numRectAreaLights),T.push(P.numDirLightShadows),T.push(P.numPointLightShadows),T.push(P.numSpotLightShadows),T.push(P.numSpotLightShadowsWithMaps),T.push(P.numLightProbes),T.push(P.shadowMapType),T.push(P.toneMapping),T.push(P.numClippingPlanes),T.push(P.numClipIntersection),T.push(P.depthPacking)}function S(T,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),T.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.skinning&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.useLegacyLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),T.push(a.mask)}function A(T){const P=v[T.type];let N;if(P){const z=No[P];N=oT.clone(z.uniforms)}else N=T.uniforms;return N}function b(T,P){let N;for(let z=0,q=c.length;z<q;z++){const G=c[z];if(G.cacheKey===P){N=G,++N.usedTimes;break}}return N===void 0&&(N=new Q$(n,P,T,s),c.push(N)),N}function M(T){if(--T.usedTimes===0){const P=c.indexOf(T);c[P]=c[c.length-1],c.pop(),T.destroy()}}function C(T){l.remove(T)}function B(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:A,acquireProgram:b,releaseProgram:M,releaseShaderCache:C,programs:c,dispose:B}}function r7(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function i7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function aB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function lB(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,v,y,_){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:y,group:_},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=y,g.group=_),e++,g}function a(d,p,m,v,y,_){const g=o(d,p,m,v,y,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(d,p,m,v,y,_){const g=o(d,p,m,v,y,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(d,p){t.length>1&&t.sort(d||i7),r.length>1&&r.sort(p||aB),i.length>1&&i.sort(p||aB)}function u(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function s7(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new lB,n.set(r,[o])):i>=s.length?(o=new lB,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function o7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new W,color:new tt};break;case"SpotLight":t={position:new W,direction:new W,color:new tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new W,color:new tt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new W,skyColor:new tt,groundColor:new tt};break;case"RectAreaLight":t={color:new tt,position:new W,halfWidth:new W,halfHeight:new W};break}return n[e.id]=t,t}}}function a7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let l7=0;function c7(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function u7(n,e){const t=new o7,r=a7(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new W);const s=new W,o=new Tt,a=new Tt;function l(u,d){let p=0,m=0,v=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let y=0,_=0,g=0,x=0,S=0,A=0,b=0,M=0,C=0,B=0,T=0;u.sort(c7);const P=d===!0?Math.PI:1;for(let z=0,q=u.length;z<q;z++){const G=u[z],Y=G.color,ee=G.intensity,te=G.distance,V=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)p+=Y.r*ee*P,m+=Y.g*ee*P,v+=Y.b*ee*P;else if(G.isLightProbe){for(let K=0;K<9;K++)i.probe[K].addScaledVector(G.sh.coefficients[K],ee);T++}else if(G.isDirectionalLight){const K=t.get(G);if(K.color.copy(G.color).multiplyScalar(G.intensity*P),G.castShadow){const U=G.shadow,oe=r.get(G);oe.shadowBias=U.bias,oe.shadowNormalBias=U.normalBias,oe.shadowRadius=U.radius,oe.shadowMapSize=U.mapSize,i.directionalShadow[y]=oe,i.directionalShadowMap[y]=V,i.directionalShadowMatrix[y]=G.shadow.matrix,A++}i.directional[y]=K,y++}else if(G.isSpotLight){const K=t.get(G);K.position.setFromMatrixPosition(G.matrixWorld),K.color.copy(Y).multiplyScalar(ee*P),K.distance=te,K.coneCos=Math.cos(G.angle),K.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),K.decay=G.decay,i.spot[g]=K;const U=G.shadow;if(G.map&&(i.spotLightMap[C]=G.map,C++,U.updateMatrices(G),G.castShadow&&B++),i.spotLightMatrix[g]=U.matrix,G.castShadow){const oe=r.get(G);oe.shadowBias=U.bias,oe.shadowNormalBias=U.normalBias,oe.shadowRadius=U.radius,oe.shadowMapSize=U.mapSize,i.spotShadow[g]=oe,i.spotShadowMap[g]=V,M++}g++}else if(G.isRectAreaLight){const K=t.get(G);K.color.copy(Y).multiplyScalar(ee),K.halfWidth.set(G.width*.5,0,0),K.halfHeight.set(0,G.height*.5,0),i.rectArea[x]=K,x++}else if(G.isPointLight){const K=t.get(G);if(K.color.copy(G.color).multiplyScalar(G.intensity*P),K.distance=G.distance,K.decay=G.decay,G.castShadow){const U=G.shadow,oe=r.get(G);oe.shadowBias=U.bias,oe.shadowNormalBias=U.normalBias,oe.shadowRadius=U.radius,oe.shadowMapSize=U.mapSize,oe.shadowCameraNear=U.camera.near,oe.shadowCameraFar=U.camera.far,i.pointShadow[_]=oe,i.pointShadowMap[_]=V,i.pointShadowMatrix[_]=G.shadow.matrix,b++}i.point[_]=K,_++}else if(G.isHemisphereLight){const K=t.get(G);K.skyColor.copy(G.color).multiplyScalar(ee*P),K.groundColor.copy(G.groundColor).multiplyScalar(ee*P),i.hemi[S]=K,S++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const N=i.hash;(N.directionalLength!==y||N.pointLength!==_||N.spotLength!==g||N.rectAreaLength!==x||N.hemiLength!==S||N.numDirectionalShadows!==A||N.numPointShadows!==b||N.numSpotShadows!==M||N.numSpotMaps!==C||N.numLightProbes!==T)&&(i.directional.length=y,i.spot.length=g,i.rectArea.length=x,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=M+C-B,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=T,N.directionalLength=y,N.pointLength=_,N.spotLength=g,N.rectAreaLength=x,N.hemiLength=S,N.numDirectionalShadows=A,N.numPointShadows=b,N.numSpotShadows=M,N.numSpotMaps=C,N.numLightProbes=T,i.version=l7++)}function c(u,d){let p=0,m=0,v=0,y=0,_=0;const g=d.matrixWorldInverse;for(let x=0,S=u.length;x<S;x++){const A=u[x];if(A.isDirectionalLight){const b=i.directional[p];b.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),p++}else if(A.isSpotLight){const b=i.spot[v];b.position.setFromMatrixPosition(A.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),v++}else if(A.isRectAreaLight){const b=i.rectArea[y];b.position.setFromMatrixPosition(A.matrixWorld),b.position.applyMatrix4(g),a.identity(),o.copy(A.matrixWorld),o.premultiply(g),a.extractRotation(o),b.halfWidth.set(A.width*.5,0,0),b.halfHeight.set(0,A.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),y++}else if(A.isPointLight){const b=i.point[m];b.position.setFromMatrixPosition(A.matrixWorld),b.position.applyMatrix4(g),m++}else if(A.isHemisphereLight){const b=i.hemi[_];b.direction.setFromMatrixPosition(A.matrixWorld),b.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:i}}function cB(n,e){const t=new u7(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function f7(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new cB(n,e),t.set(s,[l])):o>=a.length?(l=new cB(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class bx extends yr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Oc,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class cT extends yr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const d7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,h7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function p7(n,e,t){let r=new Pg;const i=new Se,s=new Se,o=new An,a=new bx({depthPacking:UF}),l=new cT,c={},u=t.maxTextureSize,d={[Vo]:Nr,[Nr]:Vo,[Si]:Si},p=new _r({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:d7,fragmentShader:h7}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new zt;v.setAttribute("position",new en(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Jn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vx;let g=this.type;this.render=function(b,M,C){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||b.length===0)return;const B=n.getRenderTarget(),T=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),N=n.state;N.setBlending(bi),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const z=g!==Lo&&this.type===Lo,q=g===Lo&&this.type!==Lo;for(let G=0,Y=b.length;G<Y;G++){const ee=b[G],te=ee.shadow;if(te===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(te.autoUpdate===!1&&te.needsUpdate===!1)continue;i.copy(te.mapSize);const V=te.getFrameExtents();if(i.multiply(V),s.copy(te.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/V.x),i.x=s.x*V.x,te.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/V.y),i.y=s.y*V.y,te.mapSize.y=s.y)),te.map===null||z===!0||q===!0){const U=this.type!==Lo?{minFilter:Cn,magFilter:Cn}:{};te.map!==null&&te.map.dispose(),te.map=new Wn(i.x,i.y,U),te.map.texture.name=ee.name+".shadowMap",te.camera.updateProjectionMatrix()}n.setRenderTarget(te.map),n.clear();const K=te.getViewportCount();for(let U=0;U<K;U++){const oe=te.getViewport(U);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),N.viewport(o),te.updateMatrices(ee,U),r=te.getFrustum(),A(M,C,te.camera,ee,this.type)}te.isPointLightShadow!==!0&&this.type===Lo&&x(te,C),te.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(B,T,P)};function x(b,M){const C=e.update(y);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Wn(i.x,i.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(M,null,C,p,y,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(M,null,C,m,y,null)}function S(b,M,C,B){let T=null;const P=C.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0)T=P;else if(T=C.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const N=T.uuid,z=M.uuid;let q=c[N];q===void 0&&(q={},c[N]=q);let G=q[z];G===void 0&&(G=T.clone(),q[z]=G),T=G}if(T.visible=M.visible,T.wireframe=M.wireframe,B===Lo?T.side=M.shadowSide!==null?M.shadowSide:M.side:T.side=M.shadowSide!==null?M.shadowSide:d[M.side],T.alphaMap=M.alphaMap,T.alphaTest=M.alphaTest,T.map=M.map,T.clipShadows=M.clipShadows,T.clippingPlanes=M.clippingPlanes,T.clipIntersection=M.clipIntersection,T.displacementMap=M.displacementMap,T.displacementScale=M.displacementScale,T.displacementBias=M.displacementBias,T.wireframeLinewidth=M.wireframeLinewidth,T.linewidth=M.linewidth,C.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const N=n.properties.get(T);N.light=C}return T}function A(b,M,C,B,T){if(b.visible===!1)return;if(b.layers.test(M.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===Lo)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,b.matrixWorld);const z=e.update(b),q=b.material;if(Array.isArray(q)){const G=z.groups;for(let Y=0,ee=G.length;Y<ee;Y++){const te=G[Y],V=q[te.materialIndex];if(V&&V.visible){const K=S(b,V,B,T);b.onBeforeShadow(n,b,M,C,z,K,te),n.renderBufferDirect(C,null,z,K,b,te),b.onAfterShadow(n,b,M,C,z,K,te)}}}else if(q.visible){const G=S(b,q,B,T);b.onBeforeShadow(n,b,M,C,z,G,null),n.renderBufferDirect(C,null,z,G,b,null),b.onAfterShadow(n,b,M,C,z,G,null)}}const N=b.children;for(let z=0,q=N.length;z<q;z++)A(N[z],M,C,B,T)}}function m7(n,e,t){const r=t.isWebGL2;function i(){let se=!1;const Xe=new An;let ke=null;const Te=new An(0,0,0,0);return{setMask:function(Ge){ke!==Ge&&!se&&(n.colorMask(Ge,Ge,Ge,Ge),ke=Ge)},setLocked:function(Ge){se=Ge},setClear:function(Ge,ft,Qe,rt,At){At===!0&&(Ge*=rt,ft*=rt,Qe*=rt),Xe.set(Ge,ft,Qe,rt),Te.equals(Xe)===!1&&(n.clearColor(Ge,ft,Qe,rt),Te.copy(Xe))},reset:function(){se=!1,ke=null,Te.set(-1,0,0,0)}}}function s(){let se=!1,Xe=null,ke=null,Te=null;return{setTest:function(Ge){Ge?st(n.DEPTH_TEST):ot(n.DEPTH_TEST)},setMask:function(Ge){Xe!==Ge&&!se&&(n.depthMask(Ge),Xe=Ge)},setFunc:function(Ge){if(ke!==Ge){switch(Ge){case hF:n.depthFunc(n.NEVER);break;case pF:n.depthFunc(n.ALWAYS);break;case mF:n.depthFunc(n.LESS);break;case $m:n.depthFunc(n.LEQUAL);break;case gF:n.depthFunc(n.EQUAL);break;case vF:n.depthFunc(n.GEQUAL);break;case yF:n.depthFunc(n.GREATER);break;case _F:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ke=Ge}},setLocked:function(Ge){se=Ge},setClear:function(Ge){Te!==Ge&&(n.clearDepth(Ge),Te=Ge)},reset:function(){se=!1,Xe=null,ke=null,Te=null}}}function o(){let se=!1,Xe=null,ke=null,Te=null,Ge=null,ft=null,Qe=null,rt=null,At=null;return{setTest:function(Ct){se||(Ct?st(n.STENCIL_TEST):ot(n.STENCIL_TEST))},setMask:function(Ct){Xe!==Ct&&!se&&(n.stencilMask(Ct),Xe=Ct)},setFunc:function(Ct,Ke,Pt){(ke!==Ct||Te!==Ke||Ge!==Pt)&&(n.stencilFunc(Ct,Ke,Pt),ke=Ct,Te=Ke,Ge=Pt)},setOp:function(Ct,Ke,Pt){(ft!==Ct||Qe!==Ke||rt!==Pt)&&(n.stencilOp(Ct,Ke,Pt),ft=Ct,Qe=Ke,rt=Pt)},setLocked:function(Ct){se=Ct},setClear:function(Ct){At!==Ct&&(n.clearStencil(Ct),At=Ct)},reset:function(){se=!1,Xe=null,ke=null,Te=null,Ge=null,ft=null,Qe=null,rt=null,At=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,y=[],_=null,g=!1,x=null,S=null,A=null,b=null,M=null,C=null,B=null,T=new tt(0,0,0),P=0,N=!1,z=null,q=null,G=null,Y=null,ee=null;const te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,K=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(U)[1]),V=K>=1):U.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),V=K>=2);let oe=null,fe={};const ue=n.getParameter(n.SCISSOR_BOX),pe=n.getParameter(n.VIEWPORT),be=new An().fromArray(ue),Ae=new An().fromArray(pe);function Le(se,Xe,ke,Te){const Ge=new Uint8Array(4),ft=n.createTexture();n.bindTexture(se,ft),n.texParameteri(se,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(se,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Qe=0;Qe<ke;Qe++)r&&(se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY)?n.texImage3D(Xe,0,n.RGBA,1,1,Te,0,n.RGBA,n.UNSIGNED_BYTE,Ge):n.texImage2D(Xe+Qe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ge);return ft}const qe={};qe[n.TEXTURE_2D]=Le(n.TEXTURE_2D,n.TEXTURE_2D,1),qe[n.TEXTURE_CUBE_MAP]=Le(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(qe[n.TEXTURE_2D_ARRAY]=Le(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),qe[n.TEXTURE_3D]=Le(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),st(n.DEPTH_TEST),l.setFunc($m),Ve(!1),et(tw),st(n.CULL_FACE),Ce(bi);function st(se){p[se]!==!0&&(n.enable(se),p[se]=!0)}function ot(se){p[se]!==!1&&(n.disable(se),p[se]=!1)}function Ye(se,Xe){return m[se]!==Xe?(n.bindFramebuffer(se,Xe),m[se]=Xe,r&&(se===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Xe),se===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Xe)),!0):!1}function Z(se,Xe){let ke=y,Te=!1;if(se)if(ke=v.get(Xe),ke===void 0&&(ke=[],v.set(Xe,ke)),se.isWebGLMultipleRenderTargets){const Ge=se.texture;if(ke.length!==Ge.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let ft=0,Qe=Ge.length;ft<Qe;ft++)ke[ft]=n.COLOR_ATTACHMENT0+ft;ke.length=Ge.length,Te=!0}}else ke[0]!==n.COLOR_ATTACHMENT0&&(ke[0]=n.COLOR_ATTACHMENT0,Te=!0);else ke[0]!==n.BACK&&(ke[0]=n.BACK,Te=!0);Te&&(t.isWebGL2?n.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function xe(se){return _!==se?(n.useProgram(se),_=se,!0):!1}const ve={[Kl]:n.FUNC_ADD,[Q3]:n.FUNC_SUBTRACT,[q3]:n.FUNC_REVERSE_SUBTRACT};if(r)ve[sw]=n.MIN,ve[ow]=n.MAX;else{const se=e.get("EXT_blend_minmax");se!==null&&(ve[sw]=se.MIN_EXT,ve[ow]=se.MAX_EXT)}const Fe={[eF]:n.ZERO,[tF]:n.ONE,[nF]:n.SRC_COLOR,[E_]:n.SRC_ALPHA,[lF]:n.SRC_ALPHA_SATURATE,[oF]:n.DST_COLOR,[iF]:n.DST_ALPHA,[rF]:n.ONE_MINUS_SRC_COLOR,[A_]:n.ONE_MINUS_SRC_ALPHA,[aF]:n.ONE_MINUS_DST_COLOR,[sF]:n.ONE_MINUS_DST_ALPHA,[cF]:n.CONSTANT_COLOR,[uF]:n.ONE_MINUS_CONSTANT_COLOR,[fF]:n.CONSTANT_ALPHA,[dF]:n.ONE_MINUS_CONSTANT_ALPHA};function Ce(se,Xe,ke,Te,Ge,ft,Qe,rt,At,Ct){if(se===bi){g===!0&&(ot(n.BLEND),g=!1);return}if(g===!1&&(st(n.BLEND),g=!0),se!==Z3){if(se!==x||Ct!==N){if((S!==Kl||M!==Kl)&&(n.blendEquation(n.FUNC_ADD),S=Kl,M=Kl),Ct)switch(se){case Bu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nw:n.blendFunc(n.ONE,n.ONE);break;case rw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case Bu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case rw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}A=null,b=null,C=null,B=null,T.set(0,0,0),P=0,x=se,N=Ct}return}Ge=Ge||Xe,ft=ft||ke,Qe=Qe||Te,(Xe!==S||Ge!==M)&&(n.blendEquationSeparate(ve[Xe],ve[Ge]),S=Xe,M=Ge),(ke!==A||Te!==b||ft!==C||Qe!==B)&&(n.blendFuncSeparate(Fe[ke],Fe[Te],Fe[ft],Fe[Qe]),A=ke,b=Te,C=ft,B=Qe),(rt.equals(T)===!1||At!==P)&&(n.blendColor(rt.r,rt.g,rt.b,At),T.copy(rt),P=At),x=se,N=!1}function ae(se,Xe){se.side===Si?ot(n.CULL_FACE):st(n.CULL_FACE);let ke=se.side===Nr;Xe&&(ke=!ke),Ve(ke),se.blending===Bu&&se.transparent===!1?Ce(bi):Ce(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.blendColor,se.blendAlpha,se.premultipliedAlpha),l.setFunc(se.depthFunc),l.setTest(se.depthTest),l.setMask(se.depthWrite),a.setMask(se.colorWrite);const Te=se.stencilWrite;c.setTest(Te),Te&&(c.setMask(se.stencilWriteMask),c.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),c.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),ut(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?st(n.SAMPLE_ALPHA_TO_COVERAGE):ot(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ve(se){z!==se&&(se?n.frontFace(n.CW):n.frontFace(n.CCW),z=se)}function et(se){se!==Y3?(st(n.CULL_FACE),se!==q&&(se===tw?n.cullFace(n.BACK):se===J3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ot(n.CULL_FACE),q=se}function pt(se){se!==G&&(V&&n.lineWidth(se),G=se)}function ut(se,Xe,ke){se?(st(n.POLYGON_OFFSET_FILL),(Y!==Xe||ee!==ke)&&(n.polygonOffset(Xe,ke),Y=Xe,ee=ke)):ot(n.POLYGON_OFFSET_FILL)}function $t(se){se?st(n.SCISSOR_TEST):ot(n.SCISSOR_TEST)}function H(se){se===void 0&&(se=n.TEXTURE0+te-1),oe!==se&&(n.activeTexture(se),oe=se)}function F(se,Xe,ke){ke===void 0&&(oe===null?ke=n.TEXTURE0+te-1:ke=oe);let Te=fe[ke];Te===void 0&&(Te={type:void 0,texture:void 0},fe[ke]=Te),(Te.type!==se||Te.texture!==Xe)&&(oe!==ke&&(n.activeTexture(ke),oe=ke),n.bindTexture(se,Xe||qe[se]),Te.type=se,Te.texture=Xe)}function le(){const se=fe[oe];se!==void 0&&se.type!==void 0&&(n.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function Pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function De(){try{n.compressedTexImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ue(){try{n.texSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function nt(){try{n.texSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function He(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function $e(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function dt(){try{n.texStorage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Rt(){try{n.texStorage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Oe(){try{n.texImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ot(){try{n.texImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ne(se){be.equals(se)===!1&&(n.scissor(se.x,se.y,se.z,se.w),be.copy(se))}function me(se){Ae.equals(se)===!1&&(n.viewport(se.x,se.y,se.z,se.w),Ae.copy(se))}function Ie(se,Xe){let ke=d.get(Xe);ke===void 0&&(ke=new WeakMap,d.set(Xe,ke));let Te=ke.get(se);Te===void 0&&(Te=n.getUniformBlockIndex(Xe,se.name),ke.set(se,Te))}function Me(se,Xe){const Te=d.get(Xe).get(se);u.get(Xe)!==Te&&(n.uniformBlockBinding(Xe,Te,se.__bindingPointIndex),u.set(Xe,Te))}function Re(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},oe=null,fe={},m={},v=new WeakMap,y=[],_=null,g=!1,x=null,S=null,A=null,b=null,M=null,C=null,B=null,T=new tt(0,0,0),P=0,N=!1,z=null,q=null,G=null,Y=null,ee=null,be.set(0,0,n.canvas.width,n.canvas.height),Ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:st,disable:ot,bindFramebuffer:Ye,drawBuffers:Z,useProgram:xe,setBlending:Ce,setMaterial:ae,setFlipSided:Ve,setCullFace:et,setLineWidth:pt,setPolygonOffset:ut,setScissorTest:$t,activeTexture:H,bindTexture:F,unbindTexture:le,compressedTexImage2D:Pe,compressedTexImage3D:De,texImage2D:Oe,texImage3D:Ot,updateUBOMapping:Ie,uniformBlockBinding:Me,texStorage2D:dt,texStorage3D:Rt,texSubImage2D:Ue,texSubImage3D:nt,compressedTexSubImage2D:He,compressedTexSubImage3D:$e,scissor:ne,viewport:me,reset:Re}}function g7(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const _=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(H,F){return g?new OffscreenCanvas(H,F):qm("canvas")}function S(H,F,le,Pe){let De=1;if((H.width>Pe||H.height>Pe)&&(De=Pe/Math.max(H.width,H.height)),De<1||F===!0)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const Ue=F?b_:Math.floor,nt=Ue(De*H.width),He=Ue(De*H.height);y===void 0&&(y=x(nt,He));const $e=le?x(nt,He):y;return $e.width=nt,$e.height=He,$e.getContext("2d").drawImage(H,0,0,nt,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+nt+"x"+He+")."),$e}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H;return H}function A(H){return Ow(H.width)&&Ow(H.height)}function b(H){return a?!1:H.wrapS!==ii||H.wrapT!==ii||H.minFilter!==Cn&&H.minFilter!==En}function M(H,F){return H.generateMipmaps&&F&&H.minFilter!==Cn&&H.minFilter!==En}function C(H){n.generateMipmap(H)}function B(H,F,le,Pe,De=!1){if(a===!1)return F;if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Ue=F;if(F===n.RED&&(le===n.FLOAT&&(Ue=n.R32F),le===n.HALF_FLOAT&&(Ue=n.R16F),le===n.UNSIGNED_BYTE&&(Ue=n.R8)),F===n.RED_INTEGER&&(le===n.UNSIGNED_BYTE&&(Ue=n.R8UI),le===n.UNSIGNED_SHORT&&(Ue=n.R16UI),le===n.UNSIGNED_INT&&(Ue=n.R32UI),le===n.BYTE&&(Ue=n.R8I),le===n.SHORT&&(Ue=n.R16I),le===n.INT&&(Ue=n.R32I)),F===n.RG&&(le===n.FLOAT&&(Ue=n.RG32F),le===n.HALF_FLOAT&&(Ue=n.RG16F),le===n.UNSIGNED_BYTE&&(Ue=n.RG8)),F===n.RGBA){const nt=De?Jm:Mn.getTransfer(Pe);le===n.FLOAT&&(Ue=n.RGBA32F),le===n.HALF_FLOAT&&(Ue=n.RGBA16F),le===n.UNSIGNED_BYTE&&(Ue=nt===On?n.SRGB8_ALPHA8:n.RGBA8),le===n.UNSIGNED_SHORT_4_4_4_4&&(Ue=n.RGBA4),le===n.UNSIGNED_SHORT_5_5_5_1&&(Ue=n.RGB5_A1)}return(Ue===n.R16F||Ue===n.R32F||Ue===n.RG16F||Ue===n.RG32F||Ue===n.RGBA16F||Ue===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ue}function T(H,F,le){return M(H,le)===!0||H.isFramebufferTexture&&H.minFilter!==Cn&&H.minFilter!==En?Math.log2(Math.max(F.width,F.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?F.mipmaps.length:1}function P(H){return H===Cn||H===jm||H===zd?n.NEAREST:n.LINEAR}function N(H){const F=H.target;F.removeEventListener("dispose",N),q(F),F.isVideoTexture&&v.delete(F)}function z(H){const F=H.target;F.removeEventListener("dispose",z),Y(F)}function q(H){const F=r.get(H);if(F.__webglInit===void 0)return;const le=H.source,Pe=_.get(le);if(Pe){const De=Pe[F.__cacheKey];De.usedTimes--,De.usedTimes===0&&G(H),Object.keys(Pe).length===0&&_.delete(le)}r.remove(H)}function G(H){const F=r.get(H);n.deleteTexture(F.__webglTexture);const le=H.source,Pe=_.get(le);delete Pe[F.__cacheKey],o.memory.textures--}function Y(H){const F=H.texture,le=r.get(H),Pe=r.get(F);if(Pe.__webglTexture!==void 0&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(le.__webglFramebuffer[De]))for(let Ue=0;Ue<le.__webglFramebuffer[De].length;Ue++)n.deleteFramebuffer(le.__webglFramebuffer[De][Ue]);else n.deleteFramebuffer(le.__webglFramebuffer[De]);le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[De])}else{if(Array.isArray(le.__webglFramebuffer))for(let De=0;De<le.__webglFramebuffer.length;De++)n.deleteFramebuffer(le.__webglFramebuffer[De]);else n.deleteFramebuffer(le.__webglFramebuffer);if(le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let De=0;De<le.__webglColorRenderbuffer.length;De++)le.__webglColorRenderbuffer[De]&&n.deleteRenderbuffer(le.__webglColorRenderbuffer[De]);le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(H.isWebGLMultipleRenderTargets)for(let De=0,Ue=F.length;De<Ue;De++){const nt=r.get(F[De]);nt.__webglTexture&&(n.deleteTexture(nt.__webglTexture),o.memory.textures--),r.remove(F[De])}r.remove(F),r.remove(H)}let ee=0;function te(){ee=0}function V(){const H=ee;return H>=l&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+l),ee+=1,H}function K(H){const F=[];return F.push(H.wrapS),F.push(H.wrapT),F.push(H.wrapR||0),F.push(H.magFilter),F.push(H.minFilter),F.push(H.anisotropy),F.push(H.internalFormat),F.push(H.format),F.push(H.type),F.push(H.generateMipmaps),F.push(H.premultiplyAlpha),F.push(H.flipY),F.push(H.unpackAlignment),F.push(H.colorSpace),F.join()}function U(H,F){const le=r.get(H);if(H.isVideoTexture&&ut(H),H.isRenderTargetTexture===!1&&H.version>0&&le.__version!==H.version){const Pe=H.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{st(le,H,F);return}}t.bindTexture(n.TEXTURE_2D,le.__webglTexture,n.TEXTURE0+F)}function oe(H,F){const le=r.get(H);if(H.version>0&&le.__version!==H.version){st(le,H,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,le.__webglTexture,n.TEXTURE0+F)}function fe(H,F){const le=r.get(H);if(H.version>0&&le.__version!==H.version){st(le,H,F);return}t.bindTexture(n.TEXTURE_3D,le.__webglTexture,n.TEXTURE0+F)}function ue(H,F){const le=r.get(H);if(H.version>0&&le.__version!==H.version){ot(le,H,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+F)}const pe={[Sc]:n.REPEAT,[ii]:n.CLAMP_TO_EDGE,[oh]:n.MIRRORED_REPEAT},be={[Cn]:n.NEAREST,[jm]:n.NEAREST_MIPMAP_NEAREST,[zd]:n.NEAREST_MIPMAP_LINEAR,[En]:n.LINEAR,[_x]:n.LINEAR_MIPMAP_NEAREST,[Aa]:n.LINEAR_MIPMAP_LINEAR},Ae={[zF]:n.NEVER,[XF]:n.ALWAYS,[HF]:n.LESS,[eT]:n.LEQUAL,[GF]:n.EQUAL,[$F]:n.GEQUAL,[VF]:n.GREATER,[WF]:n.NOTEQUAL};function Le(H,F,le){if(le?(n.texParameteri(H,n.TEXTURE_WRAP_S,pe[F.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,pe[F.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,pe[F.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,be[F.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,be[F.minFilter])):(n.texParameteri(H,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(H,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(F.wrapS!==ii||F.wrapT!==ii)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(H,n.TEXTURE_MAG_FILTER,P(F.magFilter)),n.texParameteri(H,n.TEXTURE_MIN_FILTER,P(F.minFilter)),F.minFilter!==Cn&&F.minFilter!==En&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),F.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,Ae[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Pe=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===Cn||F.minFilter!==zd&&F.minFilter!==Aa||F.type===Zr&&e.has("OES_texture_float_linear")===!1||a===!1&&F.type===si&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(n.texParameterf(H,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function qe(H,F){let le=!1;H.__webglInit===void 0&&(H.__webglInit=!0,F.addEventListener("dispose",N));const Pe=F.source;let De=_.get(Pe);De===void 0&&(De={},_.set(Pe,De));const Ue=K(F);if(Ue!==H.__cacheKey){De[Ue]===void 0&&(De[Ue]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),De[Ue].usedTimes++;const nt=De[H.__cacheKey];nt!==void 0&&(De[H.__cacheKey].usedTimes--,nt.usedTimes===0&&G(F)),H.__cacheKey=Ue,H.__webglTexture=De[Ue].texture}return le}function st(H,F,le){let Pe=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Pe=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Pe=n.TEXTURE_3D);const De=qe(H,F),Ue=F.source;t.bindTexture(Pe,H.__webglTexture,n.TEXTURE0+le);const nt=r.get(Ue);if(Ue.version!==nt.__version||De===!0){t.activeTexture(n.TEXTURE0+le);const He=Mn.getPrimaries(Mn.workingColorSpace),$e=F.colorSpace===Ps?null:Mn.getPrimaries(F.colorSpace),dt=F.colorSpace===Ps||He===$e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);const Rt=b(F)&&A(F.image)===!1;let Oe=S(F.image,Rt,!1,u);Oe=$t(F,Oe);const Ot=A(Oe)||a,ne=s.convert(F.format,F.colorSpace);let me=s.convert(F.type),Ie=B(F.internalFormat,ne,me,F.colorSpace,F.isVideoTexture);Le(Pe,F,Ot);let Me;const Re=F.mipmaps,se=a&&F.isVideoTexture!==!0&&Ie!==Zb,Xe=nt.__version===void 0||De===!0,ke=T(F,Oe,Ot);if(F.isDepthTexture)Ie=n.DEPTH_COMPONENT,a?F.type===Zr?Ie=n.DEPTH_COMPONENT32F:F.type===ca?Ie=n.DEPTH_COMPONENT24:F.type===il?Ie=n.DEPTH24_STENCIL8:Ie=n.DEPTH_COMPONENT16:F.type===Zr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===hc&&Ie===n.DEPTH_COMPONENT&&F.type!==xx&&F.type!==ca&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=ca,me=s.convert(F.type)),F.format===Ec&&Ie===n.DEPTH_COMPONENT&&(Ie=n.DEPTH_STENCIL,F.type!==il&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=il,me=s.convert(F.type))),Xe&&(se?t.texStorage2D(n.TEXTURE_2D,1,Ie,Oe.width,Oe.height):t.texImage2D(n.TEXTURE_2D,0,Ie,Oe.width,Oe.height,0,ne,me,null));else if(F.isDataTexture)if(Re.length>0&&Ot){se&&Xe&&t.texStorage2D(n.TEXTURE_2D,ke,Ie,Re[0].width,Re[0].height);for(let Te=0,Ge=Re.length;Te<Ge;Te++)Me=Re[Te],se?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,Me.width,Me.height,ne,me,Me.data):t.texImage2D(n.TEXTURE_2D,Te,Ie,Me.width,Me.height,0,ne,me,Me.data);F.generateMipmaps=!1}else se?(Xe&&t.texStorage2D(n.TEXTURE_2D,ke,Ie,Oe.width,Oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe.width,Oe.height,ne,me,Oe.data)):t.texImage2D(n.TEXTURE_2D,0,Ie,Oe.width,Oe.height,0,ne,me,Oe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){se&&Xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,Ie,Re[0].width,Re[0].height,Oe.depth);for(let Te=0,Ge=Re.length;Te<Ge;Te++)Me=Re[Te],F.format!==Ei?ne!==null?se?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,Me.width,Me.height,Oe.depth,ne,Me.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Te,Ie,Me.width,Me.height,Oe.depth,0,Me.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):se?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,Me.width,Me.height,Oe.depth,ne,me,Me.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Te,Ie,Me.width,Me.height,Oe.depth,0,ne,me,Me.data)}else{se&&Xe&&t.texStorage2D(n.TEXTURE_2D,ke,Ie,Re[0].width,Re[0].height);for(let Te=0,Ge=Re.length;Te<Ge;Te++)Me=Re[Te],F.format!==Ei?ne!==null?se?t.compressedTexSubImage2D(n.TEXTURE_2D,Te,0,0,Me.width,Me.height,ne,Me.data):t.compressedTexImage2D(n.TEXTURE_2D,Te,Ie,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):se?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,Me.width,Me.height,ne,me,Me.data):t.texImage2D(n.TEXTURE_2D,Te,Ie,Me.width,Me.height,0,ne,me,Me.data)}else if(F.isDataArrayTexture)se?(Xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,Ie,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,ne,me,Oe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ie,Oe.width,Oe.height,Oe.depth,0,ne,me,Oe.data);else if(F.isData3DTexture)se?(Xe&&t.texStorage3D(n.TEXTURE_3D,ke,Ie,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,ne,me,Oe.data)):t.texImage3D(n.TEXTURE_3D,0,Ie,Oe.width,Oe.height,Oe.depth,0,ne,me,Oe.data);else if(F.isFramebufferTexture){if(Xe)if(se)t.texStorage2D(n.TEXTURE_2D,ke,Ie,Oe.width,Oe.height);else{let Te=Oe.width,Ge=Oe.height;for(let ft=0;ft<ke;ft++)t.texImage2D(n.TEXTURE_2D,ft,Ie,Te,Ge,0,ne,me,null),Te>>=1,Ge>>=1}}else if(Re.length>0&&Ot){se&&Xe&&t.texStorage2D(n.TEXTURE_2D,ke,Ie,Re[0].width,Re[0].height);for(let Te=0,Ge=Re.length;Te<Ge;Te++)Me=Re[Te],se?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,ne,me,Me):t.texImage2D(n.TEXTURE_2D,Te,Ie,ne,me,Me);F.generateMipmaps=!1}else se?(Xe&&t.texStorage2D(n.TEXTURE_2D,ke,Ie,Oe.width,Oe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ne,me,Oe)):t.texImage2D(n.TEXTURE_2D,0,Ie,ne,me,Oe);M(F,Ot)&&C(Pe),nt.__version=Ue.version,F.onUpdate&&F.onUpdate(F)}H.__version=F.version}function ot(H,F,le){if(F.image.length!==6)return;const Pe=qe(H,F),De=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+le);const Ue=r.get(De);if(De.version!==Ue.__version||Pe===!0){t.activeTexture(n.TEXTURE0+le);const nt=Mn.getPrimaries(Mn.workingColorSpace),He=F.colorSpace===Ps?null:Mn.getPrimaries(F.colorSpace),$e=F.colorSpace===Ps||nt===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,$e);const dt=F.isCompressedTexture||F.image[0].isCompressedTexture,Rt=F.image[0]&&F.image[0].isDataTexture,Oe=[];for(let Te=0;Te<6;Te++)!dt&&!Rt?Oe[Te]=S(F.image[Te],!1,!0,c):Oe[Te]=Rt?F.image[Te].image:F.image[Te],Oe[Te]=$t(F,Oe[Te]);const Ot=Oe[0],ne=A(Ot)||a,me=s.convert(F.format,F.colorSpace),Ie=s.convert(F.type),Me=B(F.internalFormat,me,Ie,F.colorSpace),Re=a&&F.isVideoTexture!==!0,se=Ue.__version===void 0||Pe===!0;let Xe=T(F,Ot,ne);Le(n.TEXTURE_CUBE_MAP,F,ne);let ke;if(dt){Re&&se&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Xe,Me,Ot.width,Ot.height);for(let Te=0;Te<6;Te++){ke=Oe[Te].mipmaps;for(let Ge=0;Ge<ke.length;Ge++){const ft=ke[Ge];F.format!==Ei?me!==null?Re?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge,0,0,ft.width,ft.height,me,ft.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge,Me,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge,0,0,ft.width,ft.height,me,Ie,ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge,Me,ft.width,ft.height,0,me,Ie,ft.data)}}}else{ke=F.mipmaps,Re&&se&&(ke.length>0&&Xe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Xe,Me,Oe[0].width,Oe[0].height));for(let Te=0;Te<6;Te++)if(Rt){Re?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Oe[Te].width,Oe[Te].height,me,Ie,Oe[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Me,Oe[Te].width,Oe[Te].height,0,me,Ie,Oe[Te].data);for(let Ge=0;Ge<ke.length;Ge++){const Qe=ke[Ge].image[Te].image;Re?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge+1,0,0,Qe.width,Qe.height,me,Ie,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge+1,Me,Qe.width,Qe.height,0,me,Ie,Qe.data)}}else{Re?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,me,Ie,Oe[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Me,me,Ie,Oe[Te]);for(let Ge=0;Ge<ke.length;Ge++){const ft=ke[Ge];Re?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge+1,0,0,me,Ie,ft.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ge+1,Me,me,Ie,ft.image[Te])}}}M(F,ne)&&C(n.TEXTURE_CUBE_MAP),Ue.__version=De.version,F.onUpdate&&F.onUpdate(F)}H.__version=F.version}function Ye(H,F,le,Pe,De,Ue){const nt=s.convert(le.format,le.colorSpace),He=s.convert(le.type),$e=B(le.internalFormat,nt,He,le.colorSpace);if(!r.get(F).__hasExternalTextures){const Rt=Math.max(1,F.width>>Ue),Oe=Math.max(1,F.height>>Ue);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,Ue,$e,Rt,Oe,F.depth,0,nt,He,null):t.texImage2D(De,Ue,$e,Rt,Oe,0,nt,He,null)}t.bindFramebuffer(n.FRAMEBUFFER,H),pt(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pe,De,r.get(le).__webglTexture,0,et(F)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Pe,De,r.get(le).__webglTexture,Ue),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Z(H,F,le){if(n.bindRenderbuffer(n.RENDERBUFFER,H),F.depthBuffer&&!F.stencilBuffer){let Pe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(le||pt(F)){const De=F.depthTexture;De&&De.isDepthTexture&&(De.type===Zr?Pe=n.DEPTH_COMPONENT32F:De.type===ca&&(Pe=n.DEPTH_COMPONENT24));const Ue=et(F);pt(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,Pe,F.width,F.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,Pe,F.width,F.height)}else n.renderbufferStorage(n.RENDERBUFFER,Pe,F.width,F.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,H)}else if(F.depthBuffer&&F.stencilBuffer){const Pe=et(F);le&&pt(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,F.width,F.height):pt(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,H)}else{const Pe=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let De=0;De<Pe.length;De++){const Ue=Pe[De],nt=s.convert(Ue.format,Ue.colorSpace),He=s.convert(Ue.type),$e=B(Ue.internalFormat,nt,He,Ue.colorSpace),dt=et(F);le&&pt(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,$e,F.width,F.height):pt(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,dt,$e,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,$e,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(H,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,H),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),U(F.depthTexture,0);const Pe=r.get(F.depthTexture).__webglTexture,De=et(F);if(F.depthTexture.format===hc)pt(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(F.depthTexture.format===Ec)pt(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function ve(H){const F=r.get(H),le=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!F.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");xe(F.__webglFramebuffer,H)}else if(le){F.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[Pe]),F.__webglDepthbuffer[Pe]=n.createRenderbuffer(),Z(F.__webglDepthbuffer[Pe],H,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),Z(F.__webglDepthbuffer,H,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Fe(H,F,le){const Pe=r.get(H);F!==void 0&&Ye(Pe.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),le!==void 0&&ve(H)}function Ce(H){const F=H.texture,le=r.get(H),Pe=r.get(F);H.addEventListener("dispose",z),H.isWebGLMultipleRenderTargets!==!0&&(Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture()),Pe.__version=F.version,o.memory.textures++);const De=H.isWebGLCubeRenderTarget===!0,Ue=H.isWebGLMultipleRenderTargets===!0,nt=A(H)||a;if(De){le.__webglFramebuffer=[];for(let He=0;He<6;He++)if(a&&F.mipmaps&&F.mipmaps.length>0){le.__webglFramebuffer[He]=[];for(let $e=0;$e<F.mipmaps.length;$e++)le.__webglFramebuffer[He][$e]=n.createFramebuffer()}else le.__webglFramebuffer[He]=n.createFramebuffer()}else{if(a&&F.mipmaps&&F.mipmaps.length>0){le.__webglFramebuffer=[];for(let He=0;He<F.mipmaps.length;He++)le.__webglFramebuffer[He]=n.createFramebuffer()}else le.__webglFramebuffer=n.createFramebuffer();if(Ue)if(i.drawBuffers){const He=H.texture;for(let $e=0,dt=He.length;$e<dt;$e++){const Rt=r.get(He[$e]);Rt.__webglTexture===void 0&&(Rt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&H.samples>0&&pt(H)===!1){const He=Ue?F:[F];le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let $e=0;$e<He.length;$e++){const dt=He[$e];le.__webglColorRenderbuffer[$e]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,le.__webglColorRenderbuffer[$e]);const Rt=s.convert(dt.format,dt.colorSpace),Oe=s.convert(dt.type),Ot=B(dt.internalFormat,Rt,Oe,dt.colorSpace,H.isXRRenderTarget===!0),ne=et(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,ne,Ot,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+$e,n.RENDERBUFFER,le.__webglColorRenderbuffer[$e])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),Z(le.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){t.bindTexture(n.TEXTURE_CUBE_MAP,Pe.__webglTexture),Le(n.TEXTURE_CUBE_MAP,F,nt);for(let He=0;He<6;He++)if(a&&F.mipmaps&&F.mipmaps.length>0)for(let $e=0;$e<F.mipmaps.length;$e++)Ye(le.__webglFramebuffer[He][$e],H,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,$e);else Ye(le.__webglFramebuffer[He],H,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);M(F,nt)&&C(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ue){const He=H.texture;for(let $e=0,dt=He.length;$e<dt;$e++){const Rt=He[$e],Oe=r.get(Rt);t.bindTexture(n.TEXTURE_2D,Oe.__webglTexture),Le(n.TEXTURE_2D,Rt,nt),Ye(le.__webglFramebuffer,H,Rt,n.COLOR_ATTACHMENT0+$e,n.TEXTURE_2D,0),M(Rt,nt)&&C(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(a?He=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,Pe.__webglTexture),Le(He,F,nt),a&&F.mipmaps&&F.mipmaps.length>0)for(let $e=0;$e<F.mipmaps.length;$e++)Ye(le.__webglFramebuffer[$e],H,F,n.COLOR_ATTACHMENT0,He,$e);else Ye(le.__webglFramebuffer,H,F,n.COLOR_ATTACHMENT0,He,0);M(F,nt)&&C(He),t.unbindTexture()}H.depthBuffer&&ve(H)}function ae(H){const F=A(H)||a,le=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let Pe=0,De=le.length;Pe<De;Pe++){const Ue=le[Pe];if(M(Ue,F)){const nt=H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,He=r.get(Ue).__webglTexture;t.bindTexture(nt,He),C(nt),t.unbindTexture()}}}function Ve(H){if(a&&H.samples>0&&pt(H)===!1){const F=H.isWebGLMultipleRenderTargets?H.texture:[H.texture],le=H.width,Pe=H.height;let De=n.COLOR_BUFFER_BIT;const Ue=[],nt=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=r.get(H),$e=H.isWebGLMultipleRenderTargets===!0;if($e)for(let dt=0;dt<F.length;dt++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let dt=0;dt<F.length;dt++){Ue.push(n.COLOR_ATTACHMENT0+dt),H.depthBuffer&&Ue.push(nt);const Rt=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(Rt===!1&&(H.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),$e&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[dt]),Rt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[nt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[nt])),$e){const Oe=r.get(F[dt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Oe,0)}n.blitFramebuffer(0,0,le,Pe,0,0,le,Pe,De,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ue)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),$e)for(let dt=0;dt<F.length;dt++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,He.__webglColorRenderbuffer[dt]);const Rt=r.get(F[dt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,Rt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}}function et(H){return Math.min(d,H.samples)}function pt(H){const F=r.get(H);return a&&H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function ut(H){const F=o.render.frame;v.get(H)!==F&&(v.set(H,F),H.update())}function $t(H,F){const le=H.colorSpace,Pe=H.format,De=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||H.format===M_||le!==wa&&le!==Ps&&(Mn.getTransfer(le)===On?a===!1?e.has("EXT_sRGB")===!0&&Pe===Ei?(H.format=M_,H.minFilter=En,H.generateMipmaps=!1):F=nT.sRGBToLinear(F):(Pe!==Ei||De!==li)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),F}this.allocateTextureUnit=V,this.resetTextureUnits=te,this.setTexture2D=U,this.setTexture2DArray=oe,this.setTexture3D=fe,this.setTextureCube=ue,this.rebindTextures=Fe,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=ae,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=pt}function sN(n,e,t){const r=t.isWebGL2;function i(s,o=Ps){let a;const l=Mn.getTransfer(o);if(s===li)return n.UNSIGNED_BYTE;if(s===$b)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Xb)return n.UNSIGNED_SHORT_5_5_5_1;if(s===TF)return n.BYTE;if(s===CF)return n.SHORT;if(s===xx)return n.UNSIGNED_SHORT;if(s===Wb)return n.INT;if(s===ca)return n.UNSIGNED_INT;if(s===Zr)return n.FLOAT;if(s===si)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===RF)return n.ALPHA;if(s===Ei)return n.RGBA;if(s===PF)return n.LUMINANCE;if(s===BF)return n.LUMINANCE_ALPHA;if(s===hc)return n.DEPTH_COMPONENT;if(s===Ec)return n.DEPTH_STENCIL;if(s===M_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===jb)return n.RED;if(s===Yb)return n.RED_INTEGER;if(s===IF)return n.RG;if(s===Jb)return n.RG_INTEGER;if(s===Kb)return n.RGBA_INTEGER;if(s===Iy||s===Dy||s===Ly||s===Oy)if(l===On)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Iy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Dy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ly)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Oy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Iy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Dy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ly)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Oy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===lw||s===cw||s===uw||s===fw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===lw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===cw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===uw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===fw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Zb)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===dw||s===hw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===dw)return l===On?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===hw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===pw||s===mw||s===gw||s===vw||s===yw||s===_w||s===xw||s===Sw||s===Ew||s===Aw||s===ww||s===Mw||s===bw||s===Tw)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===pw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===mw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===gw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===vw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===yw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===_w)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===xw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Sw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Ew)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Aw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ww)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Mw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===bw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Tw)return l===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Fy||s===Cw||s===Rw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Fy)return l===On?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Cw)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Rw)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===DF||s===Pw||s===Bw||s===Iw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Fy)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Pw)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Bw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Iw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===il?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class oN extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class tl extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const v7={type:"move"};class rE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new tl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new tl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new tl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const _=t.getJointPose(y,r),g=this._getHandJoint(c,y);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(v7)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new tl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class y7 extends $s{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,v=null;const y=t.getContextAttributes();let _=null,g=null;const x=[],S=[],A=new Se;let b=null;const M=new Yn;M.layers.enable(1),M.viewport=new An;const C=new Yn;C.layers.enable(2),C.viewport=new An;const B=[M,C],T=new oN;T.layers.enable(1),T.layers.enable(2);let P=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let pe=x[ue];return pe===void 0&&(pe=new rE,x[ue]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ue){let pe=x[ue];return pe===void 0&&(pe=new rE,x[ue]=pe),pe.getGripSpace()},this.getHand=function(ue){let pe=x[ue];return pe===void 0&&(pe=new rE,x[ue]=pe),pe.getHandSpace()};function z(ue){const pe=S.indexOf(ue.inputSource);if(pe===-1)return;const be=x[pe];be!==void 0&&(be.update(ue.inputSource,ue.frame,c||o),be.dispatchEvent({type:ue.type,data:ue.inputSource}))}function q(){i.removeEventListener("select",z),i.removeEventListener("selectstart",z),i.removeEventListener("selectend",z),i.removeEventListener("squeeze",z),i.removeEventListener("squeezestart",z),i.removeEventListener("squeezeend",z),i.removeEventListener("end",q),i.removeEventListener("inputsourceschange",G);for(let ue=0;ue<x.length;ue++){const pe=S[ue];pe!==null&&(S[ue]=null,x[ue].disconnect(pe))}P=null,N=null,e.setRenderTarget(_),m=null,p=null,d=null,i=null,g=null,fe.stop(),r.isPresenting=!1,e.setPixelRatio(b),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ue){c=ue},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ue){if(i=ue,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",z),i.addEventListener("selectstart",z),i.addEventListener("selectend",z),i.addEventListener("squeeze",z),i.addEventListener("squeezestart",z),i.addEventListener("squeezeend",z),i.addEventListener("end",q),i.addEventListener("inputsourceschange",G),y.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const pe={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,pe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new Wn(m.framebufferWidth,m.framebufferHeight,{format:Ei,type:li,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let pe=null,be=null,Ae=null;y.depth&&(Ae=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=y.stencil?Ec:hc,be=y.stencil?il:ca);const Le={colorFormat:t.RGBA8,depthFormat:Ae,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(Le),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new Wn(p.textureWidth,p.textureHeight,{format:Ei,type:li,depthTexture:new wx(p.textureWidth,p.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const qe=e.properties.get(g);qe.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),fe.setContext(i),fe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function G(ue){for(let pe=0;pe<ue.removed.length;pe++){const be=ue.removed[pe],Ae=S.indexOf(be);Ae>=0&&(S[Ae]=null,x[Ae].disconnect(be))}for(let pe=0;pe<ue.added.length;pe++){const be=ue.added[pe];let Ae=S.indexOf(be);if(Ae===-1){for(let qe=0;qe<x.length;qe++)if(qe>=S.length){S.push(be),Ae=qe;break}else if(S[qe]===null){S[qe]=be,Ae=qe;break}if(Ae===-1)break}const Le=x[Ae];Le&&Le.connect(be)}}const Y=new W,ee=new W;function te(ue,pe,be){Y.setFromMatrixPosition(pe.matrixWorld),ee.setFromMatrixPosition(be.matrixWorld);const Ae=Y.distanceTo(ee),Le=pe.projectionMatrix.elements,qe=be.projectionMatrix.elements,st=Le[14]/(Le[10]-1),ot=Le[14]/(Le[10]+1),Ye=(Le[9]+1)/Le[5],Z=(Le[9]-1)/Le[5],xe=(Le[8]-1)/Le[0],ve=(qe[8]+1)/qe[0],Fe=st*xe,Ce=st*ve,ae=Ae/(-xe+ve),Ve=ae*-xe;pe.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Ve),ue.translateZ(ae),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert();const et=st+ae,pt=ot+ae,ut=Fe-Ve,$t=Ce+(Ae-Ve),H=Ye*ot/pt*et,F=Z*ot/pt*et;ue.projectionMatrix.makePerspective(ut,$t,H,F,et,pt),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}function V(ue,pe){pe===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(pe.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(i===null)return;T.near=C.near=M.near=ue.near,T.far=C.far=M.far=ue.far,(P!==T.near||N!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),P=T.near,N=T.far);const pe=ue.parent,be=T.cameras;V(T,pe);for(let Ae=0;Ae<be.length;Ae++)V(be[Ae],pe);be.length===2?te(T,M,C):T.projectionMatrix.copy(M.projectionMatrix),K(ue,T,pe)};function K(ue,pe,be){be===null?ue.matrix.copy(pe.matrixWorld):(ue.matrix.copy(be.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(pe.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(pe.projectionMatrix),ue.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=ch*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ue){l=ue,p!==null&&(p.fixedFoveation=ue),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ue)};let U=null;function oe(ue,pe){if(u=pe.getViewerPose(c||o),v=pe,u!==null){const be=u.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Ae=!1;be.length!==T.cameras.length&&(T.cameras.length=0,Ae=!0);for(let Le=0;Le<be.length;Le++){const qe=be[Le];let st=null;if(m!==null)st=m.getViewport(qe);else{const Ye=d.getViewSubImage(p,qe);st=Ye.viewport,Le===0&&(e.setRenderTargetTextures(g,Ye.colorTexture,p.ignoreDepthValues?void 0:Ye.depthStencilTexture),e.setRenderTarget(g))}let ot=B[Le];ot===void 0&&(ot=new Yn,ot.layers.enable(Le),ot.viewport=new An,B[Le]=ot),ot.matrix.fromArray(qe.transform.matrix),ot.matrix.decompose(ot.position,ot.quaternion,ot.scale),ot.projectionMatrix.fromArray(qe.projectionMatrix),ot.projectionMatrixInverse.copy(ot.projectionMatrix).invert(),ot.viewport.set(st.x,st.y,st.width,st.height),Le===0&&(T.matrix.copy(ot.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Ae===!0&&T.cameras.push(ot)}}for(let be=0;be<x.length;be++){const Ae=S[be],Le=x[be];Ae!==null&&Le!==void 0&&Le.update(Ae,pe,c||o)}U&&U(ue,pe),pe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:pe}),v=null}const fe=new qF;fe.setAnimationLoop(oe),this.setAnimationLoop=function(ue){U=ue},this.dispose=function(){}}}function _7(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,ZF(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,x,S,A){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),d(_,g)):g.isMeshPhongMaterial?(s(_,g),u(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,A)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),y(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,x,S):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Nr&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Nr&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(_.envMap.value=x,_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,x,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*x,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function d(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,x){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Nr&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=x.texture,_.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function y(_,g){const x=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(x.matrixWorld),_.nearDistance.value=x.shadow.camera.near,_.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function x7(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,S){const A=S.program;r.uniformBlockBinding(x,A)}function c(x,S){let A=i[x.id];A===void 0&&(v(x),A=u(x),i[x.id]=A,x.addEventListener("dispose",_));const b=S.program;r.updateUBOMapping(x,b);const M=e.render.frame;s[x.id]!==M&&(p(x),s[x.id]=M)}function u(x){const S=d();x.__bindingPointIndex=S;const A=n.createBuffer(),b=x.__size,M=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,b,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,A),A}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const S=i[x.id],A=x.uniforms,b=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let M=0,C=A.length;M<C;M++){const B=A[M];if(m(B,M,b)===!0){const T=B.__offset,P=Array.isArray(B.value)?B.value:[B.value];let N=0;for(let z=0;z<P.length;z++){const q=P[z],G=y(q);typeof q=="number"?(B.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,T+N,B.__data)):q.isMatrix3?(B.__data[0]=q.elements[0],B.__data[1]=q.elements[1],B.__data[2]=q.elements[2],B.__data[3]=q.elements[0],B.__data[4]=q.elements[3],B.__data[5]=q.elements[4],B.__data[6]=q.elements[5],B.__data[7]=q.elements[0],B.__data[8]=q.elements[6],B.__data[9]=q.elements[7],B.__data[10]=q.elements[8],B.__data[11]=q.elements[0]):(q.toArray(B.__data,N),N+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,B.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,S,A){const b=x.value;if(A[S]===void 0){if(typeof b=="number")A[S]=b;else{const M=Array.isArray(b)?b:[b],C=[];for(let B=0;B<M.length;B++)C.push(M[B].clone());A[S]=C}return!0}else if(typeof b=="number"){if(A[S]!==b)return A[S]=b,!0}else{const M=Array.isArray(A[S])?A[S]:[A[S]],C=Array.isArray(b)?b:[b];for(let B=0;B<M.length;B++){const T=M[B];if(T.equals(C[B])===!1)return T.copy(C[B]),!0}}return!1}function v(x){const S=x.uniforms;let A=0;const b=16;let M=0;for(let C=0,B=S.length;C<B;C++){const T=S[C],P={boundary:0,storage:0},N=Array.isArray(T.value)?T.value:[T.value];for(let z=0,q=N.length;z<q;z++){const G=N[z],Y=y(G);P.boundary+=Y.boundary,P.storage+=Y.storage}if(T.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=A,C>0){M=A%b;const z=b-M;M!==0&&z-P.boundary<0&&(A+=b-M,T.__offset=A)}A+=P.storage}return M=A%b,M>0&&(A+=b-M),x.__size=A,x.__cache={},this}function y(x){const S={boundary:0,storage:0};return typeof x=="number"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function _(x){const S=x.target;S.removeEventListener("dispose",_);const A=o.indexOf(S.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const x in i)n.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class uT{constructor(e={}){const{canvas:t=YF(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let y=null,_=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Or,this._useLegacyLights=!1,this.toneMapping=ma,this.toneMappingExposure=1;const S=this;let A=!1,b=0,M=0,C=null,B=-1,T=null;const P=new An,N=new An;let z=null;const q=new tt(0);let G=0,Y=t.width,ee=t.height,te=1,V=null,K=null;const U=new An(0,0,Y,ee),oe=new An(0,0,Y,ee);let fe=!1;const ue=new Pg;let pe=!1,be=!1,Ae=null;const Le=new Tt,qe=new Se,st=new W,ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ye(){return C===null?te:1}let Z=r;function xe(L,$){for(let X=0;X<L.length;X++){const Q=L[X],J=t.getContext(Q,$);if(J!==null)return J}return null}try{const L={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ca}`),t.addEventListener("webglcontextlost",Re,!1),t.addEventListener("webglcontextrestored",se,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),Z===null){const $=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&$.shift(),Z=xe($,L),Z===null)throw xe($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let ve,Fe,Ce,ae,Ve,et,pt,ut,$t,H,F,le,Pe,De,Ue,nt,He,$e,dt,Rt,Oe,Ot,ne,me;function Ie(){ve=new OW(Z),Fe=new RW(Z,ve,e),ve.init(Fe),Ot=new sN(Z,ve,Fe),Ce=new m7(Z,ve,Fe),ae=new UW(Z),Ve=new r7,et=new g7(Z,ve,Ce,Ve,Fe,Ot,ae),pt=new BW(S),ut=new LW(S),$t=new X9(Z,Fe),ne=new TW(Z,ve,$t,Fe),H=new FW(Z,$t,ae,ne),F=new GW(Z,H,$t,ae),dt=new HW(Z,Fe,et),nt=new PW(Ve),le=new n7(S,pt,ut,ve,Fe,ne,nt),Pe=new _7(S,Ve),De=new s7,Ue=new f7(ve,Fe),$e=new bW(S,pt,ut,Ce,F,p,l),He=new p7(S,F,Fe),me=new x7(Z,ae,Fe,Ce),Rt=new CW(Z,ve,ae,Fe),Oe=new NW(Z,ve,ae,Fe),ae.programs=le.programs,S.capabilities=Fe,S.extensions=ve,S.properties=Ve,S.renderLists=De,S.shadowMap=He,S.state=Ce,S.info=ae}Ie();const Me=new y7(S,Z);this.xr=Me,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const L=ve.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=ve.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(L){L!==void 0&&(te=L,this.setSize(Y,ee,!1))},this.getSize=function(L){return L.set(Y,ee)},this.setSize=function(L,$,X=!0){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=L,ee=$,t.width=Math.floor(L*te),t.height=Math.floor($*te),X===!0&&(t.style.width=L+"px",t.style.height=$+"px"),this.setViewport(0,0,L,$)},this.getDrawingBufferSize=function(L){return L.set(Y*te,ee*te).floor()},this.setDrawingBufferSize=function(L,$,X){Y=L,ee=$,te=X,t.width=Math.floor(L*X),t.height=Math.floor($*X),this.setViewport(0,0,L,$)},this.getCurrentViewport=function(L){return L.copy(P)},this.getViewport=function(L){return L.copy(U)},this.setViewport=function(L,$,X,Q){L.isVector4?U.set(L.x,L.y,L.z,L.w):U.set(L,$,X,Q),Ce.viewport(P.copy(U).multiplyScalar(te).floor())},this.getScissor=function(L){return L.copy(oe)},this.setScissor=function(L,$,X,Q){L.isVector4?oe.set(L.x,L.y,L.z,L.w):oe.set(L,$,X,Q),Ce.scissor(N.copy(oe).multiplyScalar(te).floor())},this.getScissorTest=function(){return fe},this.setScissorTest=function(L){Ce.setScissorTest(fe=L)},this.setOpaqueSort=function(L){V=L},this.setTransparentSort=function(L){K=L},this.getClearColor=function(L){return L.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(L=!0,$=!0,X=!0){let Q=0;if(L){let J=!1;if(C!==null){const he=C.texture.format;J=he===Kb||he===Jb||he===Yb}if(J){const he=C.texture.type,_e=he===li||he===ca||he===xx||he===il||he===$b||he===Xb,we=$e.getClearColor(),ye=$e.getClearAlpha(),je=we.r,Ne=we.g,ze=we.b;_e?(m[0]=je,m[1]=Ne,m[2]=ze,m[3]=ye,Z.clearBufferuiv(Z.COLOR,0,m)):(v[0]=je,v[1]=Ne,v[2]=ze,v[3]=ye,Z.clearBufferiv(Z.COLOR,0,v))}else Q|=Z.COLOR_BUFFER_BIT}$&&(Q|=Z.DEPTH_BUFFER_BIT),X&&(Q|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Re,!1),t.removeEventListener("webglcontextrestored",se,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),De.dispose(),Ue.dispose(),Ve.dispose(),pt.dispose(),ut.dispose(),F.dispose(),ne.dispose(),me.dispose(),le.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",At),Me.removeEventListener("sessionend",Ct),Ae&&(Ae.dispose(),Ae=null),Ke.stop()};function Re(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const L=ae.autoReset,$=He.enabled,X=He.autoUpdate,Q=He.needsUpdate,J=He.type;Ie(),ae.autoReset=L,He.enabled=$,He.autoUpdate=X,He.needsUpdate=Q,He.type=J}function Xe(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function ke(L){const $=L.target;$.removeEventListener("dispose",ke),Te($)}function Te(L){Ge(L),Ve.remove(L)}function Ge(L){const $=Ve.get(L).programs;$!==void 0&&($.forEach(function(X){le.releaseProgram(X)}),L.isShaderMaterial&&le.releaseShaderCache(L))}this.renderBufferDirect=function(L,$,X,Q,J,he){$===null&&($=ot);const _e=J.isMesh&&J.matrixWorld.determinant()<0,we=O(L,$,X,Q,J);Ce.setMaterial(Q,_e);let ye=X.index,je=1;if(Q.wireframe===!0){if(ye=H.getWireframeAttribute(X),ye===void 0)return;je=2}const Ne=X.drawRange,ze=X.attributes.position;let ht=Ne.start*je,St=(Ne.start+Ne.count)*je;he!==null&&(ht=Math.max(ht,he.start*je),St=Math.min(St,(he.start+he.count)*je)),ye!==null?(ht=Math.max(ht,0),St=Math.min(St,ye.count)):ze!=null&&(ht=Math.max(ht,0),St=Math.min(St,ze.count));const xt=St-ht;if(xt<0||xt===1/0)return;ne.setup(J,Q,we,X,ye);let Dt,at=Rt;if(ye!==null&&(Dt=$t.get(ye),at=Oe,at.setIndex(Dt)),J.isMesh)Q.wireframe===!0?(Ce.setLineWidth(Q.wireframeLinewidth*Ye()),at.setMode(Z.LINES)):at.setMode(Z.TRIANGLES);else if(J.isLine){let Ze=Q.linewidth;Ze===void 0&&(Ze=1),Ce.setLineWidth(Ze*Ye()),J.isLineSegments?at.setMode(Z.LINES):J.isLineLoop?at.setMode(Z.LINE_LOOP):at.setMode(Z.LINE_STRIP)}else J.isPoints?at.setMode(Z.POINTS):J.isSprite&&at.setMode(Z.TRIANGLES);if(J.isBatchedMesh)at.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else if(J.isInstancedMesh)at.renderInstances(ht,xt,J.count);else if(X.isInstancedBufferGeometry){const Ze=X._maxInstanceCount!==void 0?X._maxInstanceCount:1/0,Kt=Math.min(X.instanceCount,Ze);at.renderInstances(ht,xt,Kt)}else at.render(ht,xt)};function ft(L,$,X){L.transparent===!0&&L.side===Si&&L.forceSinglePass===!1?(L.side=Nr,L.needsUpdate=!0,_t(L,$,X),L.side=Vo,L.needsUpdate=!0,_t(L,$,X),L.side=Si):_t(L,$,X)}this.compile=function(L,$,X=null){X===null&&(X=L),_=Ue.get(X),_.init(),x.push(_),X.traverseVisible(function(J){J.isLight&&J.layers.test($.layers)&&(_.pushLight(J),J.castShadow&&_.pushShadow(J))}),L!==X&&L.traverseVisible(function(J){J.isLight&&J.layers.test($.layers)&&(_.pushLight(J),J.castShadow&&_.pushShadow(J))}),_.setupLights(S._useLegacyLights);const Q=new Set;return L.traverse(function(J){const he=J.material;if(he)if(Array.isArray(he))for(let _e=0;_e<he.length;_e++){const we=he[_e];ft(we,X,J),Q.add(we)}else ft(he,X,J),Q.add(he)}),x.pop(),_=null,Q},this.compileAsync=function(L,$,X=null){const Q=this.compile(L,$,X);return new Promise(J=>{function he(){if(Q.forEach(function(_e){Ve.get(_e).currentProgram.isReady()&&Q.delete(_e)}),Q.size===0){J(L);return}setTimeout(he,10)}ve.get("KHR_parallel_shader_compile")!==null?he():setTimeout(he,10)})};let Qe=null;function rt(L){Qe&&Qe(L)}function At(){Ke.stop()}function Ct(){Ke.start()}const Ke=new qF;Ke.setAnimationLoop(rt),typeof self<"u"&&Ke.setContext(self),this.setAnimationLoop=function(L){Qe=L,Me.setAnimationLoop(L),L===null?Ke.stop():Ke.start()},Me.addEventListener("sessionstart",At),Me.addEventListener("sessionend",Ct),this.render=function(L,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera($),$=Me.getCamera()),L.isScene===!0&&L.onBeforeRender(S,L,$,C),_=Ue.get(L,x.length),_.init(),x.push(_),Le.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),ue.setFromProjectionMatrix(Le),be=this.localClippingEnabled,pe=nt.init(this.clippingPlanes,be),y=De.get(L,g.length),y.init(),g.push(y),Pt(L,$,0,S.sortObjects),y.finish(),S.sortObjects===!0&&y.sort(V,K),this.info.render.frame++,pe===!0&&nt.beginShadows();const X=_.state.shadowsArray;if(He.render(X,L,$),pe===!0&&nt.endShadows(),this.info.autoReset===!0&&this.info.reset(),$e.render(y,L),_.setupLights(S._useLegacyLights),$.isArrayCamera){const Q=$.cameras;for(let J=0,he=Q.length;J<he;J++){const _e=Q[J];wt(y,L,_e,_e.viewport)}}else wt(y,L,$);C!==null&&(et.updateMultisampleRenderTarget(C),et.updateRenderTargetMipmap(C)),L.isScene===!0&&L.onAfterRender(S,L,$),ne.resetDefaultState(),B=-1,T=null,x.pop(),x.length>0?_=x[x.length-1]:_=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function Pt(L,$,X,Q){if(L.visible===!1)return;if(L.layers.test($.layers)){if(L.isGroup)X=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update($);else if(L.isLight)_.pushLight(L),L.castShadow&&_.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||ue.intersectsSprite(L)){Q&&st.setFromMatrixPosition(L.matrixWorld).applyMatrix4(Le);const _e=F.update(L),we=L.material;we.visible&&y.push(L,_e,we,X,st.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||ue.intersectsObject(L))){const _e=F.update(L),we=L.material;if(Q&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),st.copy(L.boundingSphere.center)):(_e.boundingSphere===null&&_e.computeBoundingSphere(),st.copy(_e.boundingSphere.center)),st.applyMatrix4(L.matrixWorld).applyMatrix4(Le)),Array.isArray(we)){const ye=_e.groups;for(let je=0,Ne=ye.length;je<Ne;je++){const ze=ye[je],ht=we[ze.materialIndex];ht&&ht.visible&&y.push(L,_e,ht,X,st.z,ze)}}else we.visible&&y.push(L,_e,we,X,st.z,null)}}const he=L.children;for(let _e=0,we=he.length;_e<we;_e++)Pt(he[_e],$,X,Q)}function wt(L,$,X,Q){const J=L.opaque,he=L.transmissive,_e=L.transparent;_.setupLightsView(X),pe===!0&&nt.setGlobalState(S.clippingPlanes,X),he.length>0&&kt(J,he,$,X),Q&&Ce.viewport(P.copy(Q)),J.length>0&&Sn(J,$,X),he.length>0&&Sn(he,$,X),_e.length>0&&Sn(_e,$,X),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function kt(L,$,X,Q){if((X.isScene===!0?X.overrideMaterial:null)!==null)return;const he=Fe.isWebGL2;Ae===null&&(Ae=new Wn(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")?si:li,minFilter:Aa,samples:he?4:0})),S.getDrawingBufferSize(qe),he?Ae.setSize(qe.x,qe.y):Ae.setSize(b_(qe.x),b_(qe.y));const _e=S.getRenderTarget();S.setRenderTarget(Ae),S.getClearColor(q),G=S.getClearAlpha(),G<1&&S.setClearColor(16777215,.5),S.clear();const we=S.toneMapping;S.toneMapping=ma,Sn(L,X,Q),et.updateMultisampleRenderTarget(Ae),et.updateRenderTargetMipmap(Ae);let ye=!1;for(let je=0,Ne=$.length;je<Ne;je++){const ze=$[je],ht=ze.object,St=ze.geometry,xt=ze.material,Dt=ze.group;if(xt.side===Si&&ht.layers.test(Q.layers)){const at=xt.side;xt.side=Nr,xt.needsUpdate=!0,Ft(ht,X,Q,St,xt,Dt),xt.side=at,xt.needsUpdate=!0,ye=!0}}ye===!0&&(et.updateMultisampleRenderTarget(Ae),et.updateRenderTargetMipmap(Ae)),S.setRenderTarget(_e),S.setClearColor(q,G),S.toneMapping=we}function Sn(L,$,X){const Q=$.isScene===!0?$.overrideMaterial:null;for(let J=0,he=L.length;J<he;J++){const _e=L[J],we=_e.object,ye=_e.geometry,je=Q===null?_e.material:Q,Ne=_e.group;we.layers.test(X.layers)&&Ft(we,$,X,ye,je,Ne)}}function Ft(L,$,X,Q,J,he){L.onBeforeRender(S,$,X,Q,J,he),L.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),J.onBeforeRender(S,$,X,Q,L,he),J.transparent===!0&&J.side===Si&&J.forceSinglePass===!1?(J.side=Nr,J.needsUpdate=!0,S.renderBufferDirect(X,$,Q,J,L,he),J.side=Vo,J.needsUpdate=!0,S.renderBufferDirect(X,$,Q,J,L,he),J.side=Si):S.renderBufferDirect(X,$,Q,J,L,he),L.onAfterRender(S,$,X,Q,J,he)}function _t(L,$,X){$.isScene!==!0&&($=ot);const Q=Ve.get(L),J=_.state.lights,he=_.state.shadowsArray,_e=J.state.version,we=le.getParameters(L,J.state,he,$,X),ye=le.getProgramCacheKey(we);let je=Q.programs;Q.environment=L.isMeshStandardMaterial?$.environment:null,Q.fog=$.fog,Q.envMap=(L.isMeshStandardMaterial?ut:pt).get(L.envMap||Q.environment),je===void 0&&(L.addEventListener("dispose",ke),je=new Map,Q.programs=je);let Ne=je.get(ye);if(Ne!==void 0){if(Q.currentProgram===Ne&&Q.lightsStateVersion===_e)return Un(L,we),Ne}else we.uniforms=le.getUniforms(L),L.onBuild(X,we,S),L.onBeforeCompile(we,S),Ne=le.acquireProgram(we,ye),je.set(ye,Ne),Q.uniforms=we.uniforms;const ze=Q.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(ze.clippingPlanes=nt.uniform),Un(L,we),Q.needsLights=re(L),Q.lightsStateVersion=_e,Q.needsLights&&(ze.ambientLightColor.value=J.state.ambient,ze.lightProbe.value=J.state.probe,ze.directionalLights.value=J.state.directional,ze.directionalLightShadows.value=J.state.directionalShadow,ze.spotLights.value=J.state.spot,ze.spotLightShadows.value=J.state.spotShadow,ze.rectAreaLights.value=J.state.rectArea,ze.ltc_1.value=J.state.rectAreaLTC1,ze.ltc_2.value=J.state.rectAreaLTC2,ze.pointLights.value=J.state.point,ze.pointLightShadows.value=J.state.pointShadow,ze.hemisphereLights.value=J.state.hemi,ze.directionalShadowMap.value=J.state.directionalShadowMap,ze.directionalShadowMatrix.value=J.state.directionalShadowMatrix,ze.spotShadowMap.value=J.state.spotShadowMap,ze.spotLightMatrix.value=J.state.spotLightMatrix,ze.spotLightMap.value=J.state.spotLightMap,ze.pointShadowMap.value=J.state.pointShadowMap,ze.pointShadowMatrix.value=J.state.pointShadowMatrix),Q.currentProgram=Ne,Q.uniformsList=null,Ne}function Kn(L){if(L.uniformsList===null){const $=L.currentProgram.getUniforms();L.uniformsList=Uy.seqWithValue($.seq,L.uniforms)}return L.uniformsList}function Un(L,$){const X=Ve.get(L);X.outputColorSpace=$.outputColorSpace,X.batching=$.batching,X.instancing=$.instancing,X.instancingColor=$.instancingColor,X.skinning=$.skinning,X.morphTargets=$.morphTargets,X.morphNormals=$.morphNormals,X.morphColors=$.morphColors,X.morphTargetsCount=$.morphTargetsCount,X.numClippingPlanes=$.numClippingPlanes,X.numIntersection=$.numClipIntersection,X.vertexAlphas=$.vertexAlphas,X.vertexTangents=$.vertexTangents,X.toneMapping=$.toneMapping}function O(L,$,X,Q,J){$.isScene!==!0&&($=ot),et.resetTextureUnits();const he=$.fog,_e=Q.isMeshStandardMaterial?$.environment:null,we=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:wa,ye=(Q.isMeshStandardMaterial?ut:pt).get(Q.envMap||_e),je=Q.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,Ne=!!X.attributes.tangent&&(!!Q.normalMap||Q.anisotropy>0),ze=!!X.morphAttributes.position,ht=!!X.morphAttributes.normal,St=!!X.morphAttributes.color;let xt=ma;Q.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(xt=S.toneMapping);const Dt=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,at=Dt!==void 0?Dt.length:0,Ze=Ve.get(Q),Kt=_.state.lights;if(pe===!0&&(be===!0||L!==T)){const Wt=L===T&&Q.id===B;nt.setState(Q,L,Wt)}let Lt=!1;Q.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==Kt.state.version||Ze.outputColorSpace!==we||J.isBatchedMesh&&Ze.batching===!1||!J.isBatchedMesh&&Ze.batching===!0||J.isInstancedMesh&&Ze.instancing===!1||!J.isInstancedMesh&&Ze.instancing===!0||J.isSkinnedMesh&&Ze.skinning===!1||!J.isSkinnedMesh&&Ze.skinning===!0||J.isInstancedMesh&&Ze.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&Ze.instancingColor===!1&&J.instanceColor!==null||Ze.envMap!==ye||Q.fog===!0&&Ze.fog!==he||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==nt.numPlanes||Ze.numIntersection!==nt.numIntersection)||Ze.vertexAlphas!==je||Ze.vertexTangents!==Ne||Ze.morphTargets!==ze||Ze.morphNormals!==ht||Ze.morphColors!==St||Ze.toneMapping!==xt||Fe.isWebGL2===!0&&Ze.morphTargetsCount!==at)&&(Lt=!0):(Lt=!0,Ze.__version=Q.version);let Nt=Ze.currentProgram;Lt===!0&&(Nt=_t(Q,$,J));let wn=!1,cr=!1,$n=!1;const fn=Nt.getUniforms(),Qt=Ze.uniforms;if(Ce.useProgram(Nt.program)&&(wn=!0,cr=!0,$n=!0),Q.id!==B&&(B=Q.id,cr=!0),wn||T!==L){fn.setValue(Z,"projectionMatrix",L.projectionMatrix),fn.setValue(Z,"viewMatrix",L.matrixWorldInverse);const Wt=fn.map.cameraPosition;Wt!==void 0&&Wt.setValue(Z,st.setFromMatrixPosition(L.matrixWorld)),Fe.logarithmicDepthBuffer&&fn.setValue(Z,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&fn.setValue(Z,"isOrthographic",L.isOrthographicCamera===!0),T!==L&&(T=L,cr=!0,$n=!0)}if(J.isSkinnedMesh){fn.setOptional(Z,J,"bindMatrix"),fn.setOptional(Z,J,"bindMatrixInverse");const Wt=J.skeleton;Wt&&(Fe.floatVertexTextures?(Wt.boneTexture===null&&Wt.computeBoneTexture(),fn.setValue(Z,"boneTexture",Wt.boneTexture,et)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}J.isBatchedMesh&&(fn.setOptional(Z,J,"batchingTexture"),fn.setValue(Z,"batchingTexture",J._matricesTexture,et));const Zn=X.morphAttributes;if((Zn.position!==void 0||Zn.normal!==void 0||Zn.color!==void 0&&Fe.isWebGL2===!0)&&dt.update(J,X,Nt),(cr||Ze.receiveShadow!==J.receiveShadow)&&(Ze.receiveShadow=J.receiveShadow,fn.setValue(Z,"receiveShadow",J.receiveShadow)),Q.isMeshGouraudMaterial&&Q.envMap!==null&&(Qt.envMap.value=ye,Qt.flipEnvMap.value=ye.isCubeTexture&&ye.isRenderTargetTexture===!1?-1:1),cr&&(fn.setValue(Z,"toneMappingExposure",S.toneMappingExposure),Ze.needsLights&&k(Qt,$n),he&&Q.fog===!0&&Pe.refreshFogUniforms(Qt,he),Pe.refreshMaterialUniforms(Qt,Q,te,ee,Ae),Uy.upload(Z,Kn(Ze),Qt,et)),Q.isShaderMaterial&&Q.uniformsNeedUpdate===!0&&(Uy.upload(Z,Kn(Ze),Qt,et),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&fn.setValue(Z,"center",J.center),fn.setValue(Z,"modelViewMatrix",J.modelViewMatrix),fn.setValue(Z,"normalMatrix",J.normalMatrix),fn.setValue(Z,"modelMatrix",J.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const Wt=Q.uniformsGroups;for(let rn=0,Dn=Wt.length;rn<Dn;rn++)if(Fe.isWebGL2){const js=Wt[rn];me.update(js,Nt),me.bind(js,Nt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nt}function k(L,$){L.ambientLightColor.needsUpdate=$,L.lightProbe.needsUpdate=$,L.directionalLights.needsUpdate=$,L.directionalLightShadows.needsUpdate=$,L.pointLights.needsUpdate=$,L.pointLightShadows.needsUpdate=$,L.spotLights.needsUpdate=$,L.spotLightShadows.needsUpdate=$,L.rectAreaLights.needsUpdate=$,L.hemisphereLights.needsUpdate=$}function re(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(L,$,X){Ve.get(L.texture).__webglTexture=$,Ve.get(L.depthTexture).__webglTexture=X;const Q=Ve.get(L);Q.__hasExternalTextures=!0,Q.__hasExternalTextures&&(Q.__autoAllocateDepthBuffer=X===void 0,Q.__autoAllocateDepthBuffer||ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(L,$){const X=Ve.get(L);X.__webglFramebuffer=$,X.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(L,$=0,X=0){C=L,b=$,M=X;let Q=!0,J=null,he=!1,_e=!1;if(L){const ye=Ve.get(L);ye.__useDefaultFramebuffer!==void 0?(Ce.bindFramebuffer(Z.FRAMEBUFFER,null),Q=!1):ye.__webglFramebuffer===void 0?et.setupRenderTarget(L):ye.__hasExternalTextures&&et.rebindTextures(L,Ve.get(L.texture).__webglTexture,Ve.get(L.depthTexture).__webglTexture);const je=L.texture;(je.isData3DTexture||je.isDataArrayTexture||je.isCompressedArrayTexture)&&(_e=!0);const Ne=Ve.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(Ne[$])?J=Ne[$][X]:J=Ne[$],he=!0):Fe.isWebGL2&&L.samples>0&&et.useMultisampledRTT(L)===!1?J=Ve.get(L).__webglMultisampledFramebuffer:Array.isArray(Ne)?J=Ne[X]:J=Ne,P.copy(L.viewport),N.copy(L.scissor),z=L.scissorTest}else P.copy(U).multiplyScalar(te).floor(),N.copy(oe).multiplyScalar(te).floor(),z=fe;if(Ce.bindFramebuffer(Z.FRAMEBUFFER,J)&&Fe.drawBuffers&&Q&&Ce.drawBuffers(L,J),Ce.viewport(P),Ce.scissor(N),Ce.setScissorTest(z),he){const ye=Ve.get(L.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+$,ye.__webglTexture,X)}else if(_e){const ye=Ve.get(L.texture),je=$||0;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ye.__webglTexture,X||0,je)}B=-1},this.readRenderTargetPixels=function(L,$,X,Q,J,he,_e){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let we=Ve.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&_e!==void 0&&(we=we[_e]),we){Ce.bindFramebuffer(Z.FRAMEBUFFER,we);try{const ye=L.texture,je=ye.format,Ne=ye.type;if(je!==Ei&&Ot.convert(je)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ze=Ne===si&&(ve.has("EXT_color_buffer_half_float")||Fe.isWebGL2&&ve.has("EXT_color_buffer_float"));if(Ne!==li&&Ot.convert(Ne)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ne===Zr&&(Fe.isWebGL2||ve.has("OES_texture_float")||ve.has("WEBGL_color_buffer_float")))&&!ze){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=L.width-Q&&X>=0&&X<=L.height-J&&Z.readPixels($,X,Q,J,Ot.convert(je),Ot.convert(Ne),he)}finally{const ye=C!==null?Ve.get(C).__webglFramebuffer:null;Ce.bindFramebuffer(Z.FRAMEBUFFER,ye)}}},this.copyFramebufferToTexture=function(L,$,X=0){const Q=Math.pow(2,-X),J=Math.floor($.image.width*Q),he=Math.floor($.image.height*Q);et.setTexture2D($,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,X,0,0,L.x,L.y,J,he),Ce.unbindTexture()},this.copyTextureToTexture=function(L,$,X,Q=0){const J=$.image.width,he=$.image.height,_e=Ot.convert(X.format),we=Ot.convert(X.type);et.setTexture2D(X,0),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,X.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,X.unpackAlignment),$.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Q,L.x,L.y,J,he,_e,we,$.image.data):$.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Q,L.x,L.y,$.mipmaps[0].width,$.mipmaps[0].height,_e,$.mipmaps[0].data):Z.texSubImage2D(Z.TEXTURE_2D,Q,L.x,L.y,_e,we,$.image),Q===0&&X.generateMipmaps&&Z.generateMipmap(Z.TEXTURE_2D),Ce.unbindTexture()},this.copyTextureToTexture3D=function(L,$,X,Q,J=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const he=L.max.x-L.min.x+1,_e=L.max.y-L.min.y+1,we=L.max.z-L.min.z+1,ye=Ot.convert(Q.format),je=Ot.convert(Q.type);let Ne;if(Q.isData3DTexture)et.setTexture3D(Q,0),Ne=Z.TEXTURE_3D;else if(Q.isDataArrayTexture)et.setTexture2DArray(Q,0),Ne=Z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,Q.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,Q.unpackAlignment);const ze=Z.getParameter(Z.UNPACK_ROW_LENGTH),ht=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),St=Z.getParameter(Z.UNPACK_SKIP_PIXELS),xt=Z.getParameter(Z.UNPACK_SKIP_ROWS),Dt=Z.getParameter(Z.UNPACK_SKIP_IMAGES),at=X.isCompressedTexture?X.mipmaps[0]:X.image;Z.pixelStorei(Z.UNPACK_ROW_LENGTH,at.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,at.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,L.min.x),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,L.min.y),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,L.min.z),X.isDataTexture||X.isData3DTexture?Z.texSubImage3D(Ne,J,$.x,$.y,$.z,he,_e,we,ye,je,at.data):X.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(Ne,J,$.x,$.y,$.z,he,_e,we,ye,at.data)):Z.texSubImage3D(Ne,J,$.x,$.y,$.z,he,_e,we,ye,je,at),Z.pixelStorei(Z.UNPACK_ROW_LENGTH,ze),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,ht),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,St),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,xt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Dt),J===0&&Q.generateMipmaps&&Z.generateMipmap(Ne),Ce.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?et.setTextureCube(L,0):L.isData3DTexture?et.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?et.setTexture2DArray(L,0):et.setTexture2D(L,0),Ce.unbindTexture()},this.resetState=function(){b=0,M=0,C=null,Ce.reset(),ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ko}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Ex?"display-p3":"srgb",t.unpackColorSpace=Mn.workingColorSpace===Tg?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Or?ga:bg}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ga?Or:wa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class aN extends uT{}aN.prototype.isWebGL1Renderer=!0;class Tx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new tt(e),this.density=t}clone(){return new Tx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Cx{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new tt(e),this.near=t,this.far=r}clone(){return new Cx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Zu extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Bg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Qm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ns()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fi=new W;class Ac{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.applyMatrix4(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.applyNormalMatrix(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.transformDirection(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ls(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ls(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ls(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ls(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),r=jt(r,this.array),i=jt(i,this.array),s=jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new en(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ac(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fT extends yr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Yf;const Ep=new W,Jf=new W,Kf=new W,Zf=new Se,Ap=new Se,lN=new Tt,wv=new W,wp=new W,Mv=new W,uB=new Se,iE=new Se,fB=new Se;class cN extends hn{constructor(e=new fT){if(super(),this.isSprite=!0,this.type="Sprite",Yf===void 0){Yf=new zt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Bg(t,5);Yf.setIndex([0,1,2,0,2,3]),Yf.setAttribute("position",new Ac(r,3,0,!1)),Yf.setAttribute("uv",new Ac(r,2,3,!1))}this.geometry=Yf,this.material=e,this.center=new Se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Jf.setFromMatrixScale(this.matrixWorld),lN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Jf.multiplyScalar(-Kf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;bv(wv.set(-.5,-.5,0),Kf,o,Jf,i,s),bv(wp.set(.5,-.5,0),Kf,o,Jf,i,s),bv(Mv.set(.5,.5,0),Kf,o,Jf,i,s),uB.set(0,0),iE.set(1,0),fB.set(1,1);let a=e.ray.intersectTriangle(wv,wp,Mv,!1,Ep);if(a===null&&(bv(wp.set(-.5,.5,0),Kf,o,Jf,i,s),iE.set(0,1),a=e.ray.intersectTriangle(wv,Mv,wp,!1,Ep),a===null))return;const l=e.ray.origin.distanceTo(Ep);l<e.near||l>e.far||t.push({distance:l,point:Ep.clone(),uv:as.getInterpolation(Ep,wv,wp,Mv,uB,iE,fB,new Se),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function bv(n,e,t,r,i,s){Zf.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Ap.x=s*Zf.x-i*Zf.y,Ap.y=i*Zf.x+s*Zf.y):Ap.copy(Zf),n.copy(e),n.x+=Ap.x,n.y+=Ap.y,n.applyMatrix4(lN)}const Tv=new W,dB=new W;class uN extends hn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Tv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Tv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Tv.setFromMatrixPosition(e.matrixWorld),dB.setFromMatrixPosition(this.matrixWorld);const r=Tv.distanceTo(dB)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const hB=new W,pB=new An,mB=new An,S7=new W,gB=new Tt,Cv=new W,sE=new ei,vB=new Tt,oE=new hf;class dT extends Jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=aw,this.bindMatrix=new Tt,this.bindMatrixInverse=new Tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new qr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Cv),this.boundingBox.expandByPoint(Cv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ei),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Cv),this.boundingSphere.expandByPoint(Cv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sE.copy(this.boundingSphere),sE.applyMatrix4(i),e.ray.intersectsSphere(sE)!==!1&&(vB.copy(i).invert(),oE.copy(e.ray).applyMatrix4(vB),!(this.boundingBox!==null&&oE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,oE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new An,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===aw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===bF?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;pB.fromBufferAttribute(i.attributes.skinIndex,e),mB.fromBufferAttribute(i.attributes.skinWeight,e),hB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=mB.getComponent(s);if(o!==0){const a=pB.getComponent(s);gB.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(S7.copy(hB).applyMatrix4(gB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Rx extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lu extends In{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Cn,u=Cn,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yB=new Tt,E7=new Tt;class Ig{constructor(e=[],t=[]){this.uuid=Ns(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Tt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:E7;yB.multiplyMatrices(a,t[s]),yB.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ig(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Lu(t,e,e,Ei,Zr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Rx),this.bones.push(o),this.boneInverses.push(new Tt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class fh extends en{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qf=new Tt,_B=new Tt,Rv=[],xB=new qr,A7=new Tt,Mp=new Jn,bp=new ei;class hT extends Jn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new fh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,A7)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qf),xB.copy(e.boundingBox).applyMatrix4(Qf),this.boundingBox.union(xB)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ei),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qf),bp.copy(e.boundingSphere).applyMatrix4(Qf),this.boundingSphere.union(bp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Mp.geometry=this.geometry,Mp.material=this.material,Mp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bp.copy(this.boundingSphere),bp.applyMatrix4(r),e.ray.intersectsSphere(bp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Qf),_B.multiplyMatrices(r,Qf),Mp.matrixWorld=_B,Mp.raycast(e,Rv);for(let o=0,a=Rv.length;o<a;o++){const l=Rv[o];l.instanceId=s,l.object=this,t.push(l)}Rv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new fh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function w7(n,e){return n.z-e.z}function M7(n,e){return e.z-n.z}class b7{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const qf="batchId",Nl=new Tt,SB=new Tt,T7=new Tt,EB=new Tt,aE=new Pg,Pv=new qr,qc=new ei,Tp=new W,lE=new b7,yi=new Jn,Bv=[];function C7(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class fN extends Jn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new zt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Lu(t,e,e,Ei,Zr);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,p=new c.constructor(r*u),m=new l.constructor(p,u,d);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new en(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(qf,new en(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(qf))throw new Error(`BatchedMesh: Geometry cannot use attribute "${qf}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===qf)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Nl),this.getBoundingBoxAt(i,Pv).applyMatrix4(Nl),t.union(Pv))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ei);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Nl),this.getBoundingSphereAt(i,qc).applyMatrix4(Nl),t.union(qc))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;d.push(!0),p.push(!0);const y=this._geometryCount;this._geometryCount++,T7.toArray(v,y*16),m.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new qr,sphereInitialized:!1,sphere:new ei});const _=this.geometry.getAttribute(qf);for(let g=0;g<i.vertexCount;g++)_.setX(i.vertexStart+g,y);return _.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===qf)continue;const v=t.getAttribute(m),y=r.getAttribute(m);C7(v,y,l);const _=v.itemSize;for(let g=v.count,x=c;g<x;g++){const S=l+g;for(let A=0;A<_;A++)y.setComponent(S,A,0)}y.needsUpdate=!0}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,y=a.indexCount;v<y;v++)s.setX(m+v,l);s.needsUpdate=!0}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(Tp.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Pv),Pv.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,p=c.start+c.count;d<p;d++){let m=d;a&&(m=a.getX(m)),Tp.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Tp))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;yi.material=this.material,yi.geometry.index=l.index,yi.geometry.attributes=l.attributes,yi.geometry.boundingBox===null&&(yi.geometry.boundingBox=new qr),yi.geometry.boundingSphere===null&&(yi.geometry.boundingSphere=new ei);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];yi.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,yi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,yi.geometry.boundingBox),this.getBoundingSphereAt(c,yi.geometry.boundingSphere),yi.raycast(e,Bv);for(let d=0,p=Bv.length;d<p;d++){const m=Bv[d];m.object=this,m.batchId=c,t.push(m)}Bv.length=0}yi.material=null,yi.geometry.index=null,yi.geometry.attributes={},yi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled;p&&(EB.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),aE.setFromProjectionMatrix(EB,e.isWebGPURenderer?lh:ko));let m=0;if(this.sortObjects){SB.copy(this.matrixWorld).invert(),Tp.setFromMatrixPosition(r.matrixWorld).applyMatrix4(SB);for(let _=0,g=l.length;_<g;_++)if(l[_]){this.getMatrixAt(_,Nl),this.getBoundingSphereAt(_,qc).applyMatrix4(Nl);let x=!1;if(p&&(x=!aE.intersectsSphere(qc)),!x){const S=Tp.distanceTo(qc.center);lE.push(d[_],S)}}const v=lE.list,y=this.customSort;y===null?v.sort(s.transparent?M7:w7):y.call(this,v,r);for(let _=0,g=v.length;_<g;_++){const x=v[_];c[m]=x.start*a,u[m]=x.count,m++}lE.reset()}else for(let v=0,y=l.length;v<y;v++)if(l[v]){let _=!1;if(p&&(this.getMatrixAt(v,Nl),this.getBoundingSphereAt(v,qc).applyMatrix4(Nl),_=!aE.intersectsSphere(qc)),!_){const g=d[v];c[m]=g.start*a,u[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Pi extends yr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const AB=new W,wB=new W,MB=new Tt,cE=new hf,Iv=new ei;class dl extends hn{constructor(e=new zt,t=new Pi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)AB.fromBufferAttribute(t,i-1),wB.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=AB.distanceTo(wB);e.setAttribute("lineDistance",new Et(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Iv.copy(r.boundingSphere),Iv.applyMatrix4(i),Iv.radius+=s,e.ray.intersectsSphere(Iv)===!1)return;MB.copy(i).invert(),cE.copy(e.ray).applyMatrix4(MB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new W,u=new W,d=new W,p=new W,m=this.isLineSegments?2:1,v=r.index,_=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=g,A=x-1;S<A;S+=m){const b=v.getX(S),M=v.getX(S+1);if(c.fromBufferAttribute(_,b),u.fromBufferAttribute(_,M),cE.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(p);B<e.near||B>e.far||t.push({distance:B,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let S=g,A=x-1;S<A;S+=m){if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,S+1),cE.distanceSqToSegment(c,u,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(p);M<e.near||M>e.far||t.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const bB=new W,TB=new W;class $o extends dl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)bB.fromBufferAttribute(t,i),TB.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+bB.distanceTo(TB);e.setAttribute("lineDistance",new Et(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class pT extends dl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Px extends yr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const CB=new Tt,Uw=new hf,Dv=new ei,Lv=new W;class mT extends hn{constructor(e=new zt,t=new Px){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Dv.copy(r.boundingSphere),Dv.applyMatrix4(i),Dv.radius+=s,e.ray.intersectsSphere(Dv)===!1)return;CB.copy(i).invert(),Uw.copy(e.ray).applyMatrix4(CB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,y=m;v<y;v++){const _=c.getX(v);Lv.fromBufferAttribute(d,_),RB(Lv,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=p,y=m;v<y;v++)Lv.fromBufferAttribute(d,v),RB(Lv,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function RB(n,e,t,r,i,s,o){const a=Uw.distanceSqToPoint(n);if(a<t){const l=new W;Uw.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class R7 extends In{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:En,this.magFilter=s!==void 0?s:En,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class P7 extends In{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Cn,this.minFilter=Cn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Bx extends In{constructor(e,t,r,i,s,o,a,l,c,u,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class B7 extends Bx{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ii}}class I7 extends Bx{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Ea),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class D7 extends In{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Se:new W);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new W,i=[],s=[],o=[],a=new W,l=new Tt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new W)}s[0]=new W,o[0]=new W;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(pr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(pr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ix extends Xo{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Se,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class dN extends Ix{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function gT(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Ov=new W,uE=new gT,fE=new gT,dE=new gT;class hN extends Xo{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new W){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Ov.subVectors(i[0],i[1]).add(i[0]),c=Ov);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Ov.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Ov),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(u),m);y<1e-4&&(y=1),v<1e-4&&(v=y),_<1e-4&&(_=y),uE.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,v,y,_),fE.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,v,y,_),dE.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,v,y,_)}else this.curveType==="catmullrom"&&(uE.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),fE.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),dE.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return r.set(uE.calc(l),fE.calc(l),dE.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new W().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function PB(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function L7(n,e){const t=1-n;return t*t*e}function O7(n,e){return 2*(1-n)*n*e}function F7(n,e){return n*n*e}function fm(n,e,t,r){return L7(n,e)+O7(n,t)+F7(n,r)}function N7(n,e){const t=1-n;return t*t*t*e}function U7(n,e){const t=1-n;return 3*t*t*n*e}function k7(n,e){return 3*(1-n)*n*n*e}function z7(n,e){return n*n*n*e}function dm(n,e,t,r,i){return N7(n,e)+U7(n,t)+k7(n,r)+z7(n,i)}class vT extends Xo{constructor(e=new Se,t=new Se,r=new Se,i=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Se){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(dm(e,i.x,s.x,o.x,a.x),dm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pN extends Xo{constructor(e=new W,t=new W,r=new W,i=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new W){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(dm(e,i.x,s.x,o.x,a.x),dm(e,i.y,s.y,o.y,a.y),dm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yT extends Xo{constructor(e=new Se,t=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Se){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mN extends Xo{constructor(e=new W,t=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new W){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new W){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _T extends Xo{constructor(e=new Se,t=new Se,r=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Se){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(fm(e,i.x,s.x,o.x),fm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xT extends Xo{constructor(e=new W,t=new W,r=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new W){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(fm(e,i.x,s.x,o.x),fm(e,i.y,s.y,o.y),fm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ST extends Xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Se){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(PB(a,l.x,c.x,u.x,d.x),PB(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Se().fromArray(i))}return this}}var T_=Object.freeze({__proto__:null,ArcCurve:dN,CatmullRomCurve3:hN,CubicBezierCurve:vT,CubicBezierCurve3:pN,EllipseCurve:Ix,LineCurve:yT,LineCurve3:mN,QuadraticBezierCurve:_T,QuadraticBezierCurve3:xT,SplineCurve:ST});class gN extends Xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new T_[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new T_[i.type]().fromJSON(i))}return this}}class eg extends gN{constructor(e){super(),this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new yT(this.currentPoint.clone(),new Se(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new _T(this.currentPoint.clone(),new Se(e,t),new Se(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new vT(this.currentPoint.clone(),new Se(e,t),new Se(r,i),new Se(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new ST(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new Ix(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Dg extends zt{constructor(e=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=pr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new W,p=new Se,m=new W,v=new W,y=new W;let _=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(v)}for(let x=0;x<=t;x++){const S=r+x*u*i,A=Math.sin(S),b=Math.cos(S);for(let M=0;M<=e.length-1;M++){d.x=e[M].x*A,d.y=e[M].y,d.z=e[M].x*b,o.push(d.x,d.y,d.z),p.x=x/t,p.y=M/(e.length-1),a.push(p.x,p.y);const C=l[3*M+0]*A,B=l[3*M+1],T=l[3*M+0]*b;c.push(C,B,T)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const A=S+x*e.length,b=A,M=A+e.length,C=A+e.length+1,B=A+1;s.push(b,M,B),s.push(C,B,M)}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("uv",new Et(a,2)),this.setAttribute("normal",new Et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.points,e.segments,e.phiStart,e.phiLength)}}class Dx extends Dg{constructor(e=1,t=1,r=4,i=8){const s=new eg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Dx(e.radius,e.length,e.capSegments,e.radialSegments)}}class Lx extends zt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new W,u=new Se;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(a,3)),this.setAttribute("uv",new Et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bh extends zt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],m=[];let v=0;const y=[],_=r/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new Et(d,3)),this.setAttribute("normal",new Et(p,3)),this.setAttribute("uv",new Et(m,2));function x(){const A=new W,b=new W;let M=0;const C=(t-e)/r;for(let B=0;B<=s;B++){const T=[],P=B/s,N=P*(t-e)+e;for(let z=0;z<=i;z++){const q=z/i,G=q*l+a,Y=Math.sin(G),ee=Math.cos(G);b.x=N*Y,b.y=-P*r+_,b.z=N*ee,d.push(b.x,b.y,b.z),A.set(Y,C,ee).normalize(),p.push(A.x,A.y,A.z),m.push(q,1-P),T.push(v++)}y.push(T)}for(let B=0;B<i;B++)for(let T=0;T<s;T++){const P=y[T][B],N=y[T+1][B],z=y[T+1][B+1],q=y[T][B+1];u.push(P,N,q),u.push(N,z,q),M+=6}c.addGroup(g,M,0),g+=M}function S(A){const b=v,M=new Se,C=new W;let B=0;const T=A===!0?e:t,P=A===!0?1:-1;for(let z=1;z<=i;z++)d.push(0,_*P,0),p.push(0,P,0),m.push(.5,.5),v++;const N=v;for(let z=0;z<=i;z++){const G=z/i*l+a,Y=Math.cos(G),ee=Math.sin(G);C.x=T*ee,C.y=_*P,C.z=T*Y,d.push(C.x,C.y,C.z),p.push(0,P,0),M.x=Y*.5+.5,M.y=ee*.5*P+.5,m.push(M.x,M.y),v++}for(let z=0;z<i;z++){const q=b+z,G=N+z;A===!0?u.push(G,G+1,q):u.push(G+1,G,q),B+=3}c.addGroup(g,B,A===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ox extends Bh{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ox(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Nc extends zt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(s.slice(),3)),this.setAttribute("uv",new Et(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new W,A=new W,b=new W;for(let M=0;M<t.length;M+=3)m(t[M+0],S),m(t[M+1],A),m(t[M+2],b),l(S,A,b,x)}function l(x,S,A,b){const M=b+1,C=[];for(let B=0;B<=M;B++){C[B]=[];const T=x.clone().lerp(A,B/M),P=S.clone().lerp(A,B/M),N=M-B;for(let z=0;z<=N;z++)z===0&&B===M?C[B][z]=T:C[B][z]=T.clone().lerp(P,z/N)}for(let B=0;B<M;B++)for(let T=0;T<2*(M-B)-1;T++){const P=Math.floor(T/2);T%2===0?(p(C[B][P+1]),p(C[B+1][P]),p(C[B][P])):(p(C[B][P+1]),p(C[B+1][P+1]),p(C[B+1][P]))}}function c(x){const S=new W;for(let A=0;A<s.length;A+=3)S.x=s[A+0],S.y=s[A+1],S.z=s[A+2],S.normalize().multiplyScalar(x),s[A+0]=S.x,s[A+1]=S.y,s[A+2]=S.z}function u(){const x=new W;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const A=_(x)/2/Math.PI+.5,b=g(x)/Math.PI+.5;o.push(A,1-b)}v(),d()}function d(){for(let x=0;x<o.length;x+=6){const S=o[x+0],A=o[x+2],b=o[x+4],M=Math.max(S,A,b),C=Math.min(S,A,b);M>.9&&C<.1&&(S<.2&&(o[x+0]+=1),A<.2&&(o[x+2]+=1),b<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,S){const A=x*3;S.x=e[A+0],S.y=e[A+1],S.z=e[A+2]}function v(){const x=new W,S=new W,A=new W,b=new W,M=new Se,C=new Se,B=new Se;for(let T=0,P=0;T<s.length;T+=9,P+=6){x.set(s[T+0],s[T+1],s[T+2]),S.set(s[T+3],s[T+4],s[T+5]),A.set(s[T+6],s[T+7],s[T+8]),M.set(o[P+0],o[P+1]),C.set(o[P+2],o[P+3]),B.set(o[P+4],o[P+5]),b.copy(x).add(S).add(A).divideScalar(3);const N=_(b);y(M,P+0,x,N),y(C,P+2,S,N),y(B,P+4,A,N)}}function y(x,S,A,b){b<0&&x.x===1&&(o[S]=x.x-1),A.x===0&&A.z===0&&(o[S]=b/2/Math.PI+.5)}function _(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nc(e.vertices,e.indices,e.radius,e.details)}}class Fx extends Nc{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fx(e.radius,e.detail)}}const Fv=new W,Nv=new W,hE=new W,Uv=new as;class vN extends zt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Iu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:y,b:_,c:g}=Uv;if(y.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Uv.getNormal(hE),d[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,d[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const S=(x+1)%3,A=d[x],b=d[S],M=Uv[u[x]],C=Uv[u[S]],B=`${A}_${b}`,T=`${b}_${A}`;T in p&&p[T]?(hE.dot(p[T].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(C.x,C.y,C.z)),p[T]=null):B in p||(p[B]={index0:c[x],index1:c[S],normal:hE.clone()})}}for(const v in p)if(p[v]){const{index0:y,index1:_}=p[v];Fv.fromBufferAttribute(a,y),Nv.fromBufferAttribute(a,_),m.push(Fv.x,Fv.y,Fv.z),m.push(Nv.x,Nv.y,Nv.z)}this.setAttribute("position",new Et(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ou extends eg{constructor(e){super(e),this.uuid=Ns(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new eg().fromJSON(i))}return this}}const H7={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=yN(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,p,m;if(r&&(s=X7(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<i;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return tg(s,o,t,a,l,m,0),o}};function yN(n,e,t,r,i){let s,o;if(i===rX(n,e,t,r)>0)for(s=e;s<t;s+=r)o=BB(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=BB(s,n[s],n[s+1],o);return o&&Nx(o,o.next)&&(rg(o),o=o.next),o}function Qu(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Nx(t,t.next)||ir(t.prev,t,t.next)===0)){if(rg(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function tg(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Z7(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?V7(n,r,i,s):G7(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),rg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=W7(Qu(n),e,t),tg(n,e,t,r,i,s,2)):o===2&&$7(n,e,t,r,i,s):tg(Qu(n),e,t,r,i,s,1);break}}}function G7(n){const e=n.prev,t=n,r=n.next;if(ir(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=d&&v.y<=m&&Td(i,a,s,l,o,c,v.x,v.y)&&ir(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function V7(n,e,t,r){const i=n.prev,s=n,o=n.next;if(ir(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<d?u<p?u:p:d<p?d:p,y=a>l?a>c?a:c:l>c?l:c,_=u>d?u>p?u:p:d>p?d:p,g=kw(m,v,e,t,r),x=kw(y,_,e,t,r);let S=n.prevZ,A=n.nextZ;for(;S&&S.z>=g&&A&&A.z<=x;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Td(a,u,l,d,c,p,S.x,S.y)&&ir(S.prev,S,S.next)>=0||(S=S.prevZ,A.x>=m&&A.x<=y&&A.y>=v&&A.y<=_&&A!==i&&A!==o&&Td(a,u,l,d,c,p,A.x,A.y)&&ir(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Td(a,u,l,d,c,p,S.x,S.y)&&ir(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;A&&A.z<=x;){if(A.x>=m&&A.x<=y&&A.y>=v&&A.y<=_&&A!==i&&A!==o&&Td(a,u,l,d,c,p,A.x,A.y)&&ir(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function W7(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Nx(i,s)&&_N(i,r,r.next,s)&&ng(i,s)&&ng(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),rg(r),rg(r.next),r=n=s),r=r.next}while(r!==n);return Qu(r)}function $7(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&eX(o,a)){let l=xN(o,a);o=Qu(o,o.next),l=Qu(l,l.next),tg(o,e,t,r,i,s,0),tg(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function X7(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=yN(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(q7(c));for(i.sort(j7),s=0;s<i.length;s++)t=Y7(i[s],t);return t}function j7(n,e){return n.x-e.x}function Y7(n,e){const t=J7(n,e);if(!t)return e;const r=xN(t,n);return Qu(r,r.next),Qu(t,t.next)}function J7(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Td(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),ng(t,n)&&(d<u||d===u&&(t.x>i.x||t.x===i.x&&K7(i,t)))&&(i=t,u=d)),t=t.next;while(t!==a);return i}function K7(n,e){return ir(n.prev,n,e.prev)<0&&ir(e.next,n,n.next)<0}function Z7(n,e,t,r){let i=n;do i.z===0&&(i.z=kw(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Q7(i)}function Q7(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function kw(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function q7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Td(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function eX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!tX(n,e)&&(ng(n,e)&&ng(e,n)&&nX(n,e)&&(ir(n.prev,n,e.prev)||ir(n,e.prev,e))||Nx(n,e)&&ir(n.prev,n,n.next)>0&&ir(e.prev,e,e.next)>0)}function ir(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Nx(n,e){return n.x===e.x&&n.y===e.y}function _N(n,e,t,r){const i=zv(ir(n,e,t)),s=zv(ir(n,e,r)),o=zv(ir(t,r,n)),a=zv(ir(t,r,e));return!!(i!==s&&o!==a||i===0&&kv(n,t,e)||s===0&&kv(n,r,e)||o===0&&kv(t,n,r)||a===0&&kv(t,e,r))}function kv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function zv(n){return n>0?1:n<0?-1:0}function tX(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&_N(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ng(n,e){return ir(n.prev,n,n.next)<0?ir(n,e,n.next)>=0&&ir(n,n.prev,e)>=0:ir(n,e,n.prev)<0||ir(n,n.next,e)<0}function nX(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function xN(n,e){const t=new zw(n.i,n.x,n.y),r=new zw(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function BB(n,e,t,r){const i=new zw(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function zw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rX(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class va{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return va.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];IB(e),DB(r,e);let o=e.length;t.forEach(IB);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,DB(r,t[l]);const a=H7.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function IB(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function DB(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ux extends zt{constructor(e=new Ou([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Et(i,3)),this.setAttribute("uv",new Et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:iX;let S,A=!1,b,M,C,B;g&&(S=g.getSpacedPoints(u),A=!0,p=!1,b=g.computeFrenetFrames(u,!1),M=new W,C=new W,B=new W),p||(_=0,m=0,v=0,y=0);const T=a.extractPoints(c);let P=T.shape;const N=T.holes;if(!va.isClockWise(P)){P=P.reverse();for(let Z=0,xe=N.length;Z<xe;Z++){const ve=N[Z];va.isClockWise(ve)&&(N[Z]=ve.reverse())}}const q=va.triangulateShape(P,N),G=P;for(let Z=0,xe=N.length;Z<xe;Z++){const ve=N[Z];P=P.concat(ve)}function Y(Z,xe,ve){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(xe,ve)}const ee=P.length,te=q.length;function V(Z,xe,ve){let Fe,Ce,ae;const Ve=Z.x-xe.x,et=Z.y-xe.y,pt=ve.x-Z.x,ut=ve.y-Z.y,$t=Ve*Ve+et*et,H=Ve*ut-et*pt;if(Math.abs(H)>Number.EPSILON){const F=Math.sqrt($t),le=Math.sqrt(pt*pt+ut*ut),Pe=xe.x-et/F,De=xe.y+Ve/F,Ue=ve.x-ut/le,nt=ve.y+pt/le,He=((Ue-Pe)*ut-(nt-De)*pt)/(Ve*ut-et*pt);Fe=Pe+Ve*He-Z.x,Ce=De+et*He-Z.y;const $e=Fe*Fe+Ce*Ce;if($e<=2)return new Se(Fe,Ce);ae=Math.sqrt($e/2)}else{let F=!1;Ve>Number.EPSILON?pt>Number.EPSILON&&(F=!0):Ve<-Number.EPSILON?pt<-Number.EPSILON&&(F=!0):Math.sign(et)===Math.sign(ut)&&(F=!0),F?(Fe=-et,Ce=Ve,ae=Math.sqrt($t)):(Fe=Ve,Ce=et,ae=Math.sqrt($t/2))}return new Se(Fe/ae,Ce/ae)}const K=[];for(let Z=0,xe=G.length,ve=xe-1,Fe=Z+1;Z<xe;Z++,ve++,Fe++)ve===xe&&(ve=0),Fe===xe&&(Fe=0),K[Z]=V(G[Z],G[ve],G[Fe]);const U=[];let oe,fe=K.concat();for(let Z=0,xe=N.length;Z<xe;Z++){const ve=N[Z];oe=[];for(let Fe=0,Ce=ve.length,ae=Ce-1,Ve=Fe+1;Fe<Ce;Fe++,ae++,Ve++)ae===Ce&&(ae=0),Ve===Ce&&(Ve=0),oe[Fe]=V(ve[Fe],ve[ae],ve[Ve]);U.push(oe),fe=fe.concat(oe)}for(let Z=0;Z<_;Z++){const xe=Z/_,ve=m*Math.cos(xe*Math.PI/2),Fe=v*Math.sin(xe*Math.PI/2)+y;for(let Ce=0,ae=G.length;Ce<ae;Ce++){const Ve=Y(G[Ce],K[Ce],Fe);Le(Ve.x,Ve.y,-ve)}for(let Ce=0,ae=N.length;Ce<ae;Ce++){const Ve=N[Ce];oe=U[Ce];for(let et=0,pt=Ve.length;et<pt;et++){const ut=Y(Ve[et],oe[et],Fe);Le(ut.x,ut.y,-ve)}}}const ue=v+y;for(let Z=0;Z<ee;Z++){const xe=p?Y(P[Z],fe[Z],ue):P[Z];A?(C.copy(b.normals[0]).multiplyScalar(xe.x),M.copy(b.binormals[0]).multiplyScalar(xe.y),B.copy(S[0]).add(C).add(M),Le(B.x,B.y,B.z)):Le(xe.x,xe.y,0)}for(let Z=1;Z<=u;Z++)for(let xe=0;xe<ee;xe++){const ve=p?Y(P[xe],fe[xe],ue):P[xe];A?(C.copy(b.normals[Z]).multiplyScalar(ve.x),M.copy(b.binormals[Z]).multiplyScalar(ve.y),B.copy(S[Z]).add(C).add(M),Le(B.x,B.y,B.z)):Le(ve.x,ve.y,d/u*Z)}for(let Z=_-1;Z>=0;Z--){const xe=Z/_,ve=m*Math.cos(xe*Math.PI/2),Fe=v*Math.sin(xe*Math.PI/2)+y;for(let Ce=0,ae=G.length;Ce<ae;Ce++){const Ve=Y(G[Ce],K[Ce],Fe);Le(Ve.x,Ve.y,d+ve)}for(let Ce=0,ae=N.length;Ce<ae;Ce++){const Ve=N[Ce];oe=U[Ce];for(let et=0,pt=Ve.length;et<pt;et++){const ut=Y(Ve[et],oe[et],Fe);A?Le(ut.x,ut.y+S[u-1].y,S[u-1].x+ve):Le(ut.x,ut.y,d+ve)}}}pe(),be();function pe(){const Z=i.length/3;if(p){let xe=0,ve=ee*xe;for(let Fe=0;Fe<te;Fe++){const Ce=q[Fe];qe(Ce[2]+ve,Ce[1]+ve,Ce[0]+ve)}xe=u+_*2,ve=ee*xe;for(let Fe=0;Fe<te;Fe++){const Ce=q[Fe];qe(Ce[0]+ve,Ce[1]+ve,Ce[2]+ve)}}else{for(let xe=0;xe<te;xe++){const ve=q[xe];qe(ve[2],ve[1],ve[0])}for(let xe=0;xe<te;xe++){const ve=q[xe];qe(ve[0]+ee*u,ve[1]+ee*u,ve[2]+ee*u)}}r.addGroup(Z,i.length/3-Z,0)}function be(){const Z=i.length/3;let xe=0;Ae(G,xe),xe+=G.length;for(let ve=0,Fe=N.length;ve<Fe;ve++){const Ce=N[ve];Ae(Ce,xe),xe+=Ce.length}r.addGroup(Z,i.length/3-Z,1)}function Ae(Z,xe){let ve=Z.length;for(;--ve>=0;){const Fe=ve;let Ce=ve-1;Ce<0&&(Ce=Z.length-1);for(let ae=0,Ve=u+_*2;ae<Ve;ae++){const et=ee*ae,pt=ee*(ae+1),ut=xe+Fe+et,$t=xe+Ce+et,H=xe+Ce+pt,F=xe+Fe+pt;st(ut,$t,H,F)}}}function Le(Z,xe,ve){l.push(Z),l.push(xe),l.push(ve)}function qe(Z,xe,ve){ot(Z),ot(xe),ot(ve);const Fe=i.length/3,Ce=x.generateTopUV(r,i,Fe-3,Fe-2,Fe-1);Ye(Ce[0]),Ye(Ce[1]),Ye(Ce[2])}function st(Z,xe,ve,Fe){ot(Z),ot(xe),ot(Fe),ot(xe),ot(ve),ot(Fe);const Ce=i.length/3,ae=x.generateSideWallUV(r,i,Ce-6,Ce-3,Ce-2,Ce-1);Ye(ae[0]),Ye(ae[1]),Ye(ae[3]),Ye(ae[1]),Ye(ae[2]),Ye(ae[3])}function ot(Z){i.push(l[Z*3+0]),i.push(l[Z*3+1]),i.push(l[Z*3+2])}function Ye(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return sX(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new T_[i.type]().fromJSON(i)),new Ux(r,e.options)}}const iX={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Se(s,o),new Se(a,l),new Se(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],y=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Se(o,1-l),new Se(c,1-d),new Se(p,1-v),new Se(y,1-g)]:[new Se(a,1-l),new Se(u,1-d),new Se(m,1-v),new Se(_,1-g)]}};function sX(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Lg extends Nc{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lg(e.radius,e.detail)}}class Og extends Nc{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Og(e.radius,e.detail)}}class kx extends zt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const p=(t-e)/i,m=new W,v=new Se;for(let y=0;y<=i;y++){for(let _=0;_<=r;_++){const g=s+_/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}d+=p}for(let y=0;y<i;y++){const _=y*(r+1);for(let g=0;g<r;g++){const x=g+_,S=x,A=x+r+1,b=x+r+2,M=x+1;a.push(S,A,M),a.push(A,b,M)}}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zx extends zt{constructor(e=new Ou([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Et(i,3)),this.setAttribute("normal",new Et(s,3)),this.setAttribute("uv",new Et(o,2));function c(u){const d=i.length/3,p=u.extractPoints(t);let m=p.shape;const v=p.holes;va.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const x=v[_];va.isClockWise(x)===!0&&(v[_]=x.reverse())}const y=va.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const x=v[_];m=m.concat(x)}for(let _=0,g=m.length;_<g;_++){const x=m[_];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let _=0,g=y.length;_<g;_++){const x=y[_],S=x[0]+d,A=x[1]+d,b=x[2]+d;r.push(S,A,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return oX(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new zx(r,e.curveSegments)}}function oX(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Fg extends zt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new W,p=new W,m=[],v=[],y=[],_=[];for(let g=0;g<=r;g++){const x=[],S=g/r;let A=0;g===0&&o===0?A=.5/t:g===r&&l===Math.PI&&(A=-.5/t);for(let b=0;b<=t;b++){const M=b/t;d.x=-e*Math.cos(i+M*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(i+M*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),_.push(M+A,1-S),x.push(c++)}u.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){const S=u[g][x+1],A=u[g][x],b=u[g+1][x],M=u[g+1][x+1];(g!==0||o>0)&&m.push(S,A,M),(g!==r-1||l<Math.PI)&&m.push(A,b,M)}this.setIndex(m),this.setAttribute("position",new Et(v,3)),this.setAttribute("normal",new Et(y,3)),this.setAttribute("uv",new Et(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Hx extends Nc{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hx(e.radius,e.detail)}}class Gx extends zt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new W,d=new W,p=new W;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const y=v/i*s,_=m/r*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(y),d.y=(e+t*Math.cos(_))*Math.sin(y),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const y=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,x=(i+1)*m+v;o.push(y,_,x),o.push(_,g,x)}this.setIndex(o),this.setAttribute("position",new Et(a,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Vx extends zt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new W,p=new W,m=new W,v=new W,y=new W,_=new W,g=new W;for(let S=0;S<=r;++S){const A=S/r*s*Math.PI*2;x(A,s,o,e,m),x(A+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),y.crossVectors(_,g),g.crossVectors(y,_),y.normalize(),g.normalize();for(let b=0;b<=i;++b){const M=b/i*Math.PI*2,C=-t*Math.cos(M),B=t*Math.sin(M);d.x=m.x+(C*g.x+B*y.x),d.y=m.y+(C*g.y+B*y.y),d.z=m.z+(C*g.z+B*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/r),u.push(b/i)}}for(let S=1;S<=r;S++)for(let A=1;A<=i;A++){const b=(i+1)*(S-1)+(A-1),M=(i+1)*S+(A-1),C=(i+1)*S+A,B=(i+1)*(S-1)+A;a.push(b,M,B),a.push(M,C,B)}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2));function x(S,A,b,M,C){const B=Math.cos(S),T=Math.sin(S),P=b/A*S,N=Math.cos(P);C.x=M*(2+N)*.5*B,C.y=M*(2+N)*T*.5,C.z=M*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wx extends zt{constructor(e=new xT(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new W,l=new W,c=new Se;let u=new W;const d=[],p=[],m=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new Et(d,3)),this.setAttribute("normal",new Et(p,3)),this.setAttribute("uv",new Et(m,2));function y(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),x(),g()}function _(S){u=e.getPointAt(S/t,u);const A=o.normals[S],b=o.binormals[S];for(let M=0;M<=i;M++){const C=M/i*Math.PI*2,B=Math.sin(C),T=-Math.cos(C);l.x=T*A.x+B*b.x,l.y=T*A.y+B*b.y,l.z=T*A.z+B*b.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let A=1;A<=i;A++){const b=(i+1)*(S-1)+(A-1),M=(i+1)*S+(A-1),C=(i+1)*S+A,B=(i+1)*(S-1)+A;v.push(b,M,B),v.push(M,C,B)}}function x(){for(let S=0;S<=t;S++)for(let A=0;A<=i;A++)c.x=S/t,c.y=A/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wx(new T_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class SN extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new W,s=new W;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let v=p,y=p+m;v<y;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),x=a.getX(v+(_+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),LB(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),LB(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function LB(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var OB=Object.freeze({__proto__:null,BoxGeometry:pf,CapsuleGeometry:Dx,CircleGeometry:Lx,ConeGeometry:Ox,CylinderGeometry:Bh,DodecahedronGeometry:Fx,EdgesGeometry:vN,ExtrudeGeometry:Ux,IcosahedronGeometry:Lg,LatheGeometry:Dg,OctahedronGeometry:Og,PlaneGeometry:Rh,PolyhedronGeometry:Nc,RingGeometry:kx,ShapeGeometry:zx,SphereGeometry:Fg,TetrahedronGeometry:Hx,TorusGeometry:Gx,TorusKnotGeometry:Vx,TubeGeometry:Wx,WireframeGeometry:SN});class EN extends yr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class AN extends _r{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qu extends yr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ra extends qu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wN extends yr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new tt(16777215),this.specular=new tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MN extends yr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ET extends yr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class AT extends yr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bN extends yr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fc,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TN extends Pi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Mu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function CN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function RN(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Hw(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function wT(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function aX(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){d.push(c.times[m]);for(let y=0;y<u;++y)p.push(c.values[m*u+y])}}d.length!==0&&(c.times=Mu(d,c.times.constructor),c.values=Mu(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function lX(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const g=u,x=d-u;y=a.values.slice(g,x)}else if(s>=a.times[v]){const g=v*d+u,x=g+d-u;y=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=u,S=d-u;g.evaluate(s),y=g.resultBuffer.slice(x,S)}l==="quaternion"&&new vr().fromArray(y).normalize().conjugate().toArray(y);const _=c.times.length;for(let g=0;g<_;++g){const x=g*m+p;if(l==="quaternion")vr.multiplyQuaternionsFlat(c.values,x,y,0,c.values,x);else{const S=m-p*2;for(let A=0;A<S;++A)c.values[x+A]-=y[A]}}}return n.blendMode=Qb,n}const cX={convertArray:Mu,isTypedArray:CN,getKeyframeOrder:RN,sortedArray:Hw,flattenJSON:wT,subclip:aX,makeClipAdditive:lX};class Ih{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class PN extends Ih{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Su,endingEnd:Su}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Eu:s=e,a=2*t-r;break;case Ym:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Eu:o=e,l=2*r-t;break;case Ym:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),y=v*v,_=y*v,g=-p*_+2*p*y-p*v,x=(1+p)*_+(-1.5-2*p)*y+(-.5+p)*v+1,S=(-1-m)*_+(1.5+m)*y+.5*v,A=m*_-m*y;for(let b=0;b!==a;++b)s[b]=g*o[u+b]+x*o[c+b]+S*o[l+b]+A*o[d+b];return s}}class MT extends Ih{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class BN extends Ih{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class jo{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mu(t,this.TimeBufferType),this.values=Mu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Mu(e.times,Array),values:Mu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new BN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new MT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new PN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ah:t=this.InterpolantFactoryMethodDiscrete;break;case Ku:t=this.InterpolantFactoryMethodLinear;break;case Ny:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ah;case this.InterpolantFactoryMethodLinear:return Ku;case this.InterpolantFactoryMethodSmooth:return Ny}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&CN(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Ny,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let v=0;v!==r;++v){const y=t[d+v];if(y!==t[p+v]||y!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}jo.prototype.TimeBufferType=Float32Array;jo.prototype.ValueBufferType=Float32Array;jo.prototype.DefaultInterpolation=Ku;class mf extends jo{}mf.prototype.ValueTypeName="bool";mf.prototype.ValueBufferType=Array;mf.prototype.DefaultInterpolation=ah;mf.prototype.InterpolantFactoryMethodLinear=void 0;mf.prototype.InterpolantFactoryMethodSmooth=void 0;class bT extends jo{}bT.prototype.ValueTypeName="color";class dh extends jo{}dh.prototype.ValueTypeName="number";class IN extends Ih{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)vr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class hl extends jo{InterpolantFactoryMethodLinear(e){return new IN(this.times,this.values,this.getValueSize(),e)}}hl.prototype.ValueTypeName="quaternion";hl.prototype.DefaultInterpolation=Ku;hl.prototype.InterpolantFactoryMethodSmooth=void 0;class gf extends jo{}gf.prototype.ValueTypeName="string";gf.prototype.ValueBufferType=Array;gf.prototype.DefaultInterpolation=ah;gf.prototype.InterpolantFactoryMethodLinear=void 0;gf.prototype.InterpolantFactoryMethodSmooth=void 0;class ef extends jo{}ef.prototype.ValueTypeName="vector";class tf{constructor(e,t=-1,r,i=Sx){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ns(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(fX(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(jo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=RN(l);l=Hw(l,1,u),c=Hw(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new dh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,v,y){if(m.length!==0){const _=[],g=[];wT(m,_,g,v),_.length!==0&&y.push(new d(p,_,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)m[p[v].morphTargets[y]]=-1;for(const y in m){const _=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const S=p[v];_.push(S.time),g.push(S.morphTarget===y?1:0)}i.push(new dh(".morphTargetInfluence["+y+"]",_,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(ef,m+".position",p,"pos",i),r(hl,m+".quaternion",p,"rot",i),r(ef,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function uX(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dh;case"vector":case"vector2":case"vector3":case"vector4":return ef;case"color":return bT;case"quaternion":return hl;case"bool":case"boolean":return mf;case"string":return gf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function fX(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=uX(n.type);if(n.times===void 0){const t=[],r=[];wT(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const nf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class TT{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],v=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const DN=new TT;class Bi{constructor(e){this.manager=e!==void 0?e:DN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Bi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ha={};class dX extends Error{constructor(e,t){super(e),this.response=t}}class Hs extends Bi{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=nf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ha[e]!==void 0){Ha[e].push({onLoad:t,onProgress:r,onError:i});return}Ha[e]=[],Ha[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ha[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let y=0;const _=new ReadableStream({start(g){x();function x(){d.read().then(({done:S,value:A})=>{if(S)g.close();else{y+=A.byteLength;const b=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:m});for(let M=0,C=u.length;M<C;M++){const B=u[M];B.onProgress&&B.onProgress(b)}g.enqueue(A),x()}})}}});return new Response(_)}else throw new dX(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{nf.add(e,c);const u=Ha[e];delete Ha[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Ha[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ha[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class hX extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Hs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=tf.parse(e[r]);t.push(i)}return t}}class pX extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Bx,l=new Hs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=En),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+y]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=En),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class ig extends Bi{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=nf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qm("img");function l(){u(),nf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class LN extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=new Rg;s.colorSpace=Or;const o=new ig(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class CT extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Lu,a=new Hs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:ii,o.wrapT=c.wrapT!==void 0?c.wrapT:ii,o.magFilter=c.magFilter!==void 0?c.magFilter:En,o.minFilter=c.minFilter!==void 0?c.minFilter:En,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Aa),c.mipmapCount===1&&(o.minFilter=En),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class ON extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=new In,o=new ig(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Uc extends hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class FN extends Uc{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new tt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const pE=new Tt,FB=new W,NB=new W;class RT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new Tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pg,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new An(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;FB.setFromMatrixPosition(e.matrixWorld),t.position.copy(FB),NB.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(NB),t.updateMatrixWorld(),pE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(pE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class mX extends RT{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=ch*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class PT extends Uc{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new mX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UB=new Tt,Cp=new W,mE=new W;class gX extends RT{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new An(2,1,1,1),new An(0,1,1,1),new An(3,1,1,1),new An(1,1,1,1),new An(3,0,1,1),new An(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Cp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Cp),mE.copy(r.position),mE.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(mE),r.updateMatrixWorld(),i.makeTranslation(-Cp.x,-Cp.y,-Cp.z),UB.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UB)}}class BT extends Uc{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new gX}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class vX extends RT{constructor(){super(new ua(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class IT extends Uc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new vX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NN extends Uc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class UN extends Uc{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class kN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class zN extends Uc{constructor(e=new kN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class $x extends Bi{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Hs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=$x.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new tt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new tt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Se().fromArray(o.value);break;case"v3":i.uniforms[s].value=new W().fromArray(o.value);break;case"v4":i.uniforms[s].value=new An().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Jt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Tt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Se().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:EN,SpriteMaterial:fT,RawShaderMaterial:AN,ShaderMaterial:_r,PointsMaterial:Px,MeshPhysicalMaterial:Ra,MeshStandardMaterial:qu,MeshPhongMaterial:wN,MeshToonMaterial:MN,MeshNormalMaterial:ET,MeshLambertMaterial:AT,MeshDepthMaterial:bx,MeshDistanceMaterial:cT,MeshBasicMaterial:Ls,MeshMatcapMaterial:bN,LineDashedMaterial:TN,LineBasicMaterial:Pi,Material:yr};return new t[e]}}class ya{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HN extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GN extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Hs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),x=Md(_.type,g),S=new Bg(x,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new HN:new zt,a=e.data.index;if(a!==void 0){const m=Md(a.type,a.array);o.setIndex(new en(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let y;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);y=new Ac(_,v.itemSize,v.offset,v.normalized)}else{const _=Md(v.type,v.array),g=v.isInstancedBufferAttribute?fh:en;y=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],y=[];for(let _=0,g=v.length;_<g;_++){const x=v[_];let S;if(x.isInterleavedBufferAttribute){const A=i(e.data,x.data);S=new Ac(A,x.itemSize,x.offset,x.normalized)}else{const A=Md(x.type,x.array);S=new en(A,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),y.push(S)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new W;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ei(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class yX extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Hs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Hs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Ou().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Ig().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new GN;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in OB?a=OB[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new $x;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=tf.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Md(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new TT(t);s=new ig(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Lu(g.data,g.width,g.height)))}i[d.uuid]=new Au(m)}else{const m=a(d.url);i[d.uuid]=new Au(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Md(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new ig(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Lu(v.data,v.width,v.height)))}r[l.uuid]=new Au(u)}else{const u=await s(l.url);r[l.uuid]=new Au(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Rg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Lu:u=new In,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,_X)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],kB),u.wrapT=r(a.wrap[1],kB)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,zB)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,zB)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const _=p[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,d;switch(e.type){case"Scene":o=new Zu,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new tt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Cx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Tx(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ua(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new NN(e.color,e.intensity);break;case"DirectionalLight":o=new IT(e.color,e.intensity);break;case"PointLight":o=new BT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new UN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new PT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new FN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new zN().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new dT(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new Jn(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new hT(u,d,p),o.instanceMatrix=new fh(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new fh(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new fN(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(y=>{const _=new qr;_.min.fromArray(y.boxMin),_.max.fromArray(y.boxMax);const g=new ei;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:_,sphereInitialized:y.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new uN;break;case"Line":o=new dl(a(e.geometry),l(e.material));break;case"LineLoop":o=new pT(a(e.geometry),l(e.material));break;case"LineSegments":o=new $o(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new mT(a(e.geometry),l(e.material));break;case"Sprite":o=new cN(l(e.material));break;case"Group":o=new tl;break;case"Bone":o=new Rx;break;default:o=new hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],y=o.getObjectByProperty("uuid",v.object);y!==void 0&&o.addLevel(y,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const _X={UVMapping:yx,CubeReflectionMapping:Ea,CubeRefractionMapping:xc,EquirectangularReflectionMapping:sh,EquirectangularRefractionMapping:Xm,CubeUVReflectionMapping:Th},kB={RepeatWrapping:Sc,ClampToEdgeWrapping:ii,MirroredRepeatWrapping:oh},zB={NearestFilter:Cn,NearestMipmapNearestFilter:jm,NearestMipmapLinearFilter:zd,LinearFilter:En,LinearMipmapNearestFilter:_x,LinearMipmapLinearFilter:Aa};class VN extends Bi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=nf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){nf.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Hv;class DT{static getContext(){return Hv===void 0&&(Hv=new(window.AudioContext||window.webkitAudioContext)),Hv}static setContext(e){Hv=e}}class xX extends Bi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Hs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);DT.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const HB=new Tt,GB=new Tt,eu=new Tt;class SX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,eu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Iu*t.fov*.5)/t.zoom;let a,l;GB.elements[12]=-i,HB.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,eu.elements[0]=2*t.near/(l-a),eu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(eu),a=-o*t.aspect-s,l=o*t.aspect-s,eu.elements[0]=2*t.near/(l-a),eu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(eu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(GB),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HB)}}class LT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=VB(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=VB();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function VB(){return(typeof performance>"u"?Date:performance).now()}const tu=new W,WB=new vr,EX=new W,nu=new W;class AX extends hn{constructor(){super(),this.type="AudioListener",this.context=DT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new LT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(tu,WB,EX),nu.set(0,0,-1).applyQuaternion(WB),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(tu.x,i),t.positionY.linearRampToValueAtTime(tu.y,i),t.positionZ.linearRampToValueAtTime(tu.z,i),t.forwardX.linearRampToValueAtTime(nu.x,i),t.forwardY.linearRampToValueAtTime(nu.y,i),t.forwardZ.linearRampToValueAtTime(nu.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(tu.x,tu.y,tu.z),t.setOrientation(nu.x,nu.y,nu.z,r.x,r.y,r.z)}}class WN extends hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ru=new W,$B=new vr,wX=new W,iu=new W;class MX extends WN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ru,$B,wX),iu.set(0,0,1).applyQuaternion($B);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ru.x,r),t.positionY.linearRampToValueAtTime(ru.y,r),t.positionZ.linearRampToValueAtTime(ru.z,r),t.orientationX.linearRampToValueAtTime(iu.x,r),t.orientationY.linearRampToValueAtTime(iu.y,r),t.orientationZ.linearRampToValueAtTime(iu.z,r)}else t.setPosition(ru.x,ru.y,ru.z),t.setOrientation(iu.x,iu.y,iu.z)}}class bX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class $N{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){vr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;vr.multiplyQuaternionsFlat(e,o,e,t,e,r),vr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const OT="\\[\\]\\.:\\/",TX=new RegExp("["+OT+"]","g"),FT="[^"+OT+"]",CX="[^"+OT.replace("\\.","")+"]",RX=/((?:WC+[\/:])*)/.source.replace("WC",FT),PX=/(WCOD+)?/.source.replace("WCOD",CX),BX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FT),IX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FT),DX=new RegExp("^"+RX+PX+BX+IX+"$"),LX=["material","materials","bones","map"];class OX{constructor(e,t,r){const i=r||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class dn{constructor(e,t,r){this.path=t,this.parsedPath=r||dn.parseTrackName(t),this.node=dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new dn.Composite(e,t,r):new dn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TX,"")}static parseTrackName(e){const t=DX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);LX.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dn.Composite=OX;dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayElement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement,dn.prototype._setValue_arrayElement_setNeedsUpdate,dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray,dn.prototype._setValue_fromArray_setNeedsUpdate,dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ns(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let y=0,_=o;y!==_;++y)s[y].push(new dn(p,r[y],i[y]))}else if(v<c){a=e[v];const y=--c,_=e[y];t[_.uuid]=v,e[v]=_,t[m]=y,e[y]=p;for(let g=0,x=o;g!==x;++g){const S=s[g],A=S[y];let b=S[v];S[v]=A,b===void 0&&(b=new dn(p,r[g],i[g])),S[y]=b}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,p=e[d];t[p.uuid]=u,e[u]=p,t[c]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const y=r[m],_=y[d],g=y[u];y[u]=_,y[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const p=--s,m=e[p],v=--o,y=e[v];t[m.uuid]=d,e[d]=m,t[y.uuid]=p,e[p]=y,e.pop();for(let _=0,g=i;_!==g;++_){const x=r[_],S=x[p],A=x[v];x[d]=S,x[p]=A,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,y=i;v!==y;++v){const _=r[v];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=u,m=l.length;p!==m;++p){const v=l[p];d[p]=new dn(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class XN{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Su,endingEnd:Su};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=OF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Qb:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Sx:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===FF;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===LF){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Eu,i.endingEnd=Eu):(e?i.endingStart=this.zeroSlopeAtStart?Eu:Su:i.endingStart=Ym,t?i.endingEnd=this.zeroSlopeAtEnd?Eu:Su:i.endingEnd=Ym)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const NX=new Float32Array(1);class jN extends $s{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;v=new $N(dn.create(r,m,y),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new MT(new Float32Array(2),new Float32Array(2),1,NX),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?tf.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Sx),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new XN(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?tf.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class pn{constructor(e){this.value=e}clone(){return new pn(this.value.clone===void 0?this.value:this.value.clone())}}let UX=0;class kX extends $s{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:UX++}),this.name="",this.usage=Qm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class zX extends Bg{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class HX{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class NT{constructor(e,t,r=0,i=1/0){this.ray=new hf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Du,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Gw(e,this,r,t),r.sort(XB),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Gw(e[i],this,r,t);return r.sort(XB),r}}function XB(n,e){return n.distance-e.distance}function Gw(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)Gw(i[s],e,t,!0)}}class Vw{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(pr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class GX{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const jB=new Se;class VX{constructor(e=new Se(1/0,1/0),t=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=jB.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jB).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const YB=new W,Gv=new W;class WX{constructor(e=new W,t=new W){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){YB.subVectors(e,this.start),Gv.subVectors(this.end,this.start);const r=Gv.dot(Gv);let s=Gv.dot(YB)/r;return t&&(s=pr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JB=new W;class $X extends hn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new zt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Et(i,3));const s=new Pi({fog:!1,toneMapped:!1});this.cone=new $o(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),JB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JB),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ul=new W,Vv=new Tt,gE=new Tt;class YN extends $o{constructor(e){const t=JN(e),r=new zt,i=[],s=[],o=new tt(0,0,1),a=new tt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Et(i,3)),r.setAttribute("color",new Et(s,3));const l=new Pi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");gE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Vv.multiplyMatrices(gE,a.matrixWorld),Ul.setFromMatrixPosition(Vv),i.setXYZ(o,Ul.x,Ul.y,Ul.z),Vv.multiplyMatrices(gE,a.parent.matrixWorld),Ul.setFromMatrixPosition(Vv),i.setXYZ(o+1,Ul.x,Ul.y,Ul.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,JN(n.children[t]));return e}class XX extends Jn{constructor(e,t,r){const i=new Fg(t,4,2),s=new Ls({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jX=new W,KB=new tt,ZB=new tt;class YX extends hn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Og(t);i.rotateY(Math.PI*.5),this.material=new Ls({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new en(o,3)),this.add(new Jn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");KB.copy(this.light.color),ZB.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?KB:ZB;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class JX extends $o{constructor(e=10,t=10,r=4473924,i=8947848){r=new tt(r),i=new tt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new zt;u.setAttribute("position",new Et(l,3)),u.setAttribute("color",new Et(c,3));const d=new Pi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class KX extends $o{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new tt(s),o=new tt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),_=Math.sin(y)*m,g=Math.cos(y)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),y=(v+1)/i*(Math.PI*2),_=Math.sin(y)*m,g=Math.cos(y)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new zt;c.setAttribute("position",new Et(a,3)),c.setAttribute("color",new Et(l,3));const u=new Pi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const QB=new W,Wv=new W,qB=new W;class ZX extends hn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new zt;i.setAttribute("position",new Et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Pi({fog:!1,toneMapped:!1});this.lightPlane=new dl(i,s),this.add(this.lightPlane),i=new zt,i.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new dl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),QB.setFromMatrixPosition(this.light.matrixWorld),Wv.setFromMatrixPosition(this.light.target.matrixWorld),qB.subVectors(Wv,QB),this.lightPlane.lookAt(Wv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wv),this.targetLine.scale.z=qB.length()}}const $v=new W,fr=new Ch;class QX extends $o{constructor(e){const t=new zt,r=new Pi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new Et(i,3)),t.setAttribute("color",new Et(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new tt(16755200),u=new tt(16711680),d=new tt(43775),p=new tt(16777215),m=new tt(3355443);this.setColors(c,u,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;fr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sr("c",t,e,fr,0,0,-1),Sr("t",t,e,fr,0,0,1),Sr("n1",t,e,fr,-r,-i,-1),Sr("n2",t,e,fr,r,-i,-1),Sr("n3",t,e,fr,-r,i,-1),Sr("n4",t,e,fr,r,i,-1),Sr("f1",t,e,fr,-r,-i,1),Sr("f2",t,e,fr,r,-i,1),Sr("f3",t,e,fr,-r,i,1),Sr("f4",t,e,fr,r,i,1),Sr("u1",t,e,fr,r*.7,i*1.1,-1),Sr("u2",t,e,fr,-r*.7,i*1.1,-1),Sr("u3",t,e,fr,0,i*2,-1),Sr("cf1",t,e,fr,-r,0,1),Sr("cf2",t,e,fr,r,0,1),Sr("cf3",t,e,fr,0,-i,1),Sr("cf4",t,e,fr,0,i,1),Sr("cn1",t,e,fr,-r,0,-1),Sr("cn2",t,e,fr,r,0,-1),Sr("cn3",t,e,fr,0,-i,-1),Sr("cn4",t,e,fr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sr(n,e,t,r,i,s,o){$v.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],$v.x,$v.y,$v.z)}}const Xv=new qr;class qX extends $o{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new zt;s.setIndex(new en(r,1)),s.setAttribute("position",new en(i,3)),super(s,new Pi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Xv.setFromObject(this.object),Xv.isEmpty())return;const t=Xv.min,r=Xv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ej extends $o{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new zt;s.setIndex(new en(r,1)),s.setAttribute("position",new Et(i,3)),super(s,new Pi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tj extends dl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new zt;o.setAttribute("position",new Et(s,3)),o.computeBoundingSphere(),super(o,new Pi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new Et(a,3)),l.computeBoundingSphere(),this.add(new Jn(l,new Ls({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const eI=new W;let jv,vE;class nj extends hn{constructor(e=new W(0,0,1),t=new W(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",jv===void 0&&(jv=new zt,jv.setAttribute("position",new Et([0,0,0,0,1,0],3)),vE=new Bh(0,.5,1,5,1),vE.translate(0,-.5,0)),this.position.copy(t),this.line=new dl(jv,new Pi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jn(vE,new Ls({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{eI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(eI,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rj extends $o{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new zt;i.setAttribute("position",new Et(t,3)),i.setAttribute("color",new Et(r,3));const s=new Pi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new tt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ij{constructor(){this.type="ShapePath",this.color=new tt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new eg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,A=g.length;S<A;S++){const b=g[S],M=new Ou;M.curves=b.curves,x.push(M)}return x}function r(g,x){const S=x.length;let A=!1;for(let b=S-1,M=0;M<S;b=M++){let C=x[b],B=x[M],T=B.x-C.x,P=B.y-C.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(C=x[M],T=-T,B=x[b],P=-P),g.y<C.y||g.y>B.y)continue;if(g.y===C.y){if(g.x===C.x)return!0}else{const N=P*(g.x-C.x)-T*(g.y-C.y);if(N===0)return!0;if(N<0)continue;A=!A}}else{if(g.y!==C.y)continue;if(B.x<=g.x&&g.x<=C.x||C.x<=g.x&&g.x<=B.x)return!0}}return A}const i=va.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Ou,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],v=0,y;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new Ou,p:y},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:y[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let S=0,A=p.length;S<A;S++)d[S]=[];for(let S=0,A=p.length;S<A;S++){const b=m[S];for(let M=0;M<b.length;M++){const C=b[M];let B=!0;for(let T=0;T<p.length;T++)r(C.p,p[T].p)&&(S!==T&&x++,B?(B=!1,d[T].push(C)):g=!0);B&&d[S].push(C)}}x>0&&g===!1&&(m=d)}let _;for(let g=0,x=p.length;g<x;g++){l=p[g].s,c.push(l),_=m[g];for(let S=0,A=_.length;S<A;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ca}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ca);const sj=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Vb,AddEquation:Kl,AddOperation:SF,AdditiveAnimationBlendMode:Qb,AdditiveBlending:nw,AlphaFormat:RF,AlwaysCompare:XF,AlwaysDepth:pF,AlwaysStencilFunc:Dw,AmbientLight:NN,AnimationAction:XN,AnimationClip:tf,AnimationLoader:hX,AnimationMixer:jN,AnimationObjectGroup:FX,AnimationUtils:cX,ArcCurve:dN,ArrayCamera:oN,ArrowHelper:nj,AttachedBindMode:aw,Audio:WN,AudioAnalyser:bX,AudioContext:DT,AudioListener:AX,AudioLoader:xX,AxesHelper:rj,BackSide:Nr,BasicDepthPacking:Oc,BasicShadowMap:K3,BatchedMesh:fN,Bone:Rx,BooleanKeyframeTrack:mf,Box2:VX,Box3:qr,Box3Helper:ej,BoxGeometry:pf,BoxHelper:qX,BufferAttribute:en,BufferGeometry:zt,BufferGeometryLoader:GN,ByteType:TF,Cache:nf,Camera:Ch,CameraHelper:QX,CanvasTexture:D7,CapsuleGeometry:Dx,CatmullRomCurve3:hN,CineonToneMapping:wF,CircleGeometry:Lx,ClampToEdgeWrapping:ii,Clock:LT,Color:tt,ColorKeyframeTrack:bT,ColorManagement:Mn,CompressedArrayTexture:B7,CompressedCubeTexture:I7,CompressedTexture:Bx,CompressedTextureLoader:pX,ConeGeometry:Ox,ConstantAlphaFactor:fF,ConstantColorFactor:cF,CubeCamera:QF,CubeReflectionMapping:Ea,CubeRefractionMapping:xc,CubeTexture:Rg,CubeTextureLoader:LN,CubeUVReflectionMapping:Th,CubicBezierCurve:vT,CubicBezierCurve3:pN,CubicInterpolant:PN,CullFaceBack:tw,CullFaceFront:J3,CullFaceFrontBack:b8,CullFaceNone:Y3,Curve:Xo,CurvePath:gN,CustomBlending:Z3,CustomToneMapping:MF,CylinderGeometry:Bh,Cylindrical:GX,Data3DTexture:rT,DataArrayTexture:Ax,DataTexture:Lu,DataTextureLoader:CT,DataUtils:wu,DecrementStencilOp:O8,DecrementWrapStencilOp:N8,DefaultLoadingManager:DN,DepthFormat:hc,DepthStencilFormat:Ec,DepthTexture:wx,DetachedBindMode:bF,DirectionalLight:IT,DirectionalLightHelper:ZX,DiscreteInterpolant:BN,DisplayP3ColorSpace:Ex,DodecahedronGeometry:Fx,DoubleSide:Si,DstAlphaFactor:iF,DstColorFactor:oF,DynamicCopyUsage:Q8,DynamicDrawUsage:X8,DynamicReadUsage:J8,EdgesGeometry:vN,EllipseCurve:Ix,EqualCompare:GF,EqualDepth:gF,EqualStencilFunc:H8,EquirectangularReflectionMapping:sh,EquirectangularRefractionMapping:Xm,Euler:Cg,EventDispatcher:$s,ExtrudeGeometry:Ux,FileLoader:Hs,Float16BufferAttribute:N9,Float32BufferAttribute:Et,Float64BufferAttribute:U9,FloatType:Zr,Fog:Cx,FogExp2:Tx,FramebufferTexture:P7,FrontSide:Vo,Frustum:Pg,GLBufferAttribute:HX,GLSL1:e9,GLSL3:Lw,GreaterCompare:VF,GreaterDepth:yF,GreaterEqualCompare:$F,GreaterEqualDepth:vF,GreaterEqualStencilFunc:$8,GreaterStencilFunc:V8,GridHelper:JX,Group:tl,HalfFloatType:si,HemisphereLight:FN,HemisphereLightHelper:YX,IcosahedronGeometry:Lg,ImageBitmapLoader:VN,ImageLoader:ig,ImageUtils:nT,IncrementStencilOp:L8,IncrementWrapStencilOp:F8,InstancedBufferAttribute:fh,InstancedBufferGeometry:HN,InstancedInterleavedBuffer:zX,InstancedMesh:hT,Int16BufferAttribute:O9,Int32BufferAttribute:F9,Int8BufferAttribute:I9,IntType:Wb,InterleavedBuffer:Bg,InterleavedBufferAttribute:Ac,Interpolant:Ih,InterpolateDiscrete:ah,InterpolateLinear:Ku,InterpolateSmooth:Ny,InvertStencilOp:U8,KeepStencilOp:du,KeyframeTrack:jo,LOD:uN,LatheGeometry:Dg,Layers:Du,LessCompare:HF,LessDepth:mF,LessEqualCompare:eT,LessEqualDepth:$m,LessEqualStencilFunc:G8,LessStencilFunc:z8,Light:Uc,LightProbe:zN,Line:dl,Line3:WX,LineBasicMaterial:Pi,LineCurve:yT,LineCurve3:mN,LineDashedMaterial:TN,LineLoop:pT,LineSegments:$o,LinearDisplayP3ColorSpace:Tg,LinearEncoding:bg,LinearFilter:En,LinearInterpolant:MT,LinearMipMapLinearFilter:B8,LinearMipMapNearestFilter:P8,LinearMipmapLinearFilter:Aa,LinearMipmapNearestFilter:_x,LinearSRGBColorSpace:wa,LinearToneMapping:EF,LinearTransfer:Jm,Loader:Bi,LoaderUtils:ya,LoadingManager:TT,LoopOnce:LF,LoopPingPong:FF,LoopRepeat:OF,LuminanceAlphaFormat:BF,LuminanceFormat:PF,MOUSE:uu,Material:yr,MaterialLoader:$x,MathUtils:Hd,Matrix3:Jt,Matrix4:Tt,MaxEquation:ow,Mesh:Jn,MeshBasicMaterial:Ls,MeshDepthMaterial:bx,MeshDistanceMaterial:cT,MeshLambertMaterial:AT,MeshMatcapMaterial:bN,MeshNormalMaterial:ET,MeshPhongMaterial:wN,MeshPhysicalMaterial:Ra,MeshStandardMaterial:qu,MeshToonMaterial:MN,MinEquation:sw,MirroredRepeatWrapping:oh,MixOperation:xF,MultiplyBlending:iw,MultiplyOperation:Mg,NearestFilter:Cn,NearestMipMapLinearFilter:R8,NearestMipMapNearestFilter:C8,NearestMipmapLinearFilter:zd,NearestMipmapNearestFilter:jm,NeverCompare:zF,NeverDepth:hF,NeverStencilFunc:k8,NoBlending:bi,NoColorSpace:Ps,NoToneMapping:ma,NormalAnimationBlendMode:Sx,NormalBlending:Bu,NotEqualCompare:WF,NotEqualDepth:_F,NotEqualStencilFunc:W8,NumberKeyframeTrack:dh,Object3D:hn,ObjectLoader:yX,ObjectSpaceNormalMap:kF,OctahedronGeometry:Og,OneFactor:tF,OneMinusConstantAlphaFactor:dF,OneMinusConstantColorFactor:uF,OneMinusDstAlphaFactor:sF,OneMinusDstColorFactor:aF,OneMinusSrcAlphaFactor:A_,OneMinusSrcColorFactor:rF,OrthographicCamera:ua,P3Primaries:Zm,PCFShadowMap:vx,PCFSoftShadowMap:lm,PMREMGenerator:Fw,Path:eg,PerspectiveCamera:Yn,Plane:ja,PlaneGeometry:Rh,PlaneHelper:tj,PointLight:BT,PointLightHelper:XX,Points:mT,PointsMaterial:Px,PolarGridHelper:KX,PolyhedronGeometry:Nc,PositionalAudio:MX,PropertyBinding:dn,PropertyMixer:$N,QuadraticBezierCurve:_T,QuadraticBezierCurve3:xT,Quaternion:vr,QuaternionKeyframeTrack:hl,QuaternionLinearInterpolant:IN,RED_GREEN_RGTC2_Format:Bw,RED_RGTC1_Format:DF,REVISION:Ca,RGBADepthPacking:UF,RGBAFormat:Ei,RGBAIntegerFormat:Kb,RGBA_ASTC_10x10_Format:Mw,RGBA_ASTC_10x5_Format:Ew,RGBA_ASTC_10x6_Format:Aw,RGBA_ASTC_10x8_Format:ww,RGBA_ASTC_12x10_Format:bw,RGBA_ASTC_12x12_Format:Tw,RGBA_ASTC_4x4_Format:pw,RGBA_ASTC_5x4_Format:mw,RGBA_ASTC_5x5_Format:gw,RGBA_ASTC_6x5_Format:vw,RGBA_ASTC_6x6_Format:yw,RGBA_ASTC_8x5_Format:_w,RGBA_ASTC_8x6_Format:xw,RGBA_ASTC_8x8_Format:Sw,RGBA_BPTC_Format:Fy,RGBA_ETC2_EAC_Format:hw,RGBA_PVRTC_2BPPV1_Format:fw,RGBA_PVRTC_4BPPV1_Format:uw,RGBA_S3TC_DXT1_Format:Dy,RGBA_S3TC_DXT3_Format:Ly,RGBA_S3TC_DXT5_Format:Oy,RGB_BPTC_SIGNED_Format:Cw,RGB_BPTC_UNSIGNED_Format:Rw,RGB_ETC1_Format:Zb,RGB_ETC2_Format:dw,RGB_PVRTC_2BPPV1_Format:cw,RGB_PVRTC_4BPPV1_Format:lw,RGB_S3TC_DXT1_Format:Iy,RGFormat:IF,RGIntegerFormat:Jb,RawShaderMaterial:AN,Ray:hf,Raycaster:NT,Rec709Primaries:Km,RectAreaLight:UN,RedFormat:jb,RedIntegerFormat:Yb,ReinhardToneMapping:AF,RenderTarget:JF,RepeatWrapping:Sc,ReplaceStencilOp:D8,ReverseSubtractEquation:q3,RingGeometry:kx,SIGNED_RED_GREEN_RGTC2_Format:Iw,SIGNED_RED_RGTC1_Format:Pw,SRGBColorSpace:Or,SRGBTransfer:On,Scene:Zu,ShaderChunk:Xt,ShaderLib:No,ShaderMaterial:_r,ShadowMaterial:EN,Shape:Ou,ShapeGeometry:zx,ShapePath:ij,ShapeUtils:va,ShortType:CF,Skeleton:Ig,SkeletonHelper:YN,SkinnedMesh:dT,Source:Au,Sphere:ei,SphereGeometry:Fg,Spherical:Vw,SphericalHarmonics3:kN,SplineCurve:ST,SpotLight:PT,SpotLightHelper:$X,Sprite:cN,SpriteMaterial:fT,SrcAlphaFactor:E_,SrcAlphaSaturateFactor:lF,SrcColorFactor:nF,StaticCopyUsage:Z8,StaticDrawUsage:Qm,StaticReadUsage:Y8,StereoCamera:SX,StreamCopyUsage:q8,StreamDrawUsage:j8,StreamReadUsage:K8,StringKeyframeTrack:gf,SubtractEquation:Q3,SubtractiveBlending:rw,TOUCH:fu,TangentSpaceNormalMap:Fc,TetrahedronGeometry:Hx,Texture:In,TextureLoader:ON,TorusGeometry:Gx,TorusKnotGeometry:Vx,Triangle:as,TriangleFanDrawMode:w_,TriangleStripDrawMode:qb,TrianglesDrawMode:NF,TubeGeometry:Wx,TwoPassDoubleSide:T8,UVMapping:yx,Uint16BufferAttribute:iT,Uint32BufferAttribute:sT,Uint8BufferAttribute:D9,Uint8ClampedBufferAttribute:L9,Uniform:pn,UniformsGroup:kX,UniformsLib:it,UniformsUtils:oT,UnsignedByteType:li,UnsignedInt248Type:il,UnsignedIntType:ca,UnsignedShort4444Type:$b,UnsignedShort5551Type:Xb,UnsignedShortType:xx,VSMShadowMap:Lo,Vector2:Se,Vector3:W,Vector4:An,VectorKeyframeTrack:ef,VideoTexture:R7,WebGL1Renderer:aN,WebGL3DRenderTarget:x9,WebGLArrayRenderTarget:_9,WebGLCoordinateSystem:ko,WebGLCubeRenderTarget:aT,WebGLMultipleRenderTargets:S9,WebGLRenderTarget:Wn,WebGLRenderer:uT,WebGLUtils:sN,WebGPUCoordinateSystem:lh,WireframeGeometry:SN,WrapAroundEnding:Ym,ZeroCurvatureEnding:Su,ZeroFactor:eF,ZeroSlopeEnding:Eu,ZeroStencilOp:I8,_SRGBAFormat:M_,createCanvasElement:YF,sRGBEncoding:ga},Symbol.toStringTag,{value:"Module"}));var KN={exports:{}},vf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */vf.ConcurrentRoot=1;vf.ContinuousEventPriority=4;vf.DefaultEventPriority=16;vf.DiscreteEventPriority=1;vf.IdleEventPriority=536870912;vf.LegacyRoot=0;KN.exports=vf;var Cd=KN.exports;function oj(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!d(p,v)){const y=p;c(p=v,y)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const aj=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tI=aj?I.useEffect:I.useLayoutEffect;function UT(n){const e=typeof n=="function"?oj(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=I.useReducer(_=>_+1,0),o=e.getState(),a=I.useRef(o),l=I.useRef(r),c=I.useRef(i),u=I.useRef(!1),d=I.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),tI(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=I.useRef(o);tI(()=>{const _=()=>{try{const x=e.getState(),S=l.current(x);c.current(d.current,S)||(a.current=x,d.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const y=m?p:d.current;return I.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var ZN={exports:{}},QN={exports:{}},qN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,K){var U=V.length;V.push(K);e:for(;0<U;){var oe=U-1>>>1,fe=V[oe];if(0<i(fe,K))V[oe]=K,V[U]=fe,U=oe;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var K=V[0],U=V.pop();if(U!==K){V[0]=U;e:for(var oe=0,fe=V.length,ue=fe>>>1;oe<ue;){var pe=2*(oe+1)-1,be=V[pe],Ae=pe+1,Le=V[Ae];if(0>i(be,U))Ae<fe&&0>i(Le,be)?(V[oe]=Le,V[Ae]=U,oe=Ae):(V[oe]=be,V[pe]=U,oe=pe);else if(Ae<fe&&0>i(Le,U))V[oe]=Le,V[Ae]=U,oe=Ae;else break e}}return K}function i(V,K){var U=V.sortIndex-K.sortIndex;return U!==0?U:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=V)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function A(V){if(y=!1,S(V),!v)if(t(l)!==null)v=!0,ee(b);else{var K=t(c);K!==null&&te(A,K.startTime-V)}}function b(V,K){v=!1,y&&(y=!1,g(B),B=-1),m=!0;var U=p;try{for(S(K),d=t(l);d!==null&&(!(d.expirationTime>K)||V&&!N());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,p=d.priorityLevel;var fe=oe(d.expirationTime<=K);K=n.unstable_now(),typeof fe=="function"?d.callback=fe:d===t(l)&&r(l),S(K)}else r(l);d=t(l)}if(d!==null)var ue=!0;else{var pe=t(c);pe!==null&&te(A,pe.startTime-K),ue=!1}return ue}finally{d=null,p=U,m=!1}}var M=!1,C=null,B=-1,T=5,P=-1;function N(){return!(n.unstable_now()-P<T)}function z(){if(C!==null){var V=n.unstable_now();P=V;var K=!0;try{K=C(!0,V)}finally{K?q():(M=!1,C=null)}}else M=!1}var q;if(typeof x=="function")q=function(){x(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=z,q=function(){Y.postMessage(null)}}else q=function(){_(z,0)};function ee(V){C=V,M||(M=!0,q())}function te(V,K){B=_(function(){V(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(b))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var U=p;p=K;try{return V()}finally{p=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var U=p;p=V;try{return K()}finally{p=U}},n.unstable_scheduleCallback=function(V,K,U){var oe=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?oe+U:oe):U=oe,V){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=U+fe,V={id:u++,callback:K,priorityLevel:V,startTime:U,expirationTime:fe,sortIndex:-1},U>oe?(V.sortIndex=U,e(c,V),t(l)===null&&V===t(c)&&(y?(g(B),B=-1):y=!0,te(A,U-oe))):(V.sortIndex=fe,e(l,V),v||m||(v=!0,ee(b))),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var K=p;return function(){var U=p;p=K;try{return V.apply(this,arguments)}finally{p=U}}}})(qN);QN.exports=qN;var Ww=QN.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lj=function(e){var t={},r=I,i=Ww,s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,E=1;E<arguments.length;E++)h+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),b=Symbol.iterator;function M(f){return f===null||typeof f!="object"?null:(f=b&&f[b]||f["@@iterator"],typeof f=="function"?f:null)}function C(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case v:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case y:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case x:return h=f.displayName||null,h!==null?h:C(f.type)||"Memo";case S:h=f._payload,f=f._init;try{return C(f(h))}catch{}}return null}function B(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function T(f){var h=f,E=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(E=h.return),f=h.return;while(f)}return h.tag===3?E:null}function P(f){if(T(f)!==f)throw Error(o(188))}function N(f){var h=f.alternate;if(!h){if(h=T(f),h===null)throw Error(o(188));return h!==f?null:f}for(var E=f,w=h;;){var R=E.return;if(R===null)break;var D=R.alternate;if(D===null){if(w=R.return,w!==null){E=w;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===E)return P(R),f;if(D===w)return P(R),h;D=D.sibling}throw Error(o(188))}if(E.return!==w.return)E=R,w=D;else{for(var j=!1,ce=R.child;ce;){if(ce===E){j=!0,E=R,w=D;break}if(ce===w){j=!0,w=R,E=D;break}ce=ce.sibling}if(!j){for(ce=D.child;ce;){if(ce===E){j=!0,E=D,w=R;break}if(ce===w){j=!0,w=D,E=R;break}ce=ce.sibling}if(!j)throw Error(o(189))}}if(E.alternate!==w)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?f:h}function z(f){return f=N(f),f!==null?q(f):null}function q(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=q(f);if(h!==null)return h;f=f.sibling}return null}function G(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=G(f);if(h!==null)return h}f=f.sibling}return null}var Y=Array.isArray,ee=e.getPublicInstance,te=e.getRootHostContext,V=e.getChildHostContext,K=e.prepareForCommit,U=e.resetAfterCommit,oe=e.createInstance,fe=e.appendInitialChild,ue=e.finalizeInitialChildren,pe=e.prepareUpdate,be=e.shouldSetTextContent,Ae=e.createTextInstance,Le=e.scheduleTimeout,qe=e.cancelTimeout,st=e.noTimeout,ot=e.isPrimaryRenderer,Ye=e.supportsMutation,Z=e.supportsPersistence,xe=e.supportsHydration,ve=e.getInstanceFromNode,Fe=e.preparePortalMount,Ce=e.getCurrentEventPriority,ae=e.detachDeletedInstance,Ve=e.supportsMicrotasks,et=e.scheduleMicrotask,pt=e.supportsTestSelectors,ut=e.findFiberRoot,$t=e.getBoundingRect,H=e.getTextContent,F=e.isHiddenSubtree,le=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,De=e.setupIntersectionObserver,Ue=e.appendChild,nt=e.appendChildToContainer,He=e.commitTextUpdate,$e=e.commitMount,dt=e.commitUpdate,Rt=e.insertBefore,Oe=e.insertInContainerBefore,Ot=e.removeChild,ne=e.removeChildFromContainer,me=e.resetTextContent,Ie=e.hideInstance,Me=e.hideTextInstance,Re=e.unhideInstance,se=e.unhideTextInstance,Xe=e.clearContainer,ke=e.cloneInstance,Te=e.createContainerChildSet,Ge=e.appendChildToContainerChildSet,ft=e.finalizeContainerChildren,Qe=e.replaceContainerChildren,rt=e.cloneHiddenInstance,At=e.cloneHiddenTextInstance,Ct=e.canHydrateInstance,Ke=e.canHydrateTextInstance,Pt=e.canHydrateSuspenseInstance,wt=e.isSuspenseInstancePending,kt=e.isSuspenseInstanceFallback,Sn=e.registerSuspenseInstanceRetry,Ft=e.getNextHydratableSibling,_t=e.getFirstHydratableChild,Kn=e.getFirstHydratableChildWithinContainer,Un=e.getFirstHydratableChildWithinSuspenseInstance,O=e.hydrateInstance,k=e.hydrateTextInstance,re=e.hydrateSuspenseInstance,L=e.getNextHydratableInstanceAfterSuspenseInstance,$=e.commitHydratedContainer,X=e.commitHydratedSuspenseInstance,Q=e.clearSuspenseBoundary,J=e.clearSuspenseBoundaryFromContainer,he=e.shouldDeleteUnhydratedTailInstances,_e=e.didNotMatchHydratedContainerTextInstance,we=e.didNotMatchHydratedTextInstance,ye;function je(f){if(ye===void 0)try{throw Error()}catch(E){var h=E.stack.trim().match(/\n( *(at )?)/);ye=h&&h[1]||""}return`
`+ye+f}var Ne=!1;function ze(f,h){if(!f||Ne)return"";Ne=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Je){var w=Je}Reflect.construct(f,[],h)}else{try{h.call()}catch(Je){w=Je}f.call(h.prototype)}else{try{throw Error()}catch(Je){w=Je}f()}}catch(Je){if(Je&&w&&typeof Je.stack=="string"){for(var R=Je.stack.split(`
`),D=w.stack.split(`
`),j=R.length-1,ce=D.length-1;1<=j&&0<=ce&&R[j]!==D[ce];)ce--;for(;1<=j&&0<=ce;j--,ce--)if(R[j]!==D[ce]){if(j!==1||ce!==1)do if(j--,ce--,0>ce||R[j]!==D[ce]){var Be=`
`+R[j].replace(" at new "," at ");return f.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",f.displayName)),Be}while(1<=j&&0<=ce);break}}}finally{Ne=!1,Error.prepareStackTrace=E}return(f=f?f.displayName||f.name:"")?je(f):""}var ht=Object.prototype.hasOwnProperty,St=[],xt=-1;function Dt(f){return{current:f}}function at(f){0>xt||(f.current=St[xt],St[xt]=null,xt--)}function Ze(f,h){xt++,St[xt]=f.current,f.current=h}var Kt={},Lt=Dt(Kt),Nt=Dt(!1),wn=Kt;function cr(f,h){var E=f.type.contextTypes;if(!E)return Kt;var w=f.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===h)return w.__reactInternalMemoizedMaskedChildContext;var R={},D;for(D in E)R[D]=h[D];return w&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=R),R}function $n(f){return f=f.childContextTypes,f!=null}function fn(){at(Nt),at(Lt)}function Qt(f,h,E){if(Lt.current!==Kt)throw Error(o(168));Ze(Lt,h),Ze(Nt,E)}function Zn(f,h,E){var w=f.stateNode;if(h=h.childContextTypes,typeof w.getChildContext!="function")return E;w=w.getChildContext();for(var R in w)if(!(R in h))throw Error(o(108,B(f)||"Unknown",R));return s({},E,w)}function Wt(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Kt,wn=Lt.current,Ze(Lt,f),Ze(Nt,Nt.current),!0}function rn(f,h,E){var w=f.stateNode;if(!w)throw Error(o(169));E?(f=Zn(f,h,wn),w.__reactInternalMemoizedMergedChildContext=f,at(Nt),at(Lt),Ze(Lt,f)):at(Nt),Ze(Nt,E)}var Dn=Math.clz32?Math.clz32:Jo,js=Math.log,Di=Math.LN2;function Jo(f){return f>>>=0,f===0?32:31-(js(f)/Di|0)|0}var jg=64,Yg=4194304;function $h(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Jg(f,h){var E=f.pendingLanes;if(E===0)return 0;var w=0,R=f.suspendedLanes,D=f.pingedLanes,j=E&268435455;if(j!==0){var ce=j&~R;ce!==0?w=$h(ce):(D&=j,D!==0&&(w=$h(D)))}else j=E&~R,j!==0?w=$h(j):D!==0&&(w=$h(D));if(w===0)return 0;if(h!==0&&h!==w&&!(h&R)&&(R=w&-w,D=h&-h,R>=D||R===16&&(D&4194240)!==0))return h;if(w&4&&(w|=E&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=w;0<h;)E=31-Dn(h),R=1<<E,w|=f[E],h&=~R;return w}function f4(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d4(f,h){for(var E=f.suspendedLanes,w=f.pingedLanes,R=f.expirationTimes,D=f.pendingLanes;0<D;){var j=31-Dn(D),ce=1<<j,Be=R[j];Be===-1?(!(ce&E)||ce&w)&&(R[j]=f4(ce,h)):Be<=h&&(f.expiredLanes|=ce),D&=~ce}}function s1(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function o1(f){for(var h=[],E=0;31>E;E++)h.push(f);return h}function Xh(f,h,E){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-Dn(h),f[h]=E}function h4(f,h){var E=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var w=f.eventTimes;for(f=f.expirationTimes;0<E;){var R=31-Dn(E),D=1<<R;h[R]=0,w[R]=-1,f[R]=-1,E&=~D}}function a1(f,h){var E=f.entangledLanes|=h;for(f=f.entanglements;E;){var w=31-Dn(E),R=1<<w;R&h|f[w]&h&&(f[w]|=h),E&=~R}}var gn=0;function zC(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var l1=i.unstable_scheduleCallback,HC=i.unstable_cancelCallback,p4=i.unstable_shouldYield,m4=i.unstable_requestPaint,zr=i.unstable_now,c1=i.unstable_ImmediatePriority,g4=i.unstable_UserBlockingPriority,u1=i.unstable_NormalPriority,v4=i.unstable_IdlePriority,Kg=null,Ko=null;function y4(f){if(Ko&&typeof Ko.onCommitFiberRoot=="function")try{Ko.onCommitFiberRoot(Kg,f,void 0,(f.current.flags&128)===128)}catch{}}function _4(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Zo=typeof Object.is=="function"?Object.is:_4,Pa=null,Zg=!1,f1=!1;function GC(f){Pa===null?Pa=[f]:Pa.push(f)}function x4(f){Zg=!0,GC(f)}function Qo(){if(!f1&&Pa!==null){f1=!0;var f=0,h=gn;try{var E=Pa;for(gn=1;f<E.length;f++){var w=E[f];do w=w(!0);while(w!==null)}Pa=null,Zg=!1}catch(R){throw Pa!==null&&(Pa=Pa.slice(f+1)),l1(c1,Qo),R}finally{gn=h,f1=!1}}return null}var S4=a.ReactCurrentBatchConfig;function Qg(f,h){if(Zo(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var E=Object.keys(f),w=Object.keys(h);if(E.length!==w.length)return!1;for(w=0;w<E.length;w++){var R=E[w];if(!ht.call(h,R)||!Zo(f[R],h[R]))return!1}return!0}function E4(f){switch(f.tag){case 5:return je(f.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return f=ze(f.type,!1),f;case 11:return f=ze(f.type.render,!1),f;case 1:return f=ze(f.type,!0),f;default:return""}}function Mo(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var E in f)h[E]===void 0&&(h[E]=f[E]);return h}return h}var qg=Dt(null),e0=null,xf=null,d1=null;function h1(){d1=xf=e0=null}function VC(f,h,E){ot?(Ze(qg,h._currentValue),h._currentValue=E):(Ze(qg,h._currentValue2),h._currentValue2=E)}function p1(f){var h=qg.current;at(qg),ot?f._currentValue=h:f._currentValue2=h}function m1(f,h,E){for(;f!==null;){var w=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),f===E)break;f=f.return}}function Sf(f,h){e0=f,d1=xf=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Ss=!0),f.firstContext=null)}function Ys(f){var h=ot?f._currentValue:f._currentValue2;if(d1!==f)if(f={context:f,memoizedValue:h,next:null},xf===null){if(e0===null)throw Error(o(308));xf=f,e0.dependencies={lanes:0,firstContext:f}}else xf=xf.next=f;return h}var qo=null,Al=!1;function g1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WC(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Ba(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function wl(f,h){var E=f.updateQueue;E!==null&&(E=E.shared,wr!==null&&f.mode&1&&!(Zt&2)?(f=E.interleaved,f===null?(h.next=h,qo===null?qo=[E]:qo.push(E)):(h.next=f.next,f.next=h),E.interleaved=h):(f=E.pending,f===null?h.next=h:(h.next=f.next,f.next=h),E.pending=h))}function t0(f,h,E){if(h=h.updateQueue,h!==null&&(h=h.shared,(E&4194240)!==0)){var w=h.lanes;w&=f.pendingLanes,E|=w,h.lanes=E,a1(f,E)}}function $C(f,h){var E=f.updateQueue,w=f.alternate;if(w!==null&&(w=w.updateQueue,E===w)){var R=null,D=null;if(E=E.firstBaseUpdate,E!==null){do{var j={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};D===null?R=D=j:D=D.next=j,E=E.next}while(E!==null);D===null?R=D=h:D=D.next=h}else R=D=h;E={baseState:w.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:w.shared,effects:w.effects},f.updateQueue=E;return}f=E.lastBaseUpdate,f===null?E.firstBaseUpdate=h:f.next=h,E.lastBaseUpdate=h}function n0(f,h,E,w){var R=f.updateQueue;Al=!1;var D=R.firstBaseUpdate,j=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var Be=ce,Je=Be.next;Be.next=null,j===null?D=Je:j.next=Je,j=Be;var gt=f.alternate;gt!==null&&(gt=gt.updateQueue,ce=gt.lastBaseUpdate,ce!==j&&(ce===null?gt.firstBaseUpdate=Je:ce.next=Je,gt.lastBaseUpdate=Be))}if(D!==null){var Ht=R.baseState;j=0,gt=Je=Be=null,ce=D;do{var Bt=ce.lane,Rn=ce.eventTime;if((w&Bt)===Bt){gt!==null&&(gt=gt.next={eventTime:Rn,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var bt=f,hi=ce;switch(Bt=h,Rn=E,hi.tag){case 1:if(bt=hi.payload,typeof bt=="function"){Ht=bt.call(Rn,Ht,Bt);break e}Ht=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=hi.payload,Bt=typeof bt=="function"?bt.call(Rn,Ht,Bt):bt,Bt==null)break e;Ht=s({},Ht,Bt);break e;case 2:Al=!0}}ce.callback!==null&&ce.lane!==0&&(f.flags|=64,Bt=R.effects,Bt===null?R.effects=[ce]:Bt.push(ce))}else Rn={eventTime:Rn,lane:Bt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},gt===null?(Je=gt=Rn,Be=Ht):gt=gt.next=Rn,j|=Bt;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;Bt=ce,ce=Bt.next,Bt.next=null,R.lastBaseUpdate=Bt,R.shared.pending=null}}while(!0);if(gt===null&&(Be=Ht),R.baseState=Be,R.firstBaseUpdate=Je,R.lastBaseUpdate=gt,h=R.shared.interleaved,h!==null){R=h;do j|=R.lane,R=R.next;while(R!==h)}else D===null&&(R.shared.lanes=0);Pf|=j,f.lanes=j,f.memoizedState=Ht}}function XC(f,h,E){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var w=f[h],R=w.callback;if(R!==null){if(w.callback=null,w=E,typeof R!="function")throw Error(o(191,R));R.call(w)}}}var jC=new r.Component().refs;function v1(f,h,E,w){h=f.memoizedState,E=E(w,h),E=E==null?h:s({},h,E),f.memoizedState=E,f.lanes===0&&(f.updateQueue.baseState=E)}var r0={isMounted:function(f){return(f=f._reactInternals)?T(f)===f:!1},enqueueSetState:function(f,h,E){f=f._reactInternals;var w=Oi(),R=Tl(f),D=Ba(w,R);D.payload=h,E!=null&&(D.callback=E),wl(f,D),h=qs(f,R,w),h!==null&&t0(h,f,R)},enqueueReplaceState:function(f,h,E){f=f._reactInternals;var w=Oi(),R=Tl(f),D=Ba(w,R);D.tag=1,D.payload=h,E!=null&&(D.callback=E),wl(f,D),h=qs(f,R,w),h!==null&&t0(h,f,R)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var E=Oi(),w=Tl(f),R=Ba(E,w);R.tag=2,h!=null&&(R.callback=h),wl(f,R),h=qs(f,w,E),h!==null&&t0(h,f,w)}};function YC(f,h,E,w,R,D,j){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(w,D,j):h.prototype&&h.prototype.isPureReactComponent?!Qg(E,w)||!Qg(R,D):!0}function JC(f,h,E){var w=!1,R=Kt,D=h.contextType;return typeof D=="object"&&D!==null?D=Ys(D):(R=$n(h)?wn:Lt.current,w=h.contextTypes,D=(w=w!=null)?cr(f,R):Kt),h=new h(E,D),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=r0,f.stateNode=h,h._reactInternals=f,w&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=R,f.__reactInternalMemoizedMaskedChildContext=D),h}function KC(f,h,E,w){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(E,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(E,w),h.state!==f&&r0.enqueueReplaceState(h,h.state,null)}function y1(f,h,E,w){var R=f.stateNode;R.props=E,R.state=f.memoizedState,R.refs=jC,g1(f);var D=h.contextType;typeof D=="object"&&D!==null?R.context=Ys(D):(D=$n(h)?wn:Lt.current,R.context=cr(f,D)),R.state=f.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(v1(f,h,D,E),R.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&r0.enqueueReplaceState(R,R.state,null),n0(f,E,R,w),R.state=f.memoizedState),typeof R.componentDidMount=="function"&&(f.flags|=4194308)}var Ef=[],Af=0,i0=null,s0=0,Js=[],Ks=0,zc=null,Ia=1,Da="";function Hc(f,h){Ef[Af++]=s0,Ef[Af++]=i0,i0=f,s0=h}function ZC(f,h,E){Js[Ks++]=Ia,Js[Ks++]=Da,Js[Ks++]=zc,zc=f;var w=Ia;f=Da;var R=32-Dn(w)-1;w&=~(1<<R),E+=1;var D=32-Dn(h)+R;if(30<D){var j=R-R%5;D=(w&(1<<j)-1).toString(32),w>>=j,R-=j,Ia=1<<32-Dn(h)+R|E<<R|w,Da=D+f}else Ia=1<<D|E<<R|w,Da=f}function _1(f){f.return!==null&&(Hc(f,1),ZC(f,1,0))}function x1(f){for(;f===i0;)i0=Ef[--Af],Ef[Af]=null,s0=Ef[--Af],Ef[Af]=null;for(;f===zc;)zc=Js[--Ks],Js[Ks]=null,Da=Js[--Ks],Js[Ks]=null,Ia=Js[--Ks],Js[Ks]=null}var _s=null,xs=null,Xn=!1,jh=!1,bo=null;function QC(f,h){var E=eo(5,null,null,0);E.elementType="DELETED",E.stateNode=h,E.return=f,h=f.deletions,h===null?(f.deletions=[E],f.flags|=16):h.push(E)}function qC(f,h){switch(f.tag){case 5:return h=Ct(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,_s=f,xs=_t(h),!0):!1;case 6:return h=Ke(h,f.pendingProps),h!==null?(f.stateNode=h,_s=f,xs=null,!0):!1;case 13:if(h=Pt(h),h!==null){var E=zc!==null?{id:Ia,overflow:Da}:null;return f.memoizedState={dehydrated:h,treeContext:E,retryLane:1073741824},E=eo(18,null,null,0),E.stateNode=h,E.return=f,f.child=E,_s=f,xs=null,!0}return!1;default:return!1}}function S1(f){return(f.mode&1)!==0&&(f.flags&128)===0}function E1(f){if(Xn){var h=xs;if(h){var E=h;if(!qC(f,h)){if(S1(f))throw Error(o(418));h=Ft(E);var w=_s;h&&qC(f,h)?QC(w,E):(f.flags=f.flags&-4097|2,Xn=!1,_s=f)}}else{if(S1(f))throw Error(o(418));f.flags=f.flags&-4097|2,Xn=!1,_s=f}}}function eR(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;_s=f}function Yh(f){if(!xe||f!==_s)return!1;if(!Xn)return eR(f),Xn=!0,!1;if(f.tag!==3&&(f.tag!==5||he(f.type)&&!be(f.type,f.memoizedProps))){var h=xs;if(h){if(S1(f)){for(f=xs;f;)f=Ft(f);throw Error(o(418))}for(;h;)QC(f,h),h=Ft(h)}}if(eR(f),f.tag===13){if(!xe)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));xs=L(f)}else xs=_s?Ft(f.stateNode):null;return!0}function wf(){xe&&(xs=_s=null,jh=Xn=!1)}function A1(f){bo===null?bo=[f]:bo.push(f)}function Jh(f,h,E){if(f=E.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var w=E.stateNode}if(!w)throw Error(o(147,f));var R=w,D=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function(j){var ce=R.refs;ce===jC&&(ce=R.refs={}),j===null?delete ce[D]:ce[D]=j},h._stringRef=D,h)}if(typeof f!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,f))}return f}function o0(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function tR(f){var h=f._init;return h(f._payload)}function nR(f){function h(ge,de){if(f){var Ee=ge.deletions;Ee===null?(ge.deletions=[de],ge.flags|=16):Ee.push(de)}}function E(ge,de){if(!f)return null;for(;de!==null;)h(ge,de),de=de.sibling;return null}function w(ge,de){for(ge=new Map;de!==null;)de.key!==null?ge.set(de.key,de):ge.set(de.index,de),de=de.sibling;return ge}function R(ge,de){return ge=Rl(ge,de),ge.index=0,ge.sibling=null,ge}function D(ge,de,Ee){return ge.index=Ee,f?(Ee=ge.alternate,Ee!==null?(Ee=Ee.index,Ee<de?(ge.flags|=2,de):Ee):(ge.flags|=2,de)):(ge.flags|=1048576,de)}function j(ge){return f&&ge.alternate===null&&(ge.flags|=2),ge}function ce(ge,de,Ee,ct){return de===null||de.tag!==6?(de=oS(Ee,ge.mode,ct),de.return=ge,de):(de=R(de,Ee),de.return=ge,de)}function Be(ge,de,Ee,ct){var Mt=Ee.type;return Mt===u?gt(ge,de,Ee.props.children,ct,Ee.key):de!==null&&(de.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===S&&tR(Mt)===de.type)?(ct=R(de,Ee.props),ct.ref=Jh(ge,de,Ee),ct.return=ge,ct):(ct=N0(Ee.type,Ee.key,Ee.props,null,ge.mode,ct),ct.ref=Jh(ge,de,Ee),ct.return=ge,ct)}function Je(ge,de,Ee,ct){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ee.containerInfo||de.stateNode.implementation!==Ee.implementation?(de=aS(Ee,ge.mode,ct),de.return=ge,de):(de=R(de,Ee.children||[]),de.return=ge,de)}function gt(ge,de,Ee,ct,Mt){return de===null||de.tag!==7?(de=Yc(Ee,ge.mode,ct,Mt),de.return=ge,de):(de=R(de,Ee),de.return=ge,de)}function Ht(ge,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number")return de=oS(""+de,ge.mode,Ee),de.return=ge,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return Ee=N0(de.type,de.key,de.props,null,ge.mode,Ee),Ee.ref=Jh(ge,null,de),Ee.return=ge,Ee;case c:return de=aS(de,ge.mode,Ee),de.return=ge,de;case S:var ct=de._init;return Ht(ge,ct(de._payload),Ee)}if(Y(de)||M(de))return de=Yc(de,ge.mode,Ee,null),de.return=ge,de;o0(ge,de)}return null}function Bt(ge,de,Ee,ct){var Mt=de!==null?de.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Mt!==null?null:ce(ge,de,""+Ee,ct);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return Ee.key===Mt?Be(ge,de,Ee,ct):null;case c:return Ee.key===Mt?Je(ge,de,Ee,ct):null;case S:return Mt=Ee._init,Bt(ge,de,Mt(Ee._payload),ct)}if(Y(Ee)||M(Ee))return Mt!==null?null:gt(ge,de,Ee,ct,null);o0(ge,Ee)}return null}function Rn(ge,de,Ee,ct,Mt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return ge=ge.get(Ee)||null,ce(de,ge,""+ct,Mt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case l:return ge=ge.get(ct.key===null?Ee:ct.key)||null,Be(de,ge,ct,Mt);case c:return ge=ge.get(ct.key===null?Ee:ct.key)||null,Je(de,ge,ct,Mt);case S:var Yt=ct._init;return Rn(ge,de,Ee,Yt(ct._payload),Mt)}if(Y(ct)||M(ct))return ge=ge.get(Ee)||null,gt(de,ge,ct,Mt,null);o0(de,ct)}return null}function bt(ge,de,Ee,ct){for(var Mt=null,Yt=null,Gt=de,vn=de=0,Gr=null;Gt!==null&&vn<Ee.length;vn++){Gt.index>vn?(Gr=Gt,Gt=null):Gr=Gt.sibling;var yn=Bt(ge,Gt,Ee[vn],ct);if(yn===null){Gt===null&&(Gt=Gr);break}f&&Gt&&yn.alternate===null&&h(ge,Gt),de=D(yn,de,vn),Yt===null?Mt=yn:Yt.sibling=yn,Yt=yn,Gt=Gr}if(vn===Ee.length)return E(ge,Gt),Xn&&Hc(ge,vn),Mt;if(Gt===null){for(;vn<Ee.length;vn++)Gt=Ht(ge,Ee[vn],ct),Gt!==null&&(de=D(Gt,de,vn),Yt===null?Mt=Gt:Yt.sibling=Gt,Yt=Gt);return Xn&&Hc(ge,vn),Mt}for(Gt=w(ge,Gt);vn<Ee.length;vn++)Gr=Rn(Gt,ge,vn,Ee[vn],ct),Gr!==null&&(f&&Gr.alternate!==null&&Gt.delete(Gr.key===null?vn:Gr.key),de=D(Gr,de,vn),Yt===null?Mt=Gr:Yt.sibling=Gr,Yt=Gr);return f&&Gt.forEach(function(Pl){return h(ge,Pl)}),Xn&&Hc(ge,vn),Mt}function hi(ge,de,Ee,ct){var Mt=M(Ee);if(typeof Mt!="function")throw Error(o(150));if(Ee=Mt.call(Ee),Ee==null)throw Error(o(151));for(var Yt=Mt=null,Gt=de,vn=de=0,Gr=null,yn=Ee.next();Gt!==null&&!yn.done;vn++,yn=Ee.next()){Gt.index>vn?(Gr=Gt,Gt=null):Gr=Gt.sibling;var Pl=Bt(ge,Gt,yn.value,ct);if(Pl===null){Gt===null&&(Gt=Gr);break}f&&Gt&&Pl.alternate===null&&h(ge,Gt),de=D(Pl,de,vn),Yt===null?Mt=Pl:Yt.sibling=Pl,Yt=Pl,Gt=Gr}if(yn.done)return E(ge,Gt),Xn&&Hc(ge,vn),Mt;if(Gt===null){for(;!yn.done;vn++,yn=Ee.next())yn=Ht(ge,yn.value,ct),yn!==null&&(de=D(yn,de,vn),Yt===null?Mt=yn:Yt.sibling=yn,Yt=yn);return Xn&&Hc(ge,vn),Mt}for(Gt=w(ge,Gt);!yn.done;vn++,yn=Ee.next())yn=Rn(Gt,ge,vn,yn.value,ct),yn!==null&&(f&&yn.alternate!==null&&Gt.delete(yn.key===null?vn:yn.key),de=D(yn,de,vn),Yt===null?Mt=yn:Yt.sibling=yn,Yt=yn);return f&&Gt.forEach(function(Q4){return h(ge,Q4)}),Xn&&Hc(ge,vn),Mt}function to(ge,de,Ee,ct){if(typeof Ee=="object"&&Ee!==null&&Ee.type===u&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:e:{for(var Mt=Ee.key,Yt=de;Yt!==null;){if(Yt.key===Mt){if(Mt=Ee.type,Mt===u){if(Yt.tag===7){E(ge,Yt.sibling),de=R(Yt,Ee.props.children),de.return=ge,ge=de;break e}}else if(Yt.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===S&&tR(Mt)===Yt.type){E(ge,Yt.sibling),de=R(Yt,Ee.props),de.ref=Jh(ge,Yt,Ee),de.return=ge,ge=de;break e}E(ge,Yt);break}else h(ge,Yt);Yt=Yt.sibling}Ee.type===u?(de=Yc(Ee.props.children,ge.mode,ct,Ee.key),de.return=ge,ge=de):(ct=N0(Ee.type,Ee.key,Ee.props,null,ge.mode,ct),ct.ref=Jh(ge,de,Ee),ct.return=ge,ge=ct)}return j(ge);case c:e:{for(Yt=Ee.key;de!==null;){if(de.key===Yt)if(de.tag===4&&de.stateNode.containerInfo===Ee.containerInfo&&de.stateNode.implementation===Ee.implementation){E(ge,de.sibling),de=R(de,Ee.children||[]),de.return=ge,ge=de;break e}else{E(ge,de);break}else h(ge,de);de=de.sibling}de=aS(Ee,ge.mode,ct),de.return=ge,ge=de}return j(ge);case S:return Yt=Ee._init,to(ge,de,Yt(Ee._payload),ct)}if(Y(Ee))return bt(ge,de,Ee,ct);if(M(Ee))return hi(ge,de,Ee,ct);o0(ge,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,de!==null&&de.tag===6?(E(ge,de.sibling),de=R(de,Ee),de.return=ge,ge=de):(E(ge,de),de=oS(Ee,ge.mode,ct),de.return=ge,ge=de),j(ge)):E(ge,de)}return to}var Mf=nR(!0),rR=nR(!1),Kh={},Zs=Dt(Kh),Zh=Dt(Kh),bf=Dt(Kh);function ea(f){if(f===Kh)throw Error(o(174));return f}function w1(f,h){Ze(bf,h),Ze(Zh,f),Ze(Zs,Kh),f=te(h),at(Zs),Ze(Zs,f)}function Tf(){at(Zs),at(Zh),at(bf)}function iR(f){var h=ea(bf.current),E=ea(Zs.current);h=V(E,f.type,h),E!==h&&(Ze(Zh,f),Ze(Zs,h))}function M1(f){Zh.current===f&&(at(Zs),at(Zh))}var Qn=Dt(0);function a0(f){for(var h=f;h!==null;){if(h.tag===13){var E=h.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||wt(E)||kt(E)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var b1=[];function T1(){for(var f=0;f<b1.length;f++){var h=b1[f];ot?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}b1.length=0}var l0=a.ReactCurrentDispatcher,Qs=a.ReactCurrentBatchConfig,Cf=0,ur=null,ui=null,Hr=null,c0=!1,Qh=!1,qh=0,A4=0;function fi(){throw Error(o(321))}function C1(f,h){if(h===null)return!1;for(var E=0;E<h.length&&E<f.length;E++)if(!Zo(f[E],h[E]))return!1;return!0}function R1(f,h,E,w,R,D){if(Cf=D,ur=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,l0.current=f===null||f.memoizedState===null?T4:C4,f=E(w,R),Qh){D=0;do{if(Qh=!1,qh=0,25<=D)throw Error(o(301));D+=1,Hr=ui=null,h.updateQueue=null,l0.current=R4,f=E(w,R)}while(Qh)}if(l0.current=p0,h=ui!==null&&ui.next!==null,Cf=0,Hr=ui=ur=null,c0=!1,h)throw Error(o(300));return f}function P1(){var f=qh!==0;return qh=0,f}function La(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?ur.memoizedState=Hr=f:Hr=Hr.next=f,Hr}function ta(){if(ui===null){var f=ur.alternate;f=f!==null?f.memoizedState:null}else f=ui.next;var h=Hr===null?ur.memoizedState:Hr.next;if(h!==null)Hr=h,ui=f;else{if(f===null)throw Error(o(310));ui=f,f={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},Hr===null?ur.memoizedState=Hr=f:Hr=Hr.next=f}return Hr}function Gc(f,h){return typeof h=="function"?h(f):h}function u0(f){var h=ta(),E=h.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=f;var w=ui,R=w.baseQueue,D=E.pending;if(D!==null){if(R!==null){var j=R.next;R.next=D.next,D.next=j}w.baseQueue=R=D,E.pending=null}if(R!==null){D=R.next,w=w.baseState;var ce=j=null,Be=null,Je=D;do{var gt=Je.lane;if((Cf&gt)===gt)Be!==null&&(Be=Be.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),w=Je.hasEagerState?Je.eagerState:f(w,Je.action);else{var Ht={lane:gt,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};Be===null?(ce=Be=Ht,j=w):Be=Be.next=Ht,ur.lanes|=gt,Pf|=gt}Je=Je.next}while(Je!==null&&Je!==D);Be===null?j=w:Be.next=ce,Zo(w,h.memoizedState)||(Ss=!0),h.memoizedState=w,h.baseState=j,h.baseQueue=Be,E.lastRenderedState=w}if(f=E.interleaved,f!==null){R=f;do D=R.lane,ur.lanes|=D,Pf|=D,R=R.next;while(R!==f)}else R===null&&(E.lanes=0);return[h.memoizedState,E.dispatch]}function f0(f){var h=ta(),E=h.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=f;var w=E.dispatch,R=E.pending,D=h.memoizedState;if(R!==null){E.pending=null;var j=R=R.next;do D=f(D,j.action),j=j.next;while(j!==R);Zo(D,h.memoizedState)||(Ss=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),E.lastRenderedState=D}return[D,w]}function sR(){}function oR(f,h){var E=ur,w=ta(),R=h(),D=!Zo(w.memoizedState,R);if(D&&(w.memoizedState=R,Ss=!0),w=w.queue,tp(cR.bind(null,E,w,f),[f]),w.getSnapshot!==h||D||Hr!==null&&Hr.memoizedState.tag&1){if(E.flags|=2048,ep(9,lR.bind(null,E,w,R,h),void 0,null),wr===null)throw Error(o(349));Cf&30||aR(E,h,R)}return R}function aR(f,h,E){f.flags|=16384,f={getSnapshot:h,value:E},h=ur.updateQueue,h===null?(h={lastEffect:null,stores:null},ur.updateQueue=h,h.stores=[f]):(E=h.stores,E===null?h.stores=[f]:E.push(f))}function lR(f,h,E,w){h.value=E,h.getSnapshot=w,uR(h)&&qs(f,1,-1)}function cR(f,h,E){return E(function(){uR(h)&&qs(f,1,-1)})}function uR(f){var h=f.getSnapshot;f=f.value;try{var E=h();return!Zo(f,E)}catch{return!0}}function B1(f){var h=La();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:f},h.queue=f,f=f.dispatch=b4.bind(null,ur,f),[h.memoizedState,f]}function ep(f,h,E,w){return f={tag:f,create:h,destroy:E,deps:w,next:null},h=ur.updateQueue,h===null?(h={lastEffect:null,stores:null},ur.updateQueue=h,h.lastEffect=f.next=f):(E=h.lastEffect,E===null?h.lastEffect=f.next=f:(w=E.next,E.next=f,f.next=w,h.lastEffect=f)),f}function fR(){return ta().memoizedState}function d0(f,h,E,w){var R=La();ur.flags|=f,R.memoizedState=ep(1|h,E,void 0,w===void 0?null:w)}function h0(f,h,E,w){var R=ta();w=w===void 0?null:w;var D=void 0;if(ui!==null){var j=ui.memoizedState;if(D=j.destroy,w!==null&&C1(w,j.deps)){R.memoizedState=ep(h,E,D,w);return}}ur.flags|=f,R.memoizedState=ep(1|h,E,D,w)}function I1(f,h){return d0(8390656,8,f,h)}function tp(f,h){return h0(2048,8,f,h)}function dR(f,h){return h0(4,2,f,h)}function hR(f,h){return h0(4,4,f,h)}function pR(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function mR(f,h,E){return E=E!=null?E.concat([f]):null,h0(4,4,pR.bind(null,h,f),E)}function D1(){}function gR(f,h){var E=ta();h=h===void 0?null:h;var w=E.memoizedState;return w!==null&&h!==null&&C1(h,w[1])?w[0]:(E.memoizedState=[f,h],f)}function vR(f,h){var E=ta();h=h===void 0?null:h;var w=E.memoizedState;return w!==null&&h!==null&&C1(h,w[1])?w[0]:(f=f(),E.memoizedState=[f,h],f)}function w4(f,h){var E=gn;gn=E!==0&&4>E?E:4,f(!0);var w=Qs.transition;Qs.transition={};try{f(!1),h()}finally{gn=E,Qs.transition=w}}function yR(){return ta().memoizedState}function M4(f,h,E){var w=Tl(f);E={lane:w,action:E,hasEagerState:!1,eagerState:null,next:null},_R(f)?xR(h,E):(SR(f,h,E),E=Oi(),f=qs(f,w,E),f!==null&&ER(f,h,w))}function b4(f,h,E){var w=Tl(f),R={lane:w,action:E,hasEagerState:!1,eagerState:null,next:null};if(_R(f))xR(h,R);else{SR(f,h,R);var D=f.alternate;if(f.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var j=h.lastRenderedState,ce=D(j,E);if(R.hasEagerState=!0,R.eagerState=ce,Zo(ce,j))return}catch{}finally{}E=Oi(),f=qs(f,w,E),f!==null&&ER(f,h,w)}}function _R(f){var h=f.alternate;return f===ur||h!==null&&h===ur}function xR(f,h){Qh=c0=!0;var E=f.pending;E===null?h.next=h:(h.next=E.next,E.next=h),f.pending=h}function SR(f,h,E){wr!==null&&f.mode&1&&!(Zt&2)?(f=h.interleaved,f===null?(E.next=E,qo===null?qo=[h]:qo.push(h)):(E.next=f.next,f.next=E),h.interleaved=E):(f=h.pending,f===null?E.next=E:(E.next=f.next,f.next=E),h.pending=E)}function ER(f,h,E){if(E&4194240){var w=h.lanes;w&=f.pendingLanes,E|=w,h.lanes=E,a1(f,E)}}var p0={readContext:Ys,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},T4={readContext:Ys,useCallback:function(f,h){return La().memoizedState=[f,h===void 0?null:h],f},useContext:Ys,useEffect:I1,useImperativeHandle:function(f,h,E){return E=E!=null?E.concat([f]):null,d0(4194308,4,pR.bind(null,h,f),E)},useLayoutEffect:function(f,h){return d0(4194308,4,f,h)},useInsertionEffect:function(f,h){return d0(4,2,f,h)},useMemo:function(f,h){var E=La();return h=h===void 0?null:h,f=f(),E.memoizedState=[f,h],f},useReducer:function(f,h,E){var w=La();return h=E!==void 0?E(h):h,w.memoizedState=w.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},w.queue=f,f=f.dispatch=M4.bind(null,ur,f),[w.memoizedState,f]},useRef:function(f){var h=La();return f={current:f},h.memoizedState=f},useState:B1,useDebugValue:D1,useDeferredValue:function(f){var h=B1(f),E=h[0],w=h[1];return I1(function(){var R=Qs.transition;Qs.transition={};try{w(f)}finally{Qs.transition=R}},[f]),E},useTransition:function(){var f=B1(!1),h=f[0];return f=w4.bind(null,f[1]),La().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,E){var w=ur,R=La();if(Xn){if(E===void 0)throw Error(o(407));E=E()}else{if(E=h(),wr===null)throw Error(o(349));Cf&30||aR(w,h,E)}R.memoizedState=E;var D={value:E,getSnapshot:h};return R.queue=D,I1(cR.bind(null,w,D,f),[f]),w.flags|=2048,ep(9,lR.bind(null,w,D,E,h),void 0,null),E},useId:function(){var f=La(),h=wr.identifierPrefix;if(Xn){var E=Da,w=Ia;E=(w&~(1<<32-Dn(w)-1)).toString(32)+E,h=":"+h+"R"+E,E=qh++,0<E&&(h+="H"+E.toString(32)),h+=":"}else E=A4++,h=":"+h+"r"+E.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},C4={readContext:Ys,useCallback:gR,useContext:Ys,useEffect:tp,useImperativeHandle:mR,useInsertionEffect:dR,useLayoutEffect:hR,useMemo:vR,useReducer:u0,useRef:fR,useState:function(){return u0(Gc)},useDebugValue:D1,useDeferredValue:function(f){var h=u0(Gc),E=h[0],w=h[1];return tp(function(){var R=Qs.transition;Qs.transition={};try{w(f)}finally{Qs.transition=R}},[f]),E},useTransition:function(){var f=u0(Gc)[0],h=ta().memoizedState;return[f,h]},useMutableSource:sR,useSyncExternalStore:oR,useId:yR,unstable_isNewReconciler:!1},R4={readContext:Ys,useCallback:gR,useContext:Ys,useEffect:tp,useImperativeHandle:mR,useInsertionEffect:dR,useLayoutEffect:hR,useMemo:vR,useReducer:f0,useRef:fR,useState:function(){return f0(Gc)},useDebugValue:D1,useDeferredValue:function(f){var h=f0(Gc),E=h[0],w=h[1];return tp(function(){var R=Qs.transition;Qs.transition={};try{w(f)}finally{Qs.transition=R}},[f]),E},useTransition:function(){var f=f0(Gc)[0],h=ta().memoizedState;return[f,h]},useMutableSource:sR,useSyncExternalStore:oR,useId:yR,unstable_isNewReconciler:!1};function L1(f,h){try{var E="",w=h;do E+=E4(w),w=w.return;while(w);var R=E}catch(D){R=`
Error generating stack: `+D.message+`
`+D.stack}return{value:f,source:h,stack:R}}function O1(f,h){try{console.error(h.value)}catch(E){setTimeout(function(){throw E})}}var P4=typeof WeakMap=="function"?WeakMap:Map;function AR(f,h,E){E=Ba(-1,E),E.tag=3,E.payload={element:null};var w=h.value;return E.callback=function(){P0||(P0=!0,q1=w),O1(f,h)},E}function wR(f,h,E){E=Ba(-1,E),E.tag=3;var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var R=h.value;E.payload=function(){return w(R)},E.callback=function(){O1(f,h)}}var D=f.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(E.callback=function(){O1(f,h),typeof w!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),E}function MR(f,h,E){var w=f.pingCache;if(w===null){w=f.pingCache=new P4;var R=new Set;w.set(h,R)}else R=w.get(h),R===void 0&&(R=new Set,w.set(h,R));R.has(E)||(R.add(E),f=W4.bind(null,f,h,E),h.then(f,f))}function bR(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function TR(f,h,E,w,R){return f.mode&1?(f.flags|=65536,f.lanes=R,f):(f===h?f.flags|=65536:(f.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(h=Ba(-1,1),h.tag=2,wl(E,h))),E.lanes|=1),f)}function na(f){f.flags|=4}function CR(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var np,rp,m0,g0;if(Ye)np=function(f,h){for(var E=h.child;E!==null;){if(E.tag===5||E.tag===6)fe(f,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},rp=function(){},m0=function(f,h,E,w,R){if(f=f.memoizedProps,f!==w){var D=h.stateNode,j=ea(Zs.current);E=pe(D,E,f,w,R,j),(h.updateQueue=E)&&na(h)}},g0=function(f,h,E,w){E!==w&&na(h)};else if(Z){np=function(f,h,E,w){for(var R=h.child;R!==null;){if(R.tag===5){var D=R.stateNode;E&&w&&(D=rt(D,R.type,R.memoizedProps,R)),fe(f,D)}else if(R.tag===6)D=R.stateNode,E&&w&&(D=At(D,R.memoizedProps,R)),fe(f,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),np(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var RR=function(f,h,E,w){for(var R=h.child;R!==null;){if(R.tag===5){var D=R.stateNode;E&&w&&(D=rt(D,R.type,R.memoizedProps,R)),Ge(f,D)}else if(R.tag===6)D=R.stateNode,E&&w&&(D=At(D,R.memoizedProps,R)),Ge(f,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),RR(f,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};rp=function(f,h){var E=h.stateNode;if(!CR(f,h)){f=E.containerInfo;var w=Te(f);RR(w,h,!1,!1),E.pendingChildren=w,na(h),ft(f,w)}},m0=function(f,h,E,w,R){var D=f.stateNode,j=f.memoizedProps;if((f=CR(f,h))&&j===w)h.stateNode=D;else{var ce=h.stateNode,Be=ea(Zs.current),Je=null;j!==w&&(Je=pe(ce,E,j,w,R,Be)),f&&Je===null?h.stateNode=D:(D=ke(D,Je,E,j,w,h,f,ce),ue(D,E,w,R,Be)&&na(h),h.stateNode=D,f?na(h):np(D,h,!1,!1))}},g0=function(f,h,E,w){E!==w?(f=ea(bf.current),E=ea(Zs.current),h.stateNode=Ae(w,f,E,h),na(h)):h.stateNode=f.stateNode}}else rp=function(){},m0=function(){},g0=function(){};function ip(f,h){if(!Xn)switch(f.tailMode){case"hidden":h=f.tail;for(var E=null;h!==null;)h.alternate!==null&&(E=h),h=h.sibling;E===null?f.tail=null:E.sibling=null;break;case"collapsed":E=f.tail;for(var w=null;E!==null;)E.alternate!==null&&(w=E),E=E.sibling;w===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:w.sibling=null}}function di(f){var h=f.alternate!==null&&f.alternate.child===f.child,E=0,w=0;if(h)for(var R=f.child;R!==null;)E|=R.lanes|R.childLanes,w|=R.subtreeFlags&14680064,w|=R.flags&14680064,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)E|=R.lanes|R.childLanes,w|=R.subtreeFlags,w|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=w,f.childLanes=E,h}function B4(f,h,E){var w=h.pendingProps;switch(x1(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(h),null;case 1:return $n(h.type)&&fn(),di(h),null;case 3:return w=h.stateNode,Tf(),at(Nt),at(Lt),T1(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(f===null||f.child===null)&&(Yh(h)?na(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,bo!==null&&(nS(bo),bo=null))),rp(f,h),di(h),null;case 5:M1(h),E=ea(bf.current);var R=h.type;if(f!==null&&h.stateNode!=null)m0(f,h,R,w,E),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!w){if(h.stateNode===null)throw Error(o(166));return di(h),null}if(f=ea(Zs.current),Yh(h)){if(!xe)throw Error(o(175));f=O(h.stateNode,h.type,h.memoizedProps,E,f,h,!jh),h.updateQueue=f,f!==null&&na(h)}else{var D=oe(R,w,E,f,h);np(D,h,!1,!1),h.stateNode=D,ue(D,R,w,E,f)&&na(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return di(h),null;case 6:if(f&&h.stateNode!=null)g0(f,h,f.memoizedProps,w);else{if(typeof w!="string"&&h.stateNode===null)throw Error(o(166));if(f=ea(bf.current),E=ea(Zs.current),Yh(h)){if(!xe)throw Error(o(176));if(f=h.stateNode,w=h.memoizedProps,(E=k(f,w,h,!jh))&&(R=_s,R!==null))switch(D=(R.mode&1)!==0,R.tag){case 3:_e(R.stateNode.containerInfo,f,w,D);break;case 5:we(R.type,R.memoizedProps,R.stateNode,f,w,D)}E&&na(h)}else h.stateNode=Ae(w,f,E,h)}return di(h),null;case 13:if(at(Qn),w=h.memoizedState,Xn&&xs!==null&&h.mode&1&&!(h.flags&128)){for(f=xs;f;)f=Ft(f);return wf(),h.flags|=98560,h}if(w!==null&&w.dehydrated!==null){if(w=Yh(h),f===null){if(!w)throw Error(o(318));if(!xe)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));re(f,h)}else wf(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return di(h),null}return bo!==null&&(nS(bo),bo=null),h.flags&128?(h.lanes=E,h):(w=w!==null,E=!1,f===null?Yh(h):E=f.memoizedState!==null,w&&!E&&(h.child.flags|=8192,h.mode&1&&(f===null||Qn.current&1?Ir===0&&(Ir=3):iS())),h.updateQueue!==null&&(h.flags|=4),di(h),null);case 4:return Tf(),rp(f,h),f===null&&Fe(h.stateNode.containerInfo),di(h),null;case 10:return p1(h.type._context),di(h),null;case 17:return $n(h.type)&&fn(),di(h),null;case 19:if(at(Qn),R=h.memoizedState,R===null)return di(h),null;if(w=(h.flags&128)!==0,D=R.rendering,D===null)if(w)ip(R,!1);else{if(Ir!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(D=a0(f),D!==null){for(h.flags|=128,ip(R,!1),f=D.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=E,w=h.child;w!==null;)E=w,R=f,E.flags&=14680066,D=E.alternate,D===null?(E.childLanes=0,E.lanes=R,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=D.childLanes,E.lanes=D.lanes,E.child=D.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=D.memoizedProps,E.memoizedState=D.memoizedState,E.updateQueue=D.updateQueue,E.type=D.type,R=D.dependencies,E.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),w=w.sibling;return Ze(Qn,Qn.current&1|2),h.child}f=f.sibling}R.tail!==null&&zr()>Q1&&(h.flags|=128,w=!0,ip(R,!1),h.lanes=4194304)}else{if(!w)if(f=a0(D),f!==null){if(h.flags|=128,w=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),ip(R,!0),R.tail===null&&R.tailMode==="hidden"&&!D.alternate&&!Xn)return di(h),null}else 2*zr()-R.renderingStartTime>Q1&&E!==1073741824&&(h.flags|=128,w=!0,ip(R,!1),h.lanes=4194304);R.isBackwards?(D.sibling=h.child,h.child=D):(f=R.last,f!==null?f.sibling=D:h.child=D,R.last=D)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=zr(),h.sibling=null,f=Qn.current,Ze(Qn,w?f&1|2:f&1),h):(di(h),null);case 22:case 23:return rS(),w=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==w&&(h.flags|=8192),w&&h.mode&1?Es&1073741824&&(di(h),Ye&&h.subtreeFlags&6&&(h.flags|=8192)):di(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var I4=a.ReactCurrentOwner,Ss=!1;function Li(f,h,E,w){h.child=f===null?rR(h,null,E,w):Mf(h,f.child,E,w)}function PR(f,h,E,w,R){E=E.render;var D=h.ref;return Sf(h,R),w=R1(f,h,E,w,D,R),E=P1(),f!==null&&!Ss?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~R,Oa(f,h,R)):(Xn&&E&&_1(h),h.flags|=1,Li(f,h,w,R),h.child)}function BR(f,h,E,w,R){if(f===null){var D=E.type;return typeof D=="function"&&!sS(D)&&D.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(h.tag=15,h.type=D,IR(f,h,D,w,R)):(f=N0(E.type,null,w,h,h.mode,R),f.ref=h.ref,f.return=h,h.child=f)}if(D=f.child,!(f.lanes&R)){var j=D.memoizedProps;if(E=E.compare,E=E!==null?E:Qg,E(j,w)&&f.ref===h.ref)return Oa(f,h,R)}return h.flags|=1,f=Rl(D,w),f.ref=h.ref,f.return=h,h.child=f}function IR(f,h,E,w,R){if(f!==null&&Qg(f.memoizedProps,w)&&f.ref===h.ref)if(Ss=!1,(f.lanes&R)!==0)f.flags&131072&&(Ss=!0);else return h.lanes=f.lanes,Oa(f,h,R);return F1(f,h,E,w,R)}function DR(f,h,E){var w=h.pendingProps,R=w.children,D=f!==null?f.memoizedState:null;if(w.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},Ze(Rf,Es),Es|=E;else if(E&1073741824)h.memoizedState={baseLanes:0,cachePool:null},w=D!==null?D.baseLanes:E,Ze(Rf,Es),Es|=w;else return f=D!==null?D.baseLanes|E:E,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,Ze(Rf,Es),Es|=f,null;else D!==null?(w=D.baseLanes|E,h.memoizedState=null):w=E,Ze(Rf,Es),Es|=w;return Li(f,h,R,E),h.child}function LR(f,h){var E=h.ref;(f===null&&E!==null||f!==null&&f.ref!==E)&&(h.flags|=512,h.flags|=2097152)}function F1(f,h,E,w,R){var D=$n(E)?wn:Lt.current;return D=cr(h,D),Sf(h,R),E=R1(f,h,E,w,D,R),w=P1(),f!==null&&!Ss?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~R,Oa(f,h,R)):(Xn&&w&&_1(h),h.flags|=1,Li(f,h,E,R),h.child)}function OR(f,h,E,w,R){if($n(E)){var D=!0;Wt(h)}else D=!1;if(Sf(h,R),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),JC(h,E,w),y1(h,E,w,R),w=!0;else if(f===null){var j=h.stateNode,ce=h.memoizedProps;j.props=ce;var Be=j.context,Je=E.contextType;typeof Je=="object"&&Je!==null?Je=Ys(Je):(Je=$n(E)?wn:Lt.current,Je=cr(h,Je));var gt=E.getDerivedStateFromProps,Ht=typeof gt=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ht||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ce!==w||Be!==Je)&&KC(h,j,w,Je),Al=!1;var Bt=h.memoizedState;j.state=Bt,n0(h,w,j,R),Be=h.memoizedState,ce!==w||Bt!==Be||Nt.current||Al?(typeof gt=="function"&&(v1(h,E,gt,w),Be=h.memoizedState),(ce=Al||YC(h,E,ce,w,Bt,Be,Je))?(Ht||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Be),j.props=w,j.state=Be,j.context=Je,w=ce):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{j=h.stateNode,WC(f,h),ce=h.memoizedProps,Je=h.type===h.elementType?ce:Mo(h.type,ce),j.props=Je,Ht=h.pendingProps,Bt=j.context,Be=E.contextType,typeof Be=="object"&&Be!==null?Be=Ys(Be):(Be=$n(E)?wn:Lt.current,Be=cr(h,Be));var Rn=E.getDerivedStateFromProps;(gt=typeof Rn=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ce!==Ht||Bt!==Be)&&KC(h,j,w,Be),Al=!1,Bt=h.memoizedState,j.state=Bt,n0(h,w,j,R);var bt=h.memoizedState;ce!==Ht||Bt!==bt||Nt.current||Al?(typeof Rn=="function"&&(v1(h,E,Rn,w),bt=h.memoizedState),(Je=Al||YC(h,E,Je,w,Bt,bt,Be)||!1)?(gt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(w,bt,Be),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(w,bt,Be)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||ce===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ce===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=bt),j.props=w,j.state=bt,j.context=Be,w=Je):(typeof j.componentDidUpdate!="function"||ce===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ce===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=1024),w=!1)}return N1(f,h,E,w,D,R)}function N1(f,h,E,w,R,D){LR(f,h);var j=(h.flags&128)!==0;if(!w&&!j)return R&&rn(h,E,!1),Oa(f,h,D);w=h.stateNode,I4.current=h;var ce=j&&typeof E.getDerivedStateFromError!="function"?null:w.render();return h.flags|=1,f!==null&&j?(h.child=Mf(h,f.child,null,D),h.child=Mf(h,null,ce,D)):Li(f,h,ce,D),h.memoizedState=w.state,R&&rn(h,E,!0),h.child}function FR(f){var h=f.stateNode;h.pendingContext?Qt(f,h.pendingContext,h.pendingContext!==h.context):h.context&&Qt(f,h.context,!1),w1(f,h.containerInfo)}function NR(f,h,E,w,R){return wf(),A1(R),h.flags|=256,Li(f,h,E,w),h.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function y0(f){return{baseLanes:f,cachePool:null}}function UR(f,h,E){var w=h.pendingProps,R=Qn.current,D=!1,j=(h.flags&128)!==0,ce;if((ce=j)||(ce=f!==null&&f.memoizedState===null?!1:(R&2)!==0),ce?(D=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(R|=1),Ze(Qn,R&1),f===null)return E1(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?kt(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(R=w.children,f=w.fallback,D?(w=h.mode,D=h.child,R={mode:"hidden",children:R},!(w&1)&&D!==null?(D.childLanes=0,D.pendingProps=R):D=U0(R,w,0,null),f=Yc(f,w,E,null),D.return=h,f.return=h,D.sibling=f,h.child=D,h.child.memoizedState=y0(E),h.memoizedState=v0,f):U1(h,R));if(R=f.memoizedState,R!==null){if(ce=R.dehydrated,ce!==null){if(j)return h.flags&256?(h.flags&=-257,_0(f,h,E,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(D=w.fallback,R=h.mode,w=U0({mode:"visible",children:w.children},R,0,null),D=Yc(D,R,E,null),D.flags|=2,w.return=h,D.return=h,w.sibling=D,h.child=w,h.mode&1&&Mf(h,f.child,null,E),h.child.memoizedState=y0(E),h.memoizedState=v0,D);if(!(h.mode&1))h=_0(f,h,E,null);else if(kt(ce))h=_0(f,h,E,Error(o(419)));else if(w=(E&f.childLanes)!==0,Ss||w){if(w=wr,w!==null){switch(E&-E){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}w=D&(w.suspendedLanes|E)?0:D,w!==0&&w!==R.retryLane&&(R.retryLane=w,qs(f,w,-1))}iS(),h=_0(f,h,E,Error(o(421)))}else wt(ce)?(h.flags|=128,h.child=f.child,h=$4.bind(null,f),Sn(ce,h),h=null):(E=R.treeContext,xe&&(xs=Un(ce),_s=h,Xn=!0,bo=null,jh=!1,E!==null&&(Js[Ks++]=Ia,Js[Ks++]=Da,Js[Ks++]=zc,Ia=E.id,Da=E.overflow,zc=h)),h=U1(h,h.pendingProps.children),h.flags|=4096);return h}return D?(w=zR(f,h,w.children,w.fallback,E),D=h.child,R=f.child.memoizedState,D.memoizedState=R===null?y0(E):{baseLanes:R.baseLanes|E,cachePool:null},D.childLanes=f.childLanes&~E,h.memoizedState=v0,w):(E=kR(f,h,w.children,E),h.memoizedState=null,E)}return D?(w=zR(f,h,w.children,w.fallback,E),D=h.child,R=f.child.memoizedState,D.memoizedState=R===null?y0(E):{baseLanes:R.baseLanes|E,cachePool:null},D.childLanes=f.childLanes&~E,h.memoizedState=v0,w):(E=kR(f,h,w.children,E),h.memoizedState=null,E)}function U1(f,h){return h=U0({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function kR(f,h,E,w){var R=f.child;return f=R.sibling,E=Rl(R,{mode:"visible",children:E}),!(h.mode&1)&&(E.lanes=w),E.return=h,E.sibling=null,f!==null&&(w=h.deletions,w===null?(h.deletions=[f],h.flags|=16):w.push(f)),h.child=E}function zR(f,h,E,w,R){var D=h.mode;f=f.child;var j=f.sibling,ce={mode:"hidden",children:E};return!(D&1)&&h.child!==f?(E=h.child,E.childLanes=0,E.pendingProps=ce,h.deletions=null):(E=Rl(f,ce),E.subtreeFlags=f.subtreeFlags&14680064),j!==null?w=Rl(j,w):(w=Yc(w,D,R,null),w.flags|=2),w.return=h,E.return=h,E.sibling=w,h.child=E,w}function _0(f,h,E,w){return w!==null&&A1(w),Mf(h,f.child,null,E),f=U1(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function HR(f,h,E){f.lanes|=h;var w=f.alternate;w!==null&&(w.lanes|=h),m1(f.return,h,E)}function k1(f,h,E,w,R){var D=f.memoizedState;D===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:E,tailMode:R}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=E,D.tailMode=R)}function GR(f,h,E){var w=h.pendingProps,R=w.revealOrder,D=w.tail;if(Li(f,h,w.children,E),w=Qn.current,w&2)w=w&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&HR(f,E,h);else if(f.tag===19)HR(f,E,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}w&=1}if(Ze(Qn,w),!(h.mode&1))h.memoizedState=null;else switch(R){case"forwards":for(E=h.child,R=null;E!==null;)f=E.alternate,f!==null&&a0(f)===null&&(R=E),E=E.sibling;E=R,E===null?(R=h.child,h.child=null):(R=E.sibling,E.sibling=null),k1(h,!1,R,E,D);break;case"backwards":for(E=null,R=h.child,h.child=null;R!==null;){if(f=R.alternate,f!==null&&a0(f)===null){h.child=R;break}f=R.sibling,R.sibling=E,E=R,R=f}k1(h,!0,E,null,D);break;case"together":k1(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Oa(f,h,E){if(f!==null&&(h.dependencies=f.dependencies),Pf|=h.lanes,!(E&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,E=Rl(f,f.pendingProps),h.child=E,E.return=h;f.sibling!==null;)f=f.sibling,E=E.sibling=Rl(f,f.pendingProps),E.return=h;E.sibling=null}return h.child}function D4(f,h,E){switch(h.tag){case 3:FR(h),wf();break;case 5:iR(h);break;case 1:$n(h.type)&&Wt(h);break;case 4:w1(h,h.stateNode.containerInfo);break;case 10:VC(h,h.type._context,h.memoizedProps.value);break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Ze(Qn,Qn.current&1),h.flags|=128,null):E&h.child.childLanes?UR(f,h,E):(Ze(Qn,Qn.current&1),f=Oa(f,h,E),f!==null?f.sibling:null);Ze(Qn,Qn.current&1);break;case 19:if(w=(E&h.childLanes)!==0,f.flags&128){if(w)return GR(f,h,E);h.flags|=128}var R=h.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Ze(Qn,Qn.current),w)break;return null;case 22:case 23:return h.lanes=0,DR(f,h,E)}return Oa(f,h,E)}function L4(f,h){switch(x1(h),h.tag){case 1:return $n(h.type)&&fn(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return Tf(),at(Nt),at(Lt),T1(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return M1(h),null;case 13:if(at(Qn),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));wf()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return at(Qn),null;case 4:return Tf(),null;case 10:return p1(h.type._context),null;case 22:case 23:return rS(),null;case 24:return null;default:return null}}var x0=!1,Vc=!1,O4=typeof WeakSet=="function"?WeakSet:Set,lt=null;function S0(f,h){var E=f.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(w){ns(f,h,w)}else E.current=null}function z1(f,h,E){try{E()}catch(w){ns(f,h,w)}}var VR=!1;function F4(f,h){for(K(f.containerInfo),lt=h;lt!==null;)if(f=lt,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,lt=h;else for(;lt!==null;){f=lt;try{var E=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,R=E.memoizedState,D=f.stateNode,j=D.getSnapshotBeforeUpdate(f.elementType===f.type?w:Mo(f.type,w),R);D.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Ye&&Xe(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){ns(f,f.return,ce)}if(h=f.sibling,h!==null){h.return=f.return,lt=h;break}lt=f.return}return E=VR,VR=!1,E}function Wc(f,h,E){var w=h.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var R=w=w.next;do{if((R.tag&f)===f){var D=R.destroy;R.destroy=void 0,D!==void 0&&z1(h,E,D)}R=R.next}while(R!==w)}}function sp(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var E=h=h.next;do{if((E.tag&f)===f){var w=E.create;E.destroy=w()}E=E.next}while(E!==h)}}function H1(f){var h=f.ref;if(h!==null){var E=f.stateNode;switch(f.tag){case 5:f=ee(E);break;default:f=E}typeof h=="function"?h(f):h.current=f}}function WR(f,h,E){if(Ko&&typeof Ko.onCommitFiberUnmount=="function")try{Ko.onCommitFiberUnmount(Kg,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var w=f=f.next;do{var R=w,D=R.destroy;R=R.tag,D!==void 0&&(R&2||R&4)&&z1(h,E,D),w=w.next}while(w!==f)}break;case 1:if(S0(h,E),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(j){ns(h,E,j)}break;case 5:S0(h,E);break;case 4:Ye?KR(f,h,E):Z&&Z&&(h=h.stateNode.containerInfo,E=Te(h),Qe(h,E))}}function $R(f,h,E){for(var w=h;;)if(WR(f,w,E),w.child===null||Ye&&w.tag===4){if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function XR(f){var h=f.alternate;h!==null&&(f.alternate=null,XR(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&ae(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function jR(f){return f.tag===5||f.tag===3||f.tag===4}function YR(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||jR(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function JR(f){if(Ye){e:{for(var h=f.return;h!==null;){if(jR(h))break e;h=h.return}throw Error(o(160))}var E=h;switch(E.tag){case 5:h=E.stateNode,E.flags&32&&(me(h),E.flags&=-33),E=YR(f),V1(f,E,h);break;case 3:case 4:h=E.stateNode.containerInfo,E=YR(f),G1(f,E,h);break;default:throw Error(o(161))}}}function G1(f,h,E){var w=f.tag;if(w===5||w===6)f=f.stateNode,h?Oe(E,f,h):nt(E,f);else if(w!==4&&(f=f.child,f!==null))for(G1(f,h,E),f=f.sibling;f!==null;)G1(f,h,E),f=f.sibling}function V1(f,h,E){var w=f.tag;if(w===5||w===6)f=f.stateNode,h?Rt(E,f,h):Ue(E,f);else if(w!==4&&(f=f.child,f!==null))for(V1(f,h,E),f=f.sibling;f!==null;)V1(f,h,E),f=f.sibling}function KR(f,h,E){for(var w=h,R=!1,D,j;;){if(!R){R=w.return;e:for(;;){if(R===null)throw Error(o(160));switch(D=R.stateNode,R.tag){case 5:j=!1;break e;case 3:D=D.containerInfo,j=!0;break e;case 4:D=D.containerInfo,j=!0;break e}R=R.return}R=!0}if(w.tag===5||w.tag===6)$R(f,w,E),j?ne(D,w.stateNode):Ot(D,w.stateNode);else if(w.tag===18)j?J(D,w.stateNode):Q(D,w.stateNode);else if(w.tag===4){if(w.child!==null){D=w.stateNode.containerInfo,j=!0,w.child.return=w,w=w.child;continue}}else if(WR(f,w,E),w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return,w.tag===4&&(R=!1)}w.sibling.return=w.return,w=w.sibling}}function W1(f,h){if(Ye){switch(h.tag){case 0:case 11:case 14:case 15:Wc(3,h,h.return),sp(3,h),Wc(5,h,h.return);return;case 1:return;case 5:var E=h.stateNode;if(E!=null){var w=h.memoizedProps;f=f!==null?f.memoizedProps:w;var R=h.type,D=h.updateQueue;h.updateQueue=null,D!==null&&dt(E,D,R,f,w,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));E=h.memoizedProps,He(h.stateNode,f!==null?f.memoizedProps:E,E);return;case 3:xe&&f!==null&&f.memoizedState.isDehydrated&&$(h.stateNode.containerInfo);return;case 12:return;case 13:E0(h);return;case 19:E0(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Wc(3,h,h.return),sp(3,h),Wc(5,h,h.return);return;case 12:return;case 13:E0(h);return;case 19:E0(h);return;case 3:xe&&f!==null&&f.memoizedState.isDehydrated&&$(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Z){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Qe(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function E0(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var E=f.stateNode;E===null&&(E=f.stateNode=new O4),h.forEach(function(w){var R=X4.bind(null,f,w);E.has(w)||(E.add(w),w.then(R,R))})}}function N4(f,h){for(lt=h;lt!==null;){h=lt;var E=h.deletions;if(E!==null)for(var w=0;w<E.length;w++){var R=E[w];try{var D=f;Ye?KR(D,R,h):$R(D,R,h);var j=R.alternate;j!==null&&(j.return=null),R.return=null}catch(Mt){ns(R,h,Mt)}}if(E=h.child,h.subtreeFlags&12854&&E!==null)E.return=h,lt=E;else for(;lt!==null;){h=lt;try{var ce=h.flags;if(ce&32&&Ye&&me(h.stateNode),ce&512){var Be=h.alternate;if(Be!==null){var Je=Be.ref;Je!==null&&(typeof Je=="function"?Je(null):Je.current=null)}}if(ce&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var gt=h.alternate;(gt===null||gt.memoizedState===null)&&(Z1=zr())}break;case 22:var Ht=h.memoizedState!==null,Bt=h.alternate,Rn=Bt!==null&&Bt.memoizedState!==null;if(E=h,Ye){e:if(w=E,R=Ht,D=null,Ye)for(var bt=w;;){if(bt.tag===5){if(D===null){D=bt;var hi=bt.stateNode;R?Ie(hi):Re(bt.stateNode,bt.memoizedProps)}}else if(bt.tag===6){if(D===null){var to=bt.stateNode;R?Me(to):se(to,bt.memoizedProps)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===w)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===w)break;for(;bt.sibling===null;){if(bt.return===null||bt.return===w)break e;D===bt&&(D=null),bt=bt.return}D===bt&&(D=null),bt.sibling.return=bt.return,bt=bt.sibling}}if(Ht&&!Rn&&E.mode&1){lt=E;for(var ge=E.child;ge!==null;){for(E=lt=ge;lt!==null;){w=lt;var de=w.child;switch(w.tag){case 0:case 11:case 14:case 15:Wc(4,w,w.return);break;case 1:S0(w,w.return);var Ee=w.stateNode;if(typeof Ee.componentWillUnmount=="function"){var ct=w.return;try{Ee.props=w.memoizedProps,Ee.state=w.memoizedState,Ee.componentWillUnmount()}catch(Mt){ns(w,ct,Mt)}}break;case 5:S0(w,w.return);break;case 22:if(w.memoizedState!==null){qR(E);continue}}de!==null?(de.return=w,lt=de):qR(E)}ge=ge.sibling}}}switch(ce&4102){case 2:JR(h),h.flags&=-3;break;case 6:JR(h),h.flags&=-3,W1(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,W1(h.alternate,h);break;case 4:W1(h.alternate,h)}}catch(Mt){ns(h,h.return,Mt)}if(E=h.sibling,E!==null){E.return=h.return,lt=E;break}lt=h.return}}}function U4(f,h,E){lt=f,ZR(f)}function ZR(f,h,E){for(var w=(f.mode&1)!==0;lt!==null;){var R=lt,D=R.child;if(R.tag===22&&w){var j=R.memoizedState!==null||x0;if(!j){var ce=R.alternate,Be=ce!==null&&ce.memoizedState!==null||Vc;ce=x0;var Je=Vc;if(x0=j,(Vc=Be)&&!Je)for(lt=R;lt!==null;)j=lt,Be=j.child,j.tag===22&&j.memoizedState!==null?e2(R):Be!==null?(Be.return=j,lt=Be):e2(R);for(;D!==null;)lt=D,ZR(D),D=D.sibling;lt=R,x0=ce,Vc=Je}QR(f)}else R.subtreeFlags&8772&&D!==null?(D.return=R,lt=D):QR(f)}}function QR(f){for(;lt!==null;){var h=lt;if(h.flags&8772){var E=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Vc||sp(5,h);break;case 1:var w=h.stateNode;if(h.flags&4&&!Vc)if(E===null)w.componentDidMount();else{var R=h.elementType===h.type?E.memoizedProps:Mo(h.type,E.memoizedProps);w.componentDidUpdate(R,E.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&XC(h,D,w);break;case 3:var j=h.updateQueue;if(j!==null){if(E=null,h.child!==null)switch(h.child.tag){case 5:E=ee(h.child.stateNode);break;case 1:E=h.child.stateNode}XC(h,j,E)}break;case 5:var ce=h.stateNode;E===null&&h.flags&4&&$e(ce,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&h.memoizedState===null){var Be=h.alternate;if(Be!==null){var Je=Be.memoizedState;if(Je!==null){var gt=Je.dehydrated;gt!==null&&X(gt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Vc||h.flags&512&&H1(h)}catch(Ht){ns(h,h.return,Ht)}}if(h===f){lt=null;break}if(E=h.sibling,E!==null){E.return=h.return,lt=E;break}lt=h.return}}function qR(f){for(;lt!==null;){var h=lt;if(h===f){lt=null;break}var E=h.sibling;if(E!==null){E.return=h.return,lt=E;break}lt=h.return}}function e2(f){for(;lt!==null;){var h=lt;try{switch(h.tag){case 0:case 11:case 15:var E=h.return;try{sp(4,h)}catch(Be){ns(h,E,Be)}break;case 1:var w=h.stateNode;if(typeof w.componentDidMount=="function"){var R=h.return;try{w.componentDidMount()}catch(Be){ns(h,R,Be)}}var D=h.return;try{H1(h)}catch(Be){ns(h,D,Be)}break;case 5:var j=h.return;try{H1(h)}catch(Be){ns(h,j,Be)}}}catch(Be){ns(h,h.return,Be)}if(h===f){lt=null;break}var ce=h.sibling;if(ce!==null){ce.return=h.return,lt=ce;break}lt=h.return}}var A0=0,w0=1,M0=2,b0=3,T0=4;if(typeof Symbol=="function"&&Symbol.for){var op=Symbol.for;A0=op("selector.component"),w0=op("selector.has_pseudo_class"),M0=op("selector.role"),b0=op("selector.test_id"),T0=op("selector.text")}function $1(f){var h=ve(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=ut(f),f===null)throw Error(o(362));return f.stateNode.current}function X1(f,h){switch(h.$$typeof){case A0:if(f.type===h.value)return!0;break;case w0:e:{h=h.value,f=[f,0];for(var E=0;E<f.length;){var w=f[E++],R=f[E++],D=h[R];if(w.tag!==5||!F(w)){for(;D!=null&&X1(w,D);)R++,D=h[R];if(R===h.length){h=!0;break e}else for(w=w.child;w!==null;)f.push(w,R),w=w.sibling}}h=!1}return h;case M0:if(f.tag===5&&le(f.stateNode,h.value))return!0;break;case T0:if((f.tag===5||f.tag===6)&&(f=H(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case b0:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function j1(f){switch(f.$$typeof){case A0:return"<"+(C(f.value)||"Unknown")+">";case w0:return":has("+(j1(f)||"")+")";case M0:return'[role="'+f.value+'"]';case T0:return'"'+f.value+'"';case b0:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function t2(f,h){var E=[];f=[f,0];for(var w=0;w<f.length;){var R=f[w++],D=f[w++],j=h[D];if(R.tag!==5||!F(R)){for(;j!=null&&X1(R,j);)D++,j=h[D];if(D===h.length)E.push(R);else for(R=R.child;R!==null;)f.push(R,D),R=R.sibling}}return E}function Y1(f,h){if(!pt)throw Error(o(363));f=$1(f),f=t2(f,h),h=[],f=Array.from(f);for(var E=0;E<f.length;){var w=f[E++];if(w.tag===5)F(w)||h.push(w.stateNode);else for(w=w.child;w!==null;)f.push(w),w=w.sibling}return h}var k4=Math.ceil,C0=a.ReactCurrentDispatcher,J1=a.ReactCurrentOwner,xr=a.ReactCurrentBatchConfig,Zt=0,wr=null,Mr=null,ni=0,Es=0,Rf=Dt(0),Ir=0,ap=null,Pf=0,R0=0,K1=0,lp=null,es=null,Z1=0,Q1=1/0;function Bf(){Q1=zr()+500}var P0=!1,q1=null,Ml=null,B0=!1,bl=null,I0=0,cp=0,eS=null,D0=-1,L0=0;function Oi(){return Zt&6?zr():D0!==-1?D0:D0=zr()}function Tl(f){return f.mode&1?Zt&2&&ni!==0?ni&-ni:S4.transition!==null?(L0===0&&(f=jg,jg<<=1,!(jg&4194240)&&(jg=64),L0=f),L0):(f=gn,f!==0?f:Ce()):1}function qs(f,h,E){if(50<cp)throw cp=0,eS=null,Error(o(185));var w=O0(f,h);return w===null?null:(Xh(w,h,E),(!(Zt&2)||w!==wr)&&(w===wr&&(!(Zt&2)&&(R0|=h),Ir===4&&Cl(w,ni)),ts(w,E),h===1&&Zt===0&&!(f.mode&1)&&(Bf(),Zg&&Qo())),w)}function O0(f,h){f.lanes|=h;var E=f.alternate;for(E!==null&&(E.lanes|=h),E=f,f=f.return;f!==null;)f.childLanes|=h,E=f.alternate,E!==null&&(E.childLanes|=h),E=f,f=f.return;return E.tag===3?E.stateNode:null}function ts(f,h){var E=f.callbackNode;d4(f,h);var w=Jg(f,f===wr?ni:0);if(w===0)E!==null&&HC(E),f.callbackNode=null,f.callbackPriority=0;else if(h=w&-w,f.callbackPriority!==h){if(E!=null&&HC(E),h===1)f.tag===0?x4(r2.bind(null,f)):GC(r2.bind(null,f)),Ve?et(function(){Zt===0&&Qo()}):l1(c1,Qo),E=null;else{switch(zC(w)){case 1:E=c1;break;case 4:E=g4;break;case 16:E=u1;break;case 536870912:E=v4;break;default:E=u1}E=d2(E,n2.bind(null,f))}f.callbackPriority=h,f.callbackNode=E}}function n2(f,h){if(D0=-1,L0=0,Zt&6)throw Error(o(327));var E=f.callbackNode;if(jc()&&f.callbackNode!==E)return null;var w=Jg(f,f===wr?ni:0);if(w===0)return null;if(w&30||w&f.expiredLanes||h)h=F0(f,w);else{h=w;var R=Zt;Zt|=2;var D=o2();(wr!==f||ni!==h)&&(Bf(),$c(f,h));do try{G4();break}catch(ce){s2(f,ce)}while(!0);h1(),C0.current=D,Zt=R,Mr!==null?h=0:(wr=null,ni=0,h=Ir)}if(h!==0){if(h===2&&(R=s1(f),R!==0&&(w=R,h=tS(f,R))),h===1)throw E=ap,$c(f,0),Cl(f,w),ts(f,zr()),E;if(h===6)Cl(f,w);else{if(R=f.current.alternate,!(w&30)&&!z4(R)&&(h=F0(f,w),h===2&&(D=s1(f),D!==0&&(w=D,h=tS(f,D))),h===1))throw E=ap,$c(f,0),Cl(f,w),ts(f,zr()),E;switch(f.finishedWork=R,f.finishedLanes=w,h){case 0:case 1:throw Error(o(345));case 2:Xc(f,es);break;case 3:if(Cl(f,w),(w&130023424)===w&&(h=Z1+500-zr(),10<h)){if(Jg(f,0)!==0)break;if(R=f.suspendedLanes,(R&w)!==w){Oi(),f.pingedLanes|=f.suspendedLanes&R;break}f.timeoutHandle=Le(Xc.bind(null,f,es),h);break}Xc(f,es);break;case 4:if(Cl(f,w),(w&4194240)===w)break;for(h=f.eventTimes,R=-1;0<w;){var j=31-Dn(w);D=1<<j,j=h[j],j>R&&(R=j),w&=~D}if(w=R,w=zr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*k4(w/1960))-w,10<w){f.timeoutHandle=Le(Xc.bind(null,f,es),w);break}Xc(f,es);break;case 5:Xc(f,es);break;default:throw Error(o(329))}}}return ts(f,zr()),f.callbackNode===E?n2.bind(null,f):null}function tS(f,h){var E=lp;return f.current.memoizedState.isDehydrated&&($c(f,h).flags|=256),f=F0(f,h),f!==2&&(h=es,es=E,h!==null&&nS(h)),f}function nS(f){es===null?es=f:es.push.apply(es,f)}function z4(f){for(var h=f;;){if(h.flags&16384){var E=h.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var w=0;w<E.length;w++){var R=E[w],D=R.getSnapshot;R=R.value;try{if(!Zo(D(),R))return!1}catch{return!1}}}if(E=h.child,h.subtreeFlags&16384&&E!==null)E.return=h,h=E;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Cl(f,h){for(h&=~K1,h&=~R0,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var E=31-Dn(h),w=1<<E;f[E]=-1,h&=~w}}function r2(f){if(Zt&6)throw Error(o(327));jc();var h=Jg(f,0);if(!(h&1))return ts(f,zr()),null;var E=F0(f,h);if(f.tag!==0&&E===2){var w=s1(f);w!==0&&(h=w,E=tS(f,w))}if(E===1)throw E=ap,$c(f,0),Cl(f,h),ts(f,zr()),E;if(E===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,Xc(f,es),ts(f,zr()),null}function i2(f){bl!==null&&bl.tag===0&&!(Zt&6)&&jc();var h=Zt;Zt|=1;var E=xr.transition,w=gn;try{if(xr.transition=null,gn=1,f)return f()}finally{gn=w,xr.transition=E,Zt=h,!(Zt&6)&&Qo()}}function rS(){Es=Rf.current,at(Rf)}function $c(f,h){f.finishedWork=null,f.finishedLanes=0;var E=f.timeoutHandle;if(E!==st&&(f.timeoutHandle=st,qe(E)),Mr!==null)for(E=Mr.return;E!==null;){var w=E;switch(x1(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&fn();break;case 3:Tf(),at(Nt),at(Lt),T1();break;case 5:M1(w);break;case 4:Tf();break;case 13:at(Qn);break;case 19:at(Qn);break;case 10:p1(w.type._context);break;case 22:case 23:rS()}E=E.return}if(wr=f,Mr=f=Rl(f.current,null),ni=Es=h,Ir=0,ap=null,K1=R0=Pf=0,es=lp=null,qo!==null){for(h=0;h<qo.length;h++)if(E=qo[h],w=E.interleaved,w!==null){E.interleaved=null;var R=w.next,D=E.pending;if(D!==null){var j=D.next;D.next=R,w.next=j}E.pending=w}qo=null}return f}function s2(f,h){do{var E=Mr;try{if(h1(),l0.current=p0,c0){for(var w=ur.memoizedState;w!==null;){var R=w.queue;R!==null&&(R.pending=null),w=w.next}c0=!1}if(Cf=0,Hr=ui=ur=null,Qh=!1,qh=0,J1.current=null,E===null||E.return===null){Ir=1,ap=h,Mr=null;break}e:{var D=f,j=E.return,ce=E,Be=h;if(h=ni,ce.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var Je=Be,gt=ce,Ht=gt.tag;if(!(gt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Bt=gt.alternate;Bt?(gt.updateQueue=Bt.updateQueue,gt.memoizedState=Bt.memoizedState,gt.lanes=Bt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var Rn=bR(j);if(Rn!==null){Rn.flags&=-257,TR(Rn,j,ce,D,h),Rn.mode&1&&MR(D,Je,h),h=Rn,Be=Je;var bt=h.updateQueue;if(bt===null){var hi=new Set;hi.add(Be),h.updateQueue=hi}else bt.add(Be);break e}else{if(!(h&1)){MR(D,Je,h),iS();break e}Be=Error(o(426))}}else if(Xn&&ce.mode&1){var to=bR(j);if(to!==null){!(to.flags&65536)&&(to.flags|=256),TR(to,j,ce,D,h),A1(Be);break e}}D=Be,Ir!==4&&(Ir=2),lp===null?lp=[D]:lp.push(D),Be=L1(Be,ce),ce=j;do{switch(ce.tag){case 3:ce.flags|=65536,h&=-h,ce.lanes|=h;var ge=AR(ce,Be,h);$C(ce,ge);break e;case 1:D=Be;var de=ce.type,Ee=ce.stateNode;if(!(ce.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Ml===null||!Ml.has(Ee)))){ce.flags|=65536,h&=-h,ce.lanes|=h;var ct=wR(ce,D,h);$C(ce,ct);break e}}ce=ce.return}while(ce!==null)}l2(E)}catch(Mt){h=Mt,Mr===E&&E!==null&&(Mr=E=E.return);continue}break}while(!0)}function o2(){var f=C0.current;return C0.current=p0,f===null?p0:f}function iS(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),wr===null||!(Pf&268435455)&&!(R0&268435455)||Cl(wr,ni)}function F0(f,h){var E=Zt;Zt|=2;var w=o2();wr===f&&ni===h||$c(f,h);do try{H4();break}catch(R){s2(f,R)}while(!0);if(h1(),Zt=E,C0.current=w,Mr!==null)throw Error(o(261));return wr=null,ni=0,Ir}function H4(){for(;Mr!==null;)a2(Mr)}function G4(){for(;Mr!==null&&!p4();)a2(Mr)}function a2(f){var h=f2(f.alternate,f,Es);f.memoizedProps=f.pendingProps,h===null?l2(f):Mr=h,J1.current=null}function l2(f){var h=f;do{var E=h.alternate;if(f=h.return,h.flags&32768){if(E=L4(E,h),E!==null){E.flags&=32767,Mr=E;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Ir=6,Mr=null;return}}else if(E=B4(E,h,Es),E!==null){Mr=E;return}if(h=h.sibling,h!==null){Mr=h;return}Mr=h=f}while(h!==null);Ir===0&&(Ir=5)}function Xc(f,h){var E=gn,w=xr.transition;try{xr.transition=null,gn=1,V4(f,h,E)}finally{xr.transition=w,gn=E}return null}function V4(f,h,E){do jc();while(bl!==null);if(Zt&6)throw Error(o(327));var w=f.finishedWork,R=f.finishedLanes;if(w===null)return null;if(f.finishedWork=null,f.finishedLanes=0,w===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var D=w.lanes|w.childLanes;if(h4(f,D),f===wr&&(Mr=wr=null,ni=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||B0||(B0=!0,d2(u1,function(){return jc(),null})),D=(w.flags&15990)!==0,w.subtreeFlags&15990||D){D=xr.transition,xr.transition=null;var j=gn;gn=1;var ce=Zt;Zt|=4,J1.current=null,F4(f,w),N4(f,w),U(f.containerInfo),f.current=w,U4(w),m4(),Zt=ce,gn=j,xr.transition=D}else f.current=w;if(B0&&(B0=!1,bl=f,I0=R),D=f.pendingLanes,D===0&&(Ml=null),y4(w.stateNode),ts(f,zr()),h!==null)for(E=f.onRecoverableError,w=0;w<h.length;w++)E(h[w]);if(P0)throw P0=!1,f=q1,q1=null,f;return I0&1&&f.tag!==0&&jc(),D=f.pendingLanes,D&1?f===eS?cp++:(cp=0,eS=f):cp=0,Qo(),null}function jc(){if(bl!==null){var f=zC(I0),h=xr.transition,E=gn;try{if(xr.transition=null,gn=16>f?16:f,bl===null)var w=!1;else{if(f=bl,bl=null,I0=0,Zt&6)throw Error(o(331));var R=Zt;for(Zt|=4,lt=f.current;lt!==null;){var D=lt,j=D.child;if(lt.flags&16){var ce=D.deletions;if(ce!==null){for(var Be=0;Be<ce.length;Be++){var Je=ce[Be];for(lt=Je;lt!==null;){var gt=lt;switch(gt.tag){case 0:case 11:case 15:Wc(8,gt,D)}var Ht=gt.child;if(Ht!==null)Ht.return=gt,lt=Ht;else for(;lt!==null;){gt=lt;var Bt=gt.sibling,Rn=gt.return;if(XR(gt),gt===Je){lt=null;break}if(Bt!==null){Bt.return=Rn,lt=Bt;break}lt=Rn}}}var bt=D.alternate;if(bt!==null){var hi=bt.child;if(hi!==null){bt.child=null;do{var to=hi.sibling;hi.sibling=null,hi=to}while(hi!==null)}}lt=D}}if(D.subtreeFlags&2064&&j!==null)j.return=D,lt=j;else e:for(;lt!==null;){if(D=lt,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Wc(9,D,D.return)}var ge=D.sibling;if(ge!==null){ge.return=D.return,lt=ge;break e}lt=D.return}}var de=f.current;for(lt=de;lt!==null;){j=lt;var Ee=j.child;if(j.subtreeFlags&2064&&Ee!==null)Ee.return=j,lt=Ee;else e:for(j=de;lt!==null;){if(ce=lt,ce.flags&2048)try{switch(ce.tag){case 0:case 11:case 15:sp(9,ce)}}catch(Mt){ns(ce,ce.return,Mt)}if(ce===j){lt=null;break e}var ct=ce.sibling;if(ct!==null){ct.return=ce.return,lt=ct;break e}lt=ce.return}}if(Zt=R,Qo(),Ko&&typeof Ko.onPostCommitFiberRoot=="function")try{Ko.onPostCommitFiberRoot(Kg,f)}catch{}w=!0}return w}finally{gn=E,xr.transition=h}}return!1}function c2(f,h,E){h=L1(E,h),h=AR(f,h,1),wl(f,h),h=Oi(),f=O0(f,1),f!==null&&(Xh(f,1,h),ts(f,h))}function ns(f,h,E){if(f.tag===3)c2(f,f,E);else for(;h!==null;){if(h.tag===3){c2(h,f,E);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ml===null||!Ml.has(w))){f=L1(E,f),f=wR(h,f,1),wl(h,f),f=Oi(),h=O0(h,1),h!==null&&(Xh(h,1,f),ts(h,f));break}}h=h.return}}function W4(f,h,E){var w=f.pingCache;w!==null&&w.delete(h),h=Oi(),f.pingedLanes|=f.suspendedLanes&E,wr===f&&(ni&E)===E&&(Ir===4||Ir===3&&(ni&130023424)===ni&&500>zr()-Z1?$c(f,0):K1|=E),ts(f,h)}function u2(f,h){h===0&&(f.mode&1?(h=Yg,Yg<<=1,!(Yg&130023424)&&(Yg=4194304)):h=1);var E=Oi();f=O0(f,h),f!==null&&(Xh(f,h,E),ts(f,E))}function $4(f){var h=f.memoizedState,E=0;h!==null&&(E=h.retryLane),u2(f,E)}function X4(f,h){var E=0;switch(f.tag){case 13:var w=f.stateNode,R=f.memoizedState;R!==null&&(E=R.retryLane);break;case 19:w=f.stateNode;break;default:throw Error(o(314))}w!==null&&w.delete(h),u2(f,E)}var f2;f2=function(f,h,E){if(f!==null)if(f.memoizedProps!==h.pendingProps||Nt.current)Ss=!0;else{if(!(f.lanes&E)&&!(h.flags&128))return Ss=!1,D4(f,h,E);Ss=!!(f.flags&131072)}else Ss=!1,Xn&&h.flags&1048576&&ZC(h,s0,h.index);switch(h.lanes=0,h.tag){case 2:var w=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var R=cr(h,Lt.current);Sf(h,E),R=R1(null,h,w,f,R,E);var D=P1();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,$n(w)?(D=!0,Wt(h)):D=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,g1(h),R.updater=r0,h.stateNode=R,R._reactInternals=h,y1(h,w,f,E),h=N1(null,h,w,!0,D,E)):(h.tag=0,Xn&&D&&_1(h),Li(null,h,R,E),h=h.child),h;case 16:w=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,R=w._init,w=R(w._payload),h.type=w,R=h.tag=Y4(w),f=Mo(w,f),R){case 0:h=F1(null,h,w,f,E);break e;case 1:h=OR(null,h,w,f,E);break e;case 11:h=PR(null,h,w,f,E);break e;case 14:h=BR(null,h,w,Mo(w.type,f),E);break e}throw Error(o(306,w,""))}return h;case 0:return w=h.type,R=h.pendingProps,R=h.elementType===w?R:Mo(w,R),F1(f,h,w,R,E);case 1:return w=h.type,R=h.pendingProps,R=h.elementType===w?R:Mo(w,R),OR(f,h,w,R,E);case 3:e:{if(FR(h),f===null)throw Error(o(387));w=h.pendingProps,D=h.memoizedState,R=D.element,WC(f,h),n0(h,w,null,E);var j=h.memoizedState;if(w=j.element,xe&&D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:j.cache,transitions:j.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){R=Error(o(423)),h=NR(f,h,w,E,R);break e}else if(w!==R){R=Error(o(424)),h=NR(f,h,w,E,R);break e}else for(xe&&(xs=Kn(h.stateNode.containerInfo),_s=h,Xn=!0,bo=null,jh=!1),E=rR(h,null,w,E),h.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(wf(),w===R){h=Oa(f,h,E);break e}Li(f,h,w,E)}h=h.child}return h;case 5:return iR(h),f===null&&E1(h),w=h.type,R=h.pendingProps,D=f!==null?f.memoizedProps:null,j=R.children,be(w,R)?j=null:D!==null&&be(w,D)&&(h.flags|=32),LR(f,h),Li(f,h,j,E),h.child;case 6:return f===null&&E1(h),null;case 13:return UR(f,h,E);case 4:return w1(h,h.stateNode.containerInfo),w=h.pendingProps,f===null?h.child=Mf(h,null,w,E):Li(f,h,w,E),h.child;case 11:return w=h.type,R=h.pendingProps,R=h.elementType===w?R:Mo(w,R),PR(f,h,w,R,E);case 7:return Li(f,h,h.pendingProps,E),h.child;case 8:return Li(f,h,h.pendingProps.children,E),h.child;case 12:return Li(f,h,h.pendingProps.children,E),h.child;case 10:e:{if(w=h.type._context,R=h.pendingProps,D=h.memoizedProps,j=R.value,VC(h,w,j),D!==null)if(Zo(D.value,j)){if(D.children===R.children&&!Nt.current){h=Oa(f,h,E);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var ce=D.dependencies;if(ce!==null){j=D.child;for(var Be=ce.firstContext;Be!==null;){if(Be.context===w){if(D.tag===1){Be=Ba(-1,E&-E),Be.tag=2;var Je=D.updateQueue;if(Je!==null){Je=Je.shared;var gt=Je.pending;gt===null?Be.next=Be:(Be.next=gt.next,gt.next=Be),Je.pending=Be}}D.lanes|=E,Be=D.alternate,Be!==null&&(Be.lanes|=E),m1(D.return,E,h),ce.lanes|=E;break}Be=Be.next}}else if(D.tag===10)j=D.type===h.type?null:D.child;else if(D.tag===18){if(j=D.return,j===null)throw Error(o(341));j.lanes|=E,ce=j.alternate,ce!==null&&(ce.lanes|=E),m1(j,E,h),j=D.sibling}else j=D.child;if(j!==null)j.return=D;else for(j=D;j!==null;){if(j===h){j=null;break}if(D=j.sibling,D!==null){D.return=j.return,j=D;break}j=j.return}D=j}Li(f,h,R.children,E),h=h.child}return h;case 9:return R=h.type,w=h.pendingProps.children,Sf(h,E),R=Ys(R),w=w(R),h.flags|=1,Li(f,h,w,E),h.child;case 14:return w=h.type,R=Mo(w,h.pendingProps),R=Mo(w.type,R),BR(f,h,w,R,E);case 15:return IR(f,h,h.type,h.pendingProps,E);case 17:return w=h.type,R=h.pendingProps,R=h.elementType===w?R:Mo(w,R),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,$n(w)?(f=!0,Wt(h)):f=!1,Sf(h,E),JC(h,w,R),y1(h,w,R,E),N1(null,h,w,!0,f,E);case 19:return GR(f,h,E);case 22:return DR(f,h,E)}throw Error(o(156,h.tag))};function d2(f,h){return l1(f,h)}function j4(f,h,E,w){this.tag=f,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(f,h,E,w){return new j4(f,h,E,w)}function sS(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Y4(f){if(typeof f=="function")return sS(f)?1:0;if(f!=null){if(f=f.$$typeof,f===y)return 11;if(f===x)return 14}return 2}function Rl(f,h){var E=f.alternate;return E===null?(E=eo(f.tag,h,f.key,f.mode),E.elementType=f.elementType,E.type=f.type,E.stateNode=f.stateNode,E.alternate=f,f.alternate=E):(E.pendingProps=h,E.type=f.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=f.flags&14680064,E.childLanes=f.childLanes,E.lanes=f.lanes,E.child=f.child,E.memoizedProps=f.memoizedProps,E.memoizedState=f.memoizedState,E.updateQueue=f.updateQueue,h=f.dependencies,E.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},E.sibling=f.sibling,E.index=f.index,E.ref=f.ref,E}function N0(f,h,E,w,R,D){var j=2;if(w=f,typeof f=="function")sS(f)&&(j=1);else if(typeof f=="string")j=5;else e:switch(f){case u:return Yc(E.children,R,D,h);case d:j=8,R|=8;break;case p:return f=eo(12,E,h,R|2),f.elementType=p,f.lanes=D,f;case _:return f=eo(13,E,h,R),f.elementType=_,f.lanes=D,f;case g:return f=eo(19,E,h,R),f.elementType=g,f.lanes=D,f;case A:return U0(E,R,D,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:j=10;break e;case v:j=9;break e;case y:j=11;break e;case x:j=14;break e;case S:j=16,w=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=eo(j,E,h,R),h.elementType=f,h.type=w,h.lanes=D,h}function Yc(f,h,E,w){return f=eo(7,f,w,h),f.lanes=E,f}function U0(f,h,E,w){return f=eo(22,f,w,h),f.elementType=A,f.lanes=E,f.stateNode={},f}function oS(f,h,E){return f=eo(6,f,null,h),f.lanes=E,f}function aS(f,h,E){return h=eo(4,f.children!==null?f.children:[],f.key,h),h.lanes=E,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function J4(f,h,E,w,R){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o1(0),this.expirationTimes=o1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o1(0),this.identifierPrefix=w,this.onRecoverableError=R,xe&&(this.mutableSourceEagerHydrationData=null)}function h2(f,h,E,w,R,D,j,ce,Be){return f=new J4(f,h,E,ce,Be),h===1?(h=1,D===!0&&(h|=8)):h=0,D=eo(3,null,null,h),f.current=D,D.stateNode=f,D.memoizedState={element:w,isDehydrated:E,cache:null,transitions:null},g1(D),f}function p2(f){if(!f)return Kt;f=f._reactInternals;e:{if(T(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if($n(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var E=f.type;if($n(E))return Zn(f,E,h)}return h}function m2(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=z(h),f===null?null:f.stateNode}function g2(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var E=f.retryLane;f.retryLane=E!==0&&E<h?E:h}}function lS(f,h){g2(f,h),(f=f.alternate)&&g2(f,h)}function K4(f){return f=z(f),f===null?null:f.stateNode}function Z4(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var h=Oi();qs(f,134217728,h),lS(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=Oi(),E=Tl(f);qs(f,E,h),lS(f,E)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var E=$h(h.pendingLanes);E!==0&&(a1(h,E|1),ts(h,zr()),!(Zt&6)&&(Bf(),Qo()))}break;case 13:var w=Oi();i2(function(){return qs(f,1,w)}),lS(f,1)}},t.batchedUpdates=function(f,h){var E=Zt;Zt|=1;try{return f(h)}finally{Zt=E,Zt===0&&(Bf(),Zg&&Qo())}},t.createComponentSelector=function(f){return{$$typeof:A0,value:f}},t.createContainer=function(f,h,E,w,R,D,j){return h2(f,h,!1,null,E,w,R,D,j)},t.createHasPseudoClassSelector=function(f){return{$$typeof:w0,value:f}},t.createHydrationContainer=function(f,h,E,w,R,D,j,ce,Be){return f=h2(E,w,!0,f,R,D,j,ce,Be),f.context=p2(null),E=f.current,w=Oi(),R=Tl(E),D=Ba(w,R),D.callback=h??null,wl(E,D),f.current.lanes=R,Xh(f,R,w),ts(f,w),f},t.createPortal=function(f,h,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:f,containerInfo:h,implementation:E}},t.createRoleSelector=function(f){return{$$typeof:M0,value:f}},t.createTestNameSelector=function(f){return{$$typeof:b0,value:f}},t.createTextSelector=function(f){return{$$typeof:T0,value:f}},t.deferredUpdates=function(f){var h=gn,E=xr.transition;try{return xr.transition=null,gn=16,f()}finally{gn=h,xr.transition=E}},t.discreteUpdates=function(f,h,E,w,R){var D=gn,j=xr.transition;try{return xr.transition=null,gn=1,f(h,E,w,R)}finally{gn=D,xr.transition=j,Zt===0&&Bf()}},t.findAllNodes=Y1,t.findBoundingRects=function(f,h){if(!pt)throw Error(o(363));h=Y1(f,h),f=[];for(var E=0;E<h.length;E++)f.push($t(h[E]));for(h=f.length-1;0<h;h--){E=f[h];for(var w=E.x,R=w+E.width,D=E.y,j=D+E.height,ce=h-1;0<=ce;ce--)if(h!==ce){var Be=f[ce],Je=Be.x,gt=Je+Be.width,Ht=Be.y,Bt=Ht+Be.height;if(w>=Je&&D>=Ht&&R<=gt&&j<=Bt){f.splice(h,1);break}else if(w!==Je||E.width!==Be.width||Bt<D||Ht>j){if(!(D!==Ht||E.height!==Be.height||gt<w||Je>R)){Je>w&&(Be.width+=Je-w,Be.x=w),gt<R&&(Be.width=R-Je),f.splice(h,1);break}}else{Ht>D&&(Be.height+=Ht-D,Be.y=D),Bt<j&&(Be.height=j-Ht),f.splice(h,1);break}}}return f},t.findHostInstance=m2,t.findHostInstanceWithNoPortals=function(f){return f=N(f),f=f!==null?G(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return m2(f)},t.flushControlled=function(f){var h=Zt;Zt|=1;var E=xr.transition,w=gn;try{xr.transition=null,gn=1,f()}finally{gn=w,xr.transition=E,Zt=h,Zt===0&&(Bf(),Qo())}},t.flushPassiveEffects=jc,t.flushSync=i2,t.focusWithin=function(f,h){if(!pt)throw Error(o(363));for(f=$1(f),h=t2(f,h),h=Array.from(h),f=0;f<h.length;){var E=h[f++];if(!F(E)){if(E.tag===5&&Pe(E.stateNode))return!0;for(E=E.child;E!==null;)h.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return gn},t.getFindAllNodesFailureDescription=function(f,h){if(!pt)throw Error(o(363));var E=0,w=[];f=[$1(f),0];for(var R=0;R<f.length;){var D=f[R++],j=f[R++],ce=h[j];if((D.tag!==5||!F(D))&&(X1(D,ce)&&(w.push(j1(ce)),j++,j>E&&(E=j)),j<h.length))for(D=D.child;D!==null;)f.push(D,j),D=D.sibling}if(E<h.length){for(f=[];E<h.length;E++)f.push(j1(h[E]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return ee(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:K4,findFiberByHostInstance:f.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Kg=h.inject(f),Ko=h}catch{}f=!!h.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,h,E,w){if(!pt)throw Error(o(363));f=Y1(f,h);var R=De(f,E,w).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(f,h){var E=h._getVersion;E=E(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,E]:f.mutableSourceEagerHydrationData.push(h,E)},t.runWithPriority=function(f,h){var E=gn;try{return gn=f,h()}finally{gn=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,h,E,w){var R=h.current,D=Oi(),j=Tl(R);return E=p2(E),h.context===null?h.context=E:h.pendingContext=E,h=Ba(D,j),h.payload={element:f},w=w===void 0?null:w,w!==null&&(h.callback=w),wl(R,h),f=qs(R,j,D),f!==null&&t0(f,R,j),j},t};ZN.exports=lj;var cj=ZN.exports;const uj=Bc(cj),fj=n=>typeof n=="object"&&typeof n.then=="function",bu=[];function eU(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function tU(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of bu)if(eU(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=bu.indexOf(i);s!==-1&&bu.splice(s,1)},promise:(fj(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(bu.push(i),!t)throw i.promise}const dj=(n,e,t)=>tU(n,e,!1,t),hj=(n,e,t)=>void tU(n,e,!0,t),pj=n=>{if(n===void 0||n.length===0)bu.splice(0,bu.length);else{const e=bu.find(t=>eU(n,t.keys,t.equal));e&&e.remove()}},kT={},Xx=n=>void Object.assign(kT,n);function mj(n,e){function t(u,{args:d=[],attach:p,...m},v){let y=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=cd(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=kT[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=cd(new g(...d),{type:u,root:v,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof zt?_.__r3f.attach="geometry":_ instanceof yr&&(_.__r3f.attach="material")),y!=="inject"&&xE(_,m),_}function r(u,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?_E(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||cd(d,{}),d.__r3f.parent=u,Xw(d),ud(d)}}function i(u,d,p){let m=!1;if(d){var v,y;if((v=d.__r3f)!=null&&v.attach)_E(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const _=u.children.filter(x=>x!==d),g=_.indexOf(p);u.children=[..._.slice(0,g),d,..._.slice(g)],m=!0}m||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||cd(d,{}),d.__r3f.parent=u,Xw(d),ud(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,v,y;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==d)),(v=d.__r3f)!=null&&v.attach)oI(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var _;u.remove(d),(_=d.__r3f)!=null&&_.root&&Aj(d.__r3f.root,d)}const x=(y=d.__r3f)==null?void 0:y.primitive,S=!x&&(p===void 0?d.dispose!==null:p);if(!x){var g;s((g=d.__r3f)==null?void 0:g.objects,d,S),s(d.children,d,S)}if(delete d.__r3f,S&&d.dispose&&d.type!=="Scene"){const A=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Ww.unstable_scheduleCallback(Ww.unstable_IdlePriority,A):A()}ud(u)}}function a(u,d,p,m){var v;const y=(v=u.__r3f)==null?void 0:v.parent;if(!y)return;const _=t(d,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(_,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(_,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(y,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:uj({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:_=[],children:g,...x}=m,{args:S=[],children:A,...b}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((C,B)=>C!==S[B]))return[!0];const M=lU(u,x,b,!0);return M.changes.length?[!1,M]:null}},commitUpdate(u,[d,p],m,v,y,_){d?a(u,m,y,_):xE(u,p)},commitMount(u,d,p,m){var v;const y=(v=u.__r3f)!=null?v:{};u.raycast&&y.handlers&&y.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>cd(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&oI(m,u,p),u.isObject3D&&(u.visible=!1),ud(u)},unhideInstance(u,d){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&_E(v,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),ud(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Cd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Hn.fun(performance.now)?performance.now:Hn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Hn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Hn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:xE}}var nI,rI;const yE=n=>"colorSpace"in n||"outputColorSpace"in n,nU=()=>{var n;return(n=kT.ColorManagement)!=null?n:null},rU=n=>n&&n.isOrthographicCamera,gj=n=>n&&n.hasOwnProperty("current"),Dh=typeof window<"u"&&((nI=window.document)!=null&&nI.createElement||((rI=window.navigator)==null?void 0:rI.product)==="ReactNative")?I.useLayoutEffect:I.useEffect;function iU(n){const e=I.useRef(n);return Dh(()=>void(e.current=n),[n]),e}function vj({set:n}){return Dh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class sU extends I.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}sU.getDerivedStateFromError=()=>({error:!0});const oU="__default",iI=new Map,yj=n=>n&&!!n.memoized&&!!n.changes;function aU(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Rp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Hn={obj:n=>n===Object(n)&&!Hn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Hn.str(n)||Hn.num(n))return n===e;const s=Hn.obj(n);if(s&&r==="reference")return n===e;const o=Hn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Hn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Hn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function _j(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function xj(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function cd(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function $w(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const sI=/-\d+$/;function _E(n,e,t){if(Hn.str(t)){if(sI.test(t)){const s=t.replace(sI,""),{target:o,key:a}=$w(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=$w(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function oI(n,e,t){var r,i;if(Hn.str(t)){const{target:s,key:o}=$w(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function lU(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=n==null?void 0:n.__r3f)!=null?u:{},p=Object.entries(i),m=[];if(c){const y=Object.keys(l);for(let _=0;_<y.length;_++)i.hasOwnProperty(y[_])||p.unshift([y[_],oU+"remove"])}p.forEach(([y,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&y==="object"||Hn.equ(_,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,_,!0,[]]);let x=[];y.includes("-")&&(x=y.split("-")),m.push([y,_,!1,x]);for(const S in i){const A=i[S];S.startsWith(`${y}-`)&&m.push([S,A,!1,S.split("-")])}});const v={...i};return d.memoizedProps&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:m}}const Sj=typeof process<"u"&&!1;function xE(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=yj(e)?e:lU(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,y,_]=c[p];if(yE(n)){const A="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?A:b):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?A:b)}let g=n,x=g[m];if(_.length&&(x=_.reduce((S,A)=>S[A],n),!(x&&x.set))){const[S,...A]=_.reverse();g=A.reverse().reduce((b,M)=>b[M],n),m=S}if(v===oU+"remove")if(g.constructor){let S=iI.get(g.constructor);S||(S=new g.constructor,iI.set(g.constructor,S)),v=S[m]}else v=0;if(y)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Du)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&(Sj?x.constructor.name===v.constructor.name:x.constructor===v.constructor))x.copy(v);else if(v!==void 0){const S=x instanceof tt;!S&&x.setScalar?x.setScalar(v):x instanceof Du&&v instanceof Du?x.mask=v.mask:x.set(v),!nU()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof In&&g[m].format===Ei&&g[m].type===li){const S=g[m];yE(S)&&yE(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}ud(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&Xw(n),n}function ud(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Xw(n){n.onUpdate==null||n.onUpdate(n)}function cU(n,e){n.manual||(rU(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Yv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Ej(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Cd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Cd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Cd.ContinuousEventPriority;default:return Cd.DefaultEventPriority}}function uU(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Aj(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{uU(t.capturedMap,e,r,i)})}function wj(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const x=Rp(m[g]);x&&(x.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const x=Rp(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(l,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let y=m.flatMap(v).sort((g,x)=>{const S=Rp(g.object),A=Rp(x.object);return!S||!A?g.distance-x.distance:A.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=Yv(g);return d.has(x)?!1:(d.add(x),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const g of y){let x=g.object;for(;x;){var _;(_=x.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())d.has(Yv(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const y=Rp(v.object)||p,{raycaster:_,pointer:g,camera:x,internal:S}=y,A=new W(g.x,g.y,0).unproject(x),b=P=>{var N,z;return(N=(z=S.capturedMap.get(P))==null?void 0:z.has(v.eventObject))!=null?N:!1},M=P=>{const N={intersection:v,target:c.target};S.capturedMap.has(P)?S.capturedMap.get(P).set(v.eventObject,N):S.capturedMap.set(P,new Map([[v.eventObject,N]])),c.target.setPointerCapture(P)},C=P=>{const N=S.capturedMap.get(P);N&&uU(S.capturedMap,v.eventObject,N,P)};let B={};for(let P in c){let N=c[P];typeof N!="function"&&(B[P]=N)}let T={...v,...B,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:A,ray:_.ray,camera:x,stopPropagation(){const P="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!P||P.has(v.eventObject))&&(T.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));s([...N,v])}},target:{hasPointerCapture:b,setPointerCapture:M,releasePointerCapture:C},currentTarget:{hasPointerCapture:b,setPointerCapture:M,releasePointerCapture:C},nativeEvent:c};if(d(T),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Yv(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(u,m?t:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(o(u,p.interaction),d&&d(u)),m&&s(_);function x(S){const A=S.eventObject,b=A.__r3f,M=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const C=Yv(S),B=p.hovered.get(C);B?B.stopped&&S.stopPropagation():(p.hovered.set(C,S),M.onPointerOver==null||M.onPointerOver(S),M.onPointerEnter==null||M.onPointerEnter(S))}M.onPointerMove==null||M.onPointerMove(S)}else{const C=M[l];C?(!v||p.initialHits.includes(A))&&(o(u,p.interaction.filter(B=>!p.initialHits.includes(B))),C(S)):v&&p.initialHits.includes(A)&&o(u,p.interaction.filter(B=>!p.initialHits.includes(B)))}}i(_,u,g,x)}}return{handlePointer:a}}const Mj=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],fU=n=>!!(n!=null&&n.render),zT=I.createContext(null),bj=(n,e)=>{const t=UT((a,l)=>{const c=new W,u=new W,d=new W;function p(g=l().camera,x=u,S=l().size){const{width:A,height:b,top:M,left:C}=S,B=A/b;x instanceof W?d.copy(x):d.set(...x);const T=g.getWorldPosition(c).distanceTo(d);if(rU(g))return{width:A/g.zoom,height:b/g.zoom,top:M,left:C,factor:1,distance:T,aspect:B};{const P=g.fov*Math.PI/180,N=2*Math.tan(P/2)*T,z=N*(A/b);return{width:z,height:N,top:M,left:C,factor:A/z,distance:T,aspect:B}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),y=new Se;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new LT,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,A,b)=>{const M=l().camera,C={width:g,height:x,top:A||0,left:b||0,updateStyle:S};a(B=>({size:C,viewport:{...B.viewport,...p(M,u,C)}}))},setDpr:g=>a(x=>{const S=aU(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:I.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const A=l().internal;return A.priority=A.priority+(x>0?1:0),A.subscribers.push({ref:g,priority:x,store:S}),A.subscribers=A.subscribers.sort((b,M)=>b.priority-M.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(x>0?1:0),b.subscribers=b.subscribers.filter(M=>M.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,cU(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function dU(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let Jv,hU=new Set,pU=new Set,Tj=new Set;const Cj=n=>dU(n,hU),Rj=n=>dU(n,pU);function SE(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Pp(n,e){switch(n){case"before":return SE(hU,e);case"after":return SE(pU,e);case"tail":return SE(Tj,e)}}let EE,AE;function wE(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),EE=e.internal.subscribers,Jv=0;Jv<EE.length;Jv++)AE=EE[Jv],AE.ref.current(AE.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Pj(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Pp("before",l);for(const u of n.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=wE(l,i))}if(Pp("after",l),t===0)return Pp("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return n.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&Pp("before",l),u)wE(l,u,d);else for(const p of n.values())wE(l,p.store.getState());c&&Pp("after",l)}return{loop:s,invalidate:o,advance:a}}function Bj(n){const e=I.useRef(null);return Dh(()=>void(e.current=n.current.__r3f),[n]),e}function HT(){const n=I.useContext(zT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function hr(n=t=>t,e){return HT()(n,e)}function Lh(n,e=0){const t=HT(),r=t.getState().internal.subscribe,i=iU(n);return Dh(()=>r(i,e,t),[e,r,t]),null}const aI=new WeakMap;function mU(n,e){return function(t,...r){let i=aI.get(t);return i||(i=new t,aI.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,_j(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function Oh(n,e,t,r){const i=Array.isArray(e)?e:[e],s=dj(mU(t,r),[n,...i],{equal:Hn.equ});return Array.isArray(e)?s:s[0]}Oh.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return hj(mU(t),[n,...r])};Oh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return pj([n,...t])};const hh=new Map,{invalidate:lI,advance:cI}=Pj(hh),{reconciler:sg,applyProps:ed}=mj(hh,Ej),td={objects:"shallow",strict:!1},Ij=(n,e)=>{const t=typeof n=="function"?n(e):n;return fU(t)?t:new uT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Dj(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Lj(n){const e=hh.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||bj(lI,cI),o=t||sg.createContainer(s,Cd.ConcurrentRoot,null,!1,null,"",i,null);e||hh.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:v,onCreated:y,shadows:_=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:A=!1,frameloop:b="always",dpr:M=[1,2],performance:C,raycaster:B,camera:T,onPointerMissed:P}=u,N=s.getState(),z=N.gl;N.gl||N.set({gl:z=Ij(d,n)});let q=N.raycaster;q||N.set({raycaster:q=new NT});const{params:G,...Y}=B||{};if(Hn.equ(Y,q,td)||ed(q,{...Y}),Hn.equ(G,q.params,td)||ed(q,{params:{...q.params,...G}}),!N.camera||N.camera===c&&!Hn.equ(c,T,td)){c=T;const fe=T instanceof Ch,ue=fe?T:A?new ua(0,0,0,0,.1,1e3):new Yn(75,0,.1,1e3);fe||(ue.position.z=5,T&&ed(ue,T),!N.camera&&!(T!=null&&T.rotation)&&ue.lookAt(0,0,0)),N.set({camera:ue}),q.camera=ue}if(!N.scene){let fe;m instanceof Zu?fe=m:(fe=new Zu,m&&ed(fe,m)),N.set({scene:cd(fe)})}if(!N.xr){var ee;const fe=(be,Ae)=>{const Le=s.getState();Le.frameloop!=="never"&&cI(be,!0,Le,Ae)},ue=()=>{const be=s.getState();be.gl.xr.enabled=be.gl.xr.isPresenting,be.gl.xr.setAnimationLoop(be.gl.xr.isPresenting?fe:null),be.gl.xr.isPresenting||lI(be)},pe={connect(){const be=s.getState().gl;be.xr.addEventListener("sessionstart",ue),be.xr.addEventListener("sessionend",ue)},disconnect(){const be=s.getState().gl;be.xr.removeEventListener("sessionstart",ue),be.xr.removeEventListener("sessionend",ue)}};typeof((ee=z.xr)==null?void 0:ee.addEventListener)=="function"&&pe.connect(),N.set({xr:pe})}if(z.shadowMap){const fe=z.shadowMap.enabled,ue=z.shadowMap.type;if(z.shadowMap.enabled=!!_,Hn.boo(_))z.shadowMap.type=lm;else if(Hn.str(_)){var te;const pe={basic:K3,percentage:vx,soft:lm,variance:Lo};z.shadowMap.type=(te=pe[_])!=null?te:lm}else Hn.obj(_)&&Object.assign(z.shadowMap,_);(fe!==z.shadowMap.enabled||ue!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const V=nU();V&&("enabled"in V?V.enabled=!S:"legacyMode"in V&&(V.legacyMode=S)),ed(z,{outputEncoding:g?3e3:3001,toneMapping:x?ma:Vb}),N.legacy!==S&&N.set(()=>({legacy:S})),N.linear!==g&&N.set(()=>({linear:g})),N.flat!==x&&N.set(()=>({flat:x})),d&&!Hn.fun(d)&&!fU(d)&&!Hn.equ(d,z,td)&&ed(z,d),v&&!N.events.handlers&&N.set({events:v(s)});const oe=Dj(n,p);return Hn.equ(oe,N.size,td)||N.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),M&&N.viewport.dpr!==aU(M)&&N.setDpr(M),N.frameloop!==b&&N.setFrameloop(b),N.onPointerMissed||N.set({onPointerMissed:P}),C&&!Hn.equ(C,N.performance,td)&&N.set(fe=>({performance:{...fe.performance,...C}})),a=y,l=!0,this},render(u){return l||this.configure(),sg.updateContainer(I.createElement(Oj,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){gU(n)}}}function Oj({store:n,children:e,onCreated:t,rootElement:r}){return Dh(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),I.createElement(zT.Provider,{value:n},e)}function gU(n,e){const t=hh.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),sg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),xj(i),hh.delete(n),e&&e(n)}catch{}},500)})}}function Fj(n,e,t){return I.createElement(Nj,{key:e.uuid,children:n,container:e,state:t})}function Nj({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=HT(),[a]=I.useState(()=>new NT),[l]=I.useState(()=>new Se),c=I.useCallback((d,p)=>{const m={...d};Object.keys(d).forEach(y=>{(Mj.includes(y)||d[y]!==p[y]&&p[y])&&delete m[y]});let v;if(p&&i){const y=p.camera;v=d.viewport.getCurrentViewport(y,new W,i),y!==d.camera&&cU(y,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...v},...s}},[n]),[u]=I.useState(()=>{const d=o.getState();return UT((m,v)=>({...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...r},size:{...d.size,...i},...s,set:m,get:v,setEvents:y=>m(_=>({..._,events:{..._.events,...y}}))}))});return I.useEffect(()=>{const d=o.subscribe(p=>u.setState(m=>c(p,m)));return()=>{d(),u.destroy()}},[]),I.useEffect(()=>{u.setState(d=>c(o.getState(),d))},[c]),I.createElement(I.Fragment,null,sg.createPortal(I.createElement(zT.Provider,{value:u},e),u,null))}sg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:I.version});function sn(){return sn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sn.apply(this,arguments)}function jw(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}jw.debounce=jw;var Uj=jw;const uI=Bc(Uj);function kj(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=I.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=I.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=I.useRef(!1);I.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,v]=I.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:S,top:A,width:b,height:M,bottom:C,right:B,x:T,y:P}=l.current.element.getBoundingClientRect(),N={left:S,top:A,width:b,height:M,bottom:C,right:B,x:T,y:P};l.current.element instanceof HTMLElement&&i&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!Vj(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[x,u?uI(x,u):x,c?uI(x,c):x]},[a,i,c,u]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(y(),l.current.element=x,l.current.scrollContainers=vU(x),_())};return Hj(v,!!t),zj(m),I.useEffect(()=>{y(),_()},[t,v,m]),I.useEffect(()=>y,[]),[g,o,p]}function zj(n){I.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Hj(n,e){I.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function vU(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...vU(n.parentElement)]}const Gj=["x","y","top","bottom","left","right","width","height"],Vj=(n,e)=>Gj.every(t=>n[t]===e[t]);var Wj=Object.defineProperty,$j=Object.defineProperties,Xj=Object.getOwnPropertyDescriptors,fI=Object.getOwnPropertySymbols,jj=Object.prototype.hasOwnProperty,Yj=Object.prototype.propertyIsEnumerable,dI=(n,e,t)=>e in n?Wj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hI=(n,e)=>{for(var t in e||(e={}))jj.call(e,t)&&dI(n,t,e[t]);if(fI)for(var t of fI(e))Yj.call(e,t)&&dI(n,t,e[t]);return n},Jj=(n,e)=>$j(n,Xj(e));function yU(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=yU(r,e,t);if(i)return i;r=e?null:r.sibling}}function _U(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const GT=_U(I.createContext(null));class xU extends I.Component{render(){return I.createElement(GT.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:pI,ReactCurrentDispatcher:mI}=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Kj(){const n=I.useContext(GT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=I.useId();return I.useMemo(()=>{for(const r of[pI==null?void 0:pI.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=yU(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function Zj(){var n,e;const t=Kj(),[r]=I.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==GT&&!r.has(s)&&r.set(s,(e=mI==null?void 0:mI.current)==null?void 0:e.readContext(_U(s))),i=i.return}return r}function Qj(){const n=Zj();return I.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>I.createElement(e,null,I.createElement(t.Provider,Jj(hI({},r),{value:n.get(t)}))),e=>I.createElement(xU,hI({},e))),[n])}const ME={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function qj(n){const{handlePointer:e}=wj(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(ME).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=ME[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=ME[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const eY=I.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=qj,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:_,raycaster:g,camera:x,scene:S,onPointerMissed:A,onCreated:b,...M},C){I.useMemo(()=>Xx(sj),[]);const B=Qj(),[T,P]=kj({scroll:!0,debounce:{scroll:50,resize:0},...r}),N=I.useRef(null),z=I.useRef(null);I.useImperativeHandle(C,()=>N.current);const q=iU(A),[G,Y]=I.useState(!1),[ee,te]=I.useState(!1);if(G)throw G;if(ee)throw ee;const V=I.useRef(null);Dh(()=>{const U=N.current;P.width>0&&P.height>0&&U&&(V.current||(V.current=Lj(U)),V.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:_,raycaster:g,camera:x,scene:S,size:P,onPointerMissed:(...oe)=>q.current==null?void 0:q.current(...oe),onCreated:oe=>{oe.events.connect==null||oe.events.connect(a?gj(a)?a.current:a:z.current),l&&oe.setEvents({compute:(fe,ue)=>{const pe=fe[l+"X"],be=fe[l+"Y"];ue.pointer.set(pe/ue.size.width*2-1,-(be/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),b==null||b(oe)}}),V.current.render(I.createElement(B,null,I.createElement(sU,{set:te},I.createElement(I.Suspense,{fallback:I.createElement(vj,{set:Y})},e)))))}),I.useEffect(()=>{const U=N.current;if(U)return()=>gU(U)},[]);const K=a?"none":"auto";return I.createElement("div",sn({ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...i}},M),I.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},I.createElement("canvas",{ref:N,style:{display:"block"}},t)))}),tY=I.forwardRef(function(e,t){return I.createElement(xU,null,I.createElement(eY,sn({},e,{ref:t})))});function nY(n,e,t){return Math.max(e,Math.min(n,t))}const wi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function gI(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function vI(n,e,t,r=.15){return r===0?nY(n,e,t):n<e?-gI(e-n,t-e,r)+e:n>t?+gI(n-t,t-e,r)+t:n}function rY(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[vI(e,s,o,r),vI(t,a,l,i)]}function iY(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sY(n){var e=iY(n,"string");return typeof e=="symbol"?e:String(e)}function is(n,e,t){return e=sY(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function or(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yI(Object(t),!0).forEach(function(r){is(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const SU={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function _I(n){return n?n[0].toUpperCase()+n.slice(1):""}const oY=["enter","leave"];function aY(n=!1,e){return n&&!oY.includes(e)}function lY(n,e="",t=!1){const r=SU[n],i=r&&r[e]||e;return"on"+_I(n)+_I(i)+(aY(t,i)?"Capture":"")}const cY=["gotpointercapture","lostpointercapture"];function uY(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=cY.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function fY(n,e=""){const t=SU[n],r=t&&t[e]||e;return n+r}function jx(n){return"touches"in n}function EU(n){return jx(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function dY(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function hY(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function AU(n){return jx(n)?hY(n)[0]:n}function pY(n){return dY(n).map(e=>e.identifier)}function bE(n){const e=AU(n);return jx(n)?e.identifier:e.pointerId}function xI(n){const e=AU(n);return[e.clientX,e.clientY]}function mY(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function C_(n,...e){return typeof n=="function"?n(...e):n}function gY(){}function vY(...n){return n.length===0?gY:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function SI(n,e){return Object.assign({},e,n||{})}const yY=32;class _Y{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?C_(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,mY(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const M=t._delta.map(Math.abs);wi.addTo(t._distance,M)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:u,values:d}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[M,C]=d;p[0]=u[0]!==!1?M-u[0]:0,p[1]=u[1]!==!1?C-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=C_(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[y,_]=t.offset,[[g,x],[S,A]]=t._bounds;t.overflow=[y<g?-1:y>x?1:0,_<S?-1:_>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const b=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=rY(t._bounds,t.offset,b),t.delta=wi.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>yY)){t.delta=wi.sub(t.offset,m);const M=t.delta.map(Math.abs);wi.addTo(t.distance,M),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[M[0]/s,M[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(or(or(or({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function xY([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class SY extends _Y{constructor(...e){super(...e),is(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=wi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=wi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[EU(e)]:r.axisThreshold;t.axis=xY(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const EY=n=>n,EI=.15,wU={enabled(n=!0){return n},eventOptions(n,e,t){return or(or({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[EI,EI];case!1:return[0,0];default:return wi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return wi.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||EY},threshold(n){return wi.toVector(n,0)}},AY=0,Ng=or(or({},wU),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=AY){return n},bounds(n={}){if(typeof n=="function")return s=>Ng.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),AI={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class wY extends SY{constructor(...e){super(...e),is(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=Ng.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=bE(e),r._pointerActive=!0,this.computeValues(xI(e)),this.computeInitial(),t.preventScrollAxis&&EU(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=bE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=xI(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=wi.sub(s,t._values),this.computeValues(s)),wi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=bE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[d,p]=r.swipe.velocity,[m,v]=r.swipe.distance,y=r.swipe.duration;if(t.elapsedTime<y){const _=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);_>d&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),g>p&&Math.abs(u)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,MY(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=AI[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,wi.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in AI&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function MY(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Ug=typeof window<"u"&&window.document&&window.document.createElement;function MU(){return Ug&&"ontouchstart"in window}function bY(){return MU()||Ug&&window.navigator.maxTouchPoints>1}function TY(){return Ug&&"onpointerdown"in window}function CY(){return Ug&&"exitPointerLock"in window.document}function RY(){try{return"constructor"in GestureEvent}catch{return!1}}const co={isBrowser:Ug,gesture:RY(),touch:MU(),touchscreen:bY(),pointer:TY(),pointerLock:CY()},PY=250,BY=180,IY=.5,DY=50,LY=250,OY=10,wI={mouse:0,touch:0,pen:8},FY=or(or({},Ng),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&co.pointerLock,co.touch&&t?"touch":this.pointerLock?"mouse":co.pointer&&!i?"pointer":co.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?PY:void 0,!(!co.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=wi.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=IY,distance:e=DY,duration:t=LY}={}){return{velocity:this.transform(wi.toVector(n)),distance:this.transform(wi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return BY;case!1:return 0;default:return n}},axisThreshold(n){return n?or(or({},wI),n):wI},keyboardDisplacement(n=OY){return n}});or(or({},wU),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!co.touch&&co.gesture)return"gesture";if(co.touch&&r)return"touch";if(co.touchscreen){if(co.pointer)return"pointer";if(co.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=SI(C_(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=SI(C_(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",wi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});or(or({},Ng),{},{mouseOnly:(n=!0)=>n});or(or({},Ng),{},{mouseOnly:(n=!0)=>n});const bU=new Map,Yw=new Map;function NY(n){bU.set(n.key,n.engine),Yw.set(n.key,n.resolver)}const UY={key:"drag",engine:wY,resolver:FY};function kY(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function zY(n,e){if(n==null)return{};var t=kY(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const HY={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=co.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},GY=["target","eventOptions","window","enabled","transform"];function ky(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=ky(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function VY(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=zY(r,GY);if(t.shared=ky({target:i,eventOptions:s,window:o,enabled:a,transform:l},HY),e){const u=Yw.get(e);t[e]=ky(or({shared:t.shared},c),u)}else for(const u in c){const d=Yw.get(u);d&&(t[u]=ky(or({shared:t.shared},c[u]),d))}return t}class TU{constructor(e,t){is(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=fY(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=or(or({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class WY{constructor(){is(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class $Y{constructor(e){is(this,"gestures",new Set),is(this,"_targetEventStore",new TU(this)),is(this,"gestureEventStores",{}),is(this,"gestureTimeoutStores",{}),is(this,"handlers",{}),is(this,"config",{}),is(this,"pointerIds",new Set),is(this,"touchIds",new Set),is(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),XY(this,e)}setEventIds(e){if(jx(e))return this.touchIds=new Set(pY(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=VY(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=MI(r,a.eventOptions,!!i);if(a.enabled){const c=bU.get(o);new c(this,e,o).bind(l)}}const s=MI(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](or(or({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=vY(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=uY(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function nd(n,e){n.gestures.add(e),n.gestureEventStores[e]=new TU(n,e),n.gestureTimeoutStores[e]=new WY}function XY(n,e){e.drag&&nd(n,"drag"),e.wheel&&nd(n,"wheel"),e.scroll&&nd(n,"scroll"),e.move&&nd(n,"move"),e.pinch&&nd(n,"pinch"),e.hover&&nd(n,"hover")}const MI=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:lY(r,i,u);t&&d&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function jY(n,e={},t,r){const i=ie.useMemo(()=>new $Y(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),ie.useEffect(i.effect.bind(i)),ie.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function YY(n,e){return NY(UY),jY({drag:n},e||{},"drag")}const JY=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=p=>{const m=o(p);if(!u(d,m)){const v=d;a(d=m,v)}},l!=null&&l.fireImmediately&&a(d,d)}return i(c)},n(e,t,r)};let Bp;function KY(){var n;if(Bp!==void 0)return Bp;try{let e;const t=document.createElement("canvas");return Bp=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),Bp}catch{return Bp=!1}}function bI(n,e){if(e===NF)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===w_||e===qb){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===w_)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const ZY=parseInt(Ca.replace(/\D+/g,""));var ho=Uint8Array,ql=Uint16Array,Jw=Uint32Array,CU=new ho([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),RU=new ho([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),QY=new ho([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PU=function(n,e){for(var t=new ql(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Jw(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},BU=PU(CU,2),IU=BU[0],qY=BU[1];IU[28]=258,qY[258]=28;var eJ=PU(RU,0),tJ=eJ[0],Kw=new ql(32768);for(var Gn=0;Gn<32768;++Gn){var kl=(Gn&43690)>>>1|(Gn&21845)<<1;kl=(kl&52428)>>>2|(kl&13107)<<2,kl=(kl&61680)>>>4|(kl&3855)<<4,Kw[Gn]=((kl&65280)>>>8|(kl&255)<<8)>>>1}var hm=function(n,e,t){for(var r=n.length,i=0,s=new ql(e);i<r;++i)++s[n[i]-1];var o=new ql(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new ql(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=o[n[i]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)a[Kw[d]>>>l]=c}else for(a=new ql(r),i=0;i<r;++i)n[i]&&(a[i]=Kw[o[n[i]-1]++]>>>15-n[i]);return a},kg=new ho(288);for(var Gn=0;Gn<144;++Gn)kg[Gn]=8;for(var Gn=144;Gn<256;++Gn)kg[Gn]=9;for(var Gn=256;Gn<280;++Gn)kg[Gn]=7;for(var Gn=280;Gn<288;++Gn)kg[Gn]=8;var DU=new ho(32);for(var Gn=0;Gn<32;++Gn)DU[Gn]=5;var nJ=hm(kg,9,1),rJ=hm(DU,5,1),TE=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Bo=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},CE=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},iJ=function(n){return(n/8|0)+(n&7&&1)},sJ=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof ql?ql:n instanceof Jw?Jw:ho)(t-e);return r.set(n.subarray(e,t)),r},oJ=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new ho(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new ho(r*3));var o=function(Ae){var Le=e.length;if(Ae>Le){var qe=new ho(Math.max(Le*2,Ae));qe.set(e),e=qe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,p=t.m,m=t.n,v=r*8;do{if(!u){t.f=a=Bo(n,l,1);var y=Bo(n,l+1,3);if(l+=3,y)if(y==1)u=nJ,d=rJ,p=9,m=5;else if(y==2){var S=Bo(n,l,31)+257,A=Bo(n,l+10,15)+4,b=S+Bo(n,l+5,31)+1;l+=14;for(var M=new ho(b),C=new ho(19),B=0;B<A;++B)C[QY[B]]=Bo(n,l+B*3,7);l+=A*3;for(var T=TE(C),P=(1<<T)-1,N=hm(C,T,1),B=0;B<b;){var z=N[Bo(n,l,P)];l+=z&15;var _=z>>>4;if(_<16)M[B++]=_;else{var q=0,G=0;for(_==16?(G=3+Bo(n,l,3),l+=2,q=M[B-1]):_==17?(G=3+Bo(n,l,7),l+=3):_==18&&(G=11+Bo(n,l,127),l+=7);G--;)M[B++]=q}}var Y=M.subarray(0,S),ee=M.subarray(S);p=TE(Y),m=TE(ee),u=hm(Y,p,1),d=hm(ee,m,1)}else throw"invalid block type";else{var _=iJ(l)+4,g=n[_-4]|n[_-3]<<8,x=_+g;if(x>r){if(s)throw"unexpected EOF";break}i&&o(c+g),e.set(n.subarray(_,x),c),t.b=c+=g,t.p=l=x*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var te=(1<<p)-1,V=(1<<m)-1,K=l;;K=l){var q=u[CE(n,l)&te],U=q>>>4;if(l+=q&15,l>v){if(s)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(U<256)e[c++]=U;else if(U==256){K=l,u=null;break}else{var oe=U-254;if(U>264){var B=U-257,fe=CU[B];oe=Bo(n,l,(1<<fe)-1)+IU[B],l+=fe}var ue=d[CE(n,l)&V],pe=ue>>>4;if(!ue)throw"invalid distance";l+=ue&15;var ee=tJ[pe];if(pe>3){var fe=RU[pe];ee+=CE(n,l)&(1<<fe)-1,l+=fe}if(l>v){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var be=c+oe;c<be;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=be}}t.l=u,t.p=K,t.b=c,u&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return c==e.length?e:sJ(e,0,c)},aJ=new ho(0),lJ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Kv(n,e){return oJ((lJ(n),n.subarray(2,-4)),e)}var cJ=typeof TextDecoder<"u"&&new TextDecoder,uJ=0;try{cJ.decode(aJ,{stream:!0}),uJ=1}catch{}const fJ=n=>n&&n.isCubeTexture;class dJ extends Jn{constructor(e,t){var r,i;const s=fJ(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),d=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Ca.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new Lg(1,16),g=new _r({uniforms:y,fragmentShader:v,vertexShader:m,side:Si});super(_,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function LU(n,e,t={}){const r=new W,i=new vr,s=new W,o=new Tt,a=new Tt,l=new Tt;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const c=e.isObject3D?e.skeleton.bones:R_(e),u=n.isObject3D?n.skeleton.bones:R_(n);let d,p,m,v,y;if(n.isObject3D?n.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){y=[];for(let _=0;_<u.length;_++)y.push(u[_].position.clone())}if(t.preserveMatrix){n.updateMatrixWorld(),n.matrixWorld.identity();for(let _=0;_<n.children.length;++_)n.children[_].updateMatrixWorld(!0)}if(t.offsets){d=[];for(let _=0;_<u.length;++_)p=u[_],m=t.names[p.name]||p.name,t.offsets[m]&&(p.matrix.multiply(t.offsets[m]),p.matrix.decompose(p.position,p.quaternion,p.scale),p.updateMatrixWorld()),d.push(p.matrixWorld.clone())}for(let _=0;_<u.length;++_){if(p=u[_],m=t.names[p.name]||p.name,v=OU(m,c),l.copy(p.matrixWorld),v){if(v.updateMatrixWorld(),t.useTargetMatrix?a.copy(v.matrixWorld):(a.copy(n.matrixWorld).invert(),a.multiply(v.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(i.setFromRotationMatrix(a)),n.isObject3D){const g=u.indexOf(p),x=d?d[g]:o.copy(n.skeleton.boneInverses[g]).invert();l.multiply(x)}l.copyPosition(a)}p.parent&&p.parent.isBone?(p.matrix.copy(p.parent.matrixWorld).invert(),p.matrix.multiply(l)):p.matrix.copy(l),t.preserveHipPosition&&m===t.hip&&p.matrix.setPosition(r.set(0,p.position.y,0)),p.matrix.decompose(p.position,p.quaternion,p.scale),p.updateMatrixWorld()}if(t.preservePosition)for(let _=0;_<u.length;++_)p=u[_],m=t.names[p.name]||p.name,m!==t.hip&&p.position.copy(y[_]);t.preserveMatrix&&n.updateMatrixWorld(!0)}function hJ(n,e,t,r={}){r.useFirstFramePosition=r.useFirstFramePosition!==void 0?r.useFirstFramePosition:!1,r.fps=r.fps!==void 0?r.fps:30,r.names=r.names||[],e.isObject3D||(e=mJ(e));const i=Math.round(t.duration*(r.fps/1e3)*1e3),s=1/r.fps,o=[],a=new jN(e),l=R_(n.skeleton),c=[];let u,d,p,m,v;a.clipAction(t).play(),a.update(0),e.updateMatrixWorld();for(let y=0;y<i;++y){const _=y*s;LU(n,e,r);for(let g=0;g<l.length;++g)v=r.names[l[g].name]||l[g].name,p=OU(v,e.skeleton),p&&(d=l[g],m=c[g]=c[g]||{bone:d},r.hip===v&&(m.pos||(m.pos={times:new Float32Array(i),values:new Float32Array(i*3)}),r.useFirstFramePosition&&(y===0&&(u=d.position.clone()),d.position.sub(u)),m.pos.times[y]=_,d.position.toArray(m.pos.values,y*3)),m.quat||(m.quat={times:new Float32Array(i),values:new Float32Array(i*4)}),m.quat.times[y]=_,d.quaternion.toArray(m.quat.values,y*4));a.update(s),e.updateMatrixWorld()}for(let y=0;y<c.length;++y)m=c[y],m&&(m.pos&&o.push(new ef(".bones["+m.bone.name+"].position",m.pos.times,m.pos.values)),o.push(new hl(".bones["+m.bone.name+"].quaternion",m.quat.times,m.quat.values)));return a.uncacheAction(t),new tf(t.name,-1,o)}function pJ(n){const e=new Map,t=new Map,r=n.clone();return FU(n,r,function(i,s){e.set(s,i),t.set(i,s)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const s=i,o=e.get(i),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),r}function OU(n,e){for(let t=0,r=R_(e);t<r.length;t++)if(n===r[t].name)return r[t]}function R_(n){return Array.isArray(n)?n:n.bones}function mJ(n){const e=new YN(n.bones[0]);return e.skeleton=n,e}function FU(n,e,t){t(n,e);for(let r=0;r<n.children.length;r++)FU(n.children[r],e.children[r],t)}const gJ={retarget:LU,retargetClip:hJ,clone:pJ};var vJ=Object.defineProperty,yJ=(n,e,t)=>e in n?vJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ut=(n,e,t)=>(yJ(n,typeof e!="symbol"?e+"":e,t),t);const Zv=new hf,TI=new ja,_J=Math.cos(70*(Math.PI/180)),CI=(n,e)=>(n%e+e)%e;let xJ=class extends $s{constructor(e,t){super(),Ut(this,"object"),Ut(this,"domElement"),Ut(this,"enabled",!0),Ut(this,"target",new W),Ut(this,"minDistance",0),Ut(this,"maxDistance",1/0),Ut(this,"minZoom",0),Ut(this,"maxZoom",1/0),Ut(this,"minPolarAngle",0),Ut(this,"maxPolarAngle",Math.PI),Ut(this,"minAzimuthAngle",-1/0),Ut(this,"maxAzimuthAngle",1/0),Ut(this,"enableDamping",!1),Ut(this,"dampingFactor",.05),Ut(this,"enableZoom",!0),Ut(this,"zoomSpeed",1),Ut(this,"enableRotate",!0),Ut(this,"rotateSpeed",1),Ut(this,"enablePan",!0),Ut(this,"panSpeed",1),Ut(this,"screenSpacePanning",!0),Ut(this,"keyPanSpeed",7),Ut(this,"zoomToCursor",!1),Ut(this,"autoRotate",!1),Ut(this,"autoRotateSpeed",2),Ut(this,"reverseOrbit",!1),Ut(this,"reverseHorizontalOrbit",!1),Ut(this,"reverseVerticalOrbit",!1),Ut(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ut(this,"mouseButtons",{LEFT:uu.ROTATE,MIDDLE:uu.DOLLY,RIGHT:uu.PAN}),Ut(this,"touches",{ONE:fu.ROTATE,TWO:fu.DOLLY_PAN}),Ut(this,"target0"),Ut(this,"position0"),Ut(this,"zoom0"),Ut(this,"_domElementKeyEvents",null),Ut(this,"getPolarAngle"),Ut(this,"getAzimuthalAngle"),Ut(this,"setPolarAngle"),Ut(this,"setAzimuthalAngle"),Ut(this,"getDistance"),Ut(this,"listenToKeyEvents"),Ut(this,"stopListenToKeyEvents"),Ut(this,"saveState"),Ut(this,"reset"),Ut(this,"update"),Ut(this,"connect"),Ut(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ne=>{let me=CI(ne,2*Math.PI),Ie=u.phi;Ie<0&&(Ie+=2*Math.PI),me<0&&(me+=2*Math.PI);let Me=Math.abs(me-Ie);2*Math.PI-Me<Me&&(me<Ie?me+=2*Math.PI:Ie+=2*Math.PI),d.phi=me-Ie,r.update()},this.setAzimuthalAngle=ne=>{let me=CI(ne,2*Math.PI),Ie=u.theta;Ie<0&&(Ie+=2*Math.PI),me<0&&(me+=2*Math.PI);let Me=Math.abs(me-Ie);2*Math.PI-Me<Me&&(me<Ie?me+=2*Math.PI:Ie+=2*Math.PI),d.theta=me-Ie,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ne=>{ne.addEventListener("keydown",Ue),this._domElementKeyEvents=ne},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ue),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const ne=new W,me=new W(0,1,0),Ie=new vr().setFromUnitVectors(e.up,me),Me=Ie.clone().invert(),Re=new W,se=new vr,Xe=2*Math.PI;return function(){const Te=r.object.position;Ie.setFromUnitVectors(e.up,me),Me.copy(Ie).invert(),ne.copy(Te).sub(r.target),ne.applyQuaternion(Ie),u.setFromVector3(ne),r.autoRotate&&l===a.NONE&&G(z()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let Ge=r.minAzimuthAngle,ft=r.maxAzimuthAngle;isFinite(Ge)&&isFinite(ft)&&(Ge<-Math.PI?Ge+=Xe:Ge>Math.PI&&(Ge-=Xe),ft<-Math.PI?ft+=Xe:ft>Math.PI&&(ft-=Xe),Ge<=ft?u.theta=Math.max(Ge,Math.min(ft,u.theta)):u.theta=u.theta>(Ge+ft)/2?Math.max(Ge,u.theta):Math.min(ft,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&T||r.object.isOrthographicCamera?u.radius=fe(u.radius):u.radius=fe(u.radius*p),ne.setFromSpherical(u),ne.applyQuaternion(Me),Te.copy(r.target).add(ne),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Qe=!1;if(r.zoomToCursor&&T){let rt=null;if(r.object instanceof Yn&&r.object.isPerspectiveCamera){const At=ne.length();rt=fe(At*p);const Ct=At-rt;r.object.position.addScaledVector(C,Ct),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const At=new W(B.x,B.y,0);At.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Qe=!0;const Ct=new W(B.x,B.y,0);Ct.unproject(r.object),r.object.position.sub(Ct).add(At),r.object.updateMatrixWorld(),rt=ne.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;rt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(rt).add(r.object.position):(Zv.origin.copy(r.object.position),Zv.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Zv.direction))<_J?e.lookAt(r.target):(TI.setFromNormalAndCoplanarPoint(r.object.up,r.target),Zv.intersectPlane(TI,r.target))))}else r.object instanceof ua&&r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Qe=!0);return p=1,T=!1,Qe||Re.distanceToSquared(r.object.position)>c||8*(1-se.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Re.copy(r.object.position),se.copy(r.object.quaternion),Qe=!1,!0):!1}})(),this.connect=ne=>{ne===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=ne,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",$e),r.domElement.addEventListener("pointerdown",ut),r.domElement.addEventListener("pointercancel",F),r.domElement.addEventListener("wheel",De)},this.dispose=()=>{var ne,me,Ie,Me,Re,se;(ne=r.domElement)==null||ne.removeEventListener("contextmenu",$e),(me=r.domElement)==null||me.removeEventListener("pointerdown",ut),(Ie=r.domElement)==null||Ie.removeEventListener("pointercancel",F),(Me=r.domElement)==null||Me.removeEventListener("wheel",De),(Re=r.domElement)==null||Re.ownerDocument.removeEventListener("pointermove",$t),(se=r.domElement)==null||se.ownerDocument.removeEventListener("pointerup",H),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ue)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new Vw,d=new Vw;let p=1;const m=new W,v=new Se,y=new Se,_=new Se,g=new Se,x=new Se,S=new Se,A=new Se,b=new Se,M=new Se,C=new W,B=new Se;let T=!1;const P=[],N={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function q(){return Math.pow(.95,r.zoomSpeed)}function G(ne){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=ne:d.theta-=ne}function Y(ne){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=ne:d.phi-=ne}const ee=(()=>{const ne=new W;return function(Ie,Me){ne.setFromMatrixColumn(Me,0),ne.multiplyScalar(-Ie),m.add(ne)}})(),te=(()=>{const ne=new W;return function(Ie,Me){r.screenSpacePanning===!0?ne.setFromMatrixColumn(Me,1):(ne.setFromMatrixColumn(Me,0),ne.crossVectors(r.object.up,ne)),ne.multiplyScalar(Ie),m.add(ne)}})(),V=(()=>{const ne=new W;return function(Ie,Me){const Re=r.domElement;if(Re&&r.object instanceof Yn&&r.object.isPerspectiveCamera){const se=r.object.position;ne.copy(se).sub(r.target);let Xe=ne.length();Xe*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*Ie*Xe/Re.clientHeight,r.object.matrix),te(2*Me*Xe/Re.clientHeight,r.object.matrix)}else Re&&r.object instanceof ua&&r.object.isOrthographicCamera?(ee(Ie*(r.object.right-r.object.left)/r.object.zoom/Re.clientWidth,r.object.matrix),te(Me*(r.object.top-r.object.bottom)/r.object.zoom/Re.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function K(ne){r.object instanceof Yn&&r.object.isPerspectiveCamera||r.object instanceof ua&&r.object.isOrthographicCamera?p/=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(ne){r.object instanceof Yn&&r.object.isPerspectiveCamera||r.object instanceof ua&&r.object.isOrthographicCamera?p*=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function oe(ne){if(!r.zoomToCursor||!r.domElement)return;T=!0;const me=r.domElement.getBoundingClientRect(),Ie=ne.clientX-me.left,Me=ne.clientY-me.top,Re=me.width,se=me.height;B.x=Ie/Re*2-1,B.y=-(Me/se)*2+1,C.set(B.x,B.y,1).unproject(r.object).sub(r.object.position).normalize()}function fe(ne){return Math.max(r.minDistance,Math.min(r.maxDistance,ne))}function ue(ne){v.set(ne.clientX,ne.clientY)}function pe(ne){oe(ne),A.set(ne.clientX,ne.clientY)}function be(ne){g.set(ne.clientX,ne.clientY)}function Ae(ne){y.set(ne.clientX,ne.clientY),_.subVectors(y,v).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(G(2*Math.PI*_.x/me.clientHeight),Y(2*Math.PI*_.y/me.clientHeight)),v.copy(y),r.update()}function Le(ne){b.set(ne.clientX,ne.clientY),M.subVectors(b,A),M.y>0?K(q()):M.y<0&&U(q()),A.copy(b),r.update()}function qe(ne){x.set(ne.clientX,ne.clientY),S.subVectors(x,g).multiplyScalar(r.panSpeed),V(S.x,S.y),g.copy(x),r.update()}function st(ne){oe(ne),ne.deltaY<0?U(q()):ne.deltaY>0&&K(q()),r.update()}function ot(ne){let me=!1;switch(ne.code){case r.keys.UP:V(0,r.keyPanSpeed),me=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),me=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),me=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),me=!0;break}me&&(ne.preventDefault(),r.update())}function Ye(){if(P.length==1)v.set(P[0].pageX,P[0].pageY);else{const ne=.5*(P[0].pageX+P[1].pageX),me=.5*(P[0].pageY+P[1].pageY);v.set(ne,me)}}function Z(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const ne=.5*(P[0].pageX+P[1].pageX),me=.5*(P[0].pageY+P[1].pageY);g.set(ne,me)}}function xe(){const ne=P[0].pageX-P[1].pageX,me=P[0].pageY-P[1].pageY,Ie=Math.sqrt(ne*ne+me*me);A.set(0,Ie)}function ve(){r.enableZoom&&xe(),r.enablePan&&Z()}function Fe(){r.enableZoom&&xe(),r.enableRotate&&Ye()}function Ce(ne){if(P.length==1)y.set(ne.pageX,ne.pageY);else{const Ie=Ot(ne),Me=.5*(ne.pageX+Ie.x),Re=.5*(ne.pageY+Ie.y);y.set(Me,Re)}_.subVectors(y,v).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(G(2*Math.PI*_.x/me.clientHeight),Y(2*Math.PI*_.y/me.clientHeight)),v.copy(y)}function ae(ne){if(P.length==1)x.set(ne.pageX,ne.pageY);else{const me=Ot(ne),Ie=.5*(ne.pageX+me.x),Me=.5*(ne.pageY+me.y);x.set(Ie,Me)}S.subVectors(x,g).multiplyScalar(r.panSpeed),V(S.x,S.y),g.copy(x)}function Ve(ne){const me=Ot(ne),Ie=ne.pageX-me.x,Me=ne.pageY-me.y,Re=Math.sqrt(Ie*Ie+Me*Me);b.set(0,Re),M.set(0,Math.pow(b.y/A.y,r.zoomSpeed)),K(M.y),A.copy(b)}function et(ne){r.enableZoom&&Ve(ne),r.enablePan&&ae(ne)}function pt(ne){r.enableZoom&&Ve(ne),r.enableRotate&&Ce(ne)}function ut(ne){var me,Ie;r.enabled!==!1&&(P.length===0&&((me=r.domElement)==null||me.ownerDocument.addEventListener("pointermove",$t),(Ie=r.domElement)==null||Ie.ownerDocument.addEventListener("pointerup",H)),dt(ne),ne.pointerType==="touch"?nt(ne):le(ne))}function $t(ne){r.enabled!==!1&&(ne.pointerType==="touch"?He(ne):Pe(ne))}function H(ne){var me,Ie,Me;Rt(ne),P.length===0&&((me=r.domElement)==null||me.releasePointerCapture(ne.pointerId),(Ie=r.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",$t),(Me=r.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",H)),r.dispatchEvent(o),l=a.NONE}function F(ne){Rt(ne)}function le(ne){let me;switch(ne.button){case 0:me=r.mouseButtons.LEFT;break;case 1:me=r.mouseButtons.MIDDLE;break;case 2:me=r.mouseButtons.RIGHT;break;default:me=-1}switch(me){case uu.DOLLY:if(r.enableZoom===!1)return;pe(ne),l=a.DOLLY;break;case uu.ROTATE:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(r.enablePan===!1)return;be(ne),l=a.PAN}else{if(r.enableRotate===!1)return;ue(ne),l=a.ROTATE}break;case uu.PAN:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(r.enableRotate===!1)return;ue(ne),l=a.ROTATE}else{if(r.enablePan===!1)return;be(ne),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Pe(ne){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ae(ne);break;case a.DOLLY:if(r.enableZoom===!1)return;Le(ne);break;case a.PAN:if(r.enablePan===!1)return;qe(ne);break}}function De(ne){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ne.preventDefault(),r.dispatchEvent(s),st(ne),r.dispatchEvent(o))}function Ue(ne){r.enabled===!1||r.enablePan===!1||ot(ne)}function nt(ne){switch(Oe(ne),P.length){case 1:switch(r.touches.ONE){case fu.ROTATE:if(r.enableRotate===!1)return;Ye(),l=a.TOUCH_ROTATE;break;case fu.PAN:if(r.enablePan===!1)return;Z(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case fu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(),l=a.TOUCH_DOLLY_PAN;break;case fu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Fe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function He(ne){switch(Oe(ne),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ce(ne),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;ae(ne),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;et(ne),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;pt(ne),r.update();break;default:l=a.NONE}}function $e(ne){r.enabled!==!1&&ne.preventDefault()}function dt(ne){P.push(ne)}function Rt(ne){delete N[ne.pointerId];for(let me=0;me<P.length;me++)if(P[me].pointerId==ne.pointerId){P.splice(me,1);return}}function Oe(ne){let me=N[ne.pointerId];me===void 0&&(me=new Se,N[ne.pointerId]=me),me.set(ne.pageX,ne.pageY)}function Ot(ne){const me=ne.pointerId===P[0].pointerId?P[1]:P[0];return N[me.pointerId]}t!==void 0&&this.connect(t),this.update()}};class VT extends Bi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new MJ(t)}),this.register(function(t){return new DJ(t)}),this.register(function(t){return new LJ(t)}),this.register(function(t){return new OJ(t)}),this.register(function(t){return new TJ(t)}),this.register(function(t){return new CJ(t)}),this.register(function(t){return new RJ(t)}),this.register(function(t){return new PJ(t)}),this.register(function(t){return new wJ(t)}),this.register(function(t){return new BJ(t)}),this.register(function(t){return new bJ(t)}),this.register(function(t){return new IJ(t)}),this.register(function(t){return new EJ(t)}),this.register(function(t){return new FJ(t)}),this.register(function(t){return new NJ(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ya.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Hs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ya.decodeText(new Uint8Array(e.slice(0,4)))===NU){try{o[cn.KHR_BINARY_GLTF]=new UJ(e)}catch(u){i&&i(u);return}s=JSON.parse(o[cn.KHR_BINARY_GLTF].content)}else s=JSON.parse(ya.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new ZJ(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case cn.KHR_MATERIALS_UNLIT:o[u]=new AJ;break;case cn.KHR_DRACO_MESH_COMPRESSION:o[u]=new kJ(s,this.dracoLoader);break;case cn.KHR_TEXTURE_TRANSFORM:o[u]=new zJ;break;case cn.KHR_MESH_QUANTIZATION:o[u]=new HJ;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function SJ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const cn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class EJ{constructor(e){this.parser=e,this.name=cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new tt(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new IT(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new BT(u),c.distance=d;break;case"spot":c=new PT(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,jl(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class AJ{constructor(){this.name=cn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ls}extendParams(e,t,r){const i=[];e.color=new tt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class wJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class MJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Se(a,a)}return Promise.all(s)}}class bJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class TJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new tt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class CJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class RJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new tt(a[0],a[1],a[2]),Promise.all(s)}}class PJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class BJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new tt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class IJ{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ra}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class DJ{constructor(e){this.parser=e,this.name=cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class LJ{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class OJ{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class FJ{constructor(e){this.name=cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(m),u,d,p,i.mode,i.filter),m})})}else return null}}class NJ{constructor(e){this.name=cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==so.TRIANGLES&&c.mode!==so.TRIANGLE_STRIP&&c.mode!==so.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const v of d){const y=new Tt,_=new W,g=new vr,x=new W(1,1,1),S=new hT(v.geometry,v.material,p);for(let A=0;A<p;A++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,A),l.SCALE&&x.fromBufferAttribute(l.SCALE,A),S.setMatrixAt(A,y.compose(_,g,x));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&v.geometry.setAttribute(A,l[A]);hn.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const NU="glTF",Ip=12,RI={JSON:1313821514,BIN:5130562};class UJ{constructor(e){this.name=cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ip);if(this.header={magic:ya.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==NU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ip,i=new DataView(e,Ip);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===RI.JSON){const l=new Uint8Array(e,Ip+s,o);this.content=ya.decodeText(l)}else if(a===RI.BIN){const l=Ip+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kJ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=Zw[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=Zw[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=Vd[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){i.decodeDracoFile(u,function(p){for(const m in p.attributes){const v=p.attributes[m],y=l[m];y!==void 0&&(v.normalized=y)}d(p)},a,c)})})}}class zJ{constructor(){this.name=cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class HJ{constructor(){this.name=cn.KHR_MESH_QUANTIZATION}}class UU extends Ih{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,d=(r-t)/u,p=d*d,m=p*d,v=e*c,y=v-c,_=-2*m+3*p,g=m-p,x=1-_,S=g-p+d;for(let A=0;A!==a;A++){const b=o[y+A+a],M=o[y+A+l]*u,C=o[v+A+a],B=o[v+A]*u;s[A]=x*b+S*M+_*C+g*B}return s}}const GJ=new vr;class VJ extends UU{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return GJ.fromArray(s).normalize().toArray(s),s}}const so={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Vd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PI={9728:Cn,9729:En,9984:jm,9985:_x,9986:zd,9987:Aa},BI={33071:ii,33648:oh,10497:Sc},RE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ZY>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},WJ={CUBICSPLINE:void 0,LINEAR:Ku,STEP:ah},PE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function $J(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new qu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vo})),n.DefaultMaterial}function su(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function jl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function XJ(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],p=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function jJ(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function YJ(n){let e;const t=n.extensions&&n.extensions[cn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+BE(t.attributes):e=n.indices+":"+BE(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+BE(n.targets[r]);return e}function BE(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function Qw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function JJ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const KJ=new Tt;class ZJ{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new SJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new ON(this.options.manager):this.textureLoader=new VN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Hs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};su(s,a,i),jl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[cn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(ya.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=RE[i.type],a=Vd[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new en(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=RE[i.type],c=Vd[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let y,_;if(m&&m!==d){const g=Math.floor(p/m),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let S=t.cache.get(x);S||(y=new c(a,g*m,i.count*m/u),S=new Bg(y,m/u),t.cache.add(x,S)),_=new Ac(S,l,p%m/u,v)}else a===null?y=new c(i.count*l):y=new c(a,p,i.count*l),_=new en(y,l,v);if(i.sparse!==void 0){const g=RE.SCALAR,x=Vd[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,b=new x(o[1],S,i.sparse.count*g),M=new c(o[2],A,i.sparse.count*l);a!==null&&(_=new en(_.array.slice(),_.itemSize,_.normalized));for(let C=0,B=b.length;C<B;C++){const T=b[C];if(_.setX(T,M[C*l]),l>=2&&_.setY(T,M[C*l+1]),l>=3&&_.setZ(T,M[C*l+2]),l>=4&&_.setW(T,M[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=PI[p.magFilter]||En,u.minFilter=PI[p.minFilter]||Aa,u.wrapS=BI[p.wrapS]||Sc,u.wrapT=BI[p.wrapT]||Sc,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(y){const _=new In(y);_.needsUpdate=!0,p(_)}),t.load(ya.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||JJ(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[cn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[cn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[cn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Px,yr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Pi,yr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return qu}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[cn.KHR_MATERIALS_UNLIT]){const d=i[cn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new tt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,3001)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Si);const u=s.alphaMode||PE.OPAQUE;if(u===PE.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===PE.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ls&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Se(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==Ls&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ls&&(a.emissive=new tt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Ls&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),jl(d,s),t.associations.set(d,{materials:e}),s.extensions&&su(i,d,s),d})}createUniqueName(e){const t=dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return II(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=YJ(c),d=i[u];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[cn.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=II(new zt,c,t),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?$J(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let m=0,v=u.length;m<v;m++){const y=u[m],_=o[m];let g;const x=c[m];if(_.mode===so.TRIANGLES||_.mode===so.TRIANGLE_STRIP||_.mode===so.TRIANGLE_FAN||_.mode===void 0)g=s.isSkinnedMesh===!0?new dT(y,x):new Jn(y,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===so.TRIANGLE_STRIP?g.geometry=bI(g.geometry,qb):_.mode===so.TRIANGLE_FAN&&(g.geometry=bI(g.geometry,w_));else if(_.mode===so.LINES)g=new $o(y,x);else if(_.mode===so.LINE_STRIP)g=new dl(y,x);else if(_.mode===so.LINE_LOOP)g=new pT(y,x);else if(_.mode===so.POINTS)g=new mT(y,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&jJ(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),jl(g,s),_.extensions&&su(i,g,_),t.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&su(i,d[0],s),d[0];const p=new tl;s.extensions&&su(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Yn(Hd.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new ua(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),jl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const p=new Tt;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Ig(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,d=r.channels.length;u<d;u++){const p=r.channels[u],m=r.samplers[p.sampler],v=p.target,y=v.node,_=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",y)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const d=u[0],p=u[1],m=u[2],v=u[3],y=u[4],_=[];for(let g=0,x=d.length;g<x;g++){const S=d[g],A=p[g],b=m[g],M=v[g],C=y[g];if(S===void 0)continue;S.updateMatrix();let B;switch(zl[C.path]){case zl.weights:B=dh;break;case zl.rotation:B=hl;break;case zl.position:case zl.scale:default:B=ef;break}const T=S.name?S.name:S.uuid,P=M.interpolation!==void 0?WJ[M.interpolation]:Ku,N=[];zl[C.path]===zl.weights?S.traverse(function(q){q.morphTargetInfluences&&N.push(q.name?q.name:q.uuid)}):N.push(T);let z=b.array;if(b.normalized){const q=Qw(z.constructor),G=new Float32Array(z.length);for(let Y=0,ee=z.length;Y<ee;Y++)G[Y]=z[Y]*q;z=G}for(let q=0,G=N.length;q<G;q++){const Y=new B(N[q]+"."+zl[C.path],A.array,z,P);M.interpolation==="CUBICSPLINE"&&(Y.createInterpolant=function(te){const V=this instanceof hl?VJ:UU;return new V(this.times,this.values,this.getValueSize()/3,te)},Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(Y)}}return new tf(i,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,KJ)});for(let m=0,v=d.length;m<v;m++)u.add(d[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Rx:c.length>1?u=new tl:c.length===1?u=c[0]:u=new hn,u!==c[0])for(let d=0,p=c.length;d<p;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),jl(u,s),s.extensions&&su(r,u,s),s.matrix!==void 0){const d=new Tt;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new tl;r.name&&(s.name=i.createUniqueName(r.name)),jl(s,r),r.extensions&&su(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof yr||p instanceof In)&&d.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=c(s),s})}}function QJ(n,e,t){const r=e.attributes,i=new qr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new W(l[0],l[1],l[2]),new W(c[0],c[1],c[2])),a.normalized){const u=Qw(Vd[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new W,l=new W;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const y=Qw(Vd[p.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new ei;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function II(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=Zw[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return jl(n,e),QJ(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?XJ(n,e.targets,t):n})}const qJ={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},eK={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class tK extends CT{constructor(e){super(e),this.type=si}parse(e){const a=function(S,A){switch(S){case 1:console.error("THREE.RGBELoader Read Error: "+(A||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(A||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(A||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(A||""))}return-1},d=`
`,p=function(S,A,b){A=A||1024;let C=S.pos,B=-1,T=0,P="",N=String.fromCharCode.apply(null,new Uint16Array(S.subarray(C,C+128)));for(;0>(B=N.indexOf(d))&&T<A&&C<S.byteLength;)P+=N,T+=N.length,C+=128,N+=String.fromCharCode.apply(null,new Uint16Array(S.subarray(C,C+128)));return-1<B?(b!==!1&&(S.pos+=T+B+1),P+N.slice(0,B)):!1},m=function(S){const A=/^#\?(\S+)/,b=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,T={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let P,N;if(S.pos>=S.byteLength||!(P=p(S)))return a(1,"no header found");if(!(N=P.match(A)))return a(3,"bad initial token");for(T.valid|=1,T.programtype=N[1],T.string+=P+`
`;P=p(S),P!==!1;){if(T.string+=P+`
`,P.charAt(0)==="#"){T.comments+=P+`
`;continue}if((N=P.match(b))&&(T.gamma=parseFloat(N[1])),(N=P.match(M))&&(T.exposure=parseFloat(N[1])),(N=P.match(C))&&(T.valid|=2,T.format=N[1]),(N=P.match(B))&&(T.valid|=4,T.height=parseInt(N[1],10),T.width=parseInt(N[2],10)),T.valid&2&&T.valid&4)break}return T.valid&2?T.valid&4?T:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(S,A,b){const M=A;if(M<8||M>32767||S[0]!==2||S[1]!==2||S[2]&128)return new Uint8Array(S);if(M!==(S[2]<<8|S[3]))return a(3,"wrong scanline width");const C=new Uint8Array(4*A*b);if(!C.length)return a(4,"unable to allocate buffer space");let B=0,T=0;const P=4*M,N=new Uint8Array(4),z=new Uint8Array(P);let q=b;for(;q>0&&T<S.byteLength;){if(T+4>S.byteLength)return a(1);if(N[0]=S[T++],N[1]=S[T++],N[2]=S[T++],N[3]=S[T++],N[0]!=2||N[1]!=2||(N[2]<<8|N[3])!=M)return a(3,"bad rgbe scanline format");let G=0,Y;for(;G<P&&T<S.byteLength;){Y=S[T++];const te=Y>128;if(te&&(Y-=128),Y===0||G+Y>P)return a(3,"bad scanline data");if(te){const V=S[T++];for(let K=0;K<Y;K++)z[G++]=V}else z.set(S.subarray(T,T+Y),G),G+=Y,T+=Y}const ee=M;for(let te=0;te<ee;te++){let V=0;C[B]=z[te+V],V+=M,C[B+1]=z[te+V],V+=M,C[B+2]=z[te+V],V+=M,C[B+3]=z[te+V],B+=4}q--}return C},y=function(S,A,b,M){const C=S[A+3],B=Math.pow(2,C-128)/255;b[M+0]=S[A+0]*B,b[M+1]=S[A+1]*B,b[M+2]=S[A+2]*B,b[M+3]=1},_=function(S,A,b,M){const C=S[A+3],B=Math.pow(2,C-128)/255;b[M+0]=wu.toHalfFloat(Math.min(S[A+0]*B,65504)),b[M+1]=wu.toHalfFloat(Math.min(S[A+1]*B,65504)),b[M+2]=wu.toHalfFloat(Math.min(S[A+2]*B,65504)),b[M+3]=wu.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const x=m(g);if(x!==-1){const S=x.width,A=x.height,b=v(g.subarray(g.pos),S,A);if(b!==-1){let M,C,B;switch(this.type){case Zr:B=b.length/4;const T=new Float32Array(B*4);for(let N=0;N<B;N++)y(b,N*4,T,N*4);M=T,C=Zr;break;case si:B=b.length/4;const P=new Uint16Array(B*4);for(let N=0;N<B;N++)_(b,N*4,P,N*4);M=P,C=si;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:S,height:A,data:M,header:x.string,gamma:x.gamma,exposure:x.exposure,type:C}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Zr:case si:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=En,o.magFilter=En,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const Dp="colorSpace"in new In;class nK extends CT{constructor(e){super(e),this.type=si}parse(e){const T=Math.pow(2.7182818,2.2);function P(O,k){for(var re=0,L=0;L<65536;++L)(L==0||O[L>>3]&1<<(L&7))&&(k[re++]=L);for(var $=re-1;re<65536;)k[re++]=0;return $}function N(O){for(var k=0;k<16384;k++)O[k]={},O[k].len=0,O[k].lit=0,O[k].p=null}const z={l:0,c:0,lc:0};function q(O,k,re,L,$){for(;re<O;)k=k<<8|Ot(L,$),re+=8;re-=O,z.l=k>>re&(1<<O)-1,z.c=k,z.lc=re}const G=new Array(59);function Y(O){for(var k=0;k<=58;++k)G[k]=0;for(var k=0;k<65537;++k)G[O[k]]+=1;for(var re=0,k=58;k>0;--k){var L=re+G[k]>>1;G[k]=re,re=L}for(var k=0;k<65537;++k){var $=O[k];$>0&&(O[k]=$|G[$]++<<6)}}function ee(O,k,re,L,$,X,Q){for(var J=re,he=0,_e=0;$<=X;$++){if(J.value-re.value>L)return!1;q(6,he,_e,O,J);var we=z.l;if(he=z.c,_e=z.lc,Q[$]=we,we==63){if(J.value-re.value>L)throw"Something wrong with hufUnpackEncTable";q(8,he,_e,O,J);var ye=z.l+6;if(he=z.c,_e=z.lc,$+ye>X+1)throw"Something wrong with hufUnpackEncTable";for(;ye--;)Q[$++]=0;$--}else if(we>=59){var ye=we-59+2;if($+ye>X+1)throw"Something wrong with hufUnpackEncTable";for(;ye--;)Q[$++]=0;$--}}Y(Q)}function te(O){return O&63}function V(O){return O>>6}function K(O,k,re,L){for(;k<=re;k++){var $=V(O[k]),X=te(O[k]);if($>>X)throw"Invalid table entry";if(X>14){var Q=L[$>>X-14];if(Q.len)throw"Invalid table entry";if(Q.lit++,Q.p){var J=Q.p;Q.p=new Array(Q.lit);for(var he=0;he<Q.lit-1;++he)Q.p[he]=J[he]}else Q.p=new Array(1);Q.p[Q.lit-1]=k}else if(X)for(var _e=0,he=1<<14-X;he>0;he--){var Q=L[($<<14-X)+_e];if(Q.len||Q.p)throw"Invalid table entry";Q.len=X,Q.lit=k,_e++}}return!0}const U={c:0,lc:0};function oe(O,k,re,L){O=O<<8|Ot(re,L),k+=8,U.c=O,U.lc=k}const fe={c:0,lc:0};function ue(O,k,re,L,$,X,Q,J,he,_e){if(O==k){L<8&&(oe(re,L,$,Q),re=U.c,L=U.lc),L-=8;var we=re>>L,we=new Uint8Array([we])[0];if(he.value+we>_e)return!1;for(var ye=J[he.value-1];we-- >0;)J[he.value++]=ye}else if(he.value<_e)J[he.value++]=O;else return!1;fe.c=re,fe.lc=L}function pe(O){return O&65535}function be(O){var k=pe(O);return k>32767?k-65536:k}const Ae={a:0,b:0};function Le(O,k){var re=be(O),L=be(k),$=L,X=re+($&1)+($>>1),Q=X,J=X-$;Ae.a=Q,Ae.b=J}function qe(O,k){var re=pe(O),L=pe(k),$=re-(L>>1)&65535,X=L+$-32768&65535;Ae.a=X,Ae.b=$}function st(O,k,re,L,$,X,Q){for(var J=Q<16384,he=re>$?$:re,_e=1,we;_e<=he;)_e<<=1;for(_e>>=1,we=_e,_e>>=1;_e>=1;){for(var ye=0,je=ye+X*($-we),Ne=X*_e,ze=X*we,ht=L*_e,St=L*we,xt,Dt,at,Ze;ye<=je;ye+=ze){for(var Kt=ye,Lt=ye+L*(re-we);Kt<=Lt;Kt+=St){var Nt=Kt+ht,wn=Kt+Ne,cr=wn+ht;J?(Le(O[Kt+k],O[wn+k]),xt=Ae.a,at=Ae.b,Le(O[Nt+k],O[cr+k]),Dt=Ae.a,Ze=Ae.b,Le(xt,Dt),O[Kt+k]=Ae.a,O[Nt+k]=Ae.b,Le(at,Ze),O[wn+k]=Ae.a,O[cr+k]=Ae.b):(qe(O[Kt+k],O[wn+k]),xt=Ae.a,at=Ae.b,qe(O[Nt+k],O[cr+k]),Dt=Ae.a,Ze=Ae.b,qe(xt,Dt),O[Kt+k]=Ae.a,O[Nt+k]=Ae.b,qe(at,Ze),O[wn+k]=Ae.a,O[cr+k]=Ae.b)}if(re&_e){var wn=Kt+Ne;J?Le(O[Kt+k],O[wn+k]):qe(O[Kt+k],O[wn+k]),xt=Ae.a,O[wn+k]=Ae.b,O[Kt+k]=xt}}if($&_e)for(var Kt=ye,Lt=ye+L*(re-we);Kt<=Lt;Kt+=St){var Nt=Kt+ht;J?Le(O[Kt+k],O[Nt+k]):qe(O[Kt+k],O[Nt+k]),xt=Ae.a,O[Nt+k]=Ae.b,O[Kt+k]=xt}we=_e,_e>>=1}return ye}function ot(O,k,re,L,$,X,Q,J,he,_e){for(var we=0,ye=0,je=J,Ne=Math.trunc($.value+(X+7)/8);$.value<Ne;)for(oe(we,ye,re,$),we=U.c,ye=U.lc;ye>=14;){var ze=we>>ye-14&16383,ht=k[ze];if(ht.len)ye-=ht.len,ue(ht.lit,Q,we,ye,re,L,$,he,_e,je),we=fe.c,ye=fe.lc;else{if(!ht.p)throw"hufDecode issues";var St;for(St=0;St<ht.lit;St++){for(var xt=te(O[ht.p[St]]);ye<xt&&$.value<Ne;)oe(we,ye,re,$),we=U.c,ye=U.lc;if(ye>=xt&&V(O[ht.p[St]])==(we>>ye-xt&(1<<xt)-1)){ye-=xt,ue(ht.p[St],Q,we,ye,re,L,$,he,_e,je),we=fe.c,ye=fe.lc;break}}if(St==ht.lit)throw"hufDecode issues"}}var Dt=8-X&7;for(we>>=Dt,ye-=Dt;ye>0;){var ht=k[we<<14-ye&16383];if(ht.len)ye-=ht.len,ue(ht.lit,Q,we,ye,re,L,$,he,_e,je),we=fe.c,ye=fe.lc;else throw"hufDecode issues"}return!0}function Ye(O,k,re,L,$,X){var Q={value:0},J=re.value,he=Oe(k,re),_e=Oe(k,re);re.value+=4;var we=Oe(k,re);if(re.value+=4,he<0||he>=65537||_e<0||_e>=65537)throw"Something wrong with HUF_ENCSIZE";var ye=new Array(65537),je=new Array(16384);N(je);var Ne=L-(re.value-J);if(ee(O,k,re,Ne,he,_e,ye),we>8*(L-(re.value-J)))throw"Something wrong with hufUncompress";K(ye,he,_e,je),ot(ye,je,O,k,re,we,_e,X,$,Q)}function Z(O,k,re){for(var L=0;L<re;++L)k[L]=O[k[L]]}function xe(O){for(var k=1;k<O.length;k++){var re=O[k-1]+O[k]-128;O[k]=re}}function ve(O,k){for(var re=0,L=Math.floor((O.length+1)/2),$=0,X=O.length-1;!($>X||(k[$++]=O[re++],$>X));)k[$++]=O[L++]}function Fe(O){for(var k=O.byteLength,re=new Array,L=0,$=new DataView(O);k>0;){var X=$.getInt8(L++);if(X<0){var Q=-X;k-=Q+1;for(var J=0;J<Q;J++)re.push($.getUint8(L++))}else{var Q=X;k-=2;for(var he=$.getUint8(L++),J=0;J<Q+1;J++)re.push(he)}}return re}function Ce(O,k,re,L,$,X){var Nt=new DataView(X.buffer),Q=re[O.idx[0]].width,J=re[O.idx[0]].height,he=3,_e=Math.floor(Q/8),we=Math.ceil(Q/8),ye=Math.ceil(J/8),je=Q-(we-1)*8,Ne=J-(ye-1)*8,ze={value:0},ht=new Array(he),St=new Array(he),xt=new Array(he),Dt=new Array(he),at=new Array(he);for(let Qt=0;Qt<he;++Qt)at[Qt]=k[O.idx[Qt]],ht[Qt]=Qt<1?0:ht[Qt-1]+we*ye,St[Qt]=new Float32Array(64),xt[Qt]=new Uint16Array(64),Dt[Qt]=new Uint16Array(we*64);for(let Qt=0;Qt<ye;++Qt){var Ze=8;Qt==ye-1&&(Ze=Ne);var Kt=8;for(let Wt=0;Wt<we;++Wt){Wt==we-1&&(Kt=je);for(let rn=0;rn<he;++rn)xt[rn].fill(0),xt[rn][0]=$[ht[rn]++],ae(ze,L,xt[rn]),Ve(xt[rn],St[rn]),et(St[rn]);pt(St);for(let rn=0;rn<he;++rn)ut(St[rn],Dt[rn],Wt*64)}let Zn=0;for(let Wt=0;Wt<he;++Wt){const rn=re[O.idx[Wt]].type;for(let Dn=8*Qt;Dn<8*Qt+Ze;++Dn){Zn=at[Wt][Dn];for(let js=0;js<_e;++js){const Di=js*64+(Dn&7)*8;Nt.setUint16(Zn+0*2*rn,Dt[Wt][Di+0],!0),Nt.setUint16(Zn+1*2*rn,Dt[Wt][Di+1],!0),Nt.setUint16(Zn+2*2*rn,Dt[Wt][Di+2],!0),Nt.setUint16(Zn+3*2*rn,Dt[Wt][Di+3],!0),Nt.setUint16(Zn+4*2*rn,Dt[Wt][Di+4],!0),Nt.setUint16(Zn+5*2*rn,Dt[Wt][Di+5],!0),Nt.setUint16(Zn+6*2*rn,Dt[Wt][Di+6],!0),Nt.setUint16(Zn+7*2*rn,Dt[Wt][Di+7],!0),Zn+=8*2*rn}}if(_e!=we)for(let Dn=8*Qt;Dn<8*Qt+Ze;++Dn){const js=at[Wt][Dn]+8*_e*2*rn,Di=_e*64+(Dn&7)*8;for(let Jo=0;Jo<Kt;++Jo)Nt.setUint16(js+Jo*2*rn,Dt[Wt][Di+Jo],!0)}}}for(var Lt=new Uint16Array(Q),Nt=new DataView(X.buffer),wn=0;wn<he;++wn){re[O.idx[wn]].decoded=!0;var cr=re[O.idx[wn]].type;if(re[wn].type==2)for(var $n=0;$n<J;++$n){const Qt=at[wn][$n];for(var fn=0;fn<Q;++fn)Lt[fn]=Nt.getUint16(Qt+fn*2*cr,!0);for(var fn=0;fn<Q;++fn)Nt.setFloat32(Qt+fn*2*cr,Re(Lt[fn]),!0)}}}function ae(O,k,re){for(var L,$=1;$<64;)L=k[O.value],L==65280?$=64:L>>8==255?$+=L&255:(re[$]=L,$++),O.value++}function Ve(O,k){k[0]=Re(O[0]),k[1]=Re(O[1]),k[2]=Re(O[5]),k[3]=Re(O[6]),k[4]=Re(O[14]),k[5]=Re(O[15]),k[6]=Re(O[27]),k[7]=Re(O[28]),k[8]=Re(O[2]),k[9]=Re(O[4]),k[10]=Re(O[7]),k[11]=Re(O[13]),k[12]=Re(O[16]),k[13]=Re(O[26]),k[14]=Re(O[29]),k[15]=Re(O[42]),k[16]=Re(O[3]),k[17]=Re(O[8]),k[18]=Re(O[12]),k[19]=Re(O[17]),k[20]=Re(O[25]),k[21]=Re(O[30]),k[22]=Re(O[41]),k[23]=Re(O[43]),k[24]=Re(O[9]),k[25]=Re(O[11]),k[26]=Re(O[18]),k[27]=Re(O[24]),k[28]=Re(O[31]),k[29]=Re(O[40]),k[30]=Re(O[44]),k[31]=Re(O[53]),k[32]=Re(O[10]),k[33]=Re(O[19]),k[34]=Re(O[23]),k[35]=Re(O[32]),k[36]=Re(O[39]),k[37]=Re(O[45]),k[38]=Re(O[52]),k[39]=Re(O[54]),k[40]=Re(O[20]),k[41]=Re(O[22]),k[42]=Re(O[33]),k[43]=Re(O[38]),k[44]=Re(O[46]),k[45]=Re(O[51]),k[46]=Re(O[55]),k[47]=Re(O[60]),k[48]=Re(O[21]),k[49]=Re(O[34]),k[50]=Re(O[37]),k[51]=Re(O[47]),k[52]=Re(O[50]),k[53]=Re(O[56]),k[54]=Re(O[59]),k[55]=Re(O[61]),k[56]=Re(O[35]),k[57]=Re(O[36]),k[58]=Re(O[48]),k[59]=Re(O[49]),k[60]=Re(O[57]),k[61]=Re(O[58]),k[62]=Re(O[62]),k[63]=Re(O[63])}function et(O){const k=.5*Math.cos(.7853975),re=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),$=.5*Math.cos(3*3.14159/16),X=.5*Math.cos(5*3.14159/16),Q=.5*Math.cos(3*3.14159/8),J=.5*Math.cos(7*3.14159/16);for(var he=new Array(4),_e=new Array(4),we=new Array(4),ye=new Array(4),je=0;je<8;++je){var Ne=je*8;he[0]=L*O[Ne+2],he[1]=Q*O[Ne+2],he[2]=L*O[Ne+6],he[3]=Q*O[Ne+6],_e[0]=re*O[Ne+1]+$*O[Ne+3]+X*O[Ne+5]+J*O[Ne+7],_e[1]=$*O[Ne+1]-J*O[Ne+3]-re*O[Ne+5]-X*O[Ne+7],_e[2]=X*O[Ne+1]-re*O[Ne+3]+J*O[Ne+5]+$*O[Ne+7],_e[3]=J*O[Ne+1]-X*O[Ne+3]+$*O[Ne+5]-re*O[Ne+7],we[0]=k*(O[Ne+0]+O[Ne+4]),we[3]=k*(O[Ne+0]-O[Ne+4]),we[1]=he[0]+he[3],we[2]=he[1]-he[2],ye[0]=we[0]+we[1],ye[1]=we[3]+we[2],ye[2]=we[3]-we[2],ye[3]=we[0]-we[1],O[Ne+0]=ye[0]+_e[0],O[Ne+1]=ye[1]+_e[1],O[Ne+2]=ye[2]+_e[2],O[Ne+3]=ye[3]+_e[3],O[Ne+4]=ye[3]-_e[3],O[Ne+5]=ye[2]-_e[2],O[Ne+6]=ye[1]-_e[1],O[Ne+7]=ye[0]-_e[0]}for(var ze=0;ze<8;++ze)he[0]=L*O[16+ze],he[1]=Q*O[16+ze],he[2]=L*O[48+ze],he[3]=Q*O[48+ze],_e[0]=re*O[8+ze]+$*O[24+ze]+X*O[40+ze]+J*O[56+ze],_e[1]=$*O[8+ze]-J*O[24+ze]-re*O[40+ze]-X*O[56+ze],_e[2]=X*O[8+ze]-re*O[24+ze]+J*O[40+ze]+$*O[56+ze],_e[3]=J*O[8+ze]-X*O[24+ze]+$*O[40+ze]-re*O[56+ze],we[0]=k*(O[ze]+O[32+ze]),we[3]=k*(O[ze]-O[32+ze]),we[1]=he[0]+he[3],we[2]=he[1]-he[2],ye[0]=we[0]+we[1],ye[1]=we[3]+we[2],ye[2]=we[3]-we[2],ye[3]=we[0]-we[1],O[0+ze]=ye[0]+_e[0],O[8+ze]=ye[1]+_e[1],O[16+ze]=ye[2]+_e[2],O[24+ze]=ye[3]+_e[3],O[32+ze]=ye[3]-_e[3],O[40+ze]=ye[2]-_e[2],O[48+ze]=ye[1]-_e[1],O[56+ze]=ye[0]-_e[0]}function pt(O){for(var k=0;k<64;++k){var re=O[0][k],L=O[1][k],$=O[2][k];O[0][k]=re+1.5747*$,O[1][k]=re-.1873*L-.4682*$,O[2][k]=re+1.8556*L}}function ut(O,k,re){for(var L=0;L<64;++L)k[re+L]=wu.toHalfFloat($t(O[L]))}function $t(O){return O<=1?Math.sign(O)*Math.pow(Math.abs(O),2.2):Math.sign(O)*Math.pow(T,Math.abs(O)-1)}function H(O){return new DataView(O.array.buffer,O.offset.value,O.size)}function F(O){var k=O.viewer.buffer.slice(O.offset.value,O.offset.value+O.size),re=new Uint8Array(Fe(k)),L=new Uint8Array(re.length);return xe(re),ve(re,L),new DataView(L.buffer)}function le(O){var k=O.array.slice(O.offset.value,O.offset.value+O.size),re=Kv(k),L=new Uint8Array(re.length);return xe(re),ve(re,L),new DataView(L.buffer)}function Pe(O){for(var k=O.viewer,re={value:O.offset.value},L=new Uint16Array(O.width*O.scanlineBlockSize*(O.channels*O.type)),$=new Uint8Array(8192),X=0,Q=new Array(O.channels),J=0;J<O.channels;J++)Q[J]={},Q[J].start=X,Q[J].end=Q[J].start,Q[J].nx=O.width,Q[J].ny=O.lines,Q[J].size=O.type,X+=Q[J].nx*Q[J].ny*Q[J].size;var he=se(k,re),_e=se(k,re);if(_e>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(he<=_e)for(var J=0;J<_e-he+1;J++)$[J+he]=ne(k,re);var we=new Uint16Array(65536),ye=P($,we),je=Oe(k,re);Ye(O.array,k,re,je,L,X);for(var J=0;J<O.channels;++J)for(var Ne=Q[J],ze=0;ze<Q[J].size;++ze)st(L,Ne.start+ze,Ne.nx,Ne.size,Ne.ny,Ne.nx*Ne.size,ye);Z(we,L,X);for(var ht=0,St=new Uint8Array(L.buffer.byteLength),xt=0;xt<O.lines;xt++)for(var Dt=0;Dt<O.channels;Dt++){var Ne=Q[Dt],at=Ne.nx*Ne.size,Ze=new Uint8Array(L.buffer,Ne.end*2,at*2);St.set(Ze,ht),ht+=at*2,Ne.end+=at}return new DataView(St.buffer)}function De(O){var k=O.array.slice(O.offset.value,O.offset.value+O.size),re=Kv(k);const L=O.lines*O.channels*O.width,$=O.type==1?new Uint16Array(L):new Uint32Array(L);let X=0,Q=0;const J=new Array(4);for(let he=0;he<O.lines;he++)for(let _e=0;_e<O.channels;_e++){let we=0;switch(O.type){case 1:J[0]=X,J[1]=J[0]+O.width,X=J[1]+O.width;for(let ye=0;ye<O.width;++ye){const je=re[J[0]++]<<8|re[J[1]++];we+=je,$[Q]=we,Q++}break;case 2:J[0]=X,J[1]=J[0]+O.width,J[2]=J[1]+O.width,X=J[2]+O.width;for(let ye=0;ye<O.width;++ye){const je=re[J[0]++]<<24|re[J[1]++]<<16|re[J[2]++]<<8;we+=je,$[Q]=we,Q++}break}}return new DataView($.buffer)}function Ue(O){var k=O.viewer,re={value:O.offset.value},L=new Uint8Array(O.width*O.lines*(O.channels*O.type*2)),$={version:me(k,re),unknownUncompressedSize:me(k,re),unknownCompressedSize:me(k,re),acCompressedSize:me(k,re),dcCompressedSize:me(k,re),rleCompressedSize:me(k,re),rleUncompressedSize:me(k,re),rleRawSize:me(k,re),totalAcUncompressedCount:me(k,re),totalDcUncompressedCount:me(k,re),acCompression:me(k,re)};if($.version<2)throw"EXRLoader.parse: "+Ft.compression+" version "+$.version+" is unsupported";for(var X=new Array,Q=se(k,re)-2;Q>0;){var J=nt(k.buffer,re),he=ne(k,re),_e=he>>2&3,we=(he>>4)-1,ye=new Int8Array([we])[0],je=ne(k,re);X.push({name:J,index:ye,type:je,compression:_e}),Q-=J.length+3}for(var Ne=Ft.channels,ze=new Array(O.channels),ht=0;ht<O.channels;++ht){var St=ze[ht]={},xt=Ne[ht];St.name=xt.name,St.compression=0,St.decoded=!1,St.type=xt.pixelType,St.pLinear=xt.pLinear,St.width=O.width,St.height=O.lines}for(var Dt={idx:new Array(3)},at=0;at<O.channels;++at)for(var St=ze[at],ht=0;ht<X.length;++ht){var Ze=X[ht];St.name==Ze.name&&(St.compression=Ze.compression,Ze.index>=0&&(Dt.idx[Ze.index]=at),St.offset=at)}if($.acCompressedSize>0)switch($.acCompression){case 0:var Nt=new Uint16Array($.totalAcUncompressedCount);Ye(O.array,k,re,$.acCompressedSize,Nt,$.totalAcUncompressedCount);break;case 1:var Kt=O.array.slice(re.value,re.value+$.totalAcUncompressedCount),Lt=Kv(Kt),Nt=new Uint16Array(Lt.buffer);re.value+=$.totalAcUncompressedCount;break}if($.dcCompressedSize>0){var wn={array:O.array,offset:re,size:$.dcCompressedSize},cr=new Uint16Array(le(wn).buffer);re.value+=$.dcCompressedSize}if($.rleRawSize>0){var Kt=O.array.slice(re.value,re.value+$.rleCompressedSize),Lt=Kv(Kt),$n=Fe(Lt.buffer);re.value+=$.rleCompressedSize}for(var fn=0,Qt=new Array(ze.length),ht=0;ht<Qt.length;++ht)Qt[ht]=new Array;for(var Zn=0;Zn<O.lines;++Zn)for(var Wt=0;Wt<ze.length;++Wt)Qt[Wt].push(fn),fn+=ze[Wt].width*O.type*2;Ce(Dt,Qt,ze,Nt,cr,L);for(var ht=0;ht<ze.length;++ht){var St=ze[ht];if(!St.decoded)switch(St.compression){case 2:for(var rn=0,Dn=0,Zn=0;Zn<O.lines;++Zn){for(var js=Qt[ht][rn],Di=0;Di<St.width;++Di){for(var Jo=0;Jo<2*St.type;++Jo)L[js++]=$n[Dn+Jo*St.width*St.height];Dn++}rn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function nt(O,k){for(var re=new Uint8Array(O),L=0;re[k.value+L]!=0;)L+=1;var $=new TextDecoder().decode(re.slice(k.value,k.value+L));return k.value=k.value+L+1,$}function He(O,k,re){var L=new TextDecoder().decode(new Uint8Array(O).slice(k.value,k.value+re));return k.value=k.value+re,L}function $e(O,k){var re=Rt(O,k),L=Oe(O,k);return[re,L]}function dt(O,k){var re=Oe(O,k),L=Oe(O,k);return[re,L]}function Rt(O,k){var re=O.getInt32(k.value,!0);return k.value=k.value+4,re}function Oe(O,k){var re=O.getUint32(k.value,!0);return k.value=k.value+4,re}function Ot(O,k){var re=O[k.value];return k.value=k.value+1,re}function ne(O,k){var re=O.getUint8(k.value);return k.value=k.value+1,re}const me=function(O,k){let re;return"getBigInt64"in DataView.prototype?re=Number(O.getBigInt64(k.value,!0)):re=O.getUint32(k.value+4,!0)+Number(O.getUint32(k.value,!0)<<32),k.value+=8,re};function Ie(O,k){var re=O.getFloat32(k.value,!0);return k.value+=4,re}function Me(O,k){return wu.toHalfFloat(Ie(O,k))}function Re(O){var k=(O&31744)>>10,re=O&1023;return(O>>15?-1:1)*(k?k===31?re?NaN:1/0:Math.pow(2,k-15)*(1+re/1024):6103515625e-14*(re/1024))}function se(O,k){var re=O.getUint16(k.value,!0);return k.value+=2,re}function Xe(O,k){return Re(se(O,k))}function ke(O,k,re,L){for(var $=re.value,X=[];re.value<$+L-1;){var Q=nt(k,re),J=Rt(O,re),he=ne(O,re);re.value+=3;var _e=Rt(O,re),we=Rt(O,re);X.push({name:Q,pixelType:J,pLinear:he,xSampling:_e,ySampling:we})}return re.value+=1,X}function Te(O,k){var re=Ie(O,k),L=Ie(O,k),$=Ie(O,k),X=Ie(O,k),Q=Ie(O,k),J=Ie(O,k),he=Ie(O,k),_e=Ie(O,k);return{redX:re,redY:L,greenX:$,greenY:X,blueX:Q,blueY:J,whiteX:he,whiteY:_e}}function Ge(O,k){var re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=ne(O,k);return re[L]}function ft(O,k){var re=Oe(O,k),L=Oe(O,k),$=Oe(O,k),X=Oe(O,k);return{xMin:re,yMin:L,xMax:$,yMax:X}}function Qe(O,k){var re=["INCREASING_Y"],L=ne(O,k);return re[L]}function rt(O,k){var re=Ie(O,k),L=Ie(O,k);return[re,L]}function At(O,k){var re=Ie(O,k),L=Ie(O,k),$=Ie(O,k);return[re,L,$]}function Ct(O,k,re,L,$){if(L==="string"||L==="stringvector"||L==="iccProfile")return He(k,re,$);if(L==="chlist")return ke(O,k,re,$);if(L==="chromaticities")return Te(O,re);if(L==="compression")return Ge(O,re);if(L==="box2i")return ft(O,re);if(L==="lineOrder")return Qe(O,re);if(L==="float")return Ie(O,re);if(L==="v2f")return rt(O,re);if(L==="v3f")return At(O,re);if(L==="int")return Rt(O,re);if(L==="rational")return $e(O,re);if(L==="timecode")return dt(O,re);if(L==="preview")return re.value+=$,"skipped";re.value+=$}function Ke(O,k,re){const L={};if(O.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=O.getUint8(4);const $=O.getUint8(5);L.spec={singleTile:!!($&2),longName:!!($&4),deepFormat:!!($&8),multiPart:!!($&16)},re.value=8;for(var X=!0;X;){var Q=nt(k,re);if(Q==0)X=!1;else{var J=nt(k,re),he=Oe(O,re),_e=Ct(O,k,re,J,he);_e===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${J}'.`):L[Q]=_e}}if($!=0)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function Pt(O,k,re,L,$){const X={size:0,viewer:k,array:re,offset:L,width:O.dataWindow.xMax-O.dataWindow.xMin+1,height:O.dataWindow.yMax-O.dataWindow.yMin+1,channels:O.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:O.channels[0].pixelType,uncompress:null,getter:null,format:null,[Dp?"colorSpace":"encoding"]:null};switch(O.compression){case"NO_COMPRESSION":X.lines=1,X.uncompress=H;break;case"RLE_COMPRESSION":X.lines=1,X.uncompress=F;break;case"ZIPS_COMPRESSION":X.lines=1,X.uncompress=le;break;case"ZIP_COMPRESSION":X.lines=16,X.uncompress=le;break;case"PIZ_COMPRESSION":X.lines=32,X.uncompress=Pe;break;case"PXR24_COMPRESSION":X.lines=16,X.uncompress=De;break;case"DWAA_COMPRESSION":X.lines=32,X.uncompress=Ue;break;case"DWAB_COMPRESSION":X.lines=256,X.uncompress=Ue;break;default:throw"EXRLoader.parse: "+O.compression+" is unsupported"}if(X.scanlineBlockSize=X.lines,X.type==1)switch($){case Zr:X.getter=Xe,X.inputSize=2;break;case si:X.getter=se,X.inputSize=2;break}else if(X.type==2)switch($){case Zr:X.getter=Ie,X.inputSize=4;break;case si:X.getter=Me,X.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+X.type+" for "+O.compression+".";X.blockCount=(O.dataWindow.yMax+1)/X.scanlineBlockSize;for(var Q=0;Q<X.blockCount;Q++)me(k,L);X.outputChannels=X.channels==3?4:X.channels;const J=X.width*X.height*X.outputChannels;switch($){case Zr:X.byteArray=new Float32Array(J),X.channels<X.outputChannels&&X.byteArray.fill(1,0,J);break;case si:X.byteArray=new Uint16Array(J),X.channels<X.outputChannels&&X.byteArray.fill(15360,0,J);break;default:console.error("THREE.EXRLoader: unsupported type: ",$);break}return X.bytesPerLine=X.width*X.inputSize*X.channels,X.outputChannels==4?X.format=Ei:X.format=jb,Dp?X.colorSpace="srgb-linear":X.encoding=3e3,X}const wt=new DataView(e),kt=new Uint8Array(e),Sn={value:0},Ft=Ke(wt,e,Sn),_t=Pt(Ft,wt,kt,Sn,this.type),Kn={value:0},Un={R:0,G:1,B:2,A:3,Y:0};for(let O=0;O<_t.height/_t.scanlineBlockSize;O++){const k=Oe(wt,Sn);_t.size=Oe(wt,Sn),_t.lines=k+_t.scanlineBlockSize>_t.height?_t.height-k:_t.scanlineBlockSize;const L=_t.size<_t.lines*_t.bytesPerLine?_t.uncompress(_t):H(_t);Sn.value+=_t.size;for(let $=0;$<_t.scanlineBlockSize;$++){const X=$+O*_t.scanlineBlockSize;if(X>=_t.height)break;for(let Q=0;Q<_t.channels;Q++){const J=Un[Ft.channels[Q].name];for(let he=0;he<_t.width;he++){Kn.value=($*(_t.channels*_t.width)+Q*_t.width+he)*_t.inputSize;const _e=(_t.height-1-X)*(_t.width*_t.outputChannels)+he*_t.outputChannels+J;_t.byteArray[_e]=_t.getter(L,Kn)}}}}return{header:Ft,width:_t.width,height:_t.height,data:_t.byteArray,format:_t.format,[Dp?"colorSpace":"encoding"]:_t[Dp?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){Dp?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=En,o.magFilter=En,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const IE=new WeakMap;class rK extends Bi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Hs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(IE.has(e)){const l=IE.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),IE.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new zt;e.index&&t.setIndex(new en(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new en(o,a))}return t}_loadLibrary(e,t){const r=new Hs(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=iK.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function iK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,m,c),y=v.attributes.map(_=>_.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const _ in u){const g=self[d[_]];let x,S;if(c.useUniqueIDs)S=u[_],x=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[u[_]]),S===-1)continue;x=a.GetAttribute(p,S)}y.attributes.push(i(o,a,p,_,g,x))}return v===o.TRIANGULAR_MESH&&(y.index=r(o,a,p)),o.destroy(p),y}function r(o,a,l){const u=l.num_faces()*3,d=u*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,d){const p=d.num_components(),v=l.num_points()*p,y=v*u.BYTES_PER_ELEMENT,_=s(o,u),g=o._malloc(y);a.GetAttributeDataArrayForAllPoints(l,d,_,y,g);const x=new u(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:x,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Qv;const DE=()=>{if(Qv)return Qv;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const y=d.charCodeAt(v);p[v]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,y,_){const g=s.exports.sbrk,x=m+3&-4,S=g(x*v),A=g(y.length),b=new Uint8Array(s.exports.memory.buffer);b.set(y,A);const M=d(S,m,v,A,y.length);if(M===0&&_&&_(S,x,v),p.set(b.subarray(S,S+m*v)),g(S-g(0)),M!==0)throw new Error(`Malformed buffer data: ${M}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Qv={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,y){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[c[y]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,y,_){l(s.exports[u[y]],d,p,m,v,s.exports[c[_]])}},Qv};function kU(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}function zU(n,e,t,r){const i=class extends _r{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[c,u])=>{const d=oT.clone({[c]:{value:u}});return{...l,...d}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),r&&r(this)}};return i.key=Hd.generateUUID(),i}const sK=()=>parseInt(Ca.replace(/\D+/g,"")),HU=sK();var oK=1/0,aK=9007199254740991,lK="[object Arguments]",cK="[object Function]",uK="[object GeneratorFunction]",fK="[object Symbol]",dK=typeof zp=="object"&&zp&&zp.Object===Object&&zp,hK=typeof self=="object"&&self&&self.Object===Object&&self,pK=dK||hK||Function("return this")();function mK(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function gK(n,e){for(var t=-1,r=n?n.length:0,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}function vK(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var WT=Object.prototype,yK=WT.hasOwnProperty,$T=WT.toString,DI=pK.Symbol,_K=WT.propertyIsEnumerable,LI=DI?DI.isConcatSpreadable:void 0,OI=Math.max;function GU(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=AK),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?GU(a,e-1,t,r,i):vK(i,a):r||(i[i.length]=a)}return i}function xK(n,e){return n=Object(n),SK(n,e,function(t,r){return r in n})}function SK(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=n[o];t(a,o)&&(s[o]=a)}return s}function EK(n,e){return e=OI(e===void 0?n.length-1:e,0),function(){for(var t=arguments,r=-1,i=OI(t.length-e,0),s=Array(i);++r<i;)s[r]=t[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=t[r];return o[e]=s,mK(n,this,o)}}function AK(n){return bK(n)||MK(n)||!!(LI&&n&&n[LI])}function wK(n){if(typeof n=="string"||IK(n))return n;var e=n+"";return e=="0"&&1/n==-oK?"-0":e}function MK(n){return CK(n)&&yK.call(n,"callee")&&(!_K.call(n,"callee")||$T.call(n)==lK)}var bK=Array.isArray;function TK(n){return n!=null&&PK(n.length)&&!RK(n)}function CK(n){return VU(n)&&TK(n)}function RK(n){var e=BK(n)?$T.call(n):"";return e==cK||e==uK}function PK(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=aK}function BK(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function VU(n){return!!n&&typeof n=="object"}function IK(n){return typeof n=="symbol"||VU(n)&&$T.call(n)==fK}var DK=EK(function(n,e){return n==null?{}:xK(n,gK(GU(e,1),wK))}),LK=DK;const OK=Bc(LK);function FK(n,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:t,inject:r,castShadow:i,receiveShadow:s}){let o=OK(n,e);return t&&(o.geometry&&t!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&t!=="geometriesOnly"&&(o.material=o.material.clone())),r&&(typeof r=="function"?o={...o,children:r(n)}:I.isValidElement(r)?o={...o,children:r}:o={...o,...r}),n instanceof Jn&&(i&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const qw=I.forwardRef(({isChild:n=!1,object:e,children:t,deep:r,castShadow:i,receiveShadow:s,inject:o,keys:a,...l},c)=>{var u;const d={keys:a,deep:r,inject:o,castShadow:i,receiveShadow:s};if(e=I.useMemo(()=>{if(n===!1&&!Array.isArray(e)){let y=!1;if(e.traverse(_=>{_.isSkinnedMesh&&(y=!0)}),y)return gJ.clone(e)}return e},[e,n]),Array.isArray(e))return I.createElement("group",sn({},l,{ref:c}),e.map(y=>I.createElement(qw,sn({key:y.uuid,object:y},d))),t);const{children:p,...m}=FK(e,d),v=e.type[0].toLowerCase()+e.type.slice(1);return I.createElement(v,sn({},m,l,{ref:c}),((u=e)==null?void 0:u.children).map(y=>y.type==="Bone"?I.createElement("primitive",sn({key:y.uuid,object:y},d)):I.createElement(qw,sn({key:y.uuid,object:y},d,{isChild:!0}))),t,p)});let qv=null,WU="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function $U(n,e,t){return r=>{t&&t(r),n&&(qv||(qv=new rK),qv.setDecoderPath(typeof n=="string"?n:WU),r.setDRACOLoader(qv)),e&&r.setMeshoptDecoder(typeof DE=="function"?DE():DE)}}function Fh(n,e=!0,t=!0,r){return Oh(VT,n,$U(e,t,r))}Fh.preload=(n,e=!0,t=!0,r)=>Oh.preload(VT,n,$U(e,t,r));Fh.clear=n=>Oh.clear(VT,n);Fh.setDecoderPath=n=>{WU=n};const NK=I.forwardRef(({src:n,...e},t)=>{const{scene:r}=Fh(n);return I.createElement(qw,sn({ref:t},e,{object:r}))}),UK=I.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const d=hr(M=>M.invalidate),p=hr(M=>M.camera),m=hr(M=>M.gl),v=hr(M=>M.events),y=hr(M=>M.setEvents),_=hr(M=>M.set),g=hr(M=>M.get),x=hr(M=>M.performance),S=e||p,A=r||v.connected||m.domElement,b=I.useMemo(()=>new xJ(S),[S]);return Lh(()=>{b.enabled&&b.update()},-1),I.useEffect(()=>(s&&b.connect(s===!0?A:s),b.connect(A),()=>void b.dispose()),[s,A,t,b,d]),I.useEffect(()=>{const M=T=>{d(),t&&x.regress(),o&&o(T)},C=T=>{a&&a(T)},B=T=>{l&&l(T)};return b.addEventListener("change",M),b.addEventListener("start",C),b.addEventListener("end",B),()=>{b.removeEventListener("start",C),b.removeEventListener("end",B),b.removeEventListener("change",M)}},[o,a,l,b,d,y]),I.useEffect(()=>{if(n){const M=g().controls;return _({controls:b}),()=>_({controls:M})}},[n,b]),I.createElement("primitive",sn({ref:u,object:b,enableDamping:i},c))});var XU={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(zp,function(){var t=function(){function r(m){return o.appendChild(m.dom),m}function i(m){for(var v=0;v<o.children.length;v++)o.children[v].style.display=v===m?"block":"none";s=m}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(m){m.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=r(new t.Panel("FPS","#0ff","#002")),d=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var p=r(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){c++;var m=(performance||Date).now();if(d.update(m-a,200),m>l+1e3&&(u.update(1e3*c/(m-l),100),l=m,c=0,p)){var v=performance.memory;p.update(v.usedJSHeapSize/1048576,v.jsHeapSizeLimit/1048576)}return m},update:function(){a=this.end()},domElement:o,setMode:i}};return t.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,d=48*c,p=3*c,m=2*c,v=3*c,y=15*c,_=74*c,g=30*c,x=document.createElement("canvas");x.width=u,x.height=d,x.style.cssText="width:80px;height:48px";var S=x.getContext("2d");return S.font="bold "+9*c+"px Helvetica,Arial,sans-serif",S.textBaseline="top",S.fillStyle=s,S.fillRect(0,0,u,d),S.fillStyle=i,S.fillText(r,p,m),S.fillRect(v,y,_,g),S.fillStyle=s,S.globalAlpha=.9,S.fillRect(v,y,_,g),{dom:x,update:function(A,b){o=Math.min(o,A),a=Math.max(a,A),S.fillStyle=s,S.globalAlpha=1,S.fillRect(0,0,u,y),S.fillStyle=i,S.fillText(l(A)+" "+r+" ("+l(o)+"-"+l(a)+")",p,m),S.drawImage(x,v+c,y,_-c,g,v,y,_-c,g),S.fillRect(v+_-c,y,c,g),S.fillStyle=s,S.globalAlpha=.9,S.fillRect(v+_-c,y,c,l((1-A/b)*g))}}},t})})(XU);var kK=XU.exports;const zK=Bc(kK);function FI(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function HK(n,e=[],t){const[r,i]=I.useState();return I.useLayoutEffect(()=>{const s=n();return i(s),FI(t,s),()=>FI(t,null)},e),r}function GK({showPanel:n=0,className:e,parent:t}){const r=HK(()=>new zK,[]);return I.useEffect(()=>{if(r){const i=t&&t.current||document.body;r.showPanel(n),i==null||i.appendChild(r.dom),e&&r.dom.classList.add(...e.split(" ").filter(a=>a));const s=Cj(()=>r.begin()),o=Rj(()=>r.end());return()=>{i==null||i.removeChild(r.dom),s(),o()}}},[t,r,e,n]),null}const jU=I.forwardRef(function({children:e,disable:t,disableX:r,disableY:i,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:d,onCentered:p,precise:m=!0,cacheKey:v=0,...y},_){const g=I.useRef(null),x=I.useRef(null),S=I.useRef(null);return I.useLayoutEffect(()=>{x.current.matrixWorld.identity();const A=new qr().setFromObject(S.current,m),b=new W,M=new ei,C=A.max.x-A.min.x,B=A.max.y-A.min.y,T=A.max.z-A.min.z;A.getCenter(b),A.getBoundingSphere(M);const P=l?B/2:c?-B/2:0,N=o?-C/2:a?C/2:0,z=u?T/2:d?-T/2:0;x.current.position.set(t||r?0:-b.x+N,t||i?0:-b.y+P,t||s?0:-b.z+z),typeof p<"u"&&p({parent:g.current.parent,container:g.current,width:C,height:B,depth:T,boundingBox:A,boundingSphere:M,center:b,verticalAlignment:P,horizontalAlignment:N,depthAlignment:z})},[v,p,l,o,u,t,r,i,s,m,a,c,d]),I.useImperativeHandle(_,()=>g.current,[]),I.createElement("group",sn({ref:g},y),I.createElement("group",{ref:x},I.createElement("group",{ref:S},e)))}),VK=zU({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var ro=function(n){return n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.ACTIVE=2]="ACTIVE",n}(ro||{});const rd=n=>n&&n.isOrthographicCamera,WK=n=>n&&n.isBox3,$K=n=>1-Math.exp(-5*n)+.007*n,YU=I.createContext(null);function XK({children:n,maxDuration:e=1,margin:t=1.2,observe:r,fit:i,clip:s,interpolateFunc:o=$K,onFit:a}){const l=I.useRef(null),{camera:c,size:u,invalidate:d}=hr(),p=hr(b=>b.controls),m=I.useRef(a);m.current=a;const v=I.useRef({camPos:new W,camRot:new vr,camZoom:1}),y=I.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),_=I.useRef(ro.NONE),g=I.useRef(0),[x]=I.useState(()=>new qr),S=I.useMemo(()=>{function b(){const M=x.getSize(new W),C=x.getCenter(new W),B=Math.max(M.x,M.y,M.z),T=rd(c)?B*4:B/(2*Math.atan(Math.PI*c.fov/360)),P=rd(c)?B*4:T/c.aspect,N=t*Math.max(T,P);return{box:x,size:M,center:C,distance:N}}return{getSize:b,refresh(M){if(WK(M))x.copy(M);else{const C=M||l.current;if(!C)return this;C.updateWorldMatrix(!0,!0),x.setFromObject(C)}if(x.isEmpty()){const C=c.position.length()||10;x.setFromCenterAndSize(new W,new W(C,C,C))}return v.current.camPos.copy(c.position),v.current.camRot.copy(c.quaternion),rd(c)&&(v.current.camZoom=c.zoom),y.current.camPos=void 0,y.current.camRot=void 0,y.current.camZoom=void 0,y.current.camUp=void 0,y.current.target=void 0,this},reset(){const{center:M,distance:C}=b(),B=c.position.clone().sub(M).normalize();y.current.camPos=M.clone().addScaledVector(B,C),y.current.target=M.clone();const T=new Tt().lookAt(y.current.camPos,y.current.target,c.up);return y.current.camRot=new vr().setFromRotationMatrix(T),_.current=ro.START,g.current=0,this},moveTo(M){return y.current.camPos=Array.isArray(M)?new W(...M):M.clone(),_.current=ro.START,g.current=0,this},lookAt({target:M,up:C}){y.current.target=Array.isArray(M)?new W(...M):M.clone(),C?y.current.camUp=Array.isArray(C)?new W(...C):C.clone():y.current.camUp=c.up.clone();const B=new Tt().lookAt(y.current.camPos||c.position,y.current.target,y.current.camUp);return y.current.camRot=new vr().setFromRotationMatrix(B),_.current=ro.START,g.current=0,this},to({position:M,target:C}){return this.moveTo(M).lookAt({target:C})},fit(){if(!rd(c))return this.reset();let M=0,C=0;const B=[new W(x.min.x,x.min.y,x.min.z),new W(x.min.x,x.max.y,x.min.z),new W(x.min.x,x.min.y,x.max.z),new W(x.min.x,x.max.y,x.max.z),new W(x.max.x,x.max.y,x.max.z),new W(x.max.x,x.max.y,x.min.z),new W(x.max.x,x.min.y,x.max.z),new W(x.max.x,x.min.y,x.min.z)],T=y.current.camPos||c.position,P=y.current.target||(p==null?void 0:p.target),N=y.current.camUp||c.up,z=P?new Tt().lookAt(T,P,N).setPosition(T).invert():c.matrixWorldInverse;for(const Y of B)Y.applyMatrix4(z),M=Math.max(M,Math.abs(Y.y)),C=Math.max(C,Math.abs(Y.x));M*=2,C*=2;const q=(c.top-c.bottom)/M,G=(c.right-c.left)/C;return y.current.camZoom=Math.min(q,G)/t,_.current=ro.START,g.current=0,m.current&&m.current(this.getSize()),this},clip(){const{distance:M}=b();return c.near=M/100,c.far=M*100,c.updateProjectionMatrix(),p&&(p.maxDistance=M*10,p.update()),d(),this}}},[x,c,p,t,d]);I.useLayoutEffect(()=>{if(p){const b=()=>{if(p&&y.current.target&&_.current!==ro.NONE){const M=new W().setFromMatrixColumn(c.matrix,2),C=v.current.camPos.distanceTo(p.target),B=(y.current.camPos||v.current.camPos).distanceTo(y.current.target),T=(1-g.current)*C+g.current*B;p.target.copy(c.position).addScaledVector(M,-T),p.update()}_.current=ro.NONE};return p.addEventListener("start",b),()=>p.removeEventListener("start",b)}},[p]);const A=I.useRef(0);return I.useLayoutEffect(()=>{(r||A.current++===0)&&(S.refresh(),i&&S.reset().fit(),s&&S.clip())},[u,s,i,r,c,p]),Lh((b,M)=>{if(_.current===ro.START)_.current=ro.ACTIVE,d();else if(_.current===ro.ACTIVE){if(g.current+=M/e,g.current>=1)y.current.camPos&&c.position.copy(y.current.camPos),y.current.camRot&&c.quaternion.copy(y.current.camRot),y.current.camUp&&c.up.copy(y.current.camUp),y.current.camZoom&&rd(c)&&(c.zoom=y.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),p&&y.current.target&&(p.target.copy(y.current.target),p.update()),_.current=ro.NONE;else{const C=o(g.current);y.current.camPos&&c.position.lerpVectors(v.current.camPos,y.current.camPos,C),y.current.camRot&&c.quaternion.slerpQuaternions(v.current.camRot,y.current.camRot,C),y.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),y.current.camZoom&&rd(c)&&(c.zoom=(1-C)*v.current.camZoom+C*y.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}d()}}),I.createElement("group",{ref:l},I.createElement(YU.Provider,{value:S},n))}function jK(){return I.useContext(YU)}const LE={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},YK="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",NI=n=>Array.isArray(n);function JU({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in LE))throw new Error("Preset must be one of: "+Object.keys(LE).join(", "));n=LE[t],e=YK}if(a=NI(n),l=NI(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?LN:l==="hdr"?tK:l==="exr"?nK:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=Oh(o,a?[n]:n,m=>{m.setPath==null||m.setPath(e),i&&i(m)}),u=a?c[0]:c;u.mapping=a?Ea:sh;const d=3001,p=3e3;return"colorSpace"in u?u.colorSpace=r??a?"srgb":"srgb-linear":u.encoding=r??a?d:p,u}const JK=n=>n.current&&n.current.isScene,KK=n=>JK(n)?n.current:n;function XT(n,e,t,r,i=0){const s=KK(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function jT({scene:n,background:e=!1,blur:t,map:r}){const i=hr(s=>s.scene);return I.useLayoutEffect(()=>{if(r)return XT(e,n,i,r,t)},[i,n,r,e,t]),null}function KU({background:n=!1,scene:e,blur:t,...r}){const i=JU(r),s=hr(o=>o.scene);return I.useLayoutEffect(()=>XT(n,e,s,i,t),[i,n,e,s,t]),null}function ZK({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:u,preset:d=void 0,extensions:p}){const m=hr(S=>S.gl),v=hr(S=>S.scene),y=I.useRef(null),[_]=I.useState(()=>new Zu),g=I.useMemo(()=>{const S=new aT(r);return S.texture.type=si,S},[r]);I.useLayoutEffect(()=>(i===1&&y.current.update(m,_),XT(o,l,v,g.texture,a)),[n,_,g.texture,l,v,o,i,m]);let x=1;return Lh(()=>{(i===1/0||x<i)&&(y.current.update(m,_),x++)}),I.createElement(I.Fragment,null,Fj(I.createElement(I.Fragment,null,n,I.createElement("cubeCamera",{ref:y,args:[e,t,g]}),c||d?I.createElement(KU,{background:!0,files:c,preset:d,path:u,extensions:p}):s?I.createElement(jT,{background:!0,map:s,extensions:p}):null),_))}function QK(n){var e,t,r,i;const s=JU(n),o=n.map||s;I.useMemo(()=>Xx({GroundProjectedEnvImpl:dJ}),[]);const a=I.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return I.createElement(I.Fragment,null,I.createElement(jT,sn({},n,{map:o})),I.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function qK(n){return n.ground?I.createElement(QK,n):n.map?I.createElement(jT,n):n.children?I.createElement(ZK,n):I.createElement(KU,n)}const eZ=I.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:r=1,height:i=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:d=!1,renderOrder:p,...m},v)=>{const y=I.useRef(null),_=hr(G=>G.scene),g=hr(G=>G.gl),x=I.useRef(null);r=r*(Array.isArray(n)?n[0]:n||1),i=i*(Array.isArray(n)?n[1]:n||1);const[S,A,b,M,C,B,T]=I.useMemo(()=>{const G=new Wn(l,l),Y=new Wn(l,l);Y.texture.generateMipmaps=G.texture.generateMipmaps=!1;const ee=new Rh(r,i).rotateX(Math.PI/2),te=new Jn(ee),V=new bx;V.depthTest=V.depthWrite=!1,V.onBeforeCompile=oe=>{oe.uniforms={...oe.uniforms,ucolor:{value:new tt(u)}},oe.fragmentShader=oe.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),oe.fragmentShader=oe.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const K=new _r(qJ),U=new _r(eK);return U.depthTest=K.depthTest=!1,[G,ee,V,te,K,U,Y]},[l,r,i,n,u]),P=G=>{M.visible=!0,M.material=C,C.uniforms.tDiffuse.value=S.texture,C.uniforms.h.value=G*1/256,g.setRenderTarget(T),g.render(M,x.current),M.material=B,B.uniforms.tDiffuse.value=T.texture,B.uniforms.v.value=G*1/256,g.setRenderTarget(S),g.render(M,x.current),M.visible=!1};let N=0,z,q;return Lh(()=>{x.current&&(e===1/0||N<e)&&(N++,z=_.background,q=_.overrideMaterial,y.current.visible=!1,_.background=null,_.overrideMaterial=b,g.setRenderTarget(S),g.render(_,x.current),P(s),c&&P(s*.4),g.setRenderTarget(null),y.current.visible=!0,_.overrideMaterial=q,_.background=z)}),I.useImperativeHandle(v,()=>y.current,[]),I.createElement("group",sn({"rotation-x":Math.PI/2},m,{ref:y}),I.createElement("mesh",{renderOrder:p,geometry:A,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},I.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:t,depthWrite:d})),I.createElement("orthographicCamera",{ref:x,args:[-r/2,r/2,i/2,-i/2,o,a]}))});function tZ(n){return n.isLight}function nZ(n){return!!n.geometry}const ZU=I.createContext(null),rZ=zU({color:new tt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${HU>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),iZ=I.forwardRef(({children:n,temporal:e,frames:t=40,limit:r=1/0,blend:i=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:d=!0,...p},m)=>{Xx({SoftShadowMaterial:rZ});const v=hr(M=>M.gl),y=hr(M=>M.scene),_=hr(M=>M.camera),g=hr(M=>M.invalidate),x=I.useRef(null),S=I.useRef(null),[A]=I.useState(()=>new oZ(v,y,u));I.useLayoutEffect(()=>{A.configure(x.current)},[]);const b=I.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?i:t),count:0,getMesh:()=>x.current,reset:()=>{A.clear();const M=x.current.material;M.opacity=0,M.alphaTest=0,b.count=0},update:(M=1)=>{const C=x.current.material;b.temporal?(C.opacity=Math.min(o,C.opacity+o/b.blend),C.alphaTest=Math.min(a,C.alphaTest+a/b.blend)):(C.opacity=o,C.alphaTest=a),S.current.visible=!0,A.prepare();for(let B=0;B<M;B++)b.lights.forEach(T=>T.update()),A.update(_,b.blend);S.current.visible=!1,A.finish()}}),[A,_,y,e,t,i,o,a]);return I.useLayoutEffect(()=>{b.reset(),!b.temporal&&b.frames!==1/0&&b.update(b.blend)}),I.useImperativeHandle(m,()=>b,[b]),Lh(()=>{(b.temporal||b.frames===1/0)&&b.count<b.frames&&b.count<r&&(g(),b.update(),b.count++)}),I.createElement("group",p,I.createElement("group",{traverse:()=>null,ref:S},I.createElement(ZU.Provider,{value:b},n)),I.createElement("mesh",{receiveShadow:!0,ref:x,scale:s,rotation:[-Math.PI/2,0,0]},I.createElement("planeGeometry",null),I.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:d,color:l,blend:c,map:A.progressiveLightMap2.texture})))}),sZ=I.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:r=5,near:i=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=HU>=155?Math.PI:1,ambient:d=.5,...p},m)=>{const v=I.useRef(null),y=new W(...a).length(),_=I.useContext(ZU),g=I.useCallback(()=>{let S;if(v.current)for(let A=0;A<v.current.children.length;A++)if(S=v.current.children[A],Math.random()>d)S.position.set(a[0]+Hd.randFloatSpread(l),a[1]+Hd.randFloatSpread(l),a[2]+Hd.randFloatSpread(l));else{let b=Math.acos(2*Math.random()-1)-Math.PI/2,M=2*Math.PI*Math.random();S.position.set(Math.cos(b)*Math.cos(M)*y,Math.abs(Math.cos(b)*Math.sin(M)*y),Math.sin(b)*y)}},[l,d,y,...a]),x=I.useMemo(()=>({update:g}),[g]);return I.useImperativeHandle(m,()=>x,[x]),I.useLayoutEffect(()=>{var S;const A=v.current;return _&&((S=_.lights)==null||S.set(A.uuid,x)),()=>{var b;return void(_==null||(b=_.lights)==null?void 0:b.delete(A.uuid))}},[_,x]),I.createElement("group",sn({ref:v},p),Array.from({length:c},(S,A)=>I.createElement("directionalLight",{key:A,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:u/c},I.createElement("orthographicCamera",{attach:"shadow-camera",args:[-r,r,r,-r,i,s]}))))});class oZ{constructor(e,t,r=1024){this.renderer=e,this.res=r,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new tt,this.clearAlpha=0;const i={type:si,magFilter:Cn,minFilter:Cn};this.progressiveLightMap1=new Wn(this.res,this.res,i),this.progressiveLightMap2=new Wn(this.res,this.res,i),this.discardMat=new VK,this.targetMat=new AT({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{nZ(e)?this.meshes.push({object:e,material:e.material}):tZ(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const r=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,i=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(r),this.previousShadowMap.value=i.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const aZ={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function lZ({radius:n,adjustCamera:e}){const t=jK();return I.useEffect(()=>{e&&t.refresh().clip().fit()},[n,e]),null}function cZ({children:n,center:e,adjustCamera:t=!0,intensity:r=.5,shadows:i="contact",environment:s="city",preset:o="rembrandt",...a}){var l,c,u,d,p,m,v,y;const _=typeof o=="string"?aZ[o]:o,[{radius:g,height:x},S]=I.useState({radius:0,width:0,height:0,depth:0}),A=(l=i==null?void 0:i.bias)!==null&&l!==void 0?l:-1e-4,b=(c=i==null?void 0:i.normalBias)!==null&&c!==void 0?c:0,M=(u=i==null?void 0:i.size)!==null&&u!==void 0?u:1024,C=(d=i==null?void 0:i.offset)!==null&&d!==void 0?d:0,B=i==="contact"||(i==null?void 0:i.type)==="contact",T=i==="accumulative"||(i==null?void 0:i.type)==="accumulative",P={...typeof i=="object"?i:{}},N=s?typeof s=="string"?{preset:s}:s:null,z=I.useCallback(q=>{const{width:G,height:Y,depth:ee,boundingSphere:te}=q;S({radius:te.radius,width:G,height:Y,depth:ee}),e!=null&&e.onCentered&&e.onCentered(q)},[]);return I.createElement(I.Fragment,null,I.createElement("ambientLight",{intensity:r/3}),I.createElement("spotLight",{penumbra:1,position:[_.main[0]*g,_.main[1]*g,_.main[2]*g],intensity:r*2,castShadow:!!i,"shadow-bias":A,"shadow-normalBias":b,"shadow-mapSize":M}),I.createElement("pointLight",{position:[_.fill[0]*g,_.fill[1]*g,_.fill[2]*g],intensity:r}),I.createElement(XK,sn({fit:!!t,clip:!!t,margin:Number(t),observe:!0},a),I.createElement(lZ,{radius:g,adjustCamera:t}),I.createElement(jU,sn({},e,{position:[0,C/2,0],onCentered:z}),n)),I.createElement("group",{position:[0,-x/2-C/2,0]},B&&I.createElement(eZ,sn({scale:g*4,far:g,blur:2},P)),T&&I.createElement(iZ,sn({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:g*4},P),I.createElement(sZ,{amount:(p=P.amount)!==null&&p!==void 0?p:8,radius:(m=P.radius)!==null&&m!==void 0?m:g,ambient:(v=P.ambient)!==null&&v!==void 0?v:.5,intensity:(y=P.intensity)!==null&&y!==void 0?y:1,position:[_.main[0]*g,_.main[1]*g,_.main[2]*g],size:g*4,bias:-A,mapSize:M}))),s&&I.createElement(qK,N))}var QU={exports:{}},uZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fZ=uZ,dZ=fZ;function qU(){}function ek(){}ek.resetWarningCache=qU;var hZ=function(){function n(r,i,s,o,a,l){if(l!==dZ){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ek,resetWarningCache:qU};return t.PropTypes=t,t};QU.exports=hZ();var pZ=QU.exports;const Ln=Bc(pZ);function Wa(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tk(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Us={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ph={duration:.5,overwrite:!1,delay:0},YT,Ti,mr,mo=1e8,Bn=1/mo,eM=Math.PI*2,mZ=eM/4,gZ=0,nk=Math.sqrt,vZ=Math.cos,yZ=Math.sin,ti=function(e){return typeof e=="string"},gr=function(e){return typeof e=="function"},pl=function(e){return typeof e=="number"},JT=function(e){return typeof e>"u"},Ma=function(e){return typeof e=="object"},ps=function(e){return e!==!1},KT=function(){return typeof window<"u"},ey=function(e){return gr(e)||ti(e)},rk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ci=Array.isArray,tM=/(?:-?\.?\d|\.)+/gi,ik=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Rd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,OE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,sk=/[+-]=-?[.\d]+/,ok=/[^,'"\[\]\s]+/gi,_Z=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rr,oo,nM,ZT,Gs={},P_={},ak,lk=function(e){return(P_=rf(e,Gs))&&ys},QT=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},og=function(e,t){return!t&&console.warn(e)},ck=function(e,t){return e&&(Gs[e]=t)&&P_&&(P_[e]=t)||Gs},ag=function(){return 0},xZ={suppressEvents:!0,isStart:!0,kill:!1},zy={suppressEvents:!0,kill:!1},SZ={suppressEvents:!0},qT={},pc=[],rM={},uk,Cs={},FE={},UI=30,Hy=[],eC="",tC=function(e){var t=e[0],r,i;if(Ma(t)||gr(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Hy.length;i--&&!Hy[i].targetTest(t););r=Hy[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Lk(e[i],r)))||e.splice(i,1);return e},Fu=function(e){return e._gsap||tC(go(e))[0]._gsap},fk=function(e,t,r){return(r=e[t])&&gr(r)?e[t]():JT(r)&&e.getAttribute&&e.getAttribute(t)||r},ms=function(e,t){return(e=e.split(",")).forEach(t)||e},Er=function(e){return Math.round(e*1e5)/1e5||0},Jr=function(e){return Math.round(e*1e7)/1e7||0},Wd=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},EZ=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},B_=function(){var e=pc.length,t=pc.slice(0),r,i;for(rM={},pc.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},dk=function(e,t,r,i){pc.length&&!Ti&&B_(),e.render(t,r,i||Ti&&t<0&&(e._initted||e._startAt)),pc.length&&!Ti&&B_()},hk=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(ok).length<2?t:ti(e)?e.trim():e},pk=function(e){return e},Eo=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},AZ=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},rf=function(e,t){for(var r in t)e[r]=t[r];return e},kI=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Ma(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},I_=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},pm=function(e){var t=e.parent||rr,r=e.keyframes?AZ(Ci(e.keyframes)):Eo;if(ps(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},wZ=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},mk=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Yx=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},wc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Nu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},MZ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},iM=function(e,t,r,i){return e._startAt&&(Ti?e._startAt.revert(zy):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},bZ=function n(e){return!e||e._ts&&n(e.parent)},zI=function(e){return e._repeat?mh(e._tTime,e=e.duration()+e._rDelay)*e:0},mh=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},D_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Jx=function(e){return e._end=Jr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Bn)||0))},Kx=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Jr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Jx(e),r._dirty||Nu(r,e)),e},gk=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=D_(e.rawTime(),t),(!t._dur||zg(0,t.totalDuration(),r)-t._tTime>Bn)&&t.render(r,!0)),Nu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Bn}},la=function(e,t,r,i){return t.parent&&wc(t),t._start=Jr((pl(r)?r:r||e!==rr?io(e,r,t):e._time)+t._delay),t._end=Jr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),mk(e,t,"_first","_last",e._sort?"_start":0),sM(t)||(e._recent=t),i||gk(e,t),e._ts<0&&Kx(e,e._tTime),e},vk=function(e,t){return(Gs.ScrollTrigger||QT("scrollTrigger",t))&&Gs.ScrollTrigger.create(t,e)},yk=function(e,t,r,i,s){if(rC(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Ti&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&uk!==Bs.frame)return pc.push(e),e._lazy=[s,i],1},TZ=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},sM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},CZ=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&TZ(e)&&!(!e._initted&&sM(e))||(e._ts<0||e._dp._ts<0)&&!sM(e))?0:1,a=e._rDelay,l=0,c,u,d;if(a&&e._repeat&&(l=zg(0,e._tDur,t),u=mh(l,a),e._yoyo&&u&1&&(o=1-o),u!==mh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ti||i||e._zTime===Bn||!t&&e._zTime){if(!e._initted&&yk(e,t,i,r,l))return;for(d=e._zTime,e._zTime=t||(r?Bn:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&iM(e,t,r,!0),e._onUpdate&&!r&&Os(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Os(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&wc(e,1),!r&&!Ti&&(Os(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},RZ=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},gh=function(e,t,r,i){var s=e._repeat,o=Jr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Jr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Kx(e,e._tTime=e._tDur*a),e.parent&&Jx(e),r||Nu(e.parent,e),e},HI=function(e){return e instanceof ji?Nu(e):gh(e,e._dur)},PZ={_start:0,endTime:ag,totalDuration:ag},io=function n(e,t,r){var i=e.labels,s=e._recent||PZ,o=e.duration()>=mo?s.endTime(!1):e._dur,a,l,c;return ti(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(Ci(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},mm=function(e,t,r){var i=pl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ps(l.vars.inherit)&&l.parent;o.immediateRender=ps(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Cr(t[0],o,t[s+1])},kc=function(e,t){return e||e===0?t(e):t},zg=function(e,t,r){return r<e?e:r>t?t:r},Ai=function(e,t){return!ti(e)||!(t=_Z.exec(e))?"":t[1]},BZ=function(e,t,r){return kc(r,function(i){return zg(e,t,i)})},oM=[].slice,_k=function(e,t){return e&&Ma(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ma(e[0]))&&!e.nodeType&&e!==oo},IZ=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return ti(i)&&!t||_k(i,1)?(s=r).push.apply(s,go(i)):r.push(i)})||r},go=function(e,t,r){return mr&&!t&&mr.selector?mr.selector(e):ti(e)&&!r&&(nM||!vh())?oM.call((t||ZT).querySelectorAll(e),0):Ci(e)?IZ(e,r):_k(e)?oM.call(e,0):e?[e]:[]},aM=function(e){return e=go(e)[0]||og("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return go(t,r.querySelectorAll?r:r===e?og("Invalid scope")||ZT.createElement("div"):e)}},xk=function(e){return e.sort(function(){return .5-Math.random()})},Sk=function(e){if(gr(e))return e;var t=Ma(e)?e:{each:e},r=Uu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,d=i;return ti(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],d=i[1]),function(p,m,v){var y=(v||t).length,_=o[y],g,x,S,A,b,M,C,B,T;if(!_){if(T=t.grid==="auto"?0:(t.grid||[1,mo])[1],!T){for(C=-mo;C<(C=v[T++].getBoundingClientRect().left)&&T<y;);T<y&&T--}for(_=o[y]=[],g=l?Math.min(T,y)*u-.5:i%T,x=T===mo?0:l?y*d/T-.5:i/T|0,C=0,B=mo,M=0;M<y;M++)S=M%T-g,A=x-(M/T|0),_[M]=b=c?Math.abs(c==="y"?A:S):nk(S*S+A*A),b>C&&(C=b),b<B&&(B=b);i==="random"&&xk(_),_.max=C-B,_.min=B,_.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(T>y?y-1:c?c==="y"?y/T:T:Math.max(T,y/T))||0)*(i==="edges"?-1:1),_.b=y<0?s-y:s,_.u=Ai(t.amount||t.each)||0,r=r&&y<0?Bk(r):r}return y=(_[p]-_.min)/_.max||0,Jr(_.b+(r?r(y):y)*_.v)+_.u}},lM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Jr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(pl(r)?0:Ai(r))}},Ek=function(e,t){var r=Ci(e),i,s;return!r&&Ma(e)&&(i=r=e.radius||mo,e.values?(e=go(e.values),(s=!pl(e[0]))&&(i*=i)):e=lM(e.increment)),kc(t,r?gr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=mo,u=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<c&&(c=p,u=d);return u=!i||c<=i?e[u]:o,s||u===o||pl(o)?u:u+Ai(o)}:lM(e))},Ak=function(e,t,r,i){return kc(Ci(e)?!t:r===!0?!!(r=0):!i,function(){return Ci(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},DZ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},LZ=function(e,t){return function(r){return e(parseFloat(r))+(t||Ai(r))}},OZ=function(e,t,r){return Mk(e,t,0,1,r)},wk=function(e,t,r){return kc(r,function(i){return e[~~t(i)]})},FZ=function n(e,t,r){var i=t-e;return Ci(e)?wk(e,n(0,e.length),t):kc(r,function(s){return(i+(s-e)%i)%i+e})},NZ=function n(e,t,r){var i=t-e,s=i*2;return Ci(e)?wk(e,n(0,e.length-1),t):kc(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},lg=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?ok:tM),r+=e.substr(t,i-t)+Ak(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},Mk=function(e,t,r,i,s){var o=t-e,a=i-r;return kc(s,function(l){return r+((l-e)/o*a||0)})},UZ=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=ti(e),a={},l,c,u,d,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Ci(e)&&!Ci(t)){for(u=[],d=e.length,p=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(v){v*=d;var y=Math.min(p,~~v);return u[y](v-y)},r=t}else i||(e=rf(Ci(e)?[]:{},e));if(!u){for(l in t)nC.call(a,e,l,"get",t[l]);s=function(v){return oC(v,a)||(o?e.p:e)}}}return kc(r,s)},GI=function(e,t,r){var i=e.labels,s=mo,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Os=function(e,t,r){var i=e.vars,s=i[t],o=mr,a=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&pc.length&&B_(),a&&(mr=a),u=l?s.apply(c,l):s.call(c),mr=o,u},jp=function(e){return wc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ti),e.progress()<1&&Os(e,"onInterrupt"),e},Pd,bk=[],Tk=function(e){if(KT()&&e){e=!e.name&&e.default||e;var t=e.name,r=gr(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:ag,render:oC,add:nC,kill:eQ,modifier:qZ,rawVars:0},o={targetTest:0,get:0,getSetter:sC,aliases:{},register:0};if(vh(),e!==i){if(Cs[t])return;Eo(i,Eo(I_(e,s),o)),rf(i.prototype,rf(s,I_(e,o))),Cs[i.prop=t]=i,e.targetTest&&(Hy.push(i),qT[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ck(t,i),e.register&&e.register(ys,i,gs)}else e&&bk.push(e)},Pn=255,Yp={aqua:[0,Pn,Pn],lime:[0,Pn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Pn],navy:[0,0,128],white:[Pn,Pn,Pn],olive:[128,128,0],yellow:[Pn,Pn,0],orange:[Pn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Pn,0,0],pink:[Pn,192,203],cyan:[0,Pn,Pn],transparent:[Pn,Pn,Pn,0]},NE=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Pn+.5|0},Ck=function(e,t,r){var i=e?pl(e)?[e>>16,e>>8&Pn,e&Pn]:0:Yp.black,s,o,a,l,c,u,d,p,m,v;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Yp[e])i=Yp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Pn,i&Pn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Pn,e&Pn]}else if(e.substr(0,3)==="hsl"){if(i=v=e.match(tM),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,i.length>3&&(i[3]*=1),i[0]=NE(l+1/3,s,o),i[1]=NE(l,s,o),i[2]=NE(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(ik),r&&i.length<4&&(i[3]=1),i}else i=e.match(tM)||Yp.transparent;i=i.map(Number)}return t&&!v&&(s=i[0]/Pn,o=i[1]/Pn,a=i[2]/Pn,d=Math.max(s,o,a),p=Math.min(s,o,a),u=(d+p)/2,d===p?l=c=0:(m=d-p,c=u>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},Rk=function(e){var t=[],r=[],i=-1;return e.split(mc).forEach(function(s){var o=s.match(Rd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},VI=function(e,t,r){var i="",s=(e+i).match(mc),o=t?"hsla(":"rgba(",a=0,l,c,u,d;if(!s)return e;if(s=s.map(function(p){return(p=Ck(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(u=Rk(e),l=r.c,l.join(i)!==u.c.join(i)))for(c=e.replace(mc,"1").split(Rd),d=c.length-1;a<d;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(c=e.split(mc),d=c.length-1;a<d;a++)i+=c[a]+s[a];return i+c[d]},mc=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Yp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),kZ=/hsl[a]?\(/,Pk=function(e){var t=e.join(" "),r;if(mc.lastIndex=0,mc.test(t))return r=kZ.test(t),e[1]=VI(e[1],r),e[0]=VI(e[0],r,Rk(e[1])),!0},cg,Bs=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,c,u,d,p,m,v=function y(_){var g=n()-i,x=_===!0,S,A,b,M;if(g>e&&(r+=g-t),i+=g,b=i-r,S=b-o,(S>0||x)&&(M=++d.frame,p=b-d.time*1e3,d.time=b=b/1e3,o+=S+(S>=s?4:s-S),A=1),x||(l=c(y)),A)for(m=0;m<a.length;m++)a[m](b,p,M,_)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(_){return p/(1e3/(_||60))},wake:function(){ak&&(!nM&&KT()&&(oo=nM=window,ZT=oo.document||{},Gs.gsap=ys,(oo.gsapVersions||(oo.gsapVersions=[])).push(ys.version),lk(P_||oo.GreenSockGlobals||!oo.gsap&&oo||{}),u=oo.requestAnimationFrame,bk.forEach(Tk)),l&&d.sleep(),c=u||function(_){return setTimeout(_,o-d.time*1e3+1|0)},cg=1,v(2))},sleep:function(){(u?oo.cancelAnimationFrame:clearTimeout)(l),cg=0,c=ag},lagSmoothing:function(_,g){e=_||1/0,t=Math.min(g||33,e)},fps:function(_){s=1e3/(_||240),o=d.time*1e3+s},add:function(_,g,x){var S=g?function(A,b,M,C){_(A,b,M,C),d.remove(S)}:_;return d.remove(_),a[x?"unshift":"push"](S),vh(),S},remove:function(_,g){~(g=a.indexOf(_))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},d}(),vh=function(){return!cg&&Bs.wake()},un={},zZ=/^[\d.\-M][\d.\-,\s]/,HZ=/["']/g,GZ=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(HZ,"").trim():+c,i=l.substr(a+1).trim();return t},VZ=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},WZ=function(e){var t=(e+"").split("("),r=un[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[GZ(t[1])]:VZ(e).split(",").map(hk)):un._CE&&zZ.test(e)?un._CE("",e):r},Bk=function(e){return function(t){return 1-e(1-t)}},Ik=function n(e,t){for(var r=e._first,i;r;)r instanceof ji?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Uu=function(e,t){return e&&(gr(e)?e:un[e]||WZ(e))||t},yf=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return ms(e,function(a){un[a]=Gs[a]=s,un[o=a.toLowerCase()]=r;for(var l in s)un[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=un[a+"."+l]=s[l]}),s},Dk=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},UE=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/eM*(Math.asin(1/i)||0),a=function(u){return u===1?1:i*Math.pow(2,-10*u)*yZ((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Dk(a);return s=eM/s,l.config=function(c,u){return n(e,c,u)},l},kE=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:Dk(r);return i.config=function(s){return n(e,s)},i};ms("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;yf(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});un.Linear.easeNone=un.none=un.Linear.easeIn;yf("Elastic",UE("in"),UE("out"),UE());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};yf("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);yf("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});yf("Circ",function(n){return-(nk(1-n*n)-1)});yf("Sine",function(n){return n===1?1:-vZ(n*mZ)+1});yf("Back",kE("in"),kE("out"),kE());un.SteppedEase=un.steps=Gs.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Bn;return function(a){return((i*zg(0,o,a)|0)+s)*r}}};ph.ease=un["quad.out"];ms("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return eC+=n+","+n+"Params,"});var Lk=function(e,t){this.id=gZ++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:fk,this.set=t?t.getSetter:sC},ug=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,gh(this,+t.duration,1,1),this.data=t.data,mr&&(this._ctx=mr,mr.data.push(this)),cg||Bs.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,gh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(vh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Kx(this,r),!s._dp||s.parent||gk(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&la(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Bn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),dk(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+zI(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+zI(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?mh(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Bn?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?D_(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Bn?0:this._rts,this.totalTime(zg(-Math.abs(this._delay),this._tDur,s),i!==!1),Jx(this),MZ(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(vh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Bn&&(this._tTime-=Bn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&la(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(ps(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?D_(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=SZ);var i=Ti;return Ti=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ti=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,HI(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,HI(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(io(this,r),ps(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,ps(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Bn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Bn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Bn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=gr(r)?r:pk,a=function(){var c=i.then;i.then=null,gr(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){jp(this)},n}();Eo(ug.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Bn,_prom:0,_ps:!1,_rts:1});var ji=function(n){tk(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=ps(r.sortChildren),rr&&la(r.parent||rr,Wa(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&vk(Wa(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return mm(0,arguments,this),this},t.from=function(i,s,o){return mm(1,arguments,this),this},t.fromTo=function(i,s,o,a){return mm(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,pm(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Cr(i,s,io(this,o),1),this},t.call=function(i,s,o){return la(this,Cr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Cr(i,o,io(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,pm(o).immediateRender=ps(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,d){return a.startAt=o,pm(a).immediateRender=ps(a.immediateRender),this.staggerTo(i,s,a,l,c,u,d)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:Jr(i),d=this._zTime<0!=i<0&&(this._initted||!c),p,m,v,y,_,g,x,S,A,b,M,C;if(this!==rr&&u>l&&i>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),p=u,A=this._start,S=this._ts,g=!S,d&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,_=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(_*100+i,s,o);if(p=Jr(u%_),u===l?(y=this._repeat,p=c):(y=~~(u/_),y&&y===u/_&&(p=c,y--),p>c&&(p=c)),b=mh(this._tTime,_),!a&&this._tTime&&b!==y&&this._tTime-b*_-this._dur<=0&&(b=y),M&&y&1&&(p=c-p,C=1),y!==b&&!this._lock){var B=M&&b&1,T=B===(M&&y&1);if(y<b&&(B=!B),a=B?0:u%c?c:u,this._lock=1,this.render(a||(C?0:Jr(y*_)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Os(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,T&&(this._lock=2,a=B?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;Ik(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=RZ(this,Jr(a),Jr(p)),x&&(u-=p-(p=x._start))),this._tTime=u,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&p&&!s&&!y&&(Os(this,"onStart"),this._tTime!==u))return this;if(p>=a&&i>=0)for(m=this._first;m;){if(v=m._next,(m._act||p>=m._start)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=-Bn);break}}m=v}else{m=this._last;for(var P=i<0?i:p;m;){if(v=m._prev,(m._act||P<=m._end)&&m._ts&&x!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(P-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(P-m._start)*m._ts,s,o||Ti&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=P?-Bn:Bn);break}}m=v}}if(x&&!s&&(this.pause(),x.render(p>=a?0:-Bn)._zTime=p>=a?1:-1,this._ts))return this._start=A,Jx(this),this.render(i,s,o);this._onUpdate&&!s&&Os(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(A===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&wc(this,1),!s&&!(i<0&&!a)&&(u||a||!l)&&(Os(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(pl(s)||(s=io(this,s,i)),!(i instanceof ug)){if(Ci(i))return i.forEach(function(a){return o.add(a,s)}),this;if(ti(i))return this.addLabel(i,s);if(gr(i))i=Cr.delayedCall(0,i);else return this}return this!==i?la(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-mo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Cr?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return ti(i)?this.removeLabel(i):gr(i)?this.killTweensOf(i):(Yx(this,i),i===this._recent&&(this._recent=this._last),Nu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Jr(Bs.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=io(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Cr.delayedCall(0,s||ag,o);return a.data="isPause",this._hasPause=1,la(this,a,io(this,i))},t.removePause=function(i){var s=this._first;for(i=io(this,i);s;)s._start===i&&s.data==="isPause"&&wc(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)ec!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=go(i),l=this._first,c=pl(s),u;l;)l instanceof Cr?EZ(l._targets,a)&&(c?(!ec||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=io(o,i),l=s,c=l.startAt,u=l.onStart,d=l.onStartParams,p=l.immediateRender,m,v=Cr.to(o,Eo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Bn,onStart:function(){if(o.pause(),!m){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==_&&gh(v,_,0,1).render(v._time,!0,!0),m=1}u&&u.apply(v,d||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Eo({startAt:{time:io(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),GI(this,io(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),GI(this,io(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Bn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return Nu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Nu(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=mo,c,u,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,la(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;gh(o,o===rr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(rr._ts&&(dk(rr,D_(i,rr)),uk=Bs.frame),Bs.frame>=UI){UI+=Us.autoSleep||120;var s=rr._first;if((!s||!s._ts)&&Us.autoSleep&&Bs._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Bs.sleep()}}},e}(ug);Eo(ji.prototype,{_lock:0,_hasPause:0,_forcing:0});var $Z=function(e,t,r,i,s,o,a){var l=new gs(this._pt,e,t,0,1,zk,null,s),c=0,u=0,d,p,m,v,y,_,g,x;for(l.b=r,l.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=lg(i)),o&&(x=[r,i],o(x,e,t),r=x[0],i=x[1]),p=r.match(OE)||[];d=OE.exec(i);)v=d[0],y=i.substring(c,d.index),m?m=(m+1)%5:y.substr(-5)==="rgba("&&(m=1),v!==p[u++]&&(_=parseFloat(p[u-1])||0,l._pt={_next:l._pt,p:y||u===1?y:",",s:_,c:v.charAt(1)==="="?Wd(_,v)-_:parseFloat(v)-_,m:m&&m<4?Math.round:0},c=OE.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(sk.test(i)||g)&&(l.e=0),this._pt=l,l},nC=function(e,t,r,i,s,o,a,l,c,u){gr(i)&&(i=i(s||0,e,o));var d=e[t],p=r!=="get"?r:gr(d)?c?e[t.indexOf("set")||!gr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,m=gr(d)?c?KZ:Uk:iC,v;if(ti(i)&&(~i.indexOf("random(")&&(i=lg(i)),i.charAt(1)==="="&&(v=Wd(p,i)+(Ai(p)||0),(v||v===0)&&(i=v))),!u||p!==i||cM)return!isNaN(p*i)&&i!==""?(v=new gs(this._pt,e,t,+p||0,i-(p||0),typeof d=="boolean"?QZ:kk,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&QT(t,i),$Z.call(this,e,t,p,i,m,l||Us.stringFilter,c))},XZ=function(e,t,r,i,s){if(gr(e)&&(e=gm(e,s,t,r,i)),!Ma(e)||e.style&&e.nodeType||Ci(e)||rk(e))return ti(e)?gm(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=gm(e[a],s,t,r,i);return o},Ok=function(e,t,r,i,s,o){var a,l,c,u;if(Cs[e]&&(a=new Cs[e]).init(s,a.rawVars?t[e]:XZ(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new gs(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Pd))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},ec,cM,rC=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,p=i.keyframes,m=i.autoRevert,v=e._dur,y=e._startAt,_=e._targets,g=e.parent,x=g&&g.data==="nested"?g.vars.targets:_,S=e._overwrite==="auto"&&!YT,A=e.timeline,b,M,C,B,T,P,N,z,q,G,Y,ee,te;if(A&&(!p||!s)&&(s="none"),e._ease=Uu(s,ph.ease),e._yEase=d?Bk(Uu(d===!0?s:d,ph.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!A&&!!i.runBackwards,!A||p&&!i.stagger){if(z=_[0]?Fu(_[0]).harness:0,ee=z&&i[z.prop],b=I_(i,qT),y&&(y._zTime<0&&y.progress(1),t<0&&u&&a&&!m?y.render(-1,!0):y.revert(u&&v?zy:xZ),y._lazy=0),o){if(wc(e._startAt=Cr.set(_,Eo({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!y&&ps(l),startAt:null,delay:0,onUpdate:c&&function(){return Os(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ti||!a&&!m)&&e._startAt.revert(zy),a&&v&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(u&&v&&!y){if(t&&(a=!1),C=Eo({overwrite:!1,data:"isFromStart",lazy:a&&!y&&ps(l),immediateRender:a,stagger:0,parent:g},b),ee&&(C[z.prop]=ee),wc(e._startAt=Cr.set(_,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ti?e._startAt.revert(zy):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Bn,Bn);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&ps(l)||l&&!v,M=0;M<_.length;M++){if(T=_[M],N=T._gsap||tC(_)[M]._gsap,e._ptLookup[M]=G={},rM[N.id]&&pc.length&&B_(),Y=x===_?M:x.indexOf(T),z&&(q=new z).init(T,ee||b,e,Y,x)!==!1&&(e._pt=B=new gs(e._pt,T,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(V){G[V]=B}),q.priority&&(P=1)),!z||ee)for(C in b)Cs[C]&&(q=Ok(C,b,e,Y,T,x))?q.priority&&(P=1):G[C]=B=nC.call(e,T,C,"get",b[C],Y,x,0,i.stringFilter);e._op&&e._op[M]&&e.kill(T,e._op[M]),S&&e._pt&&(ec=e,rr.killTweensOf(T,G,e.globalTime(t)),te=!e.parent,ec=0),e._pt&&l&&(rM[N.id]=1)}P&&Hk(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!te,p&&t<=0&&A.render(mo,!0,!0)},jZ=function(e,t,r,i,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(u=p[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return cM=1,e.vars[t]="+=0",rC(e,a),cM=0,l?og(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)d=c[m],u=d._pt||d,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,d.e&&(d.e=Er(r)+Ai(d.e)),d.b&&(d.b=u.s+Ai(d.b))},YZ=function(e,t){var r=e[0]?Fu(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=rf({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},JZ=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Ci(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},gm=function(e,t,r,i,s){return gr(e)?e.call(t,r,i,s):ti(e)&&~e.indexOf("random(")?lg(e):e},Fk=eC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Nk={};ms(Fk+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Nk[n]=1});var Cr=function(n){tk(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:pm(i))||this;var l=a.vars,c=l.duration,u=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,v=l.keyframes,y=l.defaults,_=l.scrollTrigger,g=l.yoyoEase,x=i.parent||rr,S=(Ci(r)||rk(r)?pl(r[0]):"length"in i)?[r]:go(r),A,b,M,C,B,T,P,N;if(a._targets=S.length?tC(S):og("GSAP target "+r+" not found. https://gsap.com",!Us.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||p||ey(c)||ey(u)){if(i=a.vars,A=a.timeline=new ji({data:"nested",defaults:y||{},targets:x&&x.data==="nested"?x.vars.targets:S}),A.kill(),A.parent=A._dp=Wa(a),A._start=0,p||ey(c)||ey(u)){if(C=S.length,P=p&&Sk(p),Ma(p))for(B in p)~Fk.indexOf(B)&&(N||(N={}),N[B]=p[B]);for(b=0;b<C;b++)M=I_(i,Nk),M.stagger=0,g&&(M.yoyoEase=g),N&&rf(M,N),T=S[b],M.duration=+gm(c,Wa(a),b,T,S),M.delay=(+gm(u,Wa(a),b,T,S)||0)-a._delay,!p&&C===1&&M.delay&&(a._delay=u=M.delay,a._start+=u,M.delay=0),A.to(T,M,P?P(b,T,S):0),A._ease=un.none;A.duration()?c=u=0:a.timeline=0}else if(v){pm(Eo(A.vars.defaults,{ease:"none"})),A._ease=Uu(v.ease||i.ease||"none");var z=0,q,G,Y;if(Ci(v))v.forEach(function(ee){return A.to(S,ee,">")}),A.duration();else{M={};for(B in v)B==="ease"||B==="easeEach"||JZ(B,v[B],M,v.easeEach);for(B in M)for(q=M[B].sort(function(ee,te){return ee.t-te.t}),z=0,b=0;b<q.length;b++)G=q[b],Y={ease:G.e,duration:(G.t-(b?q[b-1].t:0))/100*c},Y[B]=G.v,A.to(S,Y,z),z+=Y.duration;A.duration()<c&&A.to({},{duration:c-A.duration()})}}c||a.duration(c=A.duration())}else a.timeline=0;return m===!0&&!YT&&(ec=Wa(a),rr.killTweensOf(S),ec=0),la(x,Wa(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(d||!c&&!v&&a._start===Jr(x._time)&&ps(d)&&bZ(Wa(a))&&x.data!=="nested")&&(a._tTime=-Bn,a.render(Math.max(0,-u)||0)),_&&vk(Wa(a),_),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,u=i<0,d=i>l-Bn&&!u?l:i<Bn?0:i,p,m,v,y,_,g,x,S,A;if(!c)CZ(this,i,s,o);else if(d!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=d,S=this.timeline,this._repeat){if(y=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(y*100+i,s,o);if(p=Jr(d%y),d===l?(v=this._repeat,p=c):(v=~~(d/y),v&&v===Jr(d/y)&&(p=c,v--),p>c&&(p=c)),g=this._yoyo&&v&1,g&&(A=this._yEase,p=c-p),_=mh(this._tTime,y),p===a&&!o&&this._initted&&v===_)return this._tTime=d,this;v!==_&&(S&&this._yEase&&Ik(S,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==c&&this._initted&&(this._lock=o=1,this.render(Jr(y*v),!0).invalidate()._lock=0))}if(!this._initted){if(yk(this,u?i:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==_))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(A||this._ease)(p/c),this._from&&(this.ratio=x=1-x),p&&!a&&!s&&!v&&(Os(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(x,m.d),m=m._next;S&&S.render(i<0?i:!p&&g?-Bn:S._dur*S._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&iM(this,i,s,o),Os(this,"onUpdate")),this._repeat&&v!==_&&this.vars.onRepeat&&!s&&this.parent&&Os(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&iM(this,i,!0,!0),(i||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&wc(this,1),!s&&!(u&&!a)&&(d||a||g)&&(Os(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){cg||Bs.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||rC(this,c),u=this._ease(c/this._dur),jZ(this,i,s,o,a,u,c,l)?this.resetTo(i,s,o,a,1):(Kx(this,0),this.parent||mk(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?jp(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,ec&&ec.vars.overwrite!==!0)._first||jp(this),this.parent&&o!==this.timeline.totalDuration()&&gh(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?go(i):a,c=this._ptLookup,u=this._pt,d,p,m,v,y,_,g;if((!s||s==="all")&&wZ(a,l))return s==="all"&&(this._pt=0),jp(this);for(d=this._op=this._op||[],s!=="all"&&(ti(s)&&(y={},ms(s,function(x){return y[x]=1}),s=y),s=YZ(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){p=c[g],s==="all"?(d[g]=s,v=p,m={}):(m=d[g]=d[g]||{},v=s);for(y in v)_=p&&p[y],_&&((!("kill"in _.d)||_.d.kill(y)===!0)&&Yx(this,_,"_pt"),delete p[y]),m!=="all"&&(m[y]=1)}return this._initted&&!this._pt&&u&&jp(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return mm(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return mm(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return rr.killTweensOf(i,s,o)},e}(ug);Eo(Cr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ms("staggerTo,staggerFrom,staggerFromTo",function(n){Cr[n]=function(){var e=new ji,t=oM.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var iC=function(e,t,r){return e[t]=r},Uk=function(e,t,r){return e[t](r)},KZ=function(e,t,r,i){return e[t](i.fp,r)},ZZ=function(e,t,r){return e.setAttribute(t,r)},sC=function(e,t){return gr(e[t])?Uk:JT(e[t])&&e.setAttribute?ZZ:iC},kk=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},QZ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},zk=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},oC=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},qZ=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},eQ=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Yx(this,t,"_pt"):t.dep||(r=1),t=i;return!r},tQ=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},Hk=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},gs=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||kk,this.d=l||this,this.set=c||iC,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=tQ,this.m=r,this.mt=s,this.tween=i},n}();ms(eC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return qT[n]=1});Gs.TweenMax=Gs.TweenLite=Cr;Gs.TimelineLite=Gs.TimelineMax=ji;rr=new ji({sortChildren:!1,defaults:ph,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Us.stringFilter=Pk;var ku=[],Gy={},nQ=[],WI=0,rQ=0,zE=function(e){return(Gy[e]||nQ).map(function(t){return t()})},uM=function(){var e=Date.now(),t=[];e-WI>2&&(zE("matchMediaInit"),ku.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=oo.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),zE("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),WI=e,zE("matchMedia"))},Gk=function(){function n(t,r){this.selector=r&&aM(r),this.data=[],this._r=[],this.isReverted=!1,this.id=rQ++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){gr(r)&&(s=i,i=r,r=gr);var o=this,a=function(){var c=mr,u=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=aM(s)),mr=o,d=i.apply(o,arguments),gr(d)&&o._r.push(d),mr=c,o.selector=u,o.isReverted=!1,d};return o.last=a,r===gr?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=mr;mr=null,r(this),mr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Cr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof ji?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Cr)&&c.revert&&c.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=ku.length;o--;)ku[o].id===this.id&&ku.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),iQ=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Ma(r)||(r={matches:r});var o=new Gk(0,s||this.scope),a=o.conditions={},l,c,u;mr&&!o.selector&&(o.selector=mr.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?u=1:(l=oo.matchMedia(r[c]),l&&(ku.indexOf(o)<0&&ku.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(uM):l.addEventListener("change",uM)));return u&&i(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),L_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return Tk(i)})},timeline:function(e){return new ji(e)},getTweensOf:function(e,t){return rr.getTweensOf(e,t)},getProperty:function(e,t,r,i){ti(e)&&(e=go(e)[0]);var s=Fu(e||{}).get,o=r?pk:hk;return r==="native"&&(r=""),e&&(t?o((Cs[t]&&Cs[t].get||s)(e,t,r,i)):function(a,l,c){return o((Cs[a]&&Cs[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if(e=go(e),e.length>1){var i=e.map(function(u){return ys.quickSetter(u,t,r)}),s=i.length;return function(u){for(var d=s;d--;)i[d](u)}}e=e[0]||{};var o=Cs[t],a=Fu(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;Pd._pt=0,d.init(e,r?u+r:u,Pd,0,[e]),d.render(1,d),Pd._pt&&oC(1,Pd)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=ys.to(e,rf((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return rr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Uu(e.ease,ph.ease)),kI(ph,e||{})},config:function(e){return kI(Us,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Cs[a]&&!Gs[a]&&og(t+" effect requires "+a+" plugin.")}),FE[t]=function(a,l,c){return r(go(a),Eo(l||{},s),c)},o&&(ji.prototype[t]=function(a,l,c){return this.add(FE[t](a,Ma(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){un[e]=Uu(t)},parseEase:function(e,t){return arguments.length?Uu(e,t):un},getById:function(e){return rr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new ji(e),i,s;for(r.smoothChildTiming=ps(e.smoothChildTiming),rr.remove(r),r._dp=0,r._time=r._tTime=rr._time,i=rr._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Cr&&i.vars.onComplete===i._targets[0]))&&la(r,i,i._start-i._delay),i=s;return la(rr,r,0),r},context:function(e,t){return e?new Gk(e,t):mr},matchMedia:function(e){return new iQ(e)},matchMediaRefresh:function(){return ku.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||uM()},addEventListener:function(e,t){var r=Gy[e]||(Gy[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Gy[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:FZ,wrapYoyo:NZ,distribute:Sk,random:Ak,snap:Ek,normalize:OZ,getUnit:Ai,clamp:BZ,splitColor:Ck,toArray:go,selector:aM,mapRange:Mk,pipe:DZ,unitize:LZ,interpolate:UZ,shuffle:xk},install:lk,effects:FE,ticker:Bs,updateRoot:ji.updateRoot,plugins:Cs,globalTimeline:rr,core:{PropTween:gs,globals:ck,Tween:Cr,Timeline:ji,Animation:ug,getCache:Fu,_removeLinkedListItem:Yx,reverting:function(){return Ti},context:function(e){return e&&mr&&(mr.data.push(e),e._ctx=mr),mr},suppressOverwrites:function(e){return YT=e}}};ms("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return L_[n]=Cr[n]});Bs.add(ji.updateRoot);Pd=L_.to({},{duration:0});var sQ=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},oQ=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=sQ(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},HE=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(ti(s)&&(l={},ms(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}oQ(a,s)}}}},ys=L_.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Ti?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},HE("roundProps",lM),HE("modifiers"),HE("snap",Ek))||L_;Cr.version=ji.version=ys.version="3.12.4";ak=1;KT()&&vh();un.Power0;un.Power1;un.Power2;un.Power3;un.Power4;un.Linear;un.Quad;un.Cubic;un.Quart;un.Quint;un.Strong;un.Elastic;un.Back;un.SteppedEase;un.Bounce;un.Sine;un.Expo;un.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var $I,tc,$d,aC,Tu,XI,lC,aQ=function(){return typeof window<"u"},ml={},pu=180/Math.PI,Xd=Math.PI/180,id=Math.atan2,jI=1e8,cC=/([A-Z])/g,lQ=/(left|right|width|margin|padding|x)/i,cQ=/[\s,\(]\S/,fa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},uQ=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},fQ=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},dQ=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},Vk=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Wk=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},hQ=function(e,t,r){return e.style[t]=r},pQ=function(e,t,r){return e.style.setProperty(t,r)},mQ=function(e,t,r){return e._gsap[t]=r},gQ=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},vQ=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},yQ=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},sr="transform",vs=sr+"Origin",_Q=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in ml&&s){if(this.tfm=this.tfm||{},e!=="transform")e=fa[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=Ya(i,a)}):this.tfm[e]=o.x?o[e]:Ya(i,e),e===vs&&(this.tfm.zOrigin=o.zOrigin);else return fa.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(sr)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(vs,t,"")),e=sr}(s||t)&&this.props.push(e,t,s[e])},$k=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},xQ=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(cC,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=lC(),(!s||!s.isStart)&&!r[sr]&&($k(r),i.zOrigin&&r[vs]&&(r[vs]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Xk=function(e,t){var r={target:e,props:[],revert:xQ,save:_Q};return e._gsap||ys.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},jk,dM=function(e,t){var r=tc.createElementNS?tc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):tc.createElement(e);return r&&r.style?r:tc.createElement(e)},_a=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(cC,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,yh(t)||t,1)||""},YI="O,Moz,ms,Ms,Webkit".split(","),yh=function(e,t,r){var i=t||Tu,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(YI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?YI[o]:"")+e},hM=function(){aQ()&&window.document&&($I=window,tc=$I.document,$d=tc.documentElement,Tu=dM("div")||{style:{}},dM("div"),sr=yh(sr),vs=sr+"Origin",Tu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jk=!!yh("perspective"),lC=ys.core.reverting,aC=1)},GE=function n(e){var t=dM("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if($d.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),$d.removeChild(t),this.style.cssText=s,o},JI=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Yk=function(e){var t;try{t=e.getBBox()}catch{t=GE.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===GE||(t=GE.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+JI(e,["x","cx","x1"])||0,y:+JI(e,["y","cy","y1"])||0,width:0,height:0}:t},Jk=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Yk(e))},sf=function(e,t){if(t){var r=e.style,i;t in ml&&t!==vs&&(t=sr),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(cC,"-$1").toLowerCase())):r.removeAttribute(t)}},nc=function(e,t,r,i,s,o){var a=new gs(e._pt,t,r,0,1,o?Wk:Vk);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},KI={deg:1,rad:1,turn:1},SQ={grid:1,flex:1},Mc=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Tu.style,l=lQ.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,p=i==="px",m=i==="%",v,y,_,g;if(i===o||!s||KI[i]||KI[o])return s;if(o!=="px"&&!p&&(s=n(e,t,r,"px")),g=e.getCTM&&Jk(e),(m||o==="%")&&(ml[t]||~t.indexOf("adius")))return v=g?e.getBBox()[l?"width":"height"]:e[u],Er(m?s/v*d:s/100*v);if(a[l?"width":"height"]=d+(p?o:i),y=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===tc||!y.appendChild)&&(y=tc.body),_=y._gsap,_&&m&&_.width&&l&&_.time===Bs.time&&!_.uncache)return Er(s/_.width*d);if(m&&(t==="height"||t==="width")){var x=e.style[t];e.style[t]=d+i,v=e[u],x?e.style[t]=x:sf(e,t)}else(m||o==="%")&&!SQ[_a(y,"display")]&&(a.position=_a(e,"position")),y===e&&(a.position="static"),y.appendChild(Tu),v=Tu[u],y.removeChild(Tu),a.position="absolute";return l&&m&&(_=Fu(y),_.time=Bs.time,_.width=y[u]),Er(p?v*s/d:v&&s?d/v*s:0)},Ya=function(e,t,r,i){var s;return aC||hM(),t in fa&&t!=="transform"&&(t=fa[t],~t.indexOf(",")&&(t=t.split(",")[0])),ml[t]&&t!=="transform"?(s=dg(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:F_(_a(e,vs))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=O_[t]&&O_[t](e,t,r)||_a(e,t)||fk(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Mc(e,t,s,r)+r:s},EQ=function(e,t,r,i){if(!r||r==="none"){var s=yh(t,e,1),o=s&&_a(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=_a(e,"borderTopColor"))}var a=new gs(this._pt,e.style,t,0,1,zk),l=0,c=0,u,d,p,m,v,y,_,g,x,S,A,b;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(y=e.style[t],e.style[t]=i,i=_a(e,t)||i,y?e.style[t]=y:sf(e,t)),u=[r,i],Pk(u),r=u[0],i=u[1],p=r.match(Rd)||[],b=i.match(Rd)||[],b.length){for(;d=Rd.exec(i);)_=d[0],x=i.substring(l,d.index),v?v=(v+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(v=1),_!==(y=p[c++]||"")&&(m=parseFloat(y)||0,A=y.substr((m+"").length),_.charAt(1)==="="&&(_=Wd(m,_)+A),g=parseFloat(_),S=_.substr((g+"").length),l=Rd.lastIndex-S.length,S||(S=S||Us.units[t]||A,l===i.length&&(i+=S,a.e+=S)),A!==S&&(m=Mc(e,t,y,S)||0),a._pt={_next:a._pt,p:x||c===1?x:",",s:m,c:g-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?Wk:Vk;return sk.test(i)&&(a.e=0),this._pt=a,a},ZI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},AQ=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=ZI[r]||r,t[1]=ZI[i]||i,t.join(" ")},wQ=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],ml[a]&&(l=1,a=a==="transformOrigin"?vs:sr),sf(r,a);l&&(sf(r,sr),o&&(o.svg&&r.removeAttribute("transform"),dg(r,1),o.uncache=1,$k(i)))}},O_={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new gs(e._pt,t,r,0,0,wQ);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},fg=[1,0,0,1,0,0],Kk={},Zk=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},QI=function(e){var t=_a(e,sr);return Zk(t)?fg:t.substr(7).match(ik).map(Er)},uC=function(e,t){var r=e._gsap||Fu(e),i=e.style,s=QI(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?fg:s):(s===fg&&!e.offsetParent&&e!==$d&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,$d.appendChild(e)),s=QI(e),l?i.display=l:sf(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):$d.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},pM=function(e,t,r,i,s,o){var a=e._gsap,l=s||uC(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],v=l[1],y=l[2],_=l[3],g=l[4],x=l[5],S=t.split(" "),A=parseFloat(S[0])||0,b=parseFloat(S[1])||0,M,C,B,T;r?l!==fg&&(C=m*_-v*y)&&(B=A*(_/C)+b*(-y/C)+(y*x-_*g)/C,T=A*(-v/C)+b*(m/C)-(m*x-v*g)/C,A=B,b=T):(M=Yk(e),A=M.x+(~S[0].indexOf("%")?A/100*M.width:A),b=M.y+(~(S[1]||S[0]).indexOf("%")?b/100*M.height:b)),i||i!==!1&&a.smooth?(g=A-c,x=b-u,a.xOffset=d+(g*m+x*y)-g,a.yOffset=p+(g*v+x*_)-x):a.xOffset=a.yOffset=0,a.xOrigin=A,a.yOrigin=b,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[vs]="0px 0px",o&&(nc(o,a,"xOrigin",c,A),nc(o,a,"yOrigin",u,b),nc(o,a,"xOffset",d,a.xOffset),nc(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",A+" "+b)},dg=function(e,t){var r=e._gsap||new Lk(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=_a(e,vs)||"0",u,d,p,m,v,y,_,g,x,S,A,b,M,C,B,T,P,N,z,q,G,Y,ee,te,V,K,U,oe,fe,ue,pe,be;return u=d=p=y=_=g=x=S=A=0,m=v=1,r.svg=!!(e.getCTM&&Jk(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[sr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[sr]!=="none"?l[sr]:"")),i.scale=i.rotate=i.translate="none"),C=uC(e,r.svg),r.svg&&(r.uncache?(V=e.getBBox(),c=r.xOrigin-V.x+"px "+(r.yOrigin-V.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),pM(e,te||c,!!te||r.originIsAbsolute,r.smooth!==!1,C)),b=r.xOrigin||0,M=r.yOrigin||0,C!==fg&&(N=C[0],z=C[1],q=C[2],G=C[3],u=Y=C[4],d=ee=C[5],C.length===6?(m=Math.sqrt(N*N+z*z),v=Math.sqrt(G*G+q*q),y=N||z?id(z,N)*pu:0,x=q||G?id(q,G)*pu+y:0,x&&(v*=Math.abs(Math.cos(x*Xd))),r.svg&&(u-=b-(b*N+M*q),d-=M-(b*z+M*G))):(be=C[6],ue=C[7],U=C[8],oe=C[9],fe=C[10],pe=C[11],u=C[12],d=C[13],p=C[14],B=id(be,fe),_=B*pu,B&&(T=Math.cos(-B),P=Math.sin(-B),te=Y*T+U*P,V=ee*T+oe*P,K=be*T+fe*P,U=Y*-P+U*T,oe=ee*-P+oe*T,fe=be*-P+fe*T,pe=ue*-P+pe*T,Y=te,ee=V,be=K),B=id(-q,fe),g=B*pu,B&&(T=Math.cos(-B),P=Math.sin(-B),te=N*T-U*P,V=z*T-oe*P,K=q*T-fe*P,pe=G*P+pe*T,N=te,z=V,q=K),B=id(z,N),y=B*pu,B&&(T=Math.cos(B),P=Math.sin(B),te=N*T+z*P,V=Y*T+ee*P,z=z*T-N*P,ee=ee*T-Y*P,N=te,Y=V),_&&Math.abs(_)+Math.abs(y)>359.9&&(_=y=0,g=180-g),m=Er(Math.sqrt(N*N+z*z+q*q)),v=Er(Math.sqrt(ee*ee+be*be)),B=id(Y,ee),x=Math.abs(B)>2e-4?B*pu:0,A=pe?1/(pe<0?-pe:pe):0),r.svg&&(te=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Zk(_a(e,sr)),te&&e.setAttribute("transform",te))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(m*=-1,x+=y<=0?180:-180,y+=y<=0?180:-180):(v*=-1,x+=x<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=Er(m),r.scaleY=Er(v),r.rotation=Er(y)+a,r.rotationX=Er(_)+a,r.rotationY=Er(g)+a,r.skewX=x+a,r.skewY=S+a,r.transformPerspective=A+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(i[vs]=F_(c)),r.xOffset=r.yOffset=0,r.force3D=Us.force3D,r.renderTransform=r.svg?bQ:jk?Qk:MQ,r.uncache=0,r},F_=function(e){return(e=e.split(" "))[0]+" "+e[1]},VE=function(e,t,r){var i=Ai(t);return Er(parseFloat(t)+parseFloat(Mc(e,"x",r+"px",i)))+i},MQ=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Qk(e,t)},ou="0deg",Lp="0px",au=") ",Qk=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,d=r.rotationX,p=r.skewX,m=r.skewY,v=r.scaleX,y=r.scaleY,_=r.transformPerspective,g=r.force3D,x=r.target,S=r.zOrigin,A="",b=g==="auto"&&e&&e!==1||g===!0;if(S&&(d!==ou||u!==ou)){var M=parseFloat(u)*Xd,C=Math.sin(M),B=Math.cos(M),T;M=parseFloat(d)*Xd,T=Math.cos(M),o=VE(x,o,C*T*-S),a=VE(x,a,-Math.sin(M)*-S),l=VE(x,l,B*T*-S+S)}_!==Lp&&(A+="perspective("+_+au),(i||s)&&(A+="translate("+i+"%, "+s+"%) "),(b||o!==Lp||a!==Lp||l!==Lp)&&(A+=l!==Lp||b?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+au),c!==ou&&(A+="rotate("+c+au),u!==ou&&(A+="rotateY("+u+au),d!==ou&&(A+="rotateX("+d+au),(p!==ou||m!==ou)&&(A+="skew("+p+", "+m+au),(v!==1||y!==1)&&(A+="scale("+v+", "+y+au),x.style[sr]=A||"translate(0, 0)"},bQ=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,d=r.scaleX,p=r.scaleY,m=r.target,v=r.xOrigin,y=r.yOrigin,_=r.xOffset,g=r.yOffset,x=r.forceCSS,S=parseFloat(o),A=parseFloat(a),b,M,C,B,T;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Xd,c*=Xd,b=Math.cos(l)*d,M=Math.sin(l)*d,C=Math.sin(l-c)*-p,B=Math.cos(l-c)*p,c&&(u*=Xd,T=Math.tan(c-u),T=Math.sqrt(1+T*T),C*=T,B*=T,u&&(T=Math.tan(u),T=Math.sqrt(1+T*T),b*=T,M*=T)),b=Er(b),M=Er(M),C=Er(C),B=Er(B)):(b=d,B=p,M=C=0),(S&&!~(o+"").indexOf("px")||A&&!~(a+"").indexOf("px"))&&(S=Mc(m,"x",o,"px"),A=Mc(m,"y",a,"px")),(v||y||_||g)&&(S=Er(S+v-(v*b+y*C)+_),A=Er(A+y-(v*M+y*B)+g)),(i||s)&&(T=m.getBBox(),S=Er(S+i/100*T.width),A=Er(A+s/100*T.height)),T="matrix("+b+","+M+","+C+","+B+","+S+","+A+")",m.setAttribute("transform",T),x&&(m.style[sr]=T)},TQ=function(e,t,r,i,s){var o=360,a=ti(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?pu:1),c=l-i,u=i+c+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*jI)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*jI)%o-~~(c/o)*o)),e._pt=p=new gs(e._pt,t,r,i,c,uQ),p.e=u,p.u="deg",e._props.push(r),p},qI=function(e,t){for(var r in t)e[r]=t[r];return e},CQ=function(e,t,r){var i=qI({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,u,d,p,m,v;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[sr]=t,a=dg(r,1),sf(r,sr),r.setAttribute("transform",c)):(c=getComputedStyle(r)[sr],o[sr]=t,a=dg(r,1),o[sr]=c);for(l in ml)c=i[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=Ai(c),v=Ai(u),d=m!==v?Mc(r,l,c,v):parseFloat(c),p=parseFloat(u),e._pt=new gs(e._pt,a,l,d,p-d,fM),e._pt.u=v||0,e._props.push(l));qI(a,i)};ms("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});O_[e>1?"border"+n:n]=function(a,l,c,u,d){var p,m;if(arguments.length<4)return p=o.map(function(v){return Ya(a,v,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(u+"").split(" "),m={},o.forEach(function(v,y){return m[v]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(l,m,d)}});var qk={name:"css",register:hM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,u,d,p,m,v,y,_,g,x,S,A,b,M,C,B;aC||hM(),this.styles=this.styles||Xk(e),B=this.styles.props,this.tween=r;for(y in t)if(y!=="autoRound"&&(u=t[y],!(Cs[y]&&Ok(y,t,r,i,e,s)))){if(m=typeof u,v=O_[y],m==="function"&&(u=u.call(r,i,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=lg(u)),v)v(this,e,y,u,r)&&(C=1);else if(y.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(y)+"").trim(),u+="",mc.lastIndex=0,mc.test(c)||(_=Ai(c),g=Ai(u)),g?_!==g&&(c=Mc(e,y,c,g)+g):_&&(u+=_),this.add(a,"setProperty",c,u,i,s,0,0,y),o.push(y),B.push(y,0,a[y]);else if(m!=="undefined"){if(l&&y in l?(c=typeof l[y]=="function"?l[y].call(r,i,e,s):l[y],ti(c)&&~c.indexOf("random(")&&(c=lg(c)),Ai(c+"")||c==="auto"||(c+=Us.units[y]||Ai(Ya(e,y))||""),(c+"").charAt(1)==="="&&(c=Ya(e,y))):c=Ya(e,y),p=parseFloat(c),x=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),x&&(u=u.substr(2)),d=parseFloat(u),y in fa&&(y==="autoAlpha"&&(p===1&&Ya(e,"visibility")==="hidden"&&d&&(p=0),B.push("visibility",0,a.visibility),nc(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),y!=="scale"&&y!=="transform"&&(y=fa[y],~y.indexOf(",")&&(y=y.split(",")[0]))),S=y in ml,S){if(this.styles.save(y),A||(b=e._gsap,b.renderTransform&&!t.parseTransform||dg(e,t.parseTransform),M=t.smoothOrigin!==!1&&b.smooth,A=this._pt=new gs(this._pt,a,sr,0,1,b.renderTransform,b,0,-1),A.dep=1),y==="scale")this._pt=new gs(this._pt,b,"scaleY",b.scaleY,(x?Wd(b.scaleY,x+d):d)-b.scaleY||0,fM),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){B.push(vs,0,a[vs]),u=AQ(u),b.svg?pM(e,u,0,M,0,this):(g=parseFloat(u.split(" ")[2])||0,g!==b.zOrigin&&nc(this,b,"zOrigin",b.zOrigin,g),nc(this,a,y,F_(c),F_(u)));continue}else if(y==="svgOrigin"){pM(e,u,1,M,0,this);continue}else if(y in Kk){TQ(this,b,y,p,x?Wd(p,x+u):u);continue}else if(y==="smoothOrigin"){nc(this,b,"smooth",b.smooth,u);continue}else if(y==="force3D"){b[y]=u;continue}else if(y==="transform"){CQ(this,u,e);continue}}else y in a||(y=yh(y)||y);if(S||(d||d===0)&&(p||p===0)&&!cQ.test(u)&&y in a)_=(c+"").substr((p+"").length),d||(d=0),g=Ai(u)||(y in Us.units?Us.units[y]:_),_!==g&&(p=Mc(e,y,c,g)),this._pt=new gs(this._pt,S?b:a,y,p,(x?Wd(p,x+d):d)-p,!S&&(g==="px"||y==="zIndex")&&t.autoRound!==!1?dQ:fM),this._pt.u=g||0,_!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=fQ);else if(y in a)EQ.call(this,e,y,c,x?x+u:u);else if(y in e)this.add(e,y,c||e[y],x?x+u:u,i,s);else if(y!=="parseTransform"){QT(y,u);continue}S||(y in a?B.push(y,0,a[y]):B.push(y,1,c||e[y])),o.push(y)}}C&&Hk(this)},render:function(e,t){if(t.tween._time||!lC())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Ya,aliases:fa,getSetter:function(e,t,r){var i=fa[t];return i&&i.indexOf(",")<0&&(t=i),t in ml&&t!==vs&&(e._gsap.x||Ya(e,"x"))?r&&XI===r?t==="scale"?gQ:mQ:(XI=r||{})&&(t==="scale"?vQ:yQ):e.style&&!JT(e.style[t])?hQ:~t.indexOf("-")?pQ:sC(e,t)},core:{_removeProperty:sf,_getMatrix:uC}};ys.utils.checkPrefix=yh;ys.core.getStyleSaver=Xk;(function(n,e,t,r){var i=ms(n+","+e+","+t,function(s){ml[s]=1});ms(e,function(s){Us.units[s]="deg",Kk[s]=1}),fa[i[13]]=n+","+e,ms(r,function(s){var o=s.split(":");fa[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ms("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Us.units[n]="px"});ys.registerPlugin(qk);var $a=ys.registerPlugin(qk)||ys;$a.core.Tween;function eD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function RQ(n,e,t){return e&&eD(n.prototype,e),t&&eD(n,t),n}/*!
 * Observer 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var oi,Vy,Is,rc,ic,jd,ez,mu,vm,tz,nl,Io,nz,rz=function(){return oi||typeof window<"u"&&(oi=window.gsap)&&oi.registerPlugin&&oi},iz=1,Bd=[],nn=[],xa=[],ym=Date.now,mM=function(e,t){return t},PQ=function(){var e=vm.core,t=e.bridge||{},r=e._scrollers,i=e._proxies;r.push.apply(r,nn),i.push.apply(i,xa),nn=r,xa=i,mM=function(o,a){return t[o](a)}},gc=function(e,t){return~xa.indexOf(e)&&xa[xa.indexOf(e)+1][t]},_m=function(e){return!!~tz.indexOf(e)},ki=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},Ni=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},ty="scrollLeft",ny="scrollTop",gM=function(){return nl&&nl.isPressed||nn.cache++},N_=function(e,t){var r=function i(s){if(s||s===0){iz&&(Is.history.scrollRestoration="manual");var o=nl&&nl.isPressed;s=i.v=Math.round(s)||(nl&&nl.iOS?1:0),e(s),i.cacheID=nn.cache,o&&mM("ss",s)}else(t||nn.cache!==i.cacheID||mM("ref"))&&(i.cacheID=nn.cache,i.v=e());return i.v+i.offset};return r.offset=0,e&&r},Yi={s:ty,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:N_(function(n){return arguments.length?Is.scrollTo(n,Lr.sc()):Is.pageXOffset||rc[ty]||ic[ty]||jd[ty]||0})},Lr={s:ny,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Yi,sc:N_(function(n){return arguments.length?Is.scrollTo(Yi.sc(),n):Is.pageYOffset||rc[ny]||ic[ny]||jd[ny]||0})},ss=function(e,t){return(t&&t._ctx&&t._ctx.selector||oi.utils.toArray)(e)[0]||(typeof e=="string"&&oi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},bc=function(e,t){var r=t.s,i=t.sc;_m(e)&&(e=rc.scrollingElement||ic);var s=nn.indexOf(e),o=i===Lr.sc?1:2;!~s&&(s=nn.push(e)-1),nn[s+o]||ki(e,"scroll",gM);var a=nn[s+o],l=a||(nn[s+o]=N_(gc(e,r),!0)||(_m(e)?i:N_(function(c){return arguments.length?e[r]=c:e[r]})));return l.target=e,a||(l.smooth=oi.getProperty(e,"scrollBehavior")==="smooth"),l},vM=function(e,t,r){var i=e,s=e,o=ym(),a=o,l=t||50,c=Math.max(500,l*3),u=function(v,y){var _=ym();y||_-o>l?(s=i,i=v,a=o,o=_):r?i+=v:i=s+(v-s)/(_-a)*(o-a)},d=function(){s=i=r?0:i,a=o=0},p=function(v){var y=a,_=s,g=ym();return(v||v===0)&&v!==i&&u(v),o===a||g-a>c?0:(i+(r?_:-_))/((r?g:o)-y)*1e3};return{update:u,reset:d,getVelocity:p}},Op=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},tD=function(e){var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(r)?t:r},sz=function(){vm=oi.core.globals().ScrollTrigger,vm&&vm.core&&PQ()},oz=function(e){return oi=e||rz(),!Vy&&oi&&typeof document<"u"&&document.body&&(Is=window,rc=document,ic=rc.documentElement,jd=rc.body,tz=[Is,rc,ic,jd],oi.utils.clamp,nz=oi.core.context||function(){},mu="onpointerenter"in jd?"pointer":"mouse",ez=Pr.isTouch=Is.matchMedia&&Is.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Is||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Io=Pr.eventTypes=("ontouchstart"in ic?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in ic?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return iz=0},500),sz(),Vy=1),Vy};Yi.op=Lr;nn.cache=0;var Pr=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(r){Vy||oz(oi)||console.warn("Please gsap.registerPlugin(Observer)"),vm||sz();var i=r.tolerance,s=r.dragMinimum,o=r.type,a=r.target,l=r.lineHeight,c=r.debounce,u=r.preventDefault,d=r.onStop,p=r.onStopDelay,m=r.ignore,v=r.wheelSpeed,y=r.event,_=r.onDragStart,g=r.onDragEnd,x=r.onDrag,S=r.onPress,A=r.onRelease,b=r.onRight,M=r.onLeft,C=r.onUp,B=r.onDown,T=r.onChangeX,P=r.onChangeY,N=r.onChange,z=r.onToggleX,q=r.onToggleY,G=r.onHover,Y=r.onHoverEnd,ee=r.onMove,te=r.ignoreCheck,V=r.isNormalizer,K=r.onGestureStart,U=r.onGestureEnd,oe=r.onWheel,fe=r.onEnable,ue=r.onDisable,pe=r.onClick,be=r.scrollSpeed,Ae=r.capture,Le=r.allowClicks,qe=r.lockAxis,st=r.onLockAxis;this.target=a=ss(a)||ic,this.vars=r,m&&(m=oi.utils.toArray(m)),i=i||1e-9,s=s||0,v=v||1,be=be||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(Is.getComputedStyle(jd).lineHeight)||22);var ot,Ye,Z,xe,ve,Fe,Ce,ae=this,Ve=0,et=0,pt=bc(a,Yi),ut=bc(a,Lr),$t=pt(),H=ut(),F=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Io[0]==="pointerdown",le=_m(a),Pe=a.ownerDocument||rc,De=[0,0,0],Ue=[0,0,0],nt=0,He=function(){return nt=ym()},$e=function(rt,At){return(ae.event=rt)&&m&&~m.indexOf(rt.target)||At&&F&&rt.pointerType!=="touch"||te&&te(rt,At)},dt=function(){ae._vx.reset(),ae._vy.reset(),Ye.pause(),d&&d(ae)},Rt=function(){var rt=ae.deltaX=tD(De),At=ae.deltaY=tD(Ue),Ct=Math.abs(rt)>=i,Ke=Math.abs(At)>=i;N&&(Ct||Ke)&&N(ae,rt,At,De,Ue),Ct&&(b&&ae.deltaX>0&&b(ae),M&&ae.deltaX<0&&M(ae),T&&T(ae),z&&ae.deltaX<0!=Ve<0&&z(ae),Ve=ae.deltaX,De[0]=De[1]=De[2]=0),Ke&&(B&&ae.deltaY>0&&B(ae),C&&ae.deltaY<0&&C(ae),P&&P(ae),q&&ae.deltaY<0!=et<0&&q(ae),et=ae.deltaY,Ue[0]=Ue[1]=Ue[2]=0),(xe||Z)&&(ee&&ee(ae),Z&&(x(ae),Z=!1),xe=!1),Fe&&!(Fe=!1)&&st&&st(ae),ve&&(oe(ae),ve=!1),ot=0},Oe=function(rt,At,Ct){De[Ct]+=rt,Ue[Ct]+=At,ae._vx.update(rt),ae._vy.update(At),c?ot||(ot=requestAnimationFrame(Rt)):Rt()},Ot=function(rt,At){qe&&!Ce&&(ae.axis=Ce=Math.abs(rt)>Math.abs(At)?"x":"y",Fe=!0),Ce!=="y"&&(De[2]+=rt,ae._vx.update(rt,!0)),Ce!=="x"&&(Ue[2]+=At,ae._vy.update(At,!0)),c?ot||(ot=requestAnimationFrame(Rt)):Rt()},ne=function(rt){if(!$e(rt,1)){rt=Op(rt,u);var At=rt.clientX,Ct=rt.clientY,Ke=At-ae.x,Pt=Ct-ae.y,wt=ae.isDragging;ae.x=At,ae.y=Ct,(wt||Math.abs(ae.startX-At)>=s||Math.abs(ae.startY-Ct)>=s)&&(x&&(Z=!0),wt||(ae.isDragging=!0),Ot(Ke,Pt),wt||_&&_(ae))}},me=ae.onPress=function(Qe){$e(Qe,1)||Qe&&Qe.button||(ae.axis=Ce=null,Ye.pause(),ae.isPressed=!0,Qe=Op(Qe),Ve=et=0,ae.startX=ae.x=Qe.clientX,ae.startY=ae.y=Qe.clientY,ae._vx.reset(),ae._vy.reset(),ki(V?a:Pe,Io[1],ne,u,!0),ae.deltaX=ae.deltaY=0,S&&S(ae))},Ie=ae.onRelease=function(Qe){if(!$e(Qe,1)){Ni(V?a:Pe,Io[1],ne,!0);var rt=!isNaN(ae.y-ae.startY),At=ae.isDragging,Ct=At&&(Math.abs(ae.x-ae.startX)>3||Math.abs(ae.y-ae.startY)>3),Ke=Op(Qe);!Ct&&rt&&(ae._vx.reset(),ae._vy.reset(),u&&Le&&oi.delayedCall(.08,function(){if(ym()-nt>300&&!Qe.defaultPrevented){if(Qe.target.click)Qe.target.click();else if(Pe.createEvent){var Pt=Pe.createEvent("MouseEvents");Pt.initMouseEvent("click",!0,!0,Is,1,Ke.screenX,Ke.screenY,Ke.clientX,Ke.clientY,!1,!1,!1,!1,0,null),Qe.target.dispatchEvent(Pt)}}})),ae.isDragging=ae.isGesturing=ae.isPressed=!1,d&&At&&!V&&Ye.restart(!0),g&&At&&g(ae),A&&A(ae,Ct)}},Me=function(rt){return rt.touches&&rt.touches.length>1&&(ae.isGesturing=!0)&&K(rt,ae.isDragging)},Re=function(){return(ae.isGesturing=!1)||U(ae)},se=function(rt){if(!$e(rt)){var At=pt(),Ct=ut();Oe((At-$t)*be,(Ct-H)*be,1),$t=At,H=Ct,d&&Ye.restart(!0)}},Xe=function(rt){if(!$e(rt)){rt=Op(rt,u),oe&&(ve=!0);var At=(rt.deltaMode===1?l:rt.deltaMode===2?Is.innerHeight:1)*v;Oe(rt.deltaX*At,rt.deltaY*At,0),d&&!V&&Ye.restart(!0)}},ke=function(rt){if(!$e(rt)){var At=rt.clientX,Ct=rt.clientY,Ke=At-ae.x,Pt=Ct-ae.y;ae.x=At,ae.y=Ct,xe=!0,d&&Ye.restart(!0),(Ke||Pt)&&Ot(Ke,Pt)}},Te=function(rt){ae.event=rt,G(ae)},Ge=function(rt){ae.event=rt,Y(ae)},ft=function(rt){return $e(rt)||Op(rt,u)&&pe(ae)};Ye=ae._dc=oi.delayedCall(p||.25,dt).pause(),ae.deltaX=ae.deltaY=0,ae._vx=vM(0,50,!0),ae._vy=vM(0,50,!0),ae.scrollX=pt,ae.scrollY=ut,ae.isDragging=ae.isGesturing=ae.isPressed=!1,nz(this),ae.enable=function(Qe){return ae.isEnabled||(ki(le?Pe:a,"scroll",gM),o.indexOf("scroll")>=0&&ki(le?Pe:a,"scroll",se,u,Ae),o.indexOf("wheel")>=0&&ki(a,"wheel",Xe,u,Ae),(o.indexOf("touch")>=0&&ez||o.indexOf("pointer")>=0)&&(ki(a,Io[0],me,u,Ae),ki(Pe,Io[2],Ie),ki(Pe,Io[3],Ie),Le&&ki(a,"click",He,!1,!0),pe&&ki(a,"click",ft),K&&ki(Pe,"gesturestart",Me),U&&ki(Pe,"gestureend",Re),G&&ki(a,mu+"enter",Te),Y&&ki(a,mu+"leave",Ge),ee&&ki(a,mu+"move",ke)),ae.isEnabled=!0,Qe&&Qe.type&&me(Qe),fe&&fe(ae)),ae},ae.disable=function(){ae.isEnabled&&(Bd.filter(function(Qe){return Qe!==ae&&_m(Qe.target)}).length||Ni(le?Pe:a,"scroll",gM),ae.isPressed&&(ae._vx.reset(),ae._vy.reset(),Ni(V?a:Pe,Io[1],ne,!0)),Ni(le?Pe:a,"scroll",se,Ae),Ni(a,"wheel",Xe,Ae),Ni(a,Io[0],me,Ae),Ni(Pe,Io[2],Ie),Ni(Pe,Io[3],Ie),Ni(a,"click",He,!0),Ni(a,"click",ft),Ni(Pe,"gesturestart",Me),Ni(Pe,"gestureend",Re),Ni(a,mu+"enter",Te),Ni(a,mu+"leave",Ge),Ni(a,mu+"move",ke),ae.isEnabled=ae.isPressed=ae.isDragging=!1,ue&&ue(ae))},ae.kill=ae.revert=function(){ae.disable();var Qe=Bd.indexOf(ae);Qe>=0&&Bd.splice(Qe,1),nl===ae&&(nl=0)},Bd.push(ae),V&&_m(a)&&(nl=ae),ae.enable(y)},RQ(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Pr.version="3.12.4";Pr.create=function(n){return new Pr(n)};Pr.register=oz;Pr.getAll=function(){return Bd.slice()};Pr.getById=function(n){return Bd.filter(function(e){return e.vars.id===n})[0]};rz()&&oi.registerPlugin(Pr);/*!
 * ScrollTrigger 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var yt,fd,ln,qn,Uo,zn,az,U_,hg,Id,Wy,ry,_i,Zx,yM,Vi,nD,rD,dd,lz,WE,cz,Hi,uz,fz,dz,Vl,_M,fC,Yd,dC,k_,xM,$E,iy=1,Xi=Date.now,XE=Xi(),_o=0,Jp=0,iD=function(e,t,r){var i=Ts(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+t+"Clamp"]=i,i?e.substr(6,e.length-7):e},sD=function(e,t){return t&&(!Ts(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},BQ=function n(){return Jp&&requestAnimationFrame(n)},oD=function(){return Zx=1},aD=function(){return Zx=0},oa=function(e){return e},Kp=function(e){return Math.round(e*1e5)/1e5||0},hz=function(){return typeof window<"u"},pz=function(){return yt||hz()&&(yt=window.gsap)&&yt.registerPlugin&&yt},of=function(e){return!!~az.indexOf(e)},mz=function(e){return(e==="Height"?dC:ln["inner"+e])||Uo["client"+e]||zn["client"+e]},gz=function(e){return gc(e,"getBoundingClientRect")||(of(e)?function(){return Ky.width=ln.innerWidth,Ky.height=dC,Ky}:function(){return Za(e)})},IQ=function(e,t,r){var i=r.d,s=r.d2,o=r.a;return(o=gc(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(t?mz(s):e["client"+s])||0}},DQ=function(e,t){return!t||~xa.indexOf(e)?gz(e):function(){return Ky}},da=function(e,t){var r=t.s,i=t.d2,s=t.d,o=t.a;return Math.max(0,(r="scroll"+i)&&(o=gc(e,r))?o()-gz(e)()[s]:of(e)?(Uo[r]||zn[r])-mz(i):e[r]-e["offset"+i])},sy=function(e,t){for(var r=0;r<dd.length;r+=3)(!t||~t.indexOf(dd[r+1]))&&e(dd[r],dd[r+1],dd[r+2])},Ts=function(e){return typeof e=="string"},Ji=function(e){return typeof e=="function"},$y=function(e){return typeof e=="number"},gu=function(e){return typeof e=="object"},Fp=function(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},jE=function(e,t){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return t(e)}):t(e);r&&r.totalTime&&(e.callbackAnimation=r)}},sd=Math.abs,vz="left",yz="top",hC="right",pC="bottom",zu="width",Hu="height",xm="Right",Sm="Left",Em="Top",Am="Bottom",Tr="padding",uo="margin",_h="Width",mC="Height",Wr="px",fo=function(e){return ln.getComputedStyle(e)},LQ=function(e){var t=fo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},lD=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Za=function(e,t){var r=t&&fo(e)[yM]!=="matrix(1, 0, 0, 1, 0, 0)"&&yt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},SM=function(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},_z=function(e){var t=[],r=e.labels,i=e.duration(),s;for(s in r)t.push(r[s]/i);return t},OQ=function(e){return function(t){return yt.utils.snap(_z(e),t)}},gC=function(e){var t=yt.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return r?function(i,s,o){o===void 0&&(o=.001);var a;if(!s)return t(i);if(s>0){for(i-=o,a=0;a<r.length;a++)if(r[a]>=i)return r[a];return r[a-1]}else for(a=r.length,i+=o;a--;)if(r[a]<=i)return r[a];return r[0]}:function(i,s,o){o===void 0&&(o=.001);var a=t(i);return!s||Math.abs(a-i)<o||a-i<0==s<0?a:t(s<0?i-e:i+e)}},FQ=function(e){return function(t,r){return gC(_z(e))(t,r.direction)}},oy=function(e,t,r,i){return r.split(",").forEach(function(s){return e(t,s,i)})},Xr=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},$r=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},ay=function(e,t,r){r=r&&r.wheelHandler,r&&(e(t,"wheel",r),e(t,"touchmove",r))},cD={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ly={toggleActions:"play",anticipatePin:0},z_={top:0,left:0,center:.5,bottom:1,right:1},Xy=function(e,t){if(Ts(e)){var r=e.indexOf("="),i=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(i*=t/100),e=e.substr(0,r-1)),e=i+(e in z_?z_[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},cy=function(e,t,r,i,s,o,a,l){var c=s.startColor,u=s.endColor,d=s.fontSize,p=s.indent,m=s.fontWeight,v=qn.createElement("div"),y=of(r)||gc(r,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,g=y?zn:r,x=e.indexOf("start")!==-1,S=x?c:u,A="border-color:"+S+";font-size:"+d+";color:"+S+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return A+="position:"+((_||l)&&y?"fixed;":"absolute;"),(_||l||!y)&&(A+=(i===Lr?hC:pC)+":"+(o+parseFloat(p))+"px;"),a&&(A+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),v._isStart=x,v.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),v.style.cssText=A,v.innerText=t||t===0?e+"-"+t:e,g.children[0]?g.insertBefore(v,g.children[0]):g.appendChild(v),v._offset=v["offset"+i.op.d2],jy(v,0,i,x),v},jy=function(e,t,r,i){var s={display:"block"},o=r[i?"os2":"p2"],a=r[i?"p2":"os2"];e._isFlipped=i,s[r.a+"Percent"]=i?-100:0,s[r.a]=i?"1px":0,s["border"+o+_h]=1,s["border"+a+_h]=0,s[r.p]=t+"px",yt.set(e,s)},qt=[],EM={},pg,uD=function(){return Xi()-_o>34&&(pg||(pg=requestAnimationFrame(sl)))},od=function(){(!Hi||!Hi.isPressed||Hi.startX>zn.clientWidth)&&(nn.cache++,Hi?pg||(pg=requestAnimationFrame(sl)):sl(),_o||lf("scrollStart"),_o=Xi())},YE=function(){dz=ln.innerWidth,fz=ln.innerHeight},Zp=function(){nn.cache++,!_i&&!cz&&!qn.fullscreenElement&&!qn.webkitFullscreenElement&&(!uz||dz!==ln.innerWidth||Math.abs(ln.innerHeight-fz)>ln.innerHeight*.25)&&U_.restart(!0)},af={},NQ=[],xz=function n(){return $r(on,"scrollEnd",n)||Cu(!0)},lf=function(e){return af[e]&&af[e].map(function(t){return t()})||NQ},Ms=[],Sz=function(e){for(var t=0;t<Ms.length;t+=5)(!e||Ms[t+4]&&Ms[t+4].query===e)&&(Ms[t].style.cssText=Ms[t+1],Ms[t].getBBox&&Ms[t].setAttribute("transform",Ms[t+2]||""),Ms[t+3].uncache=1)},vC=function(e,t){var r;for(Vi=0;Vi<qt.length;Vi++)r=qt[Vi],r&&(!t||r._ctx===t)&&(e?r.kill(1):r.revert(!0,!0));k_=!0,t&&Sz(t),t||lf("revert")},Ez=function(e,t){nn.cache++,(t||!Wi)&&nn.forEach(function(r){return Ji(r)&&r.cacheID++&&(r.rec=0)}),Ts(e)&&(ln.history.scrollRestoration=fC=e)},Wi,Gu=0,fD,UQ=function(){if(fD!==Gu){var e=fD=Gu;requestAnimationFrame(function(){return e===Gu&&Cu(!0)})}},Az=function(){zn.appendChild(Yd),dC=!Hi&&Yd.offsetHeight||ln.innerHeight,zn.removeChild(Yd)},dD=function(e){return hg(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Cu=function(e,t){if(_o&&!e&&!k_){Xr(on,"scrollEnd",xz);return}Az(),Wi=on.isRefreshing=!0,nn.forEach(function(i){return Ji(i)&&++i.cacheID&&(i.rec=i())});var r=lf("refreshInit");lz&&on.sort(),t||vC(),nn.forEach(function(i){Ji(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),qt.slice(0).forEach(function(i){return i.refresh()}),k_=!1,qt.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",o=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-o),i.refresh()}}),xM=1,dD(!0),qt.forEach(function(i){var s=da(i.scroller,i._dir),o=i.vars.end==="max"||i._endClamp&&i.end>s,a=i._startClamp&&i.start>=s;(o||a)&&i.setPositions(a?s-1:i.start,o?Math.max(a?s:i.start+1,s):i.end,!0)}),dD(!1),xM=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),nn.forEach(function(i){Ji(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),Ez(fC,1),U_.pause(),Gu++,Wi=2,sl(2),qt.forEach(function(i){return Ji(i.vars.onRefresh)&&i.vars.onRefresh(i)}),Wi=on.isRefreshing=!1,lf("refresh")},AM=0,Yy=1,wm,sl=function(e){if(e===2||!Wi&&!k_){on.isUpdating=!0,wm&&wm.update(0);var t=qt.length,r=Xi(),i=r-XE>=50,s=t&&qt[0].scroll();if(Yy=AM>s?-1:1,Wi||(AM=s),i&&(_o&&!Zx&&r-_o>200&&(_o=0,lf("scrollEnd")),Wy=XE,XE=r),Yy<0){for(Vi=t;Vi-- >0;)qt[Vi]&&qt[Vi].update(0,i);Yy=1}else for(Vi=0;Vi<t;Vi++)qt[Vi]&&qt[Vi].update(0,i);on.isUpdating=!1}pg=0},wM=[vz,yz,pC,hC,uo+Am,uo+xm,uo+Em,uo+Sm,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Jy=wM.concat([zu,Hu,"boxSizing","max"+_h,"max"+mC,"position",uo,Tr,Tr+Em,Tr+xm,Tr+Am,Tr+Sm]),kQ=function(e,t,r){Jd(r);var i=e._gsap;if(i.spacerIsNative)Jd(i.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},JE=function(e,t,r,i){if(!e._gsap.swappedIn){for(var s=wM.length,o=t.style,a=e.style,l;s--;)l=wM[s],o[l]=r[l];o.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(o.display="inline-block"),a[pC]=a[hC]="auto",o.flexBasis=r.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[zu]=SM(e,Yi)+Wr,o[Hu]=SM(e,Lr)+Wr,o[Tr]=a[uo]=a[yz]=a[vz]="0",Jd(i),a[zu]=a["max"+_h]=r[zu],a[Hu]=a["max"+mC]=r[Hu],a[Tr]=r[Tr],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},zQ=/([A-Z])/g,Jd=function(e){if(e){var t=e.t.style,r=e.length,i=0,s,o;for((e.t._gsap||yt.core.getCache(e.t)).uncache=1;i<r;i+=2)o=e[i+1],s=e[i],o?t[s]=o:t[s]&&t.removeProperty(s.replace(zQ,"-$1").toLowerCase())}},uy=function(e){for(var t=Jy.length,r=e.style,i=[],s=0;s<t;s++)i.push(Jy[s],r[Jy[s]]);return i.t=e,i},HQ=function(e,t,r){for(var i=[],s=e.length,o=r?8:0,a;o<s;o+=2)a=e[o],i.push(a,a in t?t[a]:e[o+1]);return i.t=e.t,i},Ky={left:0,top:0},hD=function(e,t,r,i,s,o,a,l,c,u,d,p,m,v){Ji(e)&&(e=e(l)),Ts(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?Xy("0"+e.substr(3),r):0));var y=m?m.time():0,_,g,x;if(m&&m.seek(0),isNaN(e)||(e=+e),$y(e))m&&(e=yt.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,p,e)),a&&jy(a,r,i,!0);else{Ji(t)&&(t=t(l));var S=(e||"0").split(" "),A,b,M,C;x=ss(t,l)||zn,A=Za(x)||{},(!A||!A.left&&!A.top)&&fo(x).display==="none"&&(C=x.style.display,x.style.display="block",A=Za(x),C?x.style.display=C:x.style.removeProperty("display")),b=Xy(S[0],A[i.d]),M=Xy(S[1]||"0",r),e=A[i.p]-c[i.p]-u+b+s-M,a&&jy(a,M,i,r-M<20||a._isStart&&M>20),r-=r-M}if(v&&(l[v]=e||-.001,e<0&&(e=0)),o){var B=e+r,T=o._isStart;_="scroll"+i.d2,jy(o,B,i,T&&B>20||!T&&(d?Math.max(zn[_],Uo[_]):o.parentNode[_])<=B+1),d&&(c=Za(a),d&&(o.style[i.op.p]=c[i.op.p]-i.op.m-o._offset+Wr))}return m&&x&&(_=Za(x),m.seek(p),g=Za(x),m._caScrollDist=_[i.p]-g[i.p],e=e/m._caScrollDist*p),m&&m.seek(y),m?e:Math.round(e)},GQ=/(webkit|moz|length|cssText|inset)/i,pD=function(e,t,r,i){if(e.parentNode!==t){var s=e.style,o,a;if(t===zn){e._stOrig=s.cssText,a=fo(e);for(o in a)!+o&&!GQ.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;yt.core.getCache(e).uncache=1,t.appendChild(e)}},wz=function(e,t,r){var i=t,s=i;return function(o){var a=Math.round(e());return a!==i&&a!==s&&Math.abs(a-i)>3&&Math.abs(a-s)>3&&(o=a,r&&r()),s=i,i=o,o}},fy=function(e,t,r){var i={};i[t.p]="+="+r,yt.set(e,i)},mD=function(e,t){var r=bc(e,t),i="_scroll"+t.p2,s=function o(a,l,c,u,d){var p=o.tween,m=l.onComplete,v={};c=c||r();var y=wz(r,c,function(){p.kill(),o.tween=0});return d=u&&d||0,u=u||a-c,p&&p.kill(),l[i]=a,l.modifiers=v,v[i]=function(){return y(c+u*p.ratio+d*p.ratio*p.ratio)},l.onUpdate=function(){nn.cache++,o.tween&&sl()},l.onComplete=function(){o.tween=0,m&&m.call(p)},p=o.tween=yt.to(e,l),p};return e[i]=r,r.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Xr(e,"wheel",r.wheelHandler),on.isTouch&&Xr(e,"touchmove",r.wheelHandler),s},on=function(){function n(t,r){fd||n.register(yt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_M(this),this.init(t,r)}var e=n.prototype;return e.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Jp){this.update=this.refresh=this.kill=oa;return}r=lD(Ts(r)||$y(r)||r.nodeType?{trigger:r}:r,ly);var s=r,o=s.onUpdate,a=s.toggleClass,l=s.id,c=s.onToggle,u=s.onRefresh,d=s.scrub,p=s.trigger,m=s.pin,v=s.pinSpacing,y=s.invalidateOnRefresh,_=s.anticipatePin,g=s.onScrubComplete,x=s.onSnapComplete,S=s.once,A=s.snap,b=s.pinReparent,M=s.pinSpacer,C=s.containerAnimation,B=s.fastScrollEnd,T=s.preventOverlaps,P=r.horizontal||r.containerAnimation&&r.horizontal!==!1?Yi:Lr,N=!d&&d!==0,z=ss(r.scroller||ln),q=yt.core.getCache(z),G=of(z),Y=("pinType"in r?r.pinType:gc(z,"pinType")||G&&"fixed")==="fixed",ee=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],te=N&&r.toggleActions.split(" "),V="markers"in r?r.markers:ly.markers,K=G?0:parseFloat(fo(z)["border"+P.p2+_h])||0,U=this,oe=r.onRefreshInit&&function(){return r.onRefreshInit(U)},fe=IQ(z,G,P),ue=DQ(z,G),pe=0,be=0,Ae=0,Le=bc(z,P),qe,st,ot,Ye,Z,xe,ve,Fe,Ce,ae,Ve,et,pt,ut,$t,H,F,le,Pe,De,Ue,nt,He,$e,dt,Rt,Oe,Ot,ne,me,Ie,Me,Re,se,Xe,ke,Te,Ge,ft;if(U._startClamp=U._endClamp=!1,U._dir=P,_*=45,U.scroller=z,U.scroll=C?C.time.bind(C):Le,Ye=Le(),U.vars=r,i=i||r.animation,"refreshPriority"in r&&(lz=1,r.refreshPriority===-9999&&(wm=U)),q.tweenScroll=q.tweenScroll||{top:mD(z,Lr),left:mD(z,Yi)},U.tweenTo=qe=q.tweenScroll[P.p],U.scrubDuration=function(Ke){Re=$y(Ke)&&Ke,Re?Me?Me.duration(Ke):Me=yt.to(i,{ease:"expo",totalProgress:"+=0",duration:Re,paused:!0,onComplete:function(){return g&&g(U)}}):(Me&&Me.progress(1).kill(),Me=0)},i&&(i.vars.lazy=!1,i._initted&&!U.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),U.animation=i.pause(),i.scrollTrigger=U,U.scrubDuration(d),me=0,l||(l=i.vars.id)),A&&((!gu(A)||A.push)&&(A={snapTo:A}),"scrollBehavior"in zn.style&&yt.set(G?[zn,Uo]:z,{scrollBehavior:"auto"}),nn.forEach(function(Ke){return Ji(Ke)&&Ke.target===(G?qn.scrollingElement||Uo:z)&&(Ke.smooth=!1)}),ot=Ji(A.snapTo)?A.snapTo:A.snapTo==="labels"?OQ(i):A.snapTo==="labelsDirectional"?FQ(i):A.directional!==!1?function(Ke,Pt){return gC(A.snapTo)(Ke,Xi()-be<500?0:Pt.direction)}:yt.utils.snap(A.snapTo),se=A.duration||{min:.1,max:2},se=gu(se)?Id(se.min,se.max):Id(se,se),Xe=yt.delayedCall(A.delay||Re/2||.1,function(){var Ke=Le(),Pt=Xi()-be<500,wt=qe.tween;if((Pt||Math.abs(U.getVelocity())<10)&&!wt&&!Zx&&pe!==Ke){var kt=(Ke-xe)/ut,Sn=i&&!N?i.totalProgress():kt,Ft=Pt?0:(Sn-Ie)/(Xi()-Wy)*1e3||0,_t=yt.utils.clamp(-kt,1-kt,sd(Ft/2)*Ft/.185),Kn=kt+(A.inertia===!1?0:_t),Un=Id(0,1,ot(Kn,U)),O=Math.round(xe+Un*ut),k=A,re=k.onStart,L=k.onInterrupt,$=k.onComplete;if(Ke<=ve&&Ke>=xe&&O!==Ke){if(wt&&!wt._initted&&wt.data<=sd(O-Ke))return;A.inertia===!1&&(_t=Un-kt),qe(O,{duration:se(sd(Math.max(sd(Kn-Sn),sd(Un-Sn))*.185/Ft/.05||0)),ease:A.ease||"power3",data:sd(O-Ke),onInterrupt:function(){return Xe.restart(!0)&&L&&L(U)},onComplete:function(){U.update(),pe=Le(),Me&&i&&i.progress(Un),me=Ie=i&&!N?i.totalProgress():U.progress,x&&x(U),$&&$(U)}},Ke,_t*ut,O-Ke-_t*ut),re&&re(U,qe.tween)}}else U.isActive&&pe!==Ke&&Xe.restart(!0)}).pause()),l&&(EM[l]=U),p=U.trigger=ss(p||m!==!0&&m),ft=p&&p._gsap&&p._gsap.stRevert,ft&&(ft=ft(U)),m=m===!0?p:ss(m),Ts(a)&&(a={targets:p,className:a}),m&&(v===!1||v===uo||(v=!v&&m.parentNode&&m.parentNode.style&&fo(m.parentNode).display==="flex"?!1:Tr),U.pin=m,st=yt.core.getCache(m),st.spacer?$t=st.pinState:(M&&(M=ss(M),M&&!M.nodeType&&(M=M.current||M.nativeElement),st.spacerIsNative=!!M,M&&(st.spacerState=uy(M))),st.spacer=le=M||qn.createElement("div"),le.classList.add("pin-spacer"),l&&le.classList.add("pin-spacer-"+l),st.pinState=$t=uy(m)),r.force3D!==!1&&yt.set(m,{force3D:!0}),U.spacer=le=st.spacer,ne=fo(m),$e=ne[v+P.os2],De=yt.getProperty(m),Ue=yt.quickSetter(m,P.a,Wr),JE(m,le,ne),F=uy(m)),V){et=gu(V)?lD(V,cD):cD,ae=cy("scroller-start",l,z,P,et,0),Ve=cy("scroller-end",l,z,P,et,0,ae),Pe=ae["offset"+P.op.d2];var Qe=ss(gc(z,"content")||z);Fe=this.markerStart=cy("start",l,Qe,P,et,Pe,0,C),Ce=this.markerEnd=cy("end",l,Qe,P,et,Pe,0,C),C&&(Ge=yt.quickSetter([Fe,Ce],P.a,Wr)),!Y&&!(xa.length&&gc(z,"fixedMarkers")===!0)&&(LQ(G?zn:z),yt.set([ae,Ve],{force3D:!0}),Rt=yt.quickSetter(ae,P.a,Wr),Ot=yt.quickSetter(Ve,P.a,Wr))}if(C){var rt=C.vars.onUpdate,At=C.vars.onUpdateParams;C.eventCallback("onUpdate",function(){U.update(0,0,1),rt&&rt.apply(C,At||[])})}if(U.previous=function(){return qt[qt.indexOf(U)-1]},U.next=function(){return qt[qt.indexOf(U)+1]},U.revert=function(Ke,Pt){if(!Pt)return U.kill(!0);var wt=Ke!==!1||!U.enabled,kt=_i;wt!==U.isReverted&&(wt&&(ke=Math.max(Le(),U.scroll.rec||0),Ae=U.progress,Te=i&&i.progress()),Fe&&[Fe,Ce,ae,Ve].forEach(function(Sn){return Sn.style.display=wt?"none":"block"}),wt&&(_i=U,U.update(wt)),m&&(!b||!U.isActive)&&(wt?kQ(m,le,$t):JE(m,le,fo(m),dt)),wt||U.update(wt),_i=kt,U.isReverted=wt)},U.refresh=function(Ke,Pt,wt,kt){if(!((_i||!U.enabled)&&!Pt)){if(m&&Ke&&_o){Xr(n,"scrollEnd",xz);return}!Wi&&oe&&oe(U),_i=U,qe.tween&&!wt&&(qe.tween.kill(),qe.tween=0),Me&&Me.pause(),y&&i&&i.revert({kill:!1}).invalidate(),U.isReverted||U.revert(!0,!0),U._subPinOffset=!1;var Sn=fe(),Ft=ue(),_t=C?C.duration():da(z,P),Kn=ut<=.01,Un=0,O=kt||0,k=gu(wt)?wt.end:r.end,re=r.endTrigger||p,L=gu(wt)?wt.start:r.start||(r.start===0||!p?0:m?"0 0":"0 100%"),$=U.pinnedContainer=r.pinnedContainer&&ss(r.pinnedContainer,U),X=p&&Math.max(0,qt.indexOf(U))||0,Q=X,J,he,_e,we,ye,je,Ne,ze,ht,St,xt,Dt,at;for(V&&gu(wt)&&(Dt=yt.getProperty(ae,P.p),at=yt.getProperty(Ve,P.p));Q--;)je=qt[Q],je.end||je.refresh(0,1)||(_i=U),Ne=je.pin,Ne&&(Ne===p||Ne===m||Ne===$)&&!je.isReverted&&(St||(St=[]),St.unshift(je),je.revert(!0,!0)),je!==qt[Q]&&(X--,Q--);for(Ji(L)&&(L=L(U)),L=iD(L,"start",U),xe=hD(L,p,Sn,P,Le(),Fe,ae,U,Ft,K,Y,_t,C,U._startClamp&&"_startClamp")||(m?-.001:0),Ji(k)&&(k=k(U)),Ts(k)&&!k.indexOf("+=")&&(~k.indexOf(" ")?k=(Ts(L)?L.split(" ")[0]:"")+k:(Un=Xy(k.substr(2),Sn),k=Ts(L)?L:(C?yt.utils.mapRange(0,C.duration(),C.scrollTrigger.start,C.scrollTrigger.end,xe):xe)+Un,re=p)),k=iD(k,"end",U),ve=Math.max(xe,hD(k||(re?"100% 0":_t),re,Sn,P,Le()+Un,Ce,Ve,U,Ft,K,Y,_t,C,U._endClamp&&"_endClamp"))||-.001,Un=0,Q=X;Q--;)je=qt[Q],Ne=je.pin,Ne&&je.start-je._pinPush<=xe&&!C&&je.end>0&&(J=je.end-(U._startClamp?Math.max(0,je.start):je.start),(Ne===p&&je.start-je._pinPush<xe||Ne===$)&&isNaN(L)&&(Un+=J*(1-je.progress)),Ne===m&&(O+=J));if(xe+=Un,ve+=Un,U._startClamp&&(U._startClamp+=Un),U._endClamp&&!Wi&&(U._endClamp=ve||-.001,ve=Math.min(ve,da(z,P))),ut=ve-xe||(xe-=.01)&&.001,Kn&&(Ae=yt.utils.clamp(0,1,yt.utils.normalize(xe,ve,ke))),U._pinPush=O,Fe&&Un&&(J={},J[P.a]="+="+Un,$&&(J[P.p]="-="+Le()),yt.set([Fe,Ce],J)),m&&!(xM&&U.end>=da(z,P)))J=fo(m),we=P===Lr,_e=Le(),nt=parseFloat(De(P.a))+O,!_t&&ve>1&&(xt=(G?qn.scrollingElement||Uo:z).style,xt={style:xt,value:xt["overflow"+P.a.toUpperCase()]},G&&fo(zn)["overflow"+P.a.toUpperCase()]!=="scroll"&&(xt.style["overflow"+P.a.toUpperCase()]="scroll")),JE(m,le,J),F=uy(m),he=Za(m,!0),ze=Y&&bc(z,we?Yi:Lr)(),v&&(dt=[v+P.os2,ut+O+Wr],dt.t=le,Q=v===Tr?SM(m,P)+ut+O:0,Q&&(dt.push(P.d,Q+Wr),le.style.flexBasis!=="auto"&&(le.style.flexBasis=Q+Wr)),Jd(dt),$&&qt.forEach(function(Ze){Ze.pin===$&&Ze.vars.pinSpacing!==!1&&(Ze._subPinOffset=!0)}),Y&&Le(ke)),Y&&(ye={top:he.top+(we?_e-xe:ze)+Wr,left:he.left+(we?ze:_e-xe)+Wr,boxSizing:"border-box",position:"fixed"},ye[zu]=ye["max"+_h]=Math.ceil(he.width)+Wr,ye[Hu]=ye["max"+mC]=Math.ceil(he.height)+Wr,ye[uo]=ye[uo+Em]=ye[uo+xm]=ye[uo+Am]=ye[uo+Sm]="0",ye[Tr]=J[Tr],ye[Tr+Em]=J[Tr+Em],ye[Tr+xm]=J[Tr+xm],ye[Tr+Am]=J[Tr+Am],ye[Tr+Sm]=J[Tr+Sm],H=HQ($t,ye,b),Wi&&Le(0)),i?(ht=i._initted,WE(1),i.render(i.duration(),!0,!0),He=De(P.a)-nt+ut+O,Oe=Math.abs(ut-He)>1,Y&&Oe&&H.splice(H.length-2,2),i.render(0,!0,!0),ht||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),WE(0)):He=ut,xt&&(xt.value?xt.style["overflow"+P.a.toUpperCase()]=xt.value:xt.style.removeProperty("overflow-"+P.a));else if(p&&Le()&&!C)for(he=p.parentNode;he&&he!==zn;)he._pinOffset&&(xe-=he._pinOffset,ve-=he._pinOffset),he=he.parentNode;St&&St.forEach(function(Ze){return Ze.revert(!1,!0)}),U.start=xe,U.end=ve,Ye=Z=Wi?ke:Le(),!C&&!Wi&&(Ye<ke&&Le(ke),U.scroll.rec=0),U.revert(!1,!0),be=Xi(),Xe&&(pe=-1,Xe.restart(!0)),_i=0,i&&N&&(i._initted||Te)&&i.progress()!==Te&&i.progress(Te||0,!0).render(i.time(),!0,!0),(Kn||Ae!==U.progress||C)&&(i&&!N&&i.totalProgress(C&&xe<-.001&&!Ae?yt.utils.normalize(xe,ve,0):Ae,!0),U.progress=Kn||(Ye-xe)/ut===Ae?0:Ae),m&&v&&(le._pinOffset=Math.round(U.progress*He)),Me&&Me.invalidate(),isNaN(Dt)||(Dt-=yt.getProperty(ae,P.p),at-=yt.getProperty(Ve,P.p),fy(ae,P,Dt),fy(Fe,P,Dt-(kt||0)),fy(Ve,P,at),fy(Ce,P,at-(kt||0))),Kn&&!Wi&&U.update(),u&&!Wi&&!pt&&(pt=!0,u(U),pt=!1)}},U.getVelocity=function(){return(Le()-Z)/(Xi()-Wy)*1e3||0},U.endAnimation=function(){Fp(U.callbackAnimation),i&&(Me?Me.progress(1):i.paused()?N||Fp(i,U.direction<0,1):Fp(i,i.reversed()))},U.labelToScroll=function(Ke){return i&&i.labels&&(xe||U.refresh()||xe)+i.labels[Ke]/i.duration()*ut||0},U.getTrailing=function(Ke){var Pt=qt.indexOf(U),wt=U.direction>0?qt.slice(0,Pt).reverse():qt.slice(Pt+1);return(Ts(Ke)?wt.filter(function(kt){return kt.vars.preventOverlaps===Ke}):wt).filter(function(kt){return U.direction>0?kt.end<=xe:kt.start>=ve})},U.update=function(Ke,Pt,wt){if(!(C&&!wt&&!Ke)){var kt=Wi===!0?ke:U.scroll(),Sn=Ke?0:(kt-xe)/ut,Ft=Sn<0?0:Sn>1?1:Sn||0,_t=U.progress,Kn,Un,O,k,re,L,$,X;if(Pt&&(Z=Ye,Ye=C?Le():kt,A&&(Ie=me,me=i&&!N?i.totalProgress():Ft)),_&&!Ft&&m&&!_i&&!iy&&_o&&xe<kt+(kt-Z)/(Xi()-Wy)*_&&(Ft=1e-4),Ft!==_t&&U.enabled){if(Kn=U.isActive=!!Ft&&Ft<1,Un=!!_t&&_t<1,L=Kn!==Un,re=L||!!Ft!=!!_t,U.direction=Ft>_t?1:-1,U.progress=Ft,re&&!_i&&(O=Ft&&!_t?0:Ft===1?1:_t===1?2:3,N&&(k=!L&&te[O+1]!=="none"&&te[O+1]||te[O],X=i&&(k==="complete"||k==="reset"||k in i))),T&&(L||X)&&(X||d||!i)&&(Ji(T)?T(U):U.getTrailing(T).forEach(function(_e){return _e.endAnimation()})),N||(Me&&!_i&&!iy?(Me._dp._time-Me._start!==Me._time&&Me.render(Me._dp._time-Me._start),Me.resetTo?Me.resetTo("totalProgress",Ft,i._tTime/i._tDur):(Me.vars.totalProgress=Ft,Me.invalidate().restart())):i&&i.totalProgress(Ft,!!(_i&&(be||Ke)))),m){if(Ke&&v&&(le.style[v+P.os2]=$e),!Y)Ue(Kp(nt+He*Ft));else if(re){if($=!Ke&&Ft>_t&&ve+1>kt&&kt+1>=da(z,P),b)if(!Ke&&(Kn||$)){var Q=Za(m,!0),J=kt-xe;pD(m,zn,Q.top+(P===Lr?J:0)+Wr,Q.left+(P===Lr?0:J)+Wr)}else pD(m,le);Jd(Kn||$?H:F),Oe&&Ft<1&&Kn||Ue(nt+(Ft===1&&!$?He:0))}}A&&!qe.tween&&!_i&&!iy&&Xe.restart(!0),a&&(L||S&&Ft&&(Ft<1||!$E))&&hg(a.targets).forEach(function(_e){return _e.classList[Kn||S?"add":"remove"](a.className)}),o&&!N&&!Ke&&o(U),re&&!_i?(N&&(X&&(k==="complete"?i.pause().totalProgress(1):k==="reset"?i.restart(!0).pause():k==="restart"?i.restart(!0):i[k]()),o&&o(U)),(L||!$E)&&(c&&L&&jE(U,c),ee[O]&&jE(U,ee[O]),S&&(Ft===1?U.kill(!1,1):ee[O]=0),L||(O=Ft===1?1:3,ee[O]&&jE(U,ee[O]))),B&&!Kn&&Math.abs(U.getVelocity())>($y(B)?B:2500)&&(Fp(U.callbackAnimation),Me?Me.progress(1):Fp(i,k==="reverse"?1:!Ft,1))):N&&o&&!_i&&o(U)}if(Ot){var he=C?kt/C.duration()*(C._caScrollDist||0):kt;Rt(he+(ae._isFlipped?1:0)),Ot(he)}Ge&&Ge(-kt/C.duration()*(C._caScrollDist||0))}},U.enable=function(Ke,Pt){U.enabled||(U.enabled=!0,Xr(z,"resize",Zp),G||Xr(z,"scroll",od),oe&&Xr(n,"refreshInit",oe),Ke!==!1&&(U.progress=Ae=0,Ye=Z=pe=Le()),Pt!==!1&&U.refresh())},U.getTween=function(Ke){return Ke&&qe?qe.tween:Me},U.setPositions=function(Ke,Pt,wt,kt){if(C){var Sn=C.scrollTrigger,Ft=C.duration(),_t=Sn.end-Sn.start;Ke=Sn.start+_t*Ke/Ft,Pt=Sn.start+_t*Pt/Ft}U.refresh(!1,!1,{start:sD(Ke,wt&&!!U._startClamp),end:sD(Pt,wt&&!!U._endClamp)},kt),U.update()},U.adjustPinSpacing=function(Ke){if(dt&&Ke){var Pt=dt.indexOf(P.d)+1;dt[Pt]=parseFloat(dt[Pt])+Ke+Wr,dt[1]=parseFloat(dt[1])+Ke+Wr,Jd(dt)}},U.disable=function(Ke,Pt){if(U.enabled&&(Ke!==!1&&U.revert(!0,!0),U.enabled=U.isActive=!1,Pt||Me&&Me.pause(),ke=0,st&&(st.uncache=1),oe&&$r(n,"refreshInit",oe),Xe&&(Xe.pause(),qe.tween&&qe.tween.kill()&&(qe.tween=0)),!G)){for(var wt=qt.length;wt--;)if(qt[wt].scroller===z&&qt[wt]!==U)return;$r(z,"resize",Zp),G||$r(z,"scroll",od)}},U.kill=function(Ke,Pt){U.disable(Ke,Pt),Me&&!Pt&&Me.kill(),l&&delete EM[l];var wt=qt.indexOf(U);wt>=0&&qt.splice(wt,1),wt===Vi&&Yy>0&&Vi--,wt=0,qt.forEach(function(kt){return kt.scroller===U.scroller&&(wt=1)}),wt||Wi||(U.scroll.rec=0),i&&(i.scrollTrigger=null,Ke&&i.revert({kill:!1}),Pt||i.kill()),Fe&&[Fe,Ce,ae,Ve].forEach(function(kt){return kt.parentNode&&kt.parentNode.removeChild(kt)}),wm===U&&(wm=0),m&&(st&&(st.uncache=1),wt=0,qt.forEach(function(kt){return kt.pin===m&&wt++}),wt||(st.spacer=0)),r.onKill&&r.onKill(U)},qt.push(U),U.enable(!1,!1),ft&&ft(U),i&&i.add&&!ut){var Ct=U.update;U.update=function(){U.update=Ct,xe||ve||U.refresh()},yt.delayedCall(.01,U.update),ut=.01,xe=ve=0}else U.refresh();m&&UQ()},n.register=function(r){return fd||(yt=r||pz(),hz()&&window.document&&n.enable(),fd=Jp),fd},n.defaults=function(r){if(r)for(var i in r)ly[i]=r[i];return ly},n.disable=function(r,i){Jp=0,qt.forEach(function(o){return o[i?"kill":"disable"](r)}),$r(ln,"wheel",od),$r(qn,"scroll",od),clearInterval(ry),$r(qn,"touchcancel",oa),$r(zn,"touchstart",oa),oy($r,qn,"pointerdown,touchstart,mousedown",oD),oy($r,qn,"pointerup,touchend,mouseup",aD),U_.kill(),sy($r);for(var s=0;s<nn.length;s+=3)ay($r,nn[s],nn[s+1]),ay($r,nn[s],nn[s+2])},n.enable=function(){if(ln=window,qn=document,Uo=qn.documentElement,zn=qn.body,yt&&(hg=yt.utils.toArray,Id=yt.utils.clamp,_M=yt.core.context||oa,WE=yt.core.suppressOverwrites||oa,fC=ln.history.scrollRestoration||"auto",AM=ln.pageYOffset,yt.core.globals("ScrollTrigger",n),zn)){Jp=1,Yd=document.createElement("div"),Yd.style.height="100vh",Yd.style.position="absolute",Az(),BQ(),Pr.register(yt),n.isTouch=Pr.isTouch,Vl=Pr.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Xr(ln,"wheel",od),az=[ln,qn,Uo,zn],yt.matchMedia?(n.matchMedia=function(l){var c=yt.matchMedia(),u;for(u in l)c.add(u,l[u]);return c},yt.addEventListener("matchMediaInit",function(){return vC()}),yt.addEventListener("matchMediaRevert",function(){return Sz()}),yt.addEventListener("matchMedia",function(){Cu(0,1),lf("matchMedia")}),yt.matchMedia("(orientation: portrait)",function(){return YE(),YE})):console.warn("Requires GSAP 3.11.0 or later"),YE(),Xr(qn,"scroll",od);var r=zn.style,i=r.borderTopStyle,s=yt.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=Za(zn),Lr.m=Math.round(o.top+Lr.sc())||0,Yi.m=Math.round(o.left+Yi.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),ry=setInterval(uD,250),yt.delayedCall(.5,function(){return iy=0}),Xr(qn,"touchcancel",oa),Xr(zn,"touchstart",oa),oy(Xr,qn,"pointerdown,touchstart,mousedown",oD),oy(Xr,qn,"pointerup,touchend,mouseup",aD),yM=yt.utils.checkPrefix("transform"),Jy.push(yM),fd=Xi(),U_=yt.delayedCall(.2,Cu).pause(),dd=[qn,"visibilitychange",function(){var l=ln.innerWidth,c=ln.innerHeight;qn.hidden?(nD=l,rD=c):(nD!==l||rD!==c)&&Zp()},qn,"DOMContentLoaded",Cu,ln,"load",Cu,ln,"resize",Zp],sy(Xr),qt.forEach(function(l){return l.enable(0,1)}),a=0;a<nn.length;a+=3)ay($r,nn[a],nn[a+1]),ay($r,nn[a],nn[a+2])}},n.config=function(r){"limitCallbacks"in r&&($E=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(ry)||(ry=i)&&setInterval(uD,i),"ignoreMobileResize"in r&&(uz=n.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(sy($r)||sy(Xr,r.autoRefreshEvents||"none"),cz=(r.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(r,i){var s=ss(r),o=nn.indexOf(s),a=of(s);~o&&nn.splice(o,a?6:2),i&&(a?xa.unshift(ln,i,zn,i,Uo,i):xa.unshift(s,i))},n.clearMatchMedia=function(r){qt.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},n.isInViewport=function(r,i,s){var o=(Ts(r)?ss(r):r).getBoundingClientRect(),a=o[s?zu:Hu]*i||0;return s?o.right-a>0&&o.left+a<ln.innerWidth:o.bottom-a>0&&o.top+a<ln.innerHeight},n.positionInViewport=function(r,i,s){Ts(r)&&(r=ss(r));var o=r.getBoundingClientRect(),a=o[s?zu:Hu],l=i==null?a/2:i in z_?z_[i]*a:~i.indexOf("%")?parseFloat(i)*a/100:parseFloat(i)||0;return s?(o.left+l)/ln.innerWidth:(o.top+l)/ln.innerHeight},n.killAll=function(r){if(qt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var i=af.killAll||[];af={},i.forEach(function(s){return s()})}},n}();on.version="3.12.4";on.saveStyles=function(n){return n?hg(n).forEach(function(e){if(e&&e.style){var t=Ms.indexOf(e);t>=0&&Ms.splice(t,5),Ms.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),yt.core.getCache(e),_M())}}):Ms};on.revert=function(n,e){return vC(!n,e)};on.create=function(n,e){return new on(n,e)};on.refresh=function(n){return n?Zp():(fd||on.register())&&Cu(!0)};on.update=function(n){return++nn.cache&&sl(n===!0?2:0)};on.clearScrollMemory=Ez;on.maxScroll=function(n,e){return da(n,e?Yi:Lr)};on.getScrollFunc=function(n,e){return bc(ss(n),e?Yi:Lr)};on.getById=function(n){return EM[n]};on.getAll=function(){return qt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};on.isScrolling=function(){return!!_o};on.snapDirectional=gC;on.addEventListener=function(n,e){var t=af[n]||(af[n]=[]);~t.indexOf(e)||t.push(e)};on.removeEventListener=function(n,e){var t=af[n],r=t&&t.indexOf(e);r>=0&&t.splice(r,1)};on.batch=function(n,e){var t=[],r={},i=e.interval||.016,s=e.batchMax||1e9,o=function(c,u){var d=[],p=[],m=yt.delayedCall(i,function(){u(d,p),d=[],p=[]}).pause();return function(v){d.length||m.restart(!0),d.push(v.trigger),p.push(v),s<=d.length&&m.progress(1)}},a;for(a in e)r[a]=a.substr(0,2)==="on"&&Ji(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return Ji(s)&&(s=s(),Xr(on,"refresh",function(){return s=e.batchMax()})),hg(n).forEach(function(l){var c={};for(a in r)c[a]=r[a];c.trigger=l,t.push(on.create(c))}),t};var gD=function(e,t,r,i){return t>i?e(i):t<0&&e(0),r>i?(i-t)/(r-t):r<0?t/(t-r):1},KE=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Pr.isTouch?" pinch-zoom":""):"none",e===Uo&&n(zn,t)},dy={auto:1,scroll:1},VQ=function(e){var t=e.event,r=e.target,i=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||yt.core.getCache(s),a=Xi(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==zn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(dy[(l=fo(s)).overflowY]||dy[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==r&&!of(s)&&(dy[(l=fo(s)).overflowY]||dy[l.overflowX]),o._isScrollT=a}(o._isScroll||i==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},Mz=function(e,t,r,i){return Pr.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&VQ,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&Xr(qn,Pr.eventTypes[0],yD,!1,!0)},onDisable:function(){return $r(qn,Pr.eventTypes[0],yD,!0)}})},WQ=/(input|label|select|textarea)/i,vD,yD=function(e){var t=WQ.test(e.target.tagName);(t||vD)&&(e._gsapAllow=!0,vD=t)},$Q=function(e){gu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,r=t.normalizeScrollX,i=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,c=ss(e.target)||Uo,u=yt.core.globals().ScrollSmoother,d=u&&u.get(),p=Vl&&(e.content&&ss(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),m=bc(c,Lr),v=bc(c,Yi),y=1,_=(Pr.isTouch&&ln.visualViewport?ln.visualViewport.scale*ln.visualViewport.width:ln.outerWidth)/ln.innerWidth,g=0,x=Ji(i)?function(){return i(a)}:function(){return i||2.8},S,A,b=Mz(c,e.type,!0,s),M=function(){return A=!1},C=oa,B=oa,T=function(){l=da(c,Lr),B=Id(Vl?1:0,l),r&&(C=Id(0,da(c,Yi))),S=Gu},P=function(){p._gsap.y=Kp(parseFloat(p._gsap.y)+m.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},N=function(){if(A){requestAnimationFrame(M);var V=Kp(a.deltaY/2),K=B(m.v-V);if(p&&K!==m.v+m.offset){m.offset=K-m.v;var U=Kp((parseFloat(p&&p._gsap.y)||0)-m.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+U+", 0, 1)",p._gsap.y=U+"px",m.cacheID=nn.cache,sl()}return!0}m.offset&&P(),A=!0},z,q,G,Y,ee=function(){T(),z.isActive()&&z.vars.scrollY>l&&(m()>l?z.progress(1)&&m(l):z.resetTo("scrollY",l))};return p&&yt.set(p,{y:"+=0"}),e.ignoreCheck=function(te){return Vl&&te.type==="touchmove"&&N()||y>1.05&&te.type!=="touchstart"||a.isGesturing||te.touches&&te.touches.length>1},e.onPress=function(){A=!1;var te=y;y=Kp((ln.visualViewport&&ln.visualViewport.scale||1)/_),z.pause(),te!==y&&KE(c,y>1.01?!0:r?!1:"x"),q=v(),G=m(),T(),S=Gu},e.onRelease=e.onGestureStart=function(te,V){if(m.offset&&P(),!V)Y.restart(!0);else{nn.cache++;var K=x(),U,oe;r&&(U=v(),oe=U+K*.05*-te.velocityX/.227,K*=gD(v,U,oe,da(c,Yi)),z.vars.scrollX=C(oe)),U=m(),oe=U+K*.05*-te.velocityY/.227,K*=gD(m,U,oe,da(c,Lr)),z.vars.scrollY=B(oe),z.invalidate().duration(K).play(.01),(Vl&&z.vars.scrollY>=l||U>=l-1)&&yt.to({},{onUpdate:ee,duration:K})}o&&o(te)},e.onWheel=function(){z._ts&&z.pause(),Xi()-g>1e3&&(S=0,g=Xi())},e.onChange=function(te,V,K,U,oe){if(Gu!==S&&T(),V&&r&&v(C(U[2]===V?q+(te.startX-te.x):v()+V-U[1])),K){m.offset&&P();var fe=oe[2]===K,ue=fe?G+te.startY-te.y:m()+K-oe[1],pe=B(ue);fe&&ue!==pe&&(G+=pe-ue),m(pe)}(K||V)&&sl()},e.onEnable=function(){KE(c,r?!1:"x"),on.addEventListener("refresh",ee),Xr(ln,"resize",ee),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=v.smooth=!1),b.enable()},e.onDisable=function(){KE(c,!0),$r(ln,"resize",ee),on.removeEventListener("refresh",ee),b.kill()},e.lockAxis=e.lockAxis!==!1,a=new Pr(e),a.iOS=Vl,Vl&&!m()&&m(1),Vl&&yt.ticker.add(oa),Y=a._dc,z=yt.to(a,{ease:"power4",paused:!0,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:wz(m,m(),function(){return z.pause()})},onUpdate:sl,onComplete:Y.vars.onComplete}),a};on.sort=function(n){return qt.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};on.observe=function(n){return new Pr(n)};on.normalizeScroll=function(n){if(typeof n>"u")return Hi;if(n===!0&&Hi)return Hi.enable();if(n===!1){Hi&&Hi.kill(),Hi=n;return}var e=n instanceof Pr?n:$Q(n);return Hi&&Hi.target===e.target&&Hi.kill(),of(e.target)&&(Hi=e),e};on.core={_getVelocityProp:vM,_inputObserver:Mz,_scrollers:nn,_proxies:xa,bridge:{ss:function(){_o||lf("scrollStart"),_o=Xi()},ref:function(){return _i}}};pz()&&yt.registerPlugin(on);function XQ(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function bz(...n){return e=>n.forEach(t=>XQ(t,e))}function Nh(...n){return I.useCallback(bz(...n),n)}const Tz=I.forwardRef((n,e)=>{const{children:t,...r}=n,i=I.Children.toArray(t),s=i.find(jQ);if(s){const o=s.props.children,a=i.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(MM,sn({},r,{ref:e}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(MM,sn({},r,{ref:e}),t)});Tz.displayName="Slot";const MM=I.forwardRef((n,e)=>{const{children:t,...r}=n;return I.isValidElement(t)?I.cloneElement(t,{...YQ(r,t.props),ref:e?bz(e,t.ref):t.ref}):I.Children.count(t)>1?I.Children.only(null):null});MM.displayName="SlotClone";const Cz=({children:n})=>I.createElement(I.Fragment,null,n);function jQ(n){return I.isValidElement(n)&&n.type===Cz}function YQ(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const JQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_f=JQ.reduce((n,e)=>{const t=I.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Tz:e;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,sn({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function KQ(n,e){n&&wg.flushSync(()=>n.dispatchEvent(e))}const ZQ=I.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?M8.createPortal(I.createElement(_f.div,sn({},i,{ref:e})),r):null}),QQ=ZQ;var _D=Object.prototype.hasOwnProperty;function H_(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&H_(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(_D.call(n,t)&&++r&&!_D.call(e,t)||!(t in e)||!H_(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}var Qx=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};Qx.prototype._test=function(e){var t=this.fn;try{Kd(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Kd(this.modifiers.slice(),t,this)(e)}catch{return!1}};Qx.prototype._check=function(e){try{Kd(this.modifiers.slice(),this.fn,this)(e)}catch{if(Kd(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Kd(this.modifiers.slice(),this.fn,this)(e))throw null};Qx.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){Pz(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function Rz(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Kd(n,e,t){if(n.length){var r=n.shift(),i=Kd(n,e,t);return r.perform(i,t)}else return Rz(e)}function Pz(n,e,t){if(n.length){var r=n.shift(),i=Pz(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(Rz(e,"async")(s))}}var qQ=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},yC=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),ba=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ba.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new Qx(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};ba.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new qQ(t,e.simple,e.async)),this};ba.prototype._clone=function(){return new ba(this.chain.slice(),this.nextRuleModifiers.slice())};ba.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ba.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new yC(r,e,i))}}),t};ba.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new yC(t,e,r)}})};ba.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){Bz(e,t.chain.slice(),r,i)})};function Bz(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){Bz(n,e,t,r)},function(s){r(new yC(i,n,s))})}else t(n)}var xD=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function eq(n,e){return e===void 0&&(e=!1),{simple:function(t){return xD(t,e)||n.check(t)===void 0},async:function(t){return xD(t,e)||n.testAsync(t)}}}function us(){return typeof Proxy<"u"?Iz(new ba):bM(new ba)}var mg={};us.extend=function(n){Object.assign(mg,n)};us.clearCustomRules=function(){mg={}};function Iz(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=Iz(n._clone());if(r in G_)return i._applyModifier(G_[r],r);if(r in mg)return i._applyRule(mg[r],r);if(r in TM)return i._applyRule(TM[r],r)}})}function bM(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=bM(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},t=e(TM,n),r=e(mg,t);return Object.keys(G_).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=bM(r._clone());return s._applyModifier(G_[i],i)}})}),r}var G_={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return hy(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(hy(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&hy(e).every(n)}},async:function(n){return function(e){return Promise.all(hy(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return SD(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return SD(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function SD(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function hy(n){return typeof n=="string"?n.split(""):n}var TM={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||tq;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return ad("string")},boolean:function(){return ad("boolean")},undefined:function(){return ad("undefined")},null:function(){return ad("null")},array:function(){return ad("array")},object:function(){return ad("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return nq(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:eq};function ad(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function tq(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function nq(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Tn="colors",Ui="sizes",vt="space",rq={gap:vt,gridGap:vt,columnGap:vt,gridColumnGap:vt,rowGap:vt,gridRowGap:vt,inset:vt,insetBlock:vt,insetBlockEnd:vt,insetBlockStart:vt,insetInline:vt,insetInlineEnd:vt,insetInlineStart:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,marginBlock:vt,marginBlockEnd:vt,marginBlockStart:vt,marginInline:vt,marginInlineEnd:vt,marginInlineStart:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,paddingBlock:vt,paddingBlockEnd:vt,paddingBlockStart:vt,paddingInline:vt,paddingInlineEnd:vt,paddingInlineStart:vt,top:vt,right:vt,bottom:vt,left:vt,scrollMargin:vt,scrollMarginTop:vt,scrollMarginRight:vt,scrollMarginBottom:vt,scrollMarginLeft:vt,scrollMarginX:vt,scrollMarginY:vt,scrollMarginBlock:vt,scrollMarginBlockEnd:vt,scrollMarginBlockStart:vt,scrollMarginInline:vt,scrollMarginInlineEnd:vt,scrollMarginInlineStart:vt,scrollPadding:vt,scrollPaddingTop:vt,scrollPaddingRight:vt,scrollPaddingBottom:vt,scrollPaddingLeft:vt,scrollPaddingX:vt,scrollPaddingY:vt,scrollPaddingBlock:vt,scrollPaddingBlockEnd:vt,scrollPaddingBlockStart:vt,scrollPaddingInline:vt,scrollPaddingInlineEnd:vt,scrollPaddingInlineStart:vt,fontSize:"fontSizes",background:Tn,backgroundColor:Tn,backgroundImage:Tn,borderImage:Tn,border:Tn,borderBlock:Tn,borderBlockEnd:Tn,borderBlockStart:Tn,borderBottom:Tn,borderBottomColor:Tn,borderColor:Tn,borderInline:Tn,borderInlineEnd:Tn,borderInlineStart:Tn,borderLeft:Tn,borderLeftColor:Tn,borderRight:Tn,borderRightColor:Tn,borderTop:Tn,borderTopColor:Tn,caretColor:Tn,color:Tn,columnRuleColor:Tn,fill:Tn,outline:Tn,outlineColor:Tn,stroke:Tn,textDecorationColor:Tn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ui,minBlockSize:Ui,maxBlockSize:Ui,inlineSize:Ui,minInlineSize:Ui,maxInlineSize:Ui,width:Ui,minWidth:Ui,maxWidth:Ui,height:Ui,minHeight:Ui,maxHeight:Ui,flexBasis:Ui,gridTemplateColumns:Ui,gridTemplateRows:Ui,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},iq=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Uh=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,iq))(e);return i in n?n[i]:n[i]=t(e,...r)}},Vu=Symbol.for("sxs.internal"),_C=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),ED=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:sq}=Object.prototype,CM=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),oq=/\s+(?![^()]*\))/,ld=n=>e=>n(...typeof e=="string"?String(e).split(oq):[e]),AD={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:ld((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:ld((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:ld((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:ld((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:ld((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:ld((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},ZE=/([\d.]+)([^]*)/,aq=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,lq=(n,e)=>n in cq&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${CM(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${CM(n)}:${r}fit-content`)+s):String(e),cq={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},gl=n=>n?n+"-":"",Dz=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?gl(e)+(a.includes("$")?"":gl(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),uq=/\s*,\s*(?![^()]*\))/,fq=Object.prototype.toString,Dd=(n,e,t,r,i)=>{let s,o,a;const l=(c,u,d)=>{let p,m;const v=y=>{for(p in y){const x=p.charCodeAt(0)===64,S=x&&Array.isArray(y[p])?y[p]:[y[p]];for(m of S){const A=/[A-Z]/.test(g=p)?g:g.replace(/-[^]/g,M=>M[1].toUpperCase()),b=typeof m=="object"&&m&&m.toString===fq&&(!r.utils[A]||!u.length);if(A in r.utils&&!b){const M=r.utils[A];if(M!==o){o=M,v(M(m)),o=null;continue}}else if(A in AD){const M=AD[A];if(M!==a){a=M,v(M(m)),a=null;continue}}if(x&&(_=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=_.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(M,C,B,T,P,N)=>{const z=ZE.test(C),q=.0625*(z?-1:1),[G,Y]=z?[T,C]:[C,T];return"("+(B[0]==="="?"":B[0]===">"===z?"max-":"min-")+G+":"+(B[0]!=="="&&B.length===1?Y.replace(ZE,(ee,te,V)=>Number(te)+q*(B===">"?1:-1)+V):Y)+(P?") and ("+(P[0]===">"?"min-":"max-")+G+":"+(P.length===1?N.replace(ZE,(ee,te,V)=>Number(te)+q*(P===">"?-1:1)+V):N):"")+")"})),b){const M=x?d.concat(p):[...d],C=x?[...u]:aq(u,p.split(uq));s!==void 0&&i(wD(...s)),s=void 0,l(m,C,M)}else s===void 0&&(s=[[],u,d]),p=x||p.charCodeAt(0)!==36?p:`--${gl(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=b?m:typeof m=="number"?m&&A in dq?String(m)+"px":String(m):Dz(lq(A,m??""),r.prefix,r.themeMap[A]),s[0].push(`${x?`${p} `:`${CM(p)}:`}${m}`)}}var _,g};v(c),s!==void 0&&i(wD(...s)),s=void 0};l(n,e,t)},wD=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,dq={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},MD=n=>String.fromCharCode(n+(n>25?39:97)),Wu=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=MD(t%52)+r;return MD(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Qp=["themed","global","styled","onevar","resonevar","allvar","inline"],hq=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},pq=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(hq(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=Qp[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:d,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Qp.length-1;a>=0;--a){const l=Qp[a];if(!o[l]){const c=Qp[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}mq(o[l])}};return r(),e},mq=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Np=Symbol(),gq=Uh(),bD=(n,e)=>gq(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Vu]){r.type==null&&(r.type=i[Vu].type);for(const s of i[Vu].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(vq(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),yq(n,r,e)}),vq=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${gl(i.prefix)}c-${Wu(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){u=l,d=p,sq.call(u,d)||(l[p]="undefined");const m=n[p];for(const v in m){const y={[p]:String(v)};String(v)==="undefined"&&c.push(p);const _=m[v],g=[y,_,!ED(_)];o.push(g)}}var u,d;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const _ in v)v[_]=String(v[_]);const y=[v,m,!ED(m)];a.push(y)}return[s,r,o,a,l,c]},yq=(n,e,t)=>{const[r,i,s,o]=_q(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function p(){for(let m=0;m<p[Np].length;m++){const[v,y]=p[Np][m];d.rules[v].apply(y)}return p[Np]=[],null}return p[Np]=[],p.rules={},Qp.forEach(m=>p.rules[m]={apply:v=>p[Np].push([m,v])}),p})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||xq;const{css:p,...m}=d,v={};for(const g in s)if(delete m[g],g in d){let x=d[g];typeof x=="object"&&x?v[g]={"@initial":s[g],...x}:(x=String(x),v[g]=x!=="undefined"||o.has(g)?x:s[g])}else v[g]=s[g];const y=new Set([...i]);for(const[g,x,S,A]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),Dd(x,[`.${g}`],[],n,C=>{l.styled.apply(C)}));const b=TD(S,v,n.media),M=TD(A,v,n.media,!0);for(const C of b)if(C!==void 0)for(const[B,T,P]of C){const N=`${g}-${Wu(T)}-${B}`;y.add(N);const z=(P?t.rules.resonevar:t.rules.onevar).cache,q=P?l.resonevar:l.onevar;z.has(N)||(z.add(N),Dd(T,[`.${N}`],[],n,G=>{q.apply(G)}))}for(const C of M)if(C!==void 0)for(const[B,T]of C){const P=`${g}-${Wu(T)}-${B}`;y.add(P),t.rules.allvar.cache.has(P)||(t.rules.allvar.cache.add(P),Dd(T,[`.${P}`],[],n,N=>{l.allvar.apply(N)}))}}if(typeof p=="object"&&p){const g=`${r}-i${Wu(p)}-css`;y.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),Dd(p,[`.${g}`],[],n,x=>{l.inline.apply(x)}))}for(const g of String(d.className||"").trim().split(/\s+/))g&&y.add(g);const _=m.className=[...y].join(" ");return{type:e.type,className:_,selector:c,props:m,toString:()=>_,deferredInjector:a}};return _C(u,{className:r,selector:c,[Vu]:e,toString:()=>(t.rules.styled.cache.has(r)||u(),r)})},_q=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},TD=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let p=e[l];if(p!==d){if(typeof p!="object"||!p)continue e;{let m,v,y=0;for(const _ in p){if(d===String(p[_])){if(_!=="@initial"){const g=_.slice(1);(v=v||[]).push(g in t?t[g]:_.replace(/^@media ?/,"")),u=!0}c+=y,m=!0}++y}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},xq={},Sq=Uh(),Eq=(n,e)=>Sq(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Wu(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Dd(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return _C(r,{toString:r})}),Aq=Uh(),wq=(n,e)=>Aq(n,()=>t=>{const r=`${gl(n.prefix)}k-${Wu(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Dd(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return _C(i,{get name(){return i()},toString:i})}),Mq=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+gl(this.prefix)+gl(this.scale)+this.token}toString(){return this.computedValue}},bq=Uh(),Tq=(n,e)=>bq(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${gl(n.prefix)}t-${Wu(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${gl(n.prefix)}${l}-${c}`,d=Dz(String(r[l][c]),n.prefix,l);s[l][c]=new Mq(c,d,l,n.prefix),o.push(`${u}:${d}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),Cq=Uh(),Rq=Uh(),Pq=n=>{const e=(t=>{let r=!1;const i=Cq(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...rq},utils:typeof s.utils=="object"&&s.utils||{}},d=pq(l),p={css:bD(u,d),globalCss:Eq(u,d),keyframes:wq(u,d),createTheme:Tq(u,d),reset(){d.reset(),p.theme.toString()},theme:{},sheet:d,config:u,prefix:o,getCssText:d.toString,toString:d.toString};return String(p.theme=p.createTheme(c)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>Rq(t,()=>{const i=bD(t,r);return(...s)=>{const o=i(...s),a=o[Vu].type,l=ie.forwardRef((c,u)=>{const d=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=u,m?ie.createElement(ie.Fragment,null,ie.createElement(d,p),ie.createElement(m,null)):ie.createElement(d,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Vu]=o[Vu],l}}))(e),e};function Ja(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Lz(n,e=[]){let t=[];function r(s,o){const a=I.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:p,children:m,...v}=d,y=(p==null?void 0:p[n][l])||a,_=I.useMemo(()=>v,Object.values(v));return I.createElement(y.Provider,{value:_},m)}function u(d,p){const m=(p==null?void 0:p[n][l])||a,v=I.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(o=>I.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return I.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Bq(i,...e)]}function Bq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function kh(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function Iq(n,e=globalThis==null?void 0:globalThis.document){const t=kh(n);I.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const RM="dismissableLayer.update",Dq="dismissableLayer.pointerDownOutside",Lq="dismissableLayer.focusOutside";let CD;const Oq=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fq=I.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=I.useContext(Oq),[d,p]=I.useState(null),m=(t=d==null?void 0:d.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=I.useState({}),y=Nh(e,B=>p(B)),_=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(g),S=d?_.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,b=S>=x,M=Nq(B=>{const T=B.target,P=[...u.branches].some(N=>N.contains(T));!b||P||(s==null||s(B),a==null||a(B),B.defaultPrevented||l==null||l())},m),C=Uq(B=>{const T=B.target;[...u.branches].some(N=>N.contains(T))||(o==null||o(B),a==null||a(B),B.defaultPrevented||l==null||l())},m);return Iq(B=>{S===u.layers.size-1&&(i==null||i(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},m),I.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(CD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),RD(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=CD)}},[d,m,r,u]),I.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),RD())},[d,u]),I.useEffect(()=>{const B=()=>v({});return document.addEventListener(RM,B),()=>document.removeEventListener(RM,B)},[]),I.createElement(_f.div,sn({},c,{ref:y,style:{pointerEvents:A?b?"auto":"none":void 0,...n.style},onFocusCapture:Ja(n.onFocusCapture,C.onFocusCapture),onBlurCapture:Ja(n.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ja(n.onPointerDownCapture,M.onPointerDownCapture)}))});function Nq(n,e=globalThis==null?void 0:globalThis.document){const t=kh(n),r=I.useRef(!1),i=I.useRef(()=>{});return I.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){Oz(Dq,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Uq(n,e=globalThis==null?void 0:globalThis.document){const t=kh(n),r=I.useRef(!1);return I.useEffect(()=>{const i=s=>{s.target&&!r.current&&Oz(Lq,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function RD(){const n=new CustomEvent(RM);document.dispatchEvent(n)}function Oz(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?KQ(i,s):i.dispatchEvent(s)}const xh=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},kq=mG.useId||(()=>{});let zq=0;function Hq(n){const[e,t]=I.useState(kq());return xh(()=>{n||t(r=>r??String(zq++))},[n]),n||(e?`radix-${e}`:"")}const Gq=["top","right","bottom","left"],Tc=Math.min,Rs=Math.max,V_=Math.round,py=Math.floor,Cc=n=>({x:n,y:n}),Vq={left:"right",right:"left",bottom:"top",top:"bottom"},Wq={start:"end",end:"start"};function PM(n,e,t){return Rs(n,Tc(e,t))}function vl(n,e){return typeof n=="function"?n(e):n}function yl(n){return n.split("-")[0]}function zh(n){return n.split("-")[1]}function xC(n){return n==="x"?"y":"x"}function SC(n){return n==="y"?"height":"width"}function Hh(n){return["top","bottom"].includes(yl(n))?"y":"x"}function EC(n){return xC(Hh(n))}function $q(n,e,t){t===void 0&&(t=!1);const r=zh(n),i=EC(n),s=SC(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=W_(o)),[o,W_(o)]}function Xq(n){const e=W_(n);return[BM(n),e,BM(e)]}function BM(n){return n.replace(/start|end/g,e=>Wq[e])}function jq(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Yq(n,e,t,r){const i=zh(n);let s=jq(yl(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(BM)))),s}function W_(n){return n.replace(/left|right|bottom|top/g,e=>Vq[e])}function Jq(n){return{top:0,right:0,bottom:0,left:0,...n}}function Fz(n){return typeof n!="number"?Jq(n):{top:n,right:n,bottom:n,left:n}}function $_(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function PD(n,e,t){let{reference:r,floating:i}=n;const s=Hh(e),o=EC(e),a=SC(o),l=yl(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(zh(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const Kq=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=PD(c,r,l),p=r,m={},v=0;for(let y=0;y<a.length;y++){const{name:_,fn:g}=a[y],{x,y:S,data:A,reset:b}=await g({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});if(u=x??u,d=S??d,m={...m,[_]:{...m[_],...A}},b&&v<=50){v++,typeof b=="object"&&(b.placement&&(p=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):b.rects),{x:u,y:d}=PD(c,p,l)),y=-1;continue}}return{x:u,y:d,placement:p,strategy:i,middlewareData:m}};async function gg(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=vl(e,n),v=Fz(m),_=a[p?d==="floating"?"reference":"floating":d],g=$_(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(_)))==null||t?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{...o.floating,x:r,y:i}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),A=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},b=$_(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:S,strategy:l}):x);return{top:(g.top-b.top+v.top)/A.y,bottom:(b.bottom-g.bottom+v.bottom)/A.y,left:(g.left-b.left+v.left)/A.x,right:(b.right-g.right+v.right)/A.x}}const BD=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=vl(n,e)||{};if(c==null)return{};const d=Fz(u),p={x:t,y:r},m=EC(i),v=SC(m),y=await o.getDimensions(c),_=m==="y",g=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",A=s.reference[v]+s.reference[m]-p[m]-s.floating[v],b=p[m]-s.reference[m],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=M?M[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[S]||s.floating[v]);const B=A/2-b/2,T=C/2-y[v]/2-1,P=Tc(d[g],T),N=Tc(d[x],T),z=P,q=C-y[v]-N,G=C/2-y[v]/2+B,Y=PM(z,G,q),ee=!l.arrow&&zh(i)!=null&&G!=Y&&s.reference[v]/2-(G<z?P:N)-y[v]/2<0,te=ee?G<z?G-z:G-q:0;return{[m]:p[m]+te,data:{[m]:Y,centerOffset:G-Y-te,...ee&&{alignmentOffset:te}},reset:ee}}}),Zq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,..._}=vl(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=yl(i),x=yl(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(x||!y?[W_(a)]:Xq(a));!p&&v!=="none"&&A.push(...Yq(a,y,v,S));const b=[a,...A],M=await gg(e,_),C=[];let B=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&C.push(M[g]),d){const z=$q(i,o,S);C.push(M[z[0]],M[z[1]])}if(B=[...B,{placement:i,overflows:C}],!C.every(z=>z<=0)){var T,P;const z=(((T=s.flip)==null?void 0:T.index)||0)+1,q=b[z];if(q)return{data:{index:z,overflows:B},reset:{placement:q}};let G=(P=B.filter(Y=>Y.overflows[0]<=0).sort((Y,ee)=>Y.overflows[1]-ee.overflows[1])[0])==null?void 0:P.placement;if(!G)switch(m){case"bestFit":{var N;const Y=(N=B.map(ee=>[ee.placement,ee.overflows.filter(te=>te>0).reduce((te,V)=>te+V,0)]).sort((ee,te)=>ee[1]-te[1])[0])==null?void 0:N[0];Y&&(G=Y);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function ID(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function DD(n){return Gq.some(e=>n[e]>=0)}const Qq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=vl(n,e);switch(r){case"referenceHidden":{const s=await gg(e,{...i,elementContext:"reference"}),o=ID(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:DD(o)}}}case"escaped":{const s=await gg(e,{...i,altBoundary:!0}),o=ID(s,t.floating);return{data:{escapedOffsets:o,escaped:DD(o)}}}default:return{}}}}};async function qq(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=yl(t),a=zh(t),l=Hh(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=vl(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const eee=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await qq(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},tee=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:g,y:x}=_;return{x:g,y:x}}},...l}=vl(n,e),c={x:t,y:r},u=await gg(e,l),d=Hh(yl(i)),p=xC(d);let m=c[p],v=c[d];if(s){const _=p==="y"?"top":"left",g=p==="y"?"bottom":"right",x=m+u[_],S=m-u[g];m=PM(x,m,S)}if(o){const _=d==="y"?"top":"left",g=d==="y"?"bottom":"right",x=v+u[_],S=v-u[g];v=PM(x,v,S)}const y=a.fn({...e,[p]:m,[d]:v});return{...y,data:{x:y.x-t,y:y.y-r}}}}},nee=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=vl(n,e),u={x:t,y:r},d=Hh(i),p=xC(d);let m=u[p],v=u[d];const y=vl(a,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=p==="y"?"height":"width",A=s.reference[p]-s.floating[S]+_.mainAxis,b=s.reference[p]+s.reference[S]-_.mainAxis;m<A?m=A:m>b&&(m=b)}if(c){var g,x;const S=p==="y"?"width":"height",A=["top","left"].includes(yl(i)),b=s.reference[d]-s.floating[S]+(A&&((g=o.offset)==null?void 0:g[d])||0)+(A?0:_.crossAxis),M=s.reference[d]+s.reference[S]+(A?0:((x=o.offset)==null?void 0:x[d])||0)-(A?_.crossAxis:0);v<b?v=b:v>M&&(v=M)}return{[p]:m,[d]:v}}}},ree=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=vl(n,e),l=await gg(e,a),c=yl(t),u=zh(t),d=Hh(t)==="y",{width:p,height:m}=r.floating;let v,y;c==="top"||c==="bottom"?(v=c,y=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(y=c,v=u==="end"?"top":"bottom");const _=m-l[v],g=p-l[y],x=!e.middlewareData.shift;let S=_,A=g;if(d){const M=p-l.left-l.right;A=u||x?Tc(g,M):M}else{const M=m-l.top-l.bottom;S=u||x?Tc(_,M):M}if(x&&!u){const M=Rs(l.left,0),C=Rs(l.right,0),B=Rs(l.top,0),T=Rs(l.bottom,0);d?A=p-2*(M!==0||C!==0?M+C:Rs(l.left,l.right)):S=m-2*(B!==0||T!==0?B+T:Rs(l.top,l.bottom))}await o({...e,availableWidth:A,availableHeight:S});const b=await i.getDimensions(s.floating);return p!==b.width||m!==b.height?{reset:{rects:!0}}:{}}}};function Rc(n){return Nz(n)?(n.nodeName||"").toLowerCase():"#document"}function ks(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Sl(n){var e;return(e=(Nz(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Nz(n){return n instanceof Node||n instanceof ks(n).Node}function _l(n){return n instanceof Element||n instanceof ks(n).Element}function Ta(n){return n instanceof HTMLElement||n instanceof ks(n).HTMLElement}function LD(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ks(n).ShadowRoot}function Hg(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ao(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function iee(n){return["table","td","th"].includes(Rc(n))}function AC(n){const e=wC(),t=Ao(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function see(n){let e=Sh(n);for(;Ta(e)&&!qx(e);){if(AC(e))return e;e=Sh(e)}return null}function wC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qx(n){return["html","body","#document"].includes(Rc(n))}function Ao(n){return ks(n).getComputedStyle(n)}function e1(n){return _l(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Sh(n){if(Rc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||LD(n)&&n.host||Sl(n);return LD(e)?e.host:e}function Uz(n){const e=Sh(n);return qx(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ta(e)&&Hg(e)?e:Uz(e)}function vg(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Uz(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=ks(i);return s?e.concat(o,o.visualViewport||[],Hg(i)?i:[],o.frameElement&&t?vg(o.frameElement):[]):e.concat(i,vg(i,[],t))}function kz(n){const e=Ao(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ta(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=V_(t)!==s||V_(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function MC(n){return _l(n)?n:n.contextElement}function Zd(n){const e=MC(n);if(!Ta(e))return Cc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=kz(e);let o=(s?V_(t.width):t.width)/r,a=(s?V_(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oee=Cc(0);function zz(n){const e=ks(n);return!wC()||!e.visualViewport?oee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aee(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ks(n)?!1:e}function cf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=MC(n);let o=Cc(1);e&&(r?_l(r)&&(o=Zd(r)):o=Zd(n));const a=aee(s,t,r)?zz(s):Cc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const p=ks(s),m=r&&_l(r)?ks(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const y=Zd(v),_=v.getBoundingClientRect(),g=Ao(v),x=_.left+(v.clientLeft+parseFloat(g.paddingLeft))*y.x,S=_.top+(v.clientTop+parseFloat(g.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=x,c+=S,v=ks(v).frameElement}}return $_({width:u,height:d,x:l,y:c})}function lee(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Ta(t),s=Sl(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=Cc(1);const l=Cc(0);if((i||!i&&r!=="fixed")&&((Rc(t)!=="body"||Hg(s))&&(o=e1(t)),Ta(t))){const c=cf(t);a=Zd(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function cee(n){return Array.from(n.getClientRects())}function Hz(n){return cf(Sl(n)).left+e1(n).scrollLeft}function uee(n){const e=Sl(n),t=e1(n),r=n.ownerDocument.body,i=Rs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Rs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Hz(n);const a=-t.scrollTop;return Ao(r).direction==="rtl"&&(o+=Rs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function fee(n,e){const t=ks(n),r=Sl(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=wC();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function dee(n,e){const t=cf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Ta(n)?Zd(n):Cc(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function OD(n,e,t){let r;if(e==="viewport")r=fee(n,t);else if(e==="document")r=uee(Sl(n));else if(_l(e))r=dee(e,t);else{const i=zz(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return $_(r)}function Gz(n,e){const t=Sh(n);return t===e||!_l(t)||qx(t)?!1:Ao(t).position==="fixed"||Gz(t,e)}function hee(n,e){const t=e.get(n);if(t)return t;let r=vg(n,[],!1).filter(a=>_l(a)&&Rc(a)!=="body"),i=null;const s=Ao(n).position==="fixed";let o=s?Sh(n):n;for(;_l(o)&&!qx(o);){const a=Ao(o),l=AC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hg(o)&&!l&&Gz(n,o))?r=r.filter(u=>u!==o):i=a,o=Sh(o)}return e.set(n,r),r}function pee(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?hee(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,u)=>{const d=OD(e,u,i);return c.top=Rs(d.top,c.top),c.right=Tc(d.right,c.right),c.bottom=Tc(d.bottom,c.bottom),c.left=Rs(d.left,c.left),c},OD(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mee(n){return kz(n)}function gee(n,e,t){const r=Ta(e),i=Sl(e),s=t==="fixed",o=cf(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cc(0);if(r||!r&&!s)if((Rc(e)!=="body"||Hg(i))&&(a=e1(e)),r){const c=cf(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=Hz(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function FD(n,e){return!Ta(n)||Ao(n).position==="fixed"?null:e?e(n):n.offsetParent}function Vz(n,e){const t=ks(n);if(!Ta(n))return t;let r=FD(n,e);for(;r&&iee(r)&&Ao(r).position==="static";)r=FD(r,e);return r&&(Rc(r)==="html"||Rc(r)==="body"&&Ao(r).position==="static"&&!AC(r))?t:r||see(n)||t}const vee=async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||Vz,s=this.getDimensions;return{reference:gee(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}};function yee(n){return Ao(n).direction==="rtl"}const _ee={convertOffsetParentRelativeRectToViewportRelativeRect:lee,getDocumentElement:Sl,getClippingRect:pee,getOffsetParent:Vz,getElementRects:vee,getClientRects:cee,getDimensions:mee,getScale:Zd,isElement:_l,isRTL:yee};function xee(n,e){let t=null,r;const i=Sl(n);function s(){clearTimeout(r),t&&t.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:p}=n.getBoundingClientRect();if(a||e(),!d||!p)return;const m=py(u),v=py(i.clientWidth-(c+d)),y=py(i.clientHeight-(u+p)),_=py(c),x={rootMargin:-m+"px "+-v+"px "+-y+"px "+-_+"px",threshold:Rs(0,Tc(1,l))||1};let S=!0;function A(b){const M=b[0].intersectionRatio;if(M!==l){if(!S)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},100)}S=!1}try{t=new IntersectionObserver(A,{...x,root:i.ownerDocument})}catch{t=new IntersectionObserver(A,x)}t.observe(n)}return o(!0),s}function See(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=MC(n),u=i||s?[...c?vg(c):[],...vg(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const d=c&&a?xee(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[x]=g;x&&x.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,y=l?cf(n):null;l&&_();function _(){const g=cf(n);y&&(g.x!==y.x||g.y!==y.y||g.width!==y.width||g.height!==y.height)&&t(),y=g,v=requestAnimationFrame(_)}return t(),()=>{u.forEach(g=>{i&&g.removeEventListener("scroll",t),s&&g.removeEventListener("resize",t)}),d&&d(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const Eee=(n,e,t)=>{const r=new Map,i={platform:_ee,...t},s={...i.platform,_c:r};return Kq(n,e,{...i,platform:s})},Aee=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?BD({element:r.current,padding:i}).fn(t):{}:r?BD({element:r,padding:i}).fn(t):{}}}};var Zy=typeof document<"u"?I.useLayoutEffect:I.useEffect;function X_(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!X_(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!X_(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Wz(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function ND(n,e){const t=Wz(n);return Math.round(e*t)/t}function UD(n){const e=I.useRef(n);return Zy(()=>{e.current=n}),e}function wee(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,d]=I.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=I.useState(r);X_(p,r)||m(r);const[v,y]=I.useState(null),[_,g]=I.useState(null),x=I.useCallback(ee=>{ee!=M.current&&(M.current=ee,y(ee))},[y]),S=I.useCallback(ee=>{ee!==C.current&&(C.current=ee,g(ee))},[g]),A=s||v,b=o||_,M=I.useRef(null),C=I.useRef(null),B=I.useRef(u),T=UD(l),P=UD(i),N=I.useCallback(()=>{if(!M.current||!C.current)return;const ee={placement:e,strategy:t,middleware:p};P.current&&(ee.platform=P.current),Eee(M.current,C.current,ee).then(te=>{const V={...te,isPositioned:!0};z.current&&!X_(B.current,V)&&(B.current=V,wg.flushSync(()=>{d(V)}))})},[p,e,t,P]);Zy(()=>{c===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,d(ee=>({...ee,isPositioned:!1})))},[c]);const z=I.useRef(!1);Zy(()=>(z.current=!0,()=>{z.current=!1}),[]),Zy(()=>{if(A&&(M.current=A),b&&(C.current=b),A&&b){if(T.current)return T.current(A,b,N);N()}},[A,b,N,T]);const q=I.useMemo(()=>({reference:M,floating:C,setReference:x,setFloating:S}),[x,S]),G=I.useMemo(()=>({reference:A,floating:b}),[A,b]),Y=I.useMemo(()=>{const ee={position:t,left:0,top:0};if(!G.floating)return ee;const te=ND(G.floating,u.x),V=ND(G.floating,u.y);return a?{...ee,transform:"translate("+te+"px, "+V+"px)",...Wz(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:te,top:V}},[t,a,G.floating,u.x,u.y]);return I.useMemo(()=>({...u,update:N,refs:q,elements:G,floatingStyles:Y}),[u,N,q,G,Y])}const Mee=I.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return I.createElement(_f.svg,sn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:I.createElement("polygon",{points:"0,0 30,0 15,10"}))}),bee=Mee;function Tee(n){const[e,t]=I.useState(void 0);return xh(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const $z="Popper",[Xz,jz]=Lz($z),[Cee,Yz]=Xz($z),Ree=n=>{const{__scopePopper:e,children:t}=n,[r,i]=I.useState(null);return I.createElement(Cee,{scope:e,anchor:r,onAnchorChange:i},t)},Pee="PopperAnchor",Bee=I.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Yz(Pee,t),o=I.useRef(null),a=Nh(e,o);return I.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:I.createElement(_f.div,sn({},i,{ref:a}))}),Jz="PopperContent",[Iee,Dee]=Xz(Jz),Lee=I.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:_=!0,collisionBoundary:g=[],collisionPadding:x=0,sticky:S="partial",hideWhenDetached:A=!1,updatePositionStrategy:b="optimized",onPlaced:M,...C}=n,B=Yz(Jz,u),[T,P]=I.useState(null),N=Nh(e,Fe=>P(Fe)),[z,q]=I.useState(null),G=Tee(z),Y=(t=G==null?void 0:G.width)!==null&&t!==void 0?t:0,ee=(r=G==null?void 0:G.height)!==null&&r!==void 0?r:0,te=d+(m!=="center"?"-"+m:""),V=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},K=Array.isArray(g)?g:[g],U=K.length>0,oe={padding:V,boundary:K.filter(Uee),altBoundary:U},{refs:fe,floatingStyles:ue,placement:pe,isPositioned:be,middlewareData:Ae}=wee({strategy:"fixed",placement:te,whileElementsMounted:(...Fe)=>See(...Fe,{animationFrame:b==="always"}),elements:{reference:B.anchor},middleware:[eee({mainAxis:p+ee,alignmentAxis:v}),_&&tee({mainAxis:!0,crossAxis:!1,limiter:S==="partial"?nee():void 0,...oe}),_&&Zq({...oe}),ree({...oe,apply:({elements:Fe,rects:Ce,availableWidth:ae,availableHeight:Ve})=>{const{width:et,height:pt}=Ce.reference,ut=Fe.floating.style;ut.setProperty("--radix-popper-available-width",`${ae}px`),ut.setProperty("--radix-popper-available-height",`${Ve}px`),ut.setProperty("--radix-popper-anchor-width",`${et}px`),ut.setProperty("--radix-popper-anchor-height",`${pt}px`)}}),z&&Aee({element:z,padding:y}),kee({arrowWidth:Y,arrowHeight:ee}),A&&Qq({strategy:"referenceHidden",...oe})]}),[Le,qe]=Kz(pe),st=kh(M);xh(()=>{be&&(st==null||st())},[be,st]);const ot=(i=Ae.arrow)===null||i===void 0?void 0:i.x,Ye=(s=Ae.arrow)===null||s===void 0?void 0:s.y,Z=((o=Ae.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[xe,ve]=I.useState();return xh(()=>{T&&ve(window.getComputedStyle(T).zIndex)},[T]),I.createElement("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:be?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(a=Ae.transformOrigin)===null||a===void 0?void 0:a.x,(l=Ae.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},I.createElement(Iee,{scope:u,placedSide:Le,onArrowChange:q,arrowX:ot,arrowY:Ye,shouldHideArrow:Z},I.createElement(_f.div,sn({"data-side":Le,"data-align":qe},C,{ref:N,style:{...C.style,animation:be?void 0:"none",opacity:(c=Ae.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),Oee="PopperArrow",Fee={top:"bottom",right:"left",bottom:"top",left:"right"},Nee=I.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=Dee(Oee,r),o=Fee[s.placedSide];return I.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},I.createElement(bee,sn({},i,{ref:t,style:{...i.style,display:"block"}})))});function Uee(n){return n!==null}const kee=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=d?0:n.arrowWidth,m=d?0:n.arrowHeight,[v,y]=Kz(a),_={start:"0%",center:"50%",end:"100%"}[y],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let S="",A="";return v==="bottom"?(S=d?_:`${g}px`,A=`${-m}px`):v==="top"?(S=d?_:`${g}px`,A=`${l.floating.height+m}px`):v==="right"?(S=`${-m}px`,A=d?_:`${x}px`):v==="left"&&(S=`${l.floating.width+m}px`,A=d?_:`${x}px`),{data:{x:S,y:A}}}});function Kz(n){const[e,t="center"]=n.split("-");return[e,t]}const zee=Ree,Hee=Bee,Gee=Lee,Vee=Nee;function Wee(n,e){return I.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const Zz=n=>{const{present:e,children:t}=n,r=$ee(e),i=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),s=Nh(r.ref,i.ref);return typeof t=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};Zz.displayName="Presence";function $ee(n){const[e,t]=I.useState(),r=I.useRef({}),i=I.useRef(n),s=I.useRef("none"),o=n?"mounted":"unmounted",[a,l]=Wee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const c=my(r.current);s.current=a==="mounted"?c:"none"},[a]),xh(()=>{const c=r.current,u=i.current;if(u!==n){const p=s.current,m=my(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),xh(()=>{if(e){const c=d=>{const m=my(r.current).includes(d.animationName);d.target===e&&m&&wg.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=my(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function my(n){return(n==null?void 0:n.animationName)||"none"}function Xee({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=jee({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=kh(t),l=I.useCallback(c=>{if(s){const d=typeof c=="function"?c(n):c;d!==n&&a(d)}else i(c)},[s,n,i,a]);return[o,l]}function jee({defaultProp:n,onChange:e}){const t=I.useState(n),[r]=t,i=I.useRef(r),s=kh(e);return I.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const Yee=I.forwardRef((n,e)=>I.createElement(_f.span,sn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),Jee=Yee,[t1,Wae]=Lz("Tooltip",[jz]),n1=jz(),Kee="TooltipProvider",IM="tooltip.open",[$ae,bC]=t1(Kee),TC="Tooltip",[Zee,r1]=t1(TC),Qee=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=bC(TC,n.__scopeTooltip),c=n1(e),[u,d]=I.useState(null),p=Hq(),m=I.useRef(0),v=o??l.disableHoverableContent,y=a??l.delayDuration,_=I.useRef(!1),[g=!1,x]=Xee({prop:r,defaultProp:i,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(IM))):l.onClose(),s==null||s(C)}}),S=I.useMemo(()=>g?_.current?"delayed-open":"instant-open":"closed",[g]),A=I.useCallback(()=>{window.clearTimeout(m.current),_.current=!1,x(!0)},[x]),b=I.useCallback(()=>{window.clearTimeout(m.current),x(!1)},[x]),M=I.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,x(!0)},y)},[y,x]);return I.useEffect(()=>()=>window.clearTimeout(m.current),[]),I.createElement(zee,c,I.createElement(Zee,{scope:e,contentId:p,open:g,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:I.useCallback(()=>{l.isOpenDelayed?M():A()},[l.isOpenDelayed,M,A]),onTriggerLeave:I.useCallback(()=>{v?b():window.clearTimeout(m.current)},[b,v]),onOpen:A,onClose:b,disableHoverableContent:v},t))},kD="TooltipTrigger",qee=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=r1(kD,t),s=bC(kD,t),o=n1(t),a=I.useRef(null),l=Nh(e,a,i.onTriggerChange),c=I.useRef(!1),u=I.useRef(!1),d=I.useCallback(()=>c.current=!1,[]);return I.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),I.createElement(Hee,sn({asChild:!0},o),I.createElement(_f.button,sn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Ja(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ja(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ja(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ja(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Ja(n.onBlur,i.onClose),onClick:Ja(n.onClick,i.onClose)})))}),ete="TooltipPortal",[Xae,tte]=t1(ete,{forceMount:void 0}),yg="TooltipContent",nte=I.forwardRef((n,e)=>{const t=tte(yg,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=r1(yg,n.__scopeTooltip);return I.createElement(Zz,{present:r||o.open},o.disableHoverableContent?I.createElement(Qz,sn({side:i},s,{ref:e})):I.createElement(rte,sn({side:i},s,{ref:e})))}),rte=I.forwardRef((n,e)=>{const t=r1(yg,n.__scopeTooltip),r=bC(yg,n.__scopeTooltip),i=I.useRef(null),s=Nh(e,i),[o,a]=I.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,p=I.useCallback(()=>{a(null),d(!1)},[d]),m=I.useCallback((v,y)=>{const _=v.currentTarget,g={x:v.clientX,y:v.clientY},x=lte(g,_.getBoundingClientRect()),S=cte(g,x),A=ute(y.getBoundingClientRect()),b=dte([...S,...A]);a(b),d(!0)},[d]);return I.useEffect(()=>()=>p(),[p]),I.useEffect(()=>{if(l&&u){const v=_=>m(_,u),y=_=>m(_,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",y)}}},[l,u,m,p]),I.useEffect(()=>{if(o){const v=y=>{const _=y.target,g={x:y.clientX,y:y.clientY},x=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),S=!fte(g,o);x?p():S&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,p]),I.createElement(Qz,sn({},n,{ref:s}))}),[ite,ste]=t1(TC,{isInside:!1}),Qz=I.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=r1(yg,t),c=n1(t),{onClose:u}=l;return I.useEffect(()=>(document.addEventListener(IM,u),()=>document.removeEventListener(IM,u)),[u]),I.useEffect(()=>{if(l.trigger){const d=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),I.createElement(Fq,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u},I.createElement(Gee,sn({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),I.createElement(Cz,null,r),I.createElement(ite,{scope:t,isInside:!0},I.createElement(Jee,{id:l.contentId,role:"tooltip"},i||r))))}),ote="TooltipArrow",ate=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=n1(t);return ste(ote,t).isInside?null:I.createElement(Vee,sn({},i,r,{ref:e}))});function lte(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cte(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function ute(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function fte(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&t<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function dte(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),hte(e)}function hte(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const pte=Qee,mte=qee,gte=nte,vte=ate;function yte(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Nn(n,e){if(n==null)return{};var t=yte(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let tr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(tr||(tr={}));const _te={[tr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[tr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[tr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[tr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[tr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[tr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[tr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[tr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[tr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[tr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[tr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function qz(n,e,...t){const[r,...i]=_te[e](...t);console[n]("LEVA: "+r,...i)}const Qa=qz.bind(null,"warn"),xte=qz.bind(null,"log"),Ste=["value"],Ete=["schema"],Ate=["value"],eH=[],uf={};function zD(n){let{value:e}=n,t=Nn(n,Ste);for(let r of eH){const i=r(e,t);if(i)return i}}function El(n,e){let{schema:t}=e,r=Nn(e,Ete);if(n in uf){Qa(tr.ALREADY_REGISTERED_TYPE,n);return}eH.push((i,s)=>t(i,s)&&n),uf[n]=r}function QE(n,e,t,r){const{normalize:i}=uf[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Nn(e,Ate);return{value:s,settings:o}}function wte(n,e,t,r,i,s){const{sanitize:o}=uf[n];return o?o(e,t,r,i,s):e}function HD(n,e,t){const{format:r}=uf[n];return r?r(e,t):e}function Mte(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(t),!0).forEach(function(r){Mte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Pc=(n,e,t)=>n>t?t:n<e?e:n,bte=n=>{if(n===""||typeof n=="number")return n;try{const e=Wl(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},Tte=Math.log(10);function VD(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/Tte)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const j_=(n,e,t)=>t===e?0:(Pc(n,e,t)-e)/(t-e),Y_=(n,e,t)=>n*(t-e)+e,Cte=()=>"_"+Math.random().toString(36).substr(2,9),WD=/\(([0-9+\-*/^ .]+)\)/,$D=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,XD=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,jD=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,YD=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,JD=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Wl(n){if(isNaN(Number(n)))if(WD.test(n)){const e=n.replace(WD,(t,r)=>String(Wl(r)));return Wl(e)}else if($D.test(n)){const e=n.replace($D,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Wl(e)}else if(XD.test(n)){const e=n.replace(XD,(t,r,i)=>String(Number(r)*Number(i)));return Wl(e)}else if(jD.test(n)){const e=n.replace(jD,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Wl(e)}else if(YD.test(n)){const e=n.replace(YD,(t,r,i)=>String(Number(r)+Number(i)));return Wl(e)}else if(JD.test(n)){const e=n.replace(JD,(t,r,i)=>String(Number(r)-Number(i)));return Wl(e)}else return Number(n);return Number(n)}function Rte(n,e){const t=Vt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function Pte(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function tH(n){return Object.prototype.toString.call(n)==="[object Object]"}const Bte=n=>tH(n)&&Object.keys(n).length===0;let Sa;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Sa||(Sa={}));let Wo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Wo||(Wo={}));const Ite=["type","__customInput"],Dte=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Lte=["type"];function nH(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Vt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:b,__customInput:M}=n,C=Nn(n,Ite);return nH(M,e,C,b)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:d,onChange:p,onEditStart:m,onEditEnd:v,transient:y}=n,_=Nn(n,Dte),g=Vt({render:o,key:e,label:a??e,hint:d,transient:y??!!p,onEditStart:m,onEditEnd:v,disabled:u,optional:l,order:c},t);let{type:x}=_,S=Nn(_,Lte);if(x=r??x,x in Sa)return{type:x,input:S,options:g};let A;return r&&tH(S)&&"value"in S?A=S.value:A=Bte(S)?void 0:S,{type:x,input:A,options:Vt(Vt({},g),{},{onChange:p,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function Ote(n,e,t,r){const i=nH(n,e),{type:s,input:o,options:a}=i;if(s)return s in Sa?i:{type:s,input:QE(s,o,t,r),options:a};let l=zD(o);return l?{type:l,input:QE(l,o,t,r),options:a}:(l=zD({value:o}),l?{type:l,input:QE(l,{value:o},t,r),options:a}:!1)}function KD(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=rH({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const Fte=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function rH({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=wte(n,o,t,e,i,s)}catch(l){throw new Fte(`The value \`${r}\` did not result in a correct value.`,e,l)}return H_(a,e)?e:a}const iH=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},sH=n=>n.shiftKey?5:n.altKey?1/5:1,Nte=["value"],Ute=["min","max"],kte=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},oH=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Pc(i,e,t);return r?s+r:s},zte=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},aH=n=>{let{value:e}=n,t=Nn(n,Nte);const{min:r=-1/0,max:i=1/0}=t,s=Nn(t,Ute);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Pc(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?VD(l)*10:VD(o);l=l||c/10;const u=Math.round(Pc(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Vt({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},lH=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var cH=Object.freeze({__proto__:null,schema:kte,sanitize:oH,format:zte,normalize:aH,sanitizeStep:lH});function Br(){return Br=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Br.apply(this,arguments)}const uH=I.createContext({});function Ii(){return I.useContext(uH)}const fH=I.createContext(null),dH=I.createContext(null),hH=I.createContext(null);function Gg(){return I.useContext(dH)}function Hte(){return I.useContext(hH)}const Gte=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function gy(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Up={$inputStyle:()=>n=>gy(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>gy(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>gy(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>gy(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:It,css:jae,createTheme:Yae,globalCss:Vte,keyframes:Jae}=Pq({prefix:"leva",theme:Gte(),utils:Vt(Vt({},Up),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Up.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Up.$focusStyle()(n)}),$hover:n=>({"&:hover":Up.$hoverStyle()(n)}),$active:n=>({"&:active":Up.$activeStyle()(n)})})}),Wte=Vte({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function ol(n,e){const{theme:t}=I.useContext(fH);if(!(n in t)||!(e in t[n]))return Qa(tr.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const pH=It("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),mH=It("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${pH}`]:{paddingLeft:0}}),$te=It(mH,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Xte=It("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),jte=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Yte=["onUpdate"];function CC(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=Nn(n,jte);const{id:d,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=Ii(),y=a||d,_=I.useRef(null),g=c>0,x=g?"textarea":"input",S=I.useCallback(M=>C=>{const B=C.currentTarget.value;M(B)},[]);ie.useEffect(()=>{const M=_.current,C=S(B=>{r(B),m()});return M==null||M.addEventListener("blur",C),()=>M==null?void 0:M.removeEventListener("blur",C)},[S,r,m]);const A=I.useCallback(M=>{M.key==="Enter"&&S(r)(M)},[S,r]),b=Object.assign({as:x},g?{rows:c}:{},u);return ie.createElement(Xte,{textArea:g},e&&typeof e=="string"?ie.createElement(mH,null,e):e,ie.createElement(pH,Br({levaType:o,ref:_,id:y,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(i),onFocus:()=>p(),onKeyPress:A,onKeyDown:s,disabled:v},b)))}function Jte(n){let{onUpdate:e}=n,t=Nn(n,Yte);const r=I.useCallback(s=>e(bte(s)),[e]),i=I.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return ie.createElement(CC,Br({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const J_=It("div",{}),DM=It("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Kte=It("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${DM}::after`]:{opacity:.6},[`${J_}:hover > & + ${DM}::after`]:{opacity:.6},[`${J_}:hover > & > svg`]:{opacity:1}}),gH=It("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${J_}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),vH=It("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${gH} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),yH=It(vH,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Zte=It("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Qte=It("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),LM=It("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),qte=It("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${LM}`]:{pointerEvents:"auto"}}}}}),_H=It("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),ene=It("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),tne=It(vte,{fill:"$toolTipBackground"});function RC({children:n}){const{className:e}=I.useContext(fH);return ie.createElement(QQ,{className:e},n)}const nne=["align"];function rne(){const{id:n,disable:e,disabled:t}=Ii();return ie.createElement(ie.Fragment,null,ie.createElement(Qte,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ie.createElement("label",{htmlFor:n+"__disable"}))}function ine(n){const{id:e,optional:t,hint:r}=Ii(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return ie.createElement(ie.Fragment,null,t&&ie.createElement(rne,null),r!==void 0?ie.createElement(pte,null,ie.createElement(mte,{asChild:!0},ie.createElement(LM,Br({},i,n))),ie.createElement(gte,{side:"top",sideOffset:2},ie.createElement(ene,null,r,ie.createElement(tne,null)))):ie.createElement(LM,Br({},i,s,n)))}function Yo(n){let{align:e}=n,t=Nn(n,nne);const{value:r,label:i,key:s,disabled:o}=Ii(),{hideCopyButton:a}=Hte(),l=!a&&s!==void 0,[c,u]=I.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{Qa(tr.CLIPBOARD_ERROR,{[s]:r})}};return ie.createElement(Zte,{align:e,onPointerLeave:()=>u(!1)},ie.createElement(ine,t),l&&!o&&ie.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ie.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ie.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ie.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ie.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ie.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const sne=["toggled"],one=It("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function PC(n){let{toggled:e}=n,t=Nn(n,sne);return ie.createElement(one,Br({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),ie.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const ane=["input"];function wo(n){let{input:e}=n,t=Nn(n,ane);return e?ie.createElement(yH,t):ie.createElement(vH,t)}function xH({value:n,type:e,settings:t,setValue:r}){const[i,s]=I.useState(HD(e,n,t)),o=I.useRef(n),a=I.useRef(t);a.current=t;const l=I.useCallback(u=>s(HD(e,u,a.current)),[e]),c=I.useCallback(u=>{try{r(u)}catch(d){const{type:p,previousValue:m}=d;if(p!=="LEVA_ERROR")throw d;l(m)}},[l,r]);return I.useEffect(()=>{H_(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function Vg(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Ii();return YY(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function lne(n){const e=I.useRef(null),t=I.useRef(null),r=I.useRef(!1);return I.useEffect(()=>{const i=iH(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),I.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function SH(){const n=I.useRef(null),e=I.useRef({x:0,y:0}),t=I.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const cne=["__refCount"],qE=(n,e)=>{if(!n[e])return null;const t=n[e];return Nn(t,cne)};function une(n){const e=Gg(),[t,r]=I.useState(qE(e.getData(),n)),i=I.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=I.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=I.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=I.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=I.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return I.useEffect(()=>{r(qE(e.getData(),n));const c=e.useStore.subscribe(u=>qE(u.data,n),r,{equalityFn:kU});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const fne=It("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),EH=It("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),OM=It("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),AH=It("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),wH=It("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function dne({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=I.useRef(null),a=I.useRef(null),l=I.useRef(0),c=ol("sizes","scrubberWidth"),u=Vg(({event:p,first:m,xy:[v],movement:[y],memo:_})=>{if(m){const{width:x,left:S}=o.current.getBoundingClientRect();l.current=x-parseFloat(c),_=(p==null?void 0:p.target)===a.current?n:Y_((v-S)/x,e,t)}const g=_+Y_(y/l.current,0,t-e);return r(lH(g,{step:i,initialValue:s})),_}),d=j_(n,e,t);return ie.createElement(AH,Br({ref:o},u()),ie.createElement(EH,null,ie.createElement(wH,{style:{left:0,right:`${(1-d)*100}%`}})),ie.createElement(OM,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const hne=ie.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=I.useState(!1),o=Vg(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(d=>parseFloat(d)+Math.floor(u)*t*sH(c)),u=0),u));return ie.createElement($te,Br({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function MH({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&ie.createElement(hne,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return ie.createElement(Jte,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function pne(){const n=Ii(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,e),ie.createElement(fne,{hasRange:l},l&&ie.createElement(dne,Br({value:parseFloat(t),onDrag:r},i)),ie.createElement(MH,Br({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:mne}=cH,gne=Nn(cH,["sanitizeStep"]);var vne=Vt({component:pne},gne);const yne=(n,e)=>us().schema({options:us().passesAnyOf(us().object(),us().array())}).test(e),_ne=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},xne=(n,{values:e})=>e.indexOf(n),Sne=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var Ene=Object.freeze({__proto__:null,schema:yne,sanitize:_ne,format:xne,normalize:Sne});const Ane=It("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),FM=It("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),wne=It("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${FM}:focus + &`]:{$focusStyle:""},[`${FM}:hover + &`]:{$hoverStyle:""}});function Mne({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=I.useRef();return e===a[n]&&(l.current=o[n]),ie.createElement(Ane,null,ie.createElement(FM,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>ie.createElement("option",{key:c,value:u},c))),ie.createElement(wne,null,l.current),ie.createElement(PC,{toggled:!0}))}function bne(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(Mne,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var Tne=Vt({component:bne},Ene);const Cne=n=>us().string().test(n),Rne=n=>{if(typeof n!="string")throw Error("Invalid string");return n},Pne=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Bne=Object.freeze({__proto__:null,schema:Cne,sanitize:Rne,normalize:Pne});const Ine=["displayValue","onUpdate","onChange","editable"],Dne=It("div",{whiteSpace:"pre-wrap"});function Lne(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Nn(n,Ine);return i?ie.createElement(CC,Br({value:e,onUpdate:t,onChange:r},s)):ie.createElement(Dne,null,e)}function One(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(Lne,Br({displayValue:t,onUpdate:r,onChange:i},e)))}var Fne=Vt({component:One},Bne);const Nne=n=>us().boolean().test(n),Une=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var kne=Object.freeze({__proto__:null,schema:Nne,sanitize:Une});const zne=It("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Hne({value:n,onUpdate:e,id:t,disabled:r}){return ie.createElement(zne,null,ie.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),ie.createElement("label",{htmlFor:t},ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ie.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Gne(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(Hne,{value:e,onUpdate:t,id:i,disabled:r}))}var Vne=Vt({component:Gne},kne);const Wne=["locked"];function $ne({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=I.useRef(n[t]);o.current=n[t];const a=I.useCallback(c=>i({[t]:rH({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=xH({type:"NUMBER",value:n[t],settings:r,setValue:a});return ie.createElement(MH,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const Xne=It("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function jne(n){let{locked:e}=n,t=Nn(n,Wne);return ie.createElement("svg",Br({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?ie.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ie.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function BC({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=Ii(),{lock:o,locked:a}=t;return ie.createElement(Xne,{withLock:o},o&&ie.createElement(jne,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>ie.createElement($ne,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const bH=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=aH(Vt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},Yne=["lock"],Jne=["value"];function Kne(n){const e=us().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function Zne(n){return Array.isArray(n)?"array":"object"}function Mm(n,e,t){return Zne(n)===e?n:e==="array"?Object.values(n):Pte(n,t)}const Qne=(n,e,t)=>{const r=Mm(n,"object",e.keys);for(let o in r)r[o]=oH(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Mm(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let d in o)d===a?s[a]=l:s[d]=o[d]*u}else s=Vt(Vt({},o),r)}return Mm(s,e.format,e.keys)},qne=(n,e)=>Mm(n,"object",e.keys),ere=n=>!!n&&("step"in n||"min"in n||"max"in n);function tre(n,e,t=[]){const{lock:r=!1}=e,i=Nn(e,Yne),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Mm(n,"object",o),l=ere(i)?o.reduce((u,d)=>Object.assign(u,{[d]:i}),{}):i,c=bH(a,l);return{value:s==="array"?n:a,settings:Vt(Vt({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function TH(n){return{schema:Kne(n.length),normalize:e=>{let{value:t}=e,r=Nn(e,Jne);return tre(t,r,n)},format:(e,t)=>qne(e,t),sanitize:(e,t,r)=>Qne(e,t,r)}}var nre={grad:.9,turn:360,rad:360/(2*Math.PI)},Ga=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Yr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},vo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},CH=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},ZD=function(n){return{r:vo(n.r,0,255),g:vo(n.g,0,255),b:vo(n.b,0,255),a:vo(n.a)}},eA=function(n){return{r:Yr(n.r),g:Yr(n.g),b:Yr(n.b),a:Yr(n.a,3)}},rre=/^#([0-9a-f]{3,8})$/i,vy=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},RH=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},PH=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},QD=function(n){return{h:CH(n.h),s:vo(n.s,0,100),l:vo(n.l,0,100),a:vo(n.a)}},qD=function(n){return{h:Yr(n.h),s:Yr(n.s),l:Yr(n.l),a:Yr(n.a,3)}},eL=function(n){return PH((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},bm=function(n){return{h:(e=RH(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},ire=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sre=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ore=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,are=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NM={string:[[function(n){var e=rre.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Yr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Yr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=ore.exec(n)||are.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:ZD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=ire.exec(n)||sre.exec(n);if(!e)return null;var t,r,i=QD({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(nre[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return eL(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Ga(e)&&Ga(t)&&Ga(r)?ZD({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Ga(e)||!Ga(t)||!Ga(r))return null;var o=QD({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return eL(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Ga(e)||!Ga(t)||!Ga(r))return null;var o=function(a){return{h:CH(a.h),s:vo(a.s,0,100),v:vo(a.v,0,100),a:vo(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return PH(o)},"hsv"]]},tL=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},BH=function(n){return typeof n=="string"?tL(n.trim(),NM.string):typeof n=="object"&&n!==null?tL(n,NM.object):[null,void 0]},lre=function(n){return BH(n)[1]},tA=function(n,e){var t=bm(n);return{h:t.h,s:vo(t.s+100*e,0,100),l:t.l,a:t.a}},nA=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},nL=function(n,e){var t=bm(n);return{h:t.h,s:t.s,l:vo(t.l+100*e,0,100),a:t.a}},UM=function(){function n(e){this.parsed=BH(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Yr(nA(this.rgba),2)},n.prototype.isDark=function(){return nA(this.rgba)<.5},n.prototype.isLight=function(){return nA(this.rgba)>=.5},n.prototype.toHex=function(){return e=eA(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?vy(Yr(255*s)):"","#"+vy(t)+vy(r)+vy(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return eA(this.rgba)},n.prototype.toRgbString=function(){return e=eA(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return qD(bm(this.rgba))},n.prototype.toHslString=function(){return e=qD(bm(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=RH(this.rgba),{h:Yr(e.h),s:Yr(e.s),v:Yr(e.v),a:Yr(e.a,3)};var e},n.prototype.invert=function(){return $i({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),$i(tA(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),$i(tA(this.rgba,-e))},n.prototype.grayscale=function(){return $i(tA(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),$i(nL(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),$i(nL(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?$i({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Yr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=bm(this.rgba);return typeof e=="number"?$i({h:e,s:t.s,l:t.l,a:t.a}):Yr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===$i(e).toHex()},n}(),$i=function(n){return n instanceof UM?n:new UM(n)},rL=[],cre=function(n){n.forEach(function(e){rL.indexOf(e)<0&&(e(UM,NM),rL.push(e))})};function ure(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var y=(a=u,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));y<d&&(d=y,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Gh(){return(Gh=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function IC(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function kM(n){var e=I.useRef(n),t=I.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Eh=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Tm=function(n){return"touches"in n},zM=function(n){return n&&n.ownerDocument.defaultView||self},iL=function(n,e,t){var r=n.getBoundingClientRect(),i=Tm(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:Eh((i.pageX-(r.left+zM(n).pageXOffset))/r.width),top:Eh((i.pageY-(r.top+zM(n).pageYOffset))/r.height)}},sL=function(n){!Tm(n)&&n.preventDefault()},DC=ie.memo(function(n){var e=n.onMove,t=n.onKey,r=IC(n,["onMove","onKey"]),i=I.useRef(null),s=kM(e),o=kM(t),a=I.useRef(null),l=I.useRef(!1),c=I.useMemo(function(){var m=function(_){sL(_),(Tm(_)?_.touches.length>0:_.buttons>0)&&i.current?s(iL(i.current,_,a.current)):y(!1)},v=function(){return y(!1)};function y(_){var g=l.current,x=zM(i.current),S=_?x.addEventListener:x.removeEventListener;S(g?"touchmove":"mousemove",m),S(g?"touchend":"mouseup",v)}return[function(_){var g=_.nativeEvent,x=i.current;if(x&&(sL(g),!function(A,b){return b&&!Tm(A)}(g,l.current)&&x)){if(Tm(g)){l.current=!0;var S=g.changedTouches||[];S.length&&(a.current=S[0].identifier)}x.focus(),s(iL(x,g,a.current)),y(!0)}},function(_){var g=_.which||_.keyCode;g<37||g>40||(_.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},y]},[o,s]),u=c[0],d=c[1],p=c[2];return I.useEffect(function(){return p},[p]),ie.createElement("div",Gh({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),Wg=function(n){return n.filter(Boolean).join(" ")},LC=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=Wg(["react-colorful__pointer",n.className]);return ie.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},ie.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ki=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},IH=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Ki(n.h),s:Ki(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Ki(i/2),a:Ki(r,2)}},HM=function(n){var e=IH(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},rA=function(n){var e=IH(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},DH=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:Ki(255*[r,a,o,o,l,r][c]),g:Ki(255*[l,r,r,a,o,o][c]),b:Ki(255*[o,o,l,r,r,a][c]),a:Ki(i,2)}},LH=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Ki(60*(a<0?a+6:a)),s:Ki(s?o/s*100:0),v:Ki(s/255*100),a:i}},OH=ie.memo(function(n){var e=n.hue,t=n.onChange,r=Wg(["react-colorful__hue",n.className]);return ie.createElement("div",{className:r},ie.createElement(DC,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Eh(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ki(e),"aria-valuemax":"360","aria-valuemin":"0"},ie.createElement(LC,{className:"react-colorful__hue-pointer",left:e/360,color:HM({h:e,s:100,v:100,a:1})})))}),FH=ie.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:HM({h:e.h,s:100,v:100,a:1})};return ie.createElement("div",{className:"react-colorful__saturation",style:r},ie.createElement(DC,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Eh(e.s+100*i.left,0,100),v:Eh(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ki(e.s)+"%, Brightness "+Ki(e.v)+"%"},ie.createElement(LC,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:HM(e)})))}),OC=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function NH(n,e,t){var r=kM(t),i=I.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=I.useRef({color:e,hsva:s});I.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),I.useEffect(function(){var c;OC(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=I.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var fre=typeof window<"u"?I.useLayoutEffect:I.useEffect,dre=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},oL=new Map,UH=function(n){fre(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!oL.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,oL.set(e,t);var r=dre();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},hre=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=IC(n,["className","colorModel","color","onChange"]),a=I.useRef(null);UH(a);var l=NH(t,i,s),c=l[0],u=l[1],d=Wg(["react-colorful",e]);return ie.createElement("div",Gh({},o,{ref:a,className:d}),ie.createElement(FH,{hsva:c,onChange:u}),ie.createElement(OH,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},pre=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+rA(Object.assign({},t,{a:0}))+", "+rA(Object.assign({},t,{a:1}))+")"},s=Wg(["react-colorful__alpha",e]),o=Ki(100*t.a);return ie.createElement("div",{className:s},ie.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),ie.createElement(DC,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Eh(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},ie.createElement(LC,{className:"react-colorful__alpha-pointer",left:t.a,color:rA(t)})))},mre=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=IC(n,["className","colorModel","color","onChange"]),a=I.useRef(null);UH(a);var l=NH(t,i,s),c=l[0],u=l[1],d=Wg(["react-colorful",e]);return ie.createElement("div",Gh({},o,{ref:a,className:d}),ie.createElement(FH,{hsva:c,onChange:u}),ie.createElement(OH,{hue:c.h,onChange:u}),ie.createElement(pre,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},gre={defaultColor:{r:0,g:0,b:0,a:1},toHsva:LH,fromHsva:DH,equal:OC},vre=function(n){return ie.createElement(mre,Gh({},n,{colorModel:gre}))},yre={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return LH({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=DH(n)).r,g:e.g,b:e.b};var e},equal:OC},_re=function(n){return ie.createElement(hre,Gh({},n,{colorModel:yre}))};function Vh(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Wh(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function xre(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Sre(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xre(arguments[e]));return n}var Ere=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function $g(n,e){var t=Are(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Are(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=Ere.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var wre=[".DS_Store","Thumbs.db"];function Mre(n){return Vh(this,void 0,void 0,function(){return Wh(this,function(e){return K_(n)&&bre(n)?[2,Pre(n.dataTransfer,n.type)]:Tre(n)?[2,Cre(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Rre(n)]:[2,[]]})})}function bre(n){return K_(n.dataTransfer)}function Tre(n){return K_(n)&&K_(n.target)}function K_(n){return typeof n=="object"&&n!==null}function Cre(n){return GM(n.target.files).map(function(e){return $g(e)})}function Rre(n){return Vh(this,void 0,void 0,function(){var e;return Wh(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return $g(r)})]}})})}function Pre(n,e){return Vh(this,void 0,void 0,function(){var t,r;return Wh(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=GM(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Bre))]):[3,2];case 1:return r=i.sent(),[2,aL(kH(r))];case 2:return[2,aL(GM(n.files).map(function(s){return $g(s)}))]}})})}function aL(n){return n.filter(function(e){return wre.indexOf(e.name)===-1})}function GM(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function Bre(n){if(typeof n.webkitGetAsEntry!="function")return lL(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?zH(e):lL(n)}function kH(n){return n.reduce(function(e,t){return Sre(e,Array.isArray(t)?kH(t):[t])},[])}function lL(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=$g(e);return Promise.resolve(t)}function Ire(n){return Vh(this,void 0,void 0,function(){return Wh(this,function(e){return[2,n.isDirectory?zH(n):Dre(n)]})})}function zH(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Vh(o,void 0,void 0,function(){var l,c,u;return Wh(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),t(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(Ire)),i.push(u),s(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Dre(n){return Vh(this,void 0,void 0,function(){return Wh(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=$g(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var Lre=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function cL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(t),!0).forEach(function(r){HH(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HH(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fL(n,e){return Ure(n)||Nre(n,e)||Fre(n,e)||Ore()}function Ore(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fre(n,e){if(n){if(typeof n=="string")return dL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dL(n,e)}}function dL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Nre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Ure(n){if(Array.isArray(n))return n}var kre="file-invalid-type",zre="file-too-large",Hre="file-too-small",Gre="too-many-files",Vre=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:kre,message:"File type must be ".concat(t)}},hL=function(e){return{code:zre,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},pL=function(e){return{code:Hre,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Wre={code:Gre,message:"Too many files"};function GH(n,e){var t=n.type==="application/x-moz-file"||Lre(n,e);return[t,t?null:Vre(e)]}function VH(n,e,t){if(kp(n.size))if(kp(e)&&kp(t)){if(n.size>t)return[!1,hL(t)];if(n.size<e)return[!1,pL(e)]}else{if(kp(e)&&n.size<e)return[!1,pL(e)];if(kp(t)&&n.size>t)return[!1,hL(t)]}return[!0,null]}function kp(n){return n!=null}function $re(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=GH(a,t),c=fL(l,1),u=c[0],d=VH(a,r,i),p=fL(d,1),m=p[0];return u&&m})}function Z_(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function yy(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function mL(n){n.preventDefault()}function Xre(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function jre(n){return n.indexOf("Edge/")!==-1}function Yre(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Xre(n)||jre(n)}function ia(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!Z_(r)&&a&&a.apply(void 0,[r].concat(s)),Z_(r)})}}function Jre(){return"showOpenFilePicker"in window}function Kre(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return uL(uL({},e),{},HH({},t,[]))},{}):{}}]}function Zre(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Qre(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var qre=["children"],eie=["open"],tie=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],nie=["refKey","onChange","onClick"];function rie(n){return oie(n)||sie(n)||WH(n)||iie()}function iie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oie(n){if(Array.isArray(n))return VM(n)}function iA(n,e){return cie(n)||lie(n,e)||WH(n,e)||aie()}function aie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WH(n,e){if(n){if(typeof n=="string")return VM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VM(n,e)}}function VM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function lie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function cie(n){if(Array.isArray(n))return n}function gL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function er(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(t),!0).forEach(function(r){WM(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q_(n,e){if(n==null)return{};var t=uie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var FC=I.forwardRef(function(n,e){var t=n.children,r=Q_(n,qre),i=XH(r),s=i.open,o=Q_(i,eie);return I.useImperativeHandle(e,function(){return{open:s}},[s]),ie.createElement(I.Fragment,null,t(er(er({},o),{},{open:s})))});FC.displayName="Dropzone";var $H={disabled:!1,getFilesFromEvent:Mre,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};FC.defaultProps=$H;FC.propTypes={children:Ln.func,accept:Ln.oneOfType([Ln.string,Ln.arrayOf(Ln.string)]),multiple:Ln.bool,preventDropOnDocument:Ln.bool,noClick:Ln.bool,noKeyboard:Ln.bool,noDrag:Ln.bool,noDragEventsBubbling:Ln.bool,minSize:Ln.number,maxSize:Ln.number,maxFiles:Ln.number,disabled:Ln.bool,getFilesFromEvent:Ln.func,onFileDialogCancel:Ln.func,onFileDialogOpen:Ln.func,useFsAccessApi:Ln.bool,onDragEnter:Ln.func,onDragLeave:Ln.func,onDragOver:Ln.func,onDrop:Ln.func,onDropAccepted:Ln.func,onDropRejected:Ln.func,validator:Ln.func};var $M={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function XH(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=er(er({},$H),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,_=e.onFileDialogOpen,g=e.useFsAccessApi,x=e.preventDropOnDocument,S=e.noClick,A=e.noKeyboard,b=e.noDrag,M=e.noDragEventsBubbling,C=e.validator,B=I.useMemo(function(){return typeof _=="function"?_:vL},[_]),T=I.useMemo(function(){return typeof y=="function"?y:vL},[y]),P=I.useRef(null),N=I.useRef(null),z=I.useReducer(fie,$M),q=iA(z,2),G=q[0],Y=q[1],ee=G.isFocused,te=G.isFileDialogActive,V=G.draggedFiles,K=I.useRef(typeof window<"u"&&window.isSecureContext&&g&&Jre()),U=function(){!K.current&&te&&setTimeout(function(){if(N.current){var F=N.current.files;F.length||(Y({type:"closeDialog"}),T())}},300)};I.useEffect(function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}},[N,te,T,K]);var oe=I.useRef([]),fe=function(F){P.current&&P.current.contains(F.target)||(F.preventDefault(),oe.current=[])};I.useEffect(function(){return x&&(document.addEventListener("dragover",mL,!1),document.addEventListener("drop",fe,!1)),function(){x&&(document.removeEventListener("dragover",mL),document.removeEventListener("drop",fe))}},[P,x]);var ue=I.useCallback(function(H){H.preventDefault(),H.persist(),Ce(H),oe.current=[].concat(rie(oe.current),[H.target]),yy(H)&&Promise.resolve(i(H)).then(function(F){Z_(H)&&!M||(Y({draggedFiles:F,isDragActive:!0,type:"setDraggedFiles"}),c&&c(H))})},[i,c,M]),pe=I.useCallback(function(H){H.preventDefault(),H.persist(),Ce(H);var F=yy(H);if(F&&H.dataTransfer)try{H.dataTransfer.dropEffect="copy"}catch{}return F&&d&&d(H),!1},[d,M]),be=I.useCallback(function(H){H.preventDefault(),H.persist(),Ce(H);var F=oe.current.filter(function(Pe){return P.current&&P.current.contains(Pe)}),le=F.indexOf(H.target);le!==-1&&F.splice(le,1),oe.current=F,!(F.length>0)&&(Y({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),yy(H)&&u&&u(H))},[P,u,M]),Ae=I.useCallback(function(H,F){var le=[],Pe=[];H.forEach(function(De){var Ue=GH(De,t),nt=iA(Ue,2),He=nt[0],$e=nt[1],dt=VH(De,o,s),Rt=iA(dt,2),Oe=Rt[0],Ot=Rt[1],ne=C?C(De):null;if(He&&Oe&&!ne)le.push(De);else{var me=[$e,Ot];ne&&(me=me.concat(ne)),Pe.push({file:De,errors:me.filter(function(Ie){return Ie})})}}),(!a&&le.length>1||a&&l>=1&&le.length>l)&&(le.forEach(function(De){Pe.push({file:De,errors:[Wre]})}),le.splice(0)),Y({acceptedFiles:le,fileRejections:Pe,type:"setFiles"}),p&&p(le,Pe,F),Pe.length>0&&v&&v(Pe,F),le.length>0&&m&&m(le,F)},[Y,a,t,o,s,l,p,m,v,C]),Le=I.useCallback(function(H){H.preventDefault(),H.persist(),Ce(H),oe.current=[],yy(H)&&Promise.resolve(i(H)).then(function(F){Z_(H)&&!M||Ae(F,H)}),Y({type:"reset"})},[i,Ae,M]),qe=I.useCallback(function(){if(K.current){Y({type:"openDialog"}),B();var H={multiple:a,types:Kre(t)};window.showOpenFilePicker(H).then(function(F){return i(F)}).then(function(F){Ae(F,null),Y({type:"closeDialog"})}).catch(function(F){Zre(F)?(T(F),Y({type:"closeDialog"})):Qre(F)&&(K.current=!1,N.current&&(N.current.value=null,N.current.click()))});return}N.current&&(Y({type:"openDialog"}),B(),N.current.value=null,N.current.click())},[Y,B,T,g,Ae,t,a]),st=I.useCallback(function(H){!P.current||!P.current.isEqualNode(H.target)||(H.key===" "||H.key==="Enter"||H.keyCode===32||H.keyCode===13)&&(H.preventDefault(),qe())},[P,qe]),ot=I.useCallback(function(){Y({type:"focus"})},[]),Ye=I.useCallback(function(){Y({type:"blur"})},[]),Z=I.useCallback(function(){S||(Yre()?setTimeout(qe,0):qe())},[S,qe]),xe=function(F){return r?null:F},ve=function(F){return A?null:xe(F)},Fe=function(F){return b?null:xe(F)},Ce=function(F){M&&F.stopPropagation()},ae=I.useMemo(function(){return function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=H.refKey,le=F===void 0?"ref":F,Pe=H.role,De=H.onKeyDown,Ue=H.onFocus,nt=H.onBlur,He=H.onClick,$e=H.onDragEnter,dt=H.onDragOver,Rt=H.onDragLeave,Oe=H.onDrop,Ot=Q_(H,tie);return er(er(WM({onKeyDown:ve(ia(De,st)),onFocus:ve(ia(Ue,ot)),onBlur:ve(ia(nt,Ye)),onClick:xe(ia(He,Z)),onDragEnter:Fe(ia($e,ue)),onDragOver:Fe(ia(dt,pe)),onDragLeave:Fe(ia(Rt,be)),onDrop:Fe(ia(Oe,Le)),role:typeof Pe=="string"&&Pe!==""?Pe:"button"},le,P),!r&&!A?{tabIndex:0}:{}),Ot)}},[P,st,ot,Ye,Z,ue,pe,be,Le,A,b,r]),Ve=I.useCallback(function(H){H.stopPropagation()},[]),et=I.useMemo(function(){return function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=H.refKey,le=F===void 0?"ref":F,Pe=H.onChange,De=H.onClick,Ue=Q_(H,nie),nt=WM({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:xe(ia(Pe,Le)),onClick:xe(ia(De,Ve)),tabIndex:-1},le,N);return er(er({},nt),Ue)}},[N,t,a,Le,r]),pt=V.length,ut=pt>0&&$re({files:V,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),$t=pt>0&&!ut;return er(er({},G),{},{isDragAccept:ut,isDragReject:$t,isFocused:ee&&!r,getRootProps:ae,getInputProps:et,rootRef:P,inputRef:N,open:xe(qe)})}function fie(n,e){switch(e.type){case"focus":return er(er({},n),{},{isFocused:!0});case"blur":return er(er({},n),{},{isFocused:!1});case"openDialog":return er(er({},$M),{},{isFileDialogActive:!0});case"closeDialog":return er(er({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return er(er({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return er(er({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return er({},$M);default:return n}}function vL(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var die=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var hie=die;function yL(n){return hie(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var jH=function(e){var t,r;return!(yL(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,yL(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var pie=jH,NC=function(e){return pie(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var mie=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},gie=NC,vie=mie;function YH(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];XM(i)&&vie(i,yie,n)}return n}function yie(n,e){if(_ie(e)){var t=this[e];XM(n)&&XM(t)?YH(t,n):this[e]=n}}function XM(n){return gie(n)&&!Array.isArray(n)}function _ie(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var xie=YH;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Sie=function(n,e,t,r,i){if(!Eie(n)||!e)return n;if(e=_y(e),t&&(e+="."+_y(t)),r&&(e+="."+_y(r)),i&&(e+="."+_y(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function Eie(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function _y(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Aie=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r},wie=NC,Mie=Aie,bie=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");_L(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];Cie(t)&&(t=Rie(t)),_L(t)&&(Tie(n,t),Mie(n,t))}return n};function Tie(n,e){for(var t in e)Pie(e,t)&&(n[t]=e[t])}function Cie(n){return n&&typeof n=="string"}function Rie(n){var e={};for(var t in n)e[t]=n[t];return e}function _L(n){return n&&typeof n=="object"||wie(n)}function Pie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Bie=bie,Iie=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=Bie({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,u=n.length,d=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++d<u;){var v=n[d],y=n[d+1],_={val:v,idx:d,arr:l,str:n};if(o.push(_),v==="\\"){_.val=Lie(r,n,d)===!0?v+y:y,_.escaped=!0,typeof t=="function"&&t(_),l[l.length-1]+=_.val,d++;continue}if(s&&s[v]){a.push(v);var g=m(),x=d+1;if(n.indexOf(g,x+1)!==-1)for(;a.length&&x<u;){var S=n[++x];if(S==="\\"){S++;continue}if(i.indexOf(S)!==-1){x=jM(n,S,x+1);continue}if(g=m(),a.length&&n.indexOf(g,x+1)===-1)break;if(s[S]){a.push(S);continue}g===S&&a.pop()}if(p=x,p===-1){l[l.length-1]+=v;continue}v=n.slice(d,p+1),_.val=v,_.idx=d=p}if(i.indexOf(v)!==-1){if(p=jM(n,v,d+1),p===-1){l[l.length-1]+=v;continue}Die(v,r)===!0?v=n.slice(d,p+1):v=n.slice(d+1,p),_.val=v,_.idx=d=p}if(typeof t=="function"&&(t(_,o),v=_.val,d=_.idx),_.val===c&&_.split!==!1){l.push("");continue}l[l.length-1]+=_.val}return l};function jM(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?jM(n,e,i+1):i}function Die(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function Lie(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Oie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},xL=Oie,Fie=function(e){xL(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];xL(i)&&Nie(e,i)}return e};function Nie(n,e){for(var t in e)Uie(e,t)&&(n[t]=e[t])}function Uie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var kie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var zie=Iie,Hie=Fie,SL=jH,EL=kie,Gie=function(n,e,t){if(!EL(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=zie(e,{sep:".",brackets:!0}).filter(Vie),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){EL(o[a])||(o[a]={}),o=o[a];continue}SL(o[a])&&SL(t)?o[a]=Hie({},o[a],t):o[a]=t}return n};function Vie(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var sA=NC,AL=xie,Wie=Sie,wL=Gie,$ie=function(e,t,r){if(!sA(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return AL.apply(null,arguments);if(typeof r=="string")return wL(e,t,r),e;var i=Wie(e,t);return sA(r)&&sA(i)&&(r=AL({},i,r)),wL(e,t,r),e};const Xie=Bc($ie),UC=(...n)=>n.filter(Boolean).join(".");function jie(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Yie(n){const e=I.useRef(null),t=I.useRef(null),r=I.useRef(!0);return I.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),I.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const Jie=n=>{const[e,t]=I.useState(n.getVisiblePaths());return I.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:kU});return()=>r()},[n]),e};function JH(n=3){const e=I.useRef(null),t=I.useRef(null),[r,i]=I.useState(!1),s=I.useCallback(()=>i(!0),[]),o=I.useCallback(()=>i(!1),[]);return I.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),d=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",d==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}cre([ure]);const Kie={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};us.extend({color:()=>n=>$i(n).isValid()});const Zie=n=>us().color().test(n);function KH(n,{format:e,hasAlpha:t,isString:r}){const i=Kie[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?Rte(s,["a"]):s}const ZH=(n,e)=>{const t=$i(n);if(!t.isValid())throw Error("Invalid color");return KH(t,e)},Qie=(n,e)=>KH($i(n),Vt(Vt({},e),{},{isString:!0,format:"hex"})),qie=({value:n})=>{const e=lre(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:ZH(n,i),settings:i}};var ese=Object.freeze({__proto__:null,schema:Zie,sanitize:ZH,format:Qie,normalize:qie});const tse=It("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),nse=It("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),rse=It("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function ML(n,e){return e!=="rgb"?$i(n).toRgb():n}function ise({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Ii(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:d,hide:p}=JH(),m=I.useRef(0),[v,y]=I.useState(()=>ML(n,o)),_=a?vre:_re,g=()=>{y(ML(n,o)),d(),i()},x=()=>{p(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(x,500)};return I.useEffect(()=>()=>window.clearTimeout(m.current),[]),ie.createElement(ie.Fragment,null,ie.createElement(tse,{ref:l,active:u,onClick:()=>g(),style:{color:e}}),u&&ie.createElement(RC,null,ie.createElement(_H,{onPointerUp:x}),ie.createElement(rse,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:A=>A.buttons===0&&S()},ie.createElement(_,{color:v,onChange:r}))))}function sse(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,t),ie.createElement(nse,null,ie.createElement(ise,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),ie.createElement(CC,{value:e,onChange:r,onUpdate:i})))}var ose=Vt({component:sse},ese);function ase(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(BC,{value:e,settings:r,onUpdate:t}))}var lse=Vt({component:ase},TH(["x","y","z"]));const cse=It("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),use=It("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function fse({value:n,settings:e,onUpdate:t}){const r=I.useRef(),i=I.useRef(0),s=I.useRef(0),o=I.useRef(1),[a,l]=I.useState(!1),[c,u]=I.useState(!1),[d,p]=SH(),m=I.useRef(null),v=I.useRef(null);I.useLayoutEffect(()=>{if(a){const{top:z,left:q,width:G,height:Y}=m.current.getBoundingClientRect();v.current.style.left=q+G/2+"px",v.current.style.top=z+Y/2+"px"}},[a]);const{keys:[y,_],joystick:g}=e,x=g==="invertY"?1:-1,{[y]:{step:S},[_]:{step:A}}=e,b=ol("sizes","joystickWidth"),M=ol("sizes","joystickHeight"),C=parseFloat(b)*.8/2,B=parseFloat(M)*.8/2,T=I.useCallback(()=>{r.current||(u(!0),i.current&&p({x:i.current*C}),s.current&&p({y:s.current*-B}),r.current=window.setInterval(()=>{t(z=>{const q=S*i.current*o.current,G=x*A*s.current*o.current;return Array.isArray(z)?{[y]:z[0]+q,[_]:z[1]+G}:{[y]:z[y]+q,[_]:z[_]+G}})},16))},[C,B,t,p,S,A,y,_,x]),P=I.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);I.useEffect(()=>{function z(q){o.current=sH(q)}return window.addEventListener("keydown",z),window.addEventListener("keyup",z),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",z),window.removeEventListener("keyup",z)}},[]);const N=Vg(({first:z,active:q,delta:[G,Y],movement:[ee,te]})=>{z&&l(!0);const V=Pc(ee,-C,C),K=Pc(te,-B,B);i.current=Math.abs(ee)>Math.abs(V)?Math.sign(ee-V):0,s.current=Math.abs(te)>Math.abs(K)?Math.sign(K-te):0;let U=n[y],oe=n[_];q?(i.current||(U+=G*S*o.current,p({x:V})),s.current||(oe-=x*Y*A*o.current,p({y:K})),i.current||s.current?T():P(),t({[y]:U,[_]:oe})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),P())});return ie.createElement(cse,Br({ref:m},N()),a&&ie.createElement(RC,null,ie.createElement(use,{ref:v,isOutOfBounds:c},ie.createElement("div",null),ie.createElement("span",{ref:d}))))}const dse=It("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function hse(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ii();return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(dse,{withJoystick:!!r.joystick},r.joystick&&ie.createElement(fse,{value:e,settings:r,onUpdate:t}),ie.createElement(BC,{value:e,settings:r,onUpdate:t})))}const pse=["joystick"],QH=TH(["x","y"]),mse=n=>{let{joystick:e=!0}=n,t=Nn(n,pse);const{value:r,settings:i}=QH.normalize(t);return{value:r,settings:Vt(Vt({},i),{},{joystick:e})}};var gse=Vt(Vt({component:hse},QH),{},{normalize:mse});const vse=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},yse=(n,e)=>typeof e=="object"&&"image"in e,_se=({image:n})=>({value:n});var xse=Object.freeze({__proto__:null,sanitize:vse,schema:yse,normalize:_se});const Sse=It("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Ese=It("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Ase=It("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),wse=It("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Mse=It("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),bse=It("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Tse(){const{label:n,value:e,onUpdate:t,disabled:r}=Ii(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=JH(),c=I.useCallback(v=>{v.length&&t(v[0])},[t]),u=I.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:d,getInputProps:p,isDragAccept:m}=XH({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(Sse,null,ie.createElement(Ase,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&ie.createElement(RC,null,ie.createElement(_H,{onPointerUp:l,style:{cursor:"pointer"}}),ie.createElement(wse,{ref:s,style:{backgroundImage:`url(${e})`}})),ie.createElement(Ese,d({isDragAccept:m}),ie.createElement("input",p()),ie.createElement(Mse,null,m?"drop image":"click or drop")),ie.createElement(bse,{onClick:u,disabled:!e})))}var Cse=Vt({component:Tse},xse);const bL=us().number(),Rse=(n,e)=>us().array().length(2).every.number().test(n)&&us().schema({min:bL,max:bL}).test(e),q_=n=>({min:n[0],max:n[1]}),qH=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?q_(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=Vt(Vt({},s),i);return[Pc(Number(o),e,Math.max(e,a)),Pc(Number(a),Math.min(t,o),t)]},Pse=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=bH(q_(n),{min:r,max:r}),s=[e,t],o=Vt(Vt({},i),{},{bounds:s});return{value:qH(q_(n),o,n),settings:o}};var Bse=Object.freeze({__proto__:null,schema:Rse,format:q_,sanitize:qH,normalize:Pse});const Ise=["value","bounds","onDrag"],Dse=["bounds"],Lse=It("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Ose(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Nn(n,Ise);const o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),c=I.useRef(0),u=ol("sizes","scrubberWidth"),d=Vg(({event:v,first:y,xy:[_],movement:[g],memo:x={}})=>{if(y){const{width:A,left:b}=o.current.getBoundingClientRect();c.current=A-parseFloat(u);const M=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;x.pos=Y_((_-b)/A,t,r);const C=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=C<0||C===0&&x.pos<=e.min?"min":"max",M&&(x.pos=e[x.key])}const S=x.pos+Y_(g/c.current,0,r-t);return i({[x.key]:mne(S,s[x.key])}),x}),p=`calc(${j_(e.min,t,r)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-j_(e.max,t,r)} * (100% - ${u} - 8px) + 4px)`;return ie.createElement(AH,Br({ref:o},d()),ie.createElement(EH,null,ie.createElement(wH,{style:{left:p,right:m}})),ie.createElement(OM,{position:"left",ref:a,style:{left:p}}),ie.createElement(OM,{position:"right",ref:l,style:{right:m}}))}function Fse(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Ii(),i=Nn(r,Dse);return ie.createElement(ie.Fragment,null,ie.createElement(wo,{input:!0},ie.createElement(Yo,null,n),ie.createElement(Lse,null,ie.createElement(Ose,Br({value:e},r,{onDrag:t})),ie.createElement(BC,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var Nse=Vt({component:Fse},Bse);const Use=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},kse=["type","value"],zse=["onChange","transient","onEditStart","onEditEnd"],Hse=function(){const e=UT(JY(()=>({data:{}}))),t=Use();this.storeId=Cte(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,d])=>{d.render&&a.some(p=>p.indexOf(u)===0)&&!d.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(d=>u.indexOf(d)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Sa&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{let p=c[u];if(p){const{type:m,value:v}=d,y=Nn(d,kse);m!==p.type?Qa(tr.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,y),p.__refCount++)}else c[u]=Vt(Vt({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return KD(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Vt(Vt({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,d])=>{try{KD(c[u],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Qa(tr.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Vt(Vt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Vt(Vt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,d])=>{if(u==="")return Qa(tr.EMPTY_KEY);let p=UC(a,u);if(d.type===Sa.FOLDER){const m=s(d.schema,p,l);Object.assign(c,m),p in r||(r[p]=d.settings)}else if(u in l)Qa(tr.DUPLICATE_KEYS,u,p,l[u].path);else{const m=Ote(d,u,p,c);if(m){const{type:v,options:y,input:_}=m,{onChange:g,transient:x,onEditStart:S,onEditEnd:A}=y,b=Nn(y,zse);c[p]=Vt(Vt(Vt({type:v},b),_),{},{fromPanel:!0}),l[u]={path:p,onChange:g,transient:x,onEditStart:S,onEditEnd:A}}else Qa(tr.UNKNOWN_INPUT,p,d)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new Hse;const TL=n=>"__levaInput"in n,Gse=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=jie(i);(!r||s.toLowerCase().indexOf(r)>-1)&&Xie(t,o,{[s]:{__levaInput:!0,path:i}})}),t},Vse=["type","label","path","valueKey","value","settings","setValue","disabled"];function Wse(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=Nn(n,Vse);const{displayValue:u,onChange:d,onUpdate:p}=xH({type:e,value:s,settings:o,setValue:a}),m=uf[e].component;return m?ie.createElement(uH.Provider,{value:Vt({key:i,path:r,id:""+r,label:t,displayValue:u,value:s,onChange:d,onUpdate:p,settings:o,setValue:a,disabled:l},c)},ie.createElement(qte,{disabled:l},ie.createElement(m,null))):(Qa(tr.NO_COMPONENT_FOR_TYPE,e,r),null)}const $se=It("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Xse({onClick:n,settings:e,label:t}){const r=Gg();return ie.createElement(wo,null,ie.createElement($se,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const jse=It("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Yse=It("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Jse=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function Kse(n){const{label:e,opts:t}=Jse(n),r=Gg();return ie.createElement(wo,{input:!!e},e&&ie.createElement(Yo,null,e),ie.createElement(jse,null,Object.entries(t).map(([i,s])=>ie.createElement(Yse,{key:i,onClick:()=>s(r.get)},i))))}const Zse=It("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),e4=100;function Qse(n,e){n.push(e),n.length>e4&&n.shift()}const qse=I.forwardRef(function({initialValue:n},e){const t=ol("colors","highlight3"),r=ol("colors","elevation2"),i=ol("colors","highlight1"),[s,o]=I.useMemo(()=>[$i(i).alpha(.4).toRgbString(),$i(i).alpha(.1).toRgbString()],[i]),a=I.useRef([n]),l=I.useRef(n),c=I.useRef(n),u=I.useRef(),d=I.useCallback((v,y)=>{if(!v)return;const{width:_,height:g}=v,x=new Path2D,S=_/e4,A=g*.05;for(let C=0;C<a.current.length;C++){const B=j_(a.current[C],l.current,c.current),T=S*C,P=g-B*(g-A*2)-A;x.lineTo(T,P)}y.clearRect(0,0,_,g);const b=new Path2D(x);b.lineTo(S*(a.current.length+1),g),b.lineTo(0,g),b.lineTo(0,0);const M=y.createLinearGradient(0,0,0,g);M.addColorStop(0,s),M.addColorStop(1,o),y.fillStyle=M,y.fill(b),y.strokeStyle=r,y.lineJoin="round",y.lineWidth=14,y.stroke(x),y.strokeStyle=t,y.lineWidth=2,y.stroke(x)},[t,r,s,o]),[p,m]=lne(d);return I.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),Qse(a.current,v),u.current=requestAnimationFrame(()=>d(p.current,m.current))}}),[p,m,d]),I.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),ie.createElement(Zse,{ref:p})}),CL=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),eoe=I.forwardRef(function({initialValue:n},e){const[t,r]=I.useState(CL(n));return I.useImperativeHandle(e,()=>({frame:i=>r(CL(i))}),[]),ie.createElement("div",null,t)});function RL(n){return typeof n=="function"?n():n.current}function toe({label:n,objectOrFn:e,settings:t}){const r=I.useRef(),i=I.useRef(RL(e));return I.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(RL(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),ie.createElement(wo,{input:!0},ie.createElement(Yo,{align:"top"},n),t.graph?ie.createElement(qse,{ref:r,initialValue:i.current}):ie.createElement(eoe,{ref:r,initialValue:i.current}))}const noe=["type","label","key"],roe={[Sa.BUTTON]:Xse,[Sa.BUTTON_GROUP]:Kse,[Sa.MONITOR]:toe},ioe=ie.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=une(n);if(!e)return null;const{type:l,label:c,key:u}=e,d=Nn(e,noe);if(l in Sa){const p=roe[l];return ie.createElement(p,Br({label:c,path:n},d))}return l in uf?ie.createElement(Wse,Br({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},d)):(xte(tr.UNSUPPORTED_INPUT,l,n),null)});function soe({toggle:n,toggled:e,name:t}){return ie.createElement(Kte,{onClick:()=>n()},ie.createElement(PC,{toggled:e}),ie.createElement("div",null,t))}const ooe=({name:n,path:e,tree:t})=>{const r=Gg(),i=UC(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=I.useState(!s),c=I.useRef(null),u=ol("colors","folderWidgetColor"),d=ol("colors","folderTextColor");return I.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||d)},[o,u,d]),ie.createElement(J_,{ref:c},ie.createElement(soe,{name:n,toggled:a,toggle:()=>l(p=>!p)}),ie.createElement(t4,{parent:i,tree:t,toggled:a}))},t4=ie.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Yie(s),l=Gg(),c=([d,p])=>{var m;return(TL(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(UC(r,d)).order)||0},u=Object.entries(i).sort((d,p)=>c(d)-c(p));return ie.createElement(DM,{ref:o,isRoot:n,fill:e,flat:t},ie.createElement(gH,{ref:a,isRoot:n,toggled:s},u.map(([d,p])=>TL(p)?ie.createElement(ioe,{key:p.path,valueKey:p.valueKey,path:p.path}):ie.createElement(ooe,{key:d,name:d,path:r,tree:p}))))}),aoe=It("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${yH}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),n4=40,ex=It("i",{$flexCenter:"",width:n4,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),loe=It("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),coe=It("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${ex}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),uoe=It("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),foe=It("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:n4}}}}),doe=ie.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=I.useState(""),s=I.useMemo(()=>iH(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return I.useEffect(()=>{s(r)},[r,s]),ie.createElement(ie.Fragment,null,ie.createElement(uoe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),ie.createElement(ex,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function hoe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,d]=I.useState(!1),p=I.useRef(null);I.useEffect(()=>{var v,y;u?(v=p.current)===null||v===void 0||v.focus():(y=p.current)===null||y===void 0||y.blur()},[u]);const m=Vg(({offset:[v,y],first:_,last:g})=>{e({x:v,y}),_&&t({x:v,y}),g&&r({x:v,y})},{filterTaps:!0,from:({offset:[v,y]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||y]});return I.useEffect(()=>{const v=y=>{y.key==="L"&&y.shiftKey&&y.metaKey&&d(_=>!_)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),ie.createElement(ie.Fragment,null,ie.createElement(loe,{mode:a?"drag":void 0},ie.createElement(ex,{active:!s,onClick:()=>i()},ie.createElement(PC,{toggled:s,width:12,height:8})),ie.createElement(foe,Br({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?ie.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ie.createElement("circle",{cx:"2",cy:"2",r:"2"}),ie.createElement("circle",{cx:"14",cy:"2",r:"2"}),ie.createElement("circle",{cx:"26",cy:"2",r:"2"}),ie.createElement("circle",{cx:"2",cy:"12",r:"2"}),ie.createElement("circle",{cx:"14",cy:"12",r:"2"}),ie.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&ie.createElement(ex,{active:u,onClick:()=>d(v=>!v)},ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ie.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ie.createElement(coe,{toggled:u},ie.createElement(doe,{ref:p,setFilter:n,toggle:i})))}ie.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,d;const p=Jie(n),[m,v]=I.useState(""),y=I.useMemo(()=>Gse(p,m),[p,m]),[_,g]=SH(),x=i||p.length>0,S=typeof o=="object"&&o.title||void 0,A=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,b=typeof o=="object"&&(d=o.filter)!==null&&d!==void 0?d:!0,M=typeof o=="object"&&o.position||void 0,C=typeof o=="object"&&o.onDrag||void 0,B=typeof o=="object"&&o.onDragStart||void 0,T=typeof o=="object"&&o.onDragEnd||void 0;return ie.useEffect(()=>{g({x:M==null?void 0:M.x,y:M==null?void 0:M.y})},[M,g]),Wte(),ie.createElement(hH.Provider,{value:{hideCopyButton:a}},ie.createElement(aoe,{ref:_,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&ie.createElement(hoe,{onDrag:P=>{g(P),C==null||C(P)},onDragStart:P=>B==null?void 0:B(P),onDragEnd:P=>T==null?void 0:T(P),setFilter:v,toggle:P=>c(N=>P??!N),toggled:l,title:S,drag:A,filterEnabled:b,from:M}),x&&ie.createElement(dH.Provider,{value:n},ie.createElement(t4,{isRoot:!0,fill:t,flat:r,tree:y,toggled:l}))))});El(Wo.SELECT,Tne);El(Wo.IMAGE,Cse);El(Wo.NUMBER,vne);El(Wo.COLOR,ose);El(Wo.STRING,Fne);El(Wo.BOOLEAN,Vne);El(Wo.INTERVAL,Nse);El(Wo.VECTOR3D,lse);El(Wo.VECTOR2D,gse);$a.registerPlugin(on);function poe(n){const{nodes:e}=Fh("/scooter-final.glb"),t=I.useRef(),r=I.useRef(),i=I.useRef({}),s={led1:"#0047FF",led2:"#00FF19",led3:"#FF0004"},o=(u,d)=>{u.emissive=new tt(d),u.color=new tt(d),u.emissiveIntensity=30},a=(u,d,p,m)=>{if(!r.current||!r.current.target||!r.current.object){console.error("Camera controls are not initialized");return}const v=$a.timeline({ease:"none",duration:0,scrollTrigger:{trigger:u.trigger,endTrigger:u.endTrigger,scrub:1,start:"top top",end:"bottom bottom",onUpdate:()=>r.current.update()}});return d&&v.fromTo(r.current.target,d.start,d.end,0),p&&v.fromTo(r.current.object.position,p.start,p.end,0),m&&v.fromTo(r.current.object.rotation,m.start,m.end,0),v},l=(u,d,p)=>{$a.to(u.color,{r:1,g:1,b:1,repeat:-1,yoyo:!0,duration:d,delay:p,repeatDelay:.05,ease:"none"}),$a.to(u.emissive,{r:1,g:1,b:1,repeat:-1,yoyo:!0,duration:d,delay:p,repeatDelay:.05})},c=(u,d,p,m)=>({trigger:u,endTrigger:d,scrub:!1,start:"top top",end:"bottom bottom",onEnter:p,onLeaveBack:m});return I.useLayoutEffect(()=>{$a.to({},{scrollTrigger:c("#trigger2-1","#trigger2-2",()=>o(t.current.children[2].material,s.led2),()=>o(t.current.children[2].material,s.led1))}),$a.to({},{scrollTrigger:c("#trigger2-2","#trigger2-3",()=>{o(t.current.children[2].material,s.led3),l(t.current.children[2].material,.5,.1)},()=>{o(t.current.children[2].material,s.led2)})}),$a.to({},{scrollTrigger:c("#trigger2-3","#trigger2-4",()=>{l(t.current.children[2].material,.2,.2)},()=>{})}),$a.to({},{scrollTrigger:c("#trigger2-4","#trigger2-5",()=>{o(t.current.children[2].material,s.led1)},()=>{o(t.current.children[2].material,s.led3),l(t.current.children[2].material,.2,.2)})}),i.current.tl1=a({trigger:"#trigger1",endTrigger:"#trigger2-1"},{start:{x:-2,y:0,z:0},end:{x:-3,y:1,z:-1}},{start:{x:-9.75,y:1,z:14},end:{x:-4.74,y:1,z:5}},{start:{x:0,y:0,z:0},end:{x:0,y:0,z:0}}),i.current.tl2=a({trigger:"#trigger3",endTrigger:"#trigger4"},{start:{x:-3,y:1,z:-1},end:{x:-6,y:0,z:0}},{start:{x:-4.74,y:1,z:5},end:{x:.25,y:7,z:0}}),i.current.tl3=a({trigger:"#trigger4",endTrigger:"#trigger5"},{start:{x:-6,y:0,z:0},end:{x:-6,y:0,z:0}},{start:{x:.25,y:7,z:0},end:{x:2,y:9,z:0}}),i.current.tl4=a({trigger:"#trigger5",endTrigger:"#trigger6"},{start:{x:-6,y:0,z:0},end:{x:-2,y:4,z:0}},{start:{x:2,y:9,z:0},end:{x:-7,y:5,z:-4}},{start:{x:0,y:0,z:0},end:{x:-2,y:-1,z:-3}}),i.current.tl5=a({trigger:"#trigger6",endTrigger:"#trigger7"},{start:{x:-2,y:4,z:0},end:{x:-2,y:4,z:0}},{start:{x:-7,y:5,z:-4},end:{x:-5,y:5,z:6}},{start:{x:-2,y:-1,z:-3},end:{x:2,y:0,z:5}}),i.current.tl6=a({trigger:"#trigger7",endTrigger:"#trigger8"},{start:{x:-2,y:4,z:0},end:{x:0,y:-4,z:0}},{start:{x:-5,y:5,z:6},end:{x:9,y:3,z:-8}},{start:{x:2,y:0,z:5},end:{x:-2,y:0,z:3}}),i.current.tl7=a({trigger:"#trigger8",endTrigger:"#trigger9"},{start:{x:0,y:-4,z:0},end:{x:0,y:-3,z:0}},{start:{x:9,y:3,z:-8},end:{x:6,y:3,z:9}},{start:{x:-2,y:0,z:3},end:{x:-2,y:1,z:2}})},[e,s]),I.useEffect(()=>{if(!r.current)return;const u=new qu({roughness:0,metalness:0}),d=new qu({roughness:0,metalness:0});r.current.target.set(-2,0,0),r.current.object.position.set(-9.75,1,14),r.current.update(),t.current&&(u.copy(e.Cylinder010.material),d.copy(e.Cube001.material),t.current.children[2].material=u,t.current.children[7].material=d),o(u,s.led1),o(d,s.led3)}),_n.jsxs(_n.Fragment,{children:[_n.jsx(UK,{ref:r,enableZoom:!1,enableRotate:!1,enableDamping:!1}),_n.jsx(NK,{src:"https://uploads-ssl.webflow.com/65705d0a7b517c17741ec3f1/65837cf896d18909133f7d41_scooter-final.glb.txt",receiveShadow:!0,castShadow:!0,ref:t,scale:5})]})}Fh.preload("https://uploads-ssl.webflow.com/65705d0a7b517c17741ec3f1/65837cf896d18909133f7d41_scooter-final.glb.txt");/**
 * postprocessing v6.33.4 build Sat Dec 02 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var r4="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",tn={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},i4="",Kr="srgb",i1="srgb-linear",al={NONE:0,DEPTH:1,CONVOLUTION:2},xn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},kC={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},s4=Number(Ca.replace(/\D+/g,"")),o4=s4>=152,moe=new Map([[bg,i1],[ga,Kr]]),goe=new Map([[i1,bg],[Kr,ga]]);function Ah(n){return n===null?null:o4?n.outputColorSpace:moe.get(n.outputEncoding)}function vc(n,e){n!==null&&(o4?n.colorSpace=e:n.encoding=goe.get(e))}function Xg(n){return s4<154?n.replace("colorspace_fragment","encodings_fragment"):n}var voe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,yoe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",_oe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],xoe=class extends _r{constructor(n=new An){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new pn(null),texelSize:new pn(new An),scale:new pn(1),kernel:new pn(0)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:voe,vertexShader:yoe}),this.fragmentShader=Xg(this.fragmentShader),this.setTexelSize(n.x,n.y),this.kernelSize=kC.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return _oe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},Soe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,a4=class extends _r{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new pn(null),opacity:new pn(1)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Soe,vertexShader:r4}),this.fragmentShader=Xg(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Eoe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Aoe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",woe=class extends _r{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new pn(null),normalBuffer:new pn(null),texelSize:new pn(new Se)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Eoe,vertexShader:Aoe})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oc){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Moe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,boe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Toe=class extends _r{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new pn(null),texelSize:new pn(new Se)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Moe,vertexShader:boe}),this.fragmentShader=Xg(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Coe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Roe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Poe=class extends _r{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ca.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new pn(null),depthBuffer:new pn(null),resolution:new pn(new Se),texelSize:new pn(new Se),cameraNear:new pn(.3),cameraFar:new pn(1e3),aspect:new pn(1),time:new pn(0)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oc){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Coe.replace(xn.FRAGMENT_HEAD,n.get(xn.FRAGMENT_HEAD)||"").replace(xn.FRAGMENT_MAIN_UV,n.get(xn.FRAGMENT_MAIN_UV)||"").replace(xn.FRAGMENT_MAIN_IMAGE,n.get(xn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Roe.replace(xn.VERTEX_HEAD,n.get(xn.VERTEX_HEAD)||"").replace(xn.VERTEX_MAIN_SUPPORT,n.get(xn.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Xg(this.fragmentShader),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Yn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return xn}},Boe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Ioe=class extends _r{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ca.replace(/\D+/g,"")},uniforms:{inputBuffer:new pn(null),threshold:new pn(0),smoothing:new pn(1),range:new pn(null)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Boe,vertexShader:r4}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Doe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Loe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Ooe=class extends _r{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new pn(null),supportBuffer:new pn(null),texelSize:new pn(new Se),radius:new pn(.85)},blending:bi,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Doe,vertexShader:Loe}),this.fragmentShader=Xg(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Foe=new Ch,Hl=null;function Noe(){if(Hl===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Hl=new zt,Hl.setAttribute!==void 0?(Hl.setAttribute("position",new en(n,3)),Hl.setAttribute("uv",new en(e,2))):(Hl.addAttribute("position",new en(n,3)),Hl.addAttribute("uv",new en(e,2)))}return Hl}var Xs=class l4{constructor(e="Pass",t=new Zu,r=Foe){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Jn(Noe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Zu),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Oc){}render(e,t,r,i,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Wn||t instanceof yr||t instanceof In||t instanceof l4)&&this[e].dispose()}}},Uoe=class extends Xs{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new a4,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Wn(1,1,{minFilter:En,magFilter:En,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==li?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":Ah(n)===Kr&&vc(this.renderTarget.texture,Kr))}},koe=class extends Xs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},PL=new tt,c4=class extends Xs{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,c=o>=0;l?(n.getClearColor(PL),n.setClearColor(s,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(PL,a):c&&n.setClearAlpha(a)}},u4=class extends Xs{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new c4,this.overrideMaterialManager=t===null?null:new IL(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new IL(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,u=n.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=c,n.shadowMap.autoUpdate=u}},zoe=class extends Xs{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Mi.AUTO_SIZE,height:r=Mi.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new woe;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Wn(1,1,{minFilter:Cn,magFilter:Cn,depthBuffer:!1,type:Zr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new Mi(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Oc){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function BL(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function Hoe(n,e,t){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(t.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&al.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(xn.FRAGMENT_HEAD)||"",u=l.get(xn.FRAGMENT_MAIN_UV)||"",d=l.get(xn.FRAGMENT_MAIN_IMAGE)||"",p=l.get(xn.VERTEX_HEAD)||"",m=l.get(xn.VERTEX_MAIN_SUPPORT)||"";const v=new Set,y=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);m+=`	${n}MainSupport(`,m+=x?`vUv);
`:`);
`;for(const S of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of S[1].split(/\s*,\s*/))t.varyings.add(A),v.add(A),y.add(A);for(const S of i.matchAll(a))y.add(S[1])}for(const x of r.matchAll(a))y.add(x[1]);for(const x of e.defines.keys())y.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of e.uniforms.keys())y.add(x);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((x,S)=>t.uniforms.set(n+S.charAt(0).toUpperCase()+S.slice(1),x)),e.defines.forEach((x,S)=>t.defines.set(n+S.charAt(0).toUpperCase()+S.slice(1),x));const _=new Map([["fragment",r],["vertex",i]]);BL(n,y,t.defines),BL(n,y,_),r=_.get("fragment"),i=_.get("vertex");const g=e.blendMode;if(t.blendModes.set(g.blendFunction,g),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===Kr?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==i4?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${n}MainImage(color0, UV, `,t.attributes&al.DEPTH&&x.test(r)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const S=n+"BlendOpacity";t.uniforms.set(S,g.opacity),d+=`color0 = blend${g.blendFunction}(color0, color1, ${S});

	`,c+=`uniform float ${S};

`}if(c+=r+`
`,i!==null&&(p+=i+`
`),l.set(xn.FRAGMENT_HEAD,c),l.set(xn.FRAGMENT_MAIN_UV,u),l.set(xn.FRAGMENT_MAIN_IMAGE,d),l.set(xn.VERTEX_HEAD,p),l.set(xn.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const x of e.extensions)t.extensions.add(x)}}var Goe=class extends Xs{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Poe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Zoe;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===tn.DST)n.attributes|=o.getAttributes()&al.DEPTH;else{if(n.attributes&o.getAttributes()&al.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Hoe("e"+e++,o,n)}let t=n.shaderParts.get(xn.FRAGMENT_HEAD),r=n.shaderParts.get(xn.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get(xn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&al.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Kr&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(xn.FRAGMENT_HEAD,t),n.shaderParts.set(xn.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(xn.FRAGMENT_MAIN_UV,i);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Oc){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==li&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Voe=class extends Xs{constructor({kernelSize:n=kC.MEDIUM,resolutionScale:e=.5,width:t=Mi.AUTO_SIZE,height:r=Mi.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Wn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Mi(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new xoe,this._blurMaterial.kernelSize=n,this.copyMaterial=new a4}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let d=e;this.fullscreenMaterial=c;for(let p=0,m=u.length;p<m;++p){const v=p&1?l:a;c.kernel=u[p],c.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==li?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):Ah(n)===Kr&&(vc(this.renderTargetA.texture,Kr),vc(this.renderTargetB.texture,Kr)))}static get AUTO_SIZE(){return Mi.AUTO_SIZE}},Woe=class extends Xs{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=Mi.AUTO_SIZE,height:s=Mi.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Ioe(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Wn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Mi(this,o,a,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==li&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},$oe=class extends Xs{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new c4(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Xoe=class extends Xs{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Wn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Toe,this.upsamplingMaterial=new Ooe,this.resolution=new Se}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let d=e;this.fullscreenMaterial=a;for(let p=0,m=c.length;p<m;++p){const v=c[p];a.setSize(d.width,d.height),a.inputBuffer=d.texture,n.setRenderTarget(v),n.render(s,o),d=v}this.fullscreenMaterial=l;for(let p=u.length-1;p>=0;--p){const m=u[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[p].texture,n.setRenderTarget(m),n.render(s,o),d=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==li)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(Ah(n)===Kr)for(const i of r)vc(i.texture,Kr)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},joe=class extends Xs{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=Mi.AUTO_SIZE,height:s=Mi.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new u4(n,e,new ET);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new tt(7829503),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Wn(1,1,{minFilter:Cn,magFilter:Cn}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new Mi(this,o,a,r);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},oA=1/1e3,Yoe=1e3,Joe=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*oA}get fixedDelta(){return this._fixedDelta*oA}set fixedDelta(n){this._fixedDelta=n*Yoe}get elapsed(){return this._elapsed*oA}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Koe=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Uoe,this.depthTexture=null,this.passes=[],this.timer=new Joe,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new Se),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===li&&Ah(e)===Kr&&(vc(this.inputBuffer.texture,Kr),vc(this.outputBuffer.texture,Kr),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,t=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new wx;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ec,e.type=il):e.type=ca,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){const s=this.renderer,o=s===null?new Se:s.getDrawingBufferSize(new Se),a={minFilter:En,magFilter:En,stencilBuffer:t,depthBuffer:e,type:r},l=new Wn(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===li&&Ah(s)===Kr&&vc(l.texture,Kr),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Se),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,c)=>l||c.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,c;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const u of this.passes)u.enabled&&(u.render(t,i,s,e,o),u.needsSwap&&(o&&(r.renderToScreen=u.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),c=i,i=s,s=c),u instanceof $oe?o=!0:u instanceof koe&&(o=!1))}setSize(e,t,r){const i=this.renderer,s=i.getSize(new Se);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&i.setSize(e,t,r);const o=i.getDrawingBufferSize(new Se);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Zoe=class{constructor(){this.shaderParts=new Map([[xn.FRAGMENT_HEAD,null],[xn.FRAGMENT_MAIN_UV,null],[xn.FRAGMENT_MAIN_IMAGE,null],[xn.VERTEX_HEAD,null],[xn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=al.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=i1}},aA=!1,IL=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Si:t=this.materialsFlatShadedDoubleSide;break;case Nr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Si:t=this.materialsDoubleSide;break;case Nr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof _r))return n.clone();const e=n.uniforms,t=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,t.set(i,s))}const r=n.clone();for(const i of t)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Vo;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Nr,r}),this.materialsDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.side=Si,r}),this.materialsFlatShaded=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Nr,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=this.cloneMaterial(t);return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Si,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,aA){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return aA}static set workaroundEnabled(n){aA=n}},Gl=-1,Mi=class extends $s{constructor(n,e=Gl,t=Gl,r=1){super(),this.resizable=n,this.baseSize=new Se(1,1),this.preferredSize=new Se(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Se,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==Gl?t.width=e.width:e.height!==Gl?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==Gl?t.height=e.height:e.width!==Gl?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Gl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Gl}},Qoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",qoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",eae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",tae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",nae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",rae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",iae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",sae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",oae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",aae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",lae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",cae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",uae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",fae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",dae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",hae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",pae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",mae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",gae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",yae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",_ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Sae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Eae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Aae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Mae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Tae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Cae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Rae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Pae=new Map([[tn.ADD,Qoe],[tn.ALPHA,qoe],[tn.AVERAGE,eae],[tn.COLOR,tae],[tn.COLOR_BURN,nae],[tn.COLOR_DODGE,rae],[tn.DARKEN,iae],[tn.DIFFERENCE,sae],[tn.DIVIDE,oae],[tn.DST,null],[tn.EXCLUSION,aae],[tn.HARD_LIGHT,lae],[tn.HARD_MIX,cae],[tn.HUE,uae],[tn.INVERT,fae],[tn.INVERT_RGB,dae],[tn.LIGHTEN,hae],[tn.LINEAR_BURN,pae],[tn.LINEAR_DODGE,mae],[tn.LINEAR_LIGHT,gae],[tn.LUMINOSITY,vae],[tn.MULTIPLY,yae],[tn.NEGATION,_ae],[tn.NORMAL,xae],[tn.OVERLAY,Sae],[tn.PIN_LIGHT,Eae],[tn.REFLECT,Aae],[tn.SATURATION,wae],[tn.SCREEN,Mae],[tn.SOFT_LIGHT,bae],[tn.SRC,Tae],[tn.SUBTRACT,Cae],[tn.VIVID_LIGHT,Rae]]),Bae=class extends $s{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new pn(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Pae.get(this.blendFunction)}},YM=class extends $s{constructor(n,e,{attributes:t=al.NONE,blendFunction:r=tn.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new Bae(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=i1,this._outputColorSpace=i4}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Oc){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Wn||e instanceof yr||e instanceof In||e instanceof Xs)&&this[n].dispose()}}},Iae=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Dae=class extends YM{constructor({blendFunction:n=tn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=kC.LARGE,resolutionScale:l=.5,width:c=Mi.AUTO_SIZE,height:u=Mi.AUTO_SIZE,resolutionX:d=c,resolutionY:p=u}={}){super("BloomEffect",Iae,{blendFunction:n,uniforms:new Map([["map",new pn(null)],["intensity",new pn(i)]])}),this.renderTarget=new Wn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Voe({kernelSize:a}),this.luminancePass=new Woe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Xoe,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new Mi(this,d,p,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,Ah(n)===Kr&&vc(this.renderTarget.texture,Kr))}};const Lae=I.createContext(null),DL=n=>(n.getAttributes()&al.CONVOLUTION)===al.CONVOLUTION,Oae=ie.memo(I.forwardRef(({children:n,camera:e,scene:t,resolutionScale:r,enabled:i=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:l,stencilBuffer:c,multisampling:u=8,frameBufferType:d=si},p)=>{const{gl:m,scene:v,camera:y,size:_}=hr(),g=t||v,x=e||y,[S,A,b]=I.useMemo(()=>{const T=KY(),P=new Koe(m,{depthBuffer:a,stencilBuffer:c,multisampling:u>0&&T?u:0,frameBufferType:d});P.addPass(new u4(g,x));let N=null,z=null;return l||(z=new joe(g,x),z.enabled=!1,P.addPass(z),r!==void 0&&T&&(N=new zoe({normalBuffer:z.texture,resolutionScale:r}),N.enabled=!1,P.addPass(N))),[P,z,N]},[x,m,a,c,u,d,g,l,r]);I.useEffect(()=>S==null?void 0:S.setSize(_.width,_.height),[S,_]),Lh((T,P)=>{if(i){const N=m.autoClear;m.autoClear=o,c&&!o&&m.clearStencil(),S.render(P),m.autoClear=N}},i?s:0);const M=I.useRef(null),C=Bj(M);I.useLayoutEffect(()=>{const T=[];if(M.current&&C.current&&S){const P=C.current.objects;for(let N=0;N<P.length;N++){const z=P[N];if(z instanceof YM){const q=[z];if(!DL(z)){let Y=null;for(;(Y=P[N+1])instanceof YM&&!DL(Y);)q.push(Y),N++}const G=new Goe(x,...q);T.push(G)}else z instanceof Xs&&T.push(z)}for(const N of T)S==null||S.addPass(N);A&&(A.enabled=!0),b&&(b.enabled=!0)}return()=>{for(const P of T)S==null||S.removePass(P);A&&(A.enabled=!1),b&&(b.enabled=!1)}},[S,n,x,A,b,C]);const B=I.useMemo(()=>({composer:S,normalPass:A,downSamplingPass:b,resolutionScale:r,camera:x,scene:g}),[S,A,b,r,x,g]);return I.useImperativeHandle(p,()=>S,[S]),_n.jsx(Lae.Provider,{value:B,children:_n.jsx("group",{ref:M,children:n})})}));let Fae=0;const LL=new WeakMap,Nae=(n,e)=>ie.forwardRef(function({blendFunction:r=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...s},o){let a=LL.get(n);if(!a){const u=`@react-three/postprocessing/${n.name}-${Fae++}`;Xx({[u]:n}),LL.set(n,a=u)}const l=hr(u=>u.camera),c=ie.useMemo(()=>{var u,d;return[...(u=e==null?void 0:e.args)!=null?u:[],...(d=s.args)!=null?d:[{...e,...s}]]},[JSON.stringify(s)]);return _n.jsx(a,{camera:l,"blendMode-blendFunction":r,"blendMode-opacity-value":i,...s,ref:o,args:c})}),Uae=Nae(Dae,{blendFunction:tn.ADD});function kae(){return _n.jsx(_n.Fragment,{children:_n.jsxs("div",{className:"canvas-container",children:[_n.jsx("div",{id:"trigger1"}),_n.jsx("div",{id:"trigger2-1"}),_n.jsx("div",{id:"trigger2-2"}),_n.jsx("div",{id:"trigger2-3"}),_n.jsx("div",{id:"trigger2-4"}),_n.jsx("div",{id:"trigger2-5"}),_n.jsx("div",{id:"trigger3"}),_n.jsx("div",{id:"trigger4"}),_n.jsx("div",{id:"trigger5"}),_n.jsx("div",{id:"trigger6"}),_n.jsx("div",{id:"trigger7"}),_n.jsx("div",{id:"trigger8"}),_n.jsx("div",{id:"trigger9"}),_n.jsxs(tY,{resize:!0,shadows:!0,camera:{fov:45},children:[_n.jsx(GK,{}),_n.jsxs(I.Suspense,{children:[_n.jsx(cZ,{preset:"soft",environment:"city",shadows:{type:"accumulative",color:"#131313",colorBlend:1,opacity:1},adjustCamera:!1,children:_n.jsx(jU,{top:!0,children:_n.jsx(poe,{})})}),_n.jsx(Oae,{multisampling:0,children:_n.jsx(Uae,{intensity:.1,radius:.3,mipmapBlur:!0,luminanceThreshold:.001})})]})]})]})})}lA.createRoot(document.getElementById("root")).render(_n.jsx(kae,{}));
